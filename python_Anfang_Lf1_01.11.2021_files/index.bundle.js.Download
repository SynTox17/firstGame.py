function e(){}function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e,t){for(var n in t)e[n]=1;return e}function r(e,t){e.appendChild(t)}function o(e,t,n){e.insertBefore(t,n)}function i(e){e.parentNode.removeChild(e)}function s(e,t){for(;e.nextSibling&&e.nextSibling!==t;)e.parentNode.removeChild(e.nextSibling)}function a(e,t){for(;e.firstChild;)t.appendChild(e.firstChild)}function l(e,t){for(;e.nextSibling;)t.appendChild(e.nextSibling)}function d(e,t){for(var n=e.parentNode;n.firstChild!==e;)t.appendChild(n.firstChild)}function c(e,t){for(var n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function u(){return document.createDocumentFragment()}function p(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function f(){return document.createComment("")}function m(e,t,n,r){e.addEventListener(t,n,r)}function v(e,t,n,r){e.removeEventListener(t,n,r)}function g(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function _(e,t){e.data=""+t}function y(e,t,n){e.classList[n?"add":"remove"](t)}function b(){return Object.create(null)}function w(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function x(e,t){return e!=e?t==t:e!==t}function C(e,t){var n=e in this._handlers&&this._handlers[e].slice();if(n)for(var r=0;r<n.length;r+=1){var o=n[r];if(!o.__calling)try{o.__calling=!0,o.call(this,t)}finally{o.__calling=!1}}}function S(e){e._lock=!0,E(e._beforecreate),E(e._oncreate),E(e._aftercreate),e._lock=!1}function k(){return this._state}function O(e,t){e._handlers=b(),e._slots=b(),e._bind=t._bind,e._staged={},e.options=t,e.root=t.root||e,e.store=t.store||e.root.store,t.root||(e._beforecreate=[],e._oncreate=[],e._aftercreate=[])}function I(e,t){var n=this._handlers[e]||(this._handlers[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}}function E(e){for(;e&&e.length;)e.shift()()}function T(){this.store._remove(this)}var F={destroy:function(t){this.destroy=e,this.fire("destroy"),this.set=e,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:k,fire:C,on:I,set:function(e){this._set(t({},e)),this.root._lock||S(this.root)},_recompute:e,_set:function(e){var n=this._state,r={},o=!1;for(var i in e=t(this._staged,e),this._staged={},e)this._differs(e[i],n[i])&&(r[i]=o=!0);o&&(this._state=t(t({},n),e),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(this.fire("state",{changed:r,current:this._state,previous:n}),this._fragment.p(r,this._state),this.fire("update",{changed:r,current:this._state,previous:n})))},_stage:function(e){t(this._staged,e)},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_differs:w};function L(e,n){this._handlers={},this._dependents=[],this._computed=b(),this._sortedComputedProperties=[],this._state=t({},e),this._differs=n&&n.immutable?x:w}t(L.prototype,{_add(e,t){this._dependents.push({component:e,props:t})},_init(e){for(var t={},n=0;n<e.length;n+=1){var r=e[n];t["$"+r]=this._state[r]}return t},_remove(e){for(var t=this._dependents.length;t--;)if(this._dependents[t].component===e)return void this._dependents.splice(t,1)},_set(e,n){var r=this._state;this._state=t(t({},r),e);for(var o=0;o<this._sortedComputedProperties.length;o+=1)this._sortedComputedProperties[o].update(this._state,n);this.fire("state",{changed:n,previous:r,current:this._state}),this._dependents.filter(e=>{for(var t={},r=!1,o=0;o<e.props.length;o+=1){var i=e.props[o];i in n&&(t["$"+i]=this._state[i],r=!0)}if(r)return e.component._stage(t),!0}).forEach(e=>{e.component.set({})}),this.fire("update",{changed:n,previous:r,current:this._state})},_sortComputedProperties(){var e,t=this._computed,n=this._sortedComputedProperties=[],r=b();function o(i){var s=t[i];s&&(s.deps.forEach(t=>{if(t===e)throw new Error("Cyclical dependency detected between ".concat(t," <-> ").concat(i));o(t)}),r[i]||(r[i]=!0,n.push(s)))}for(var i in this._computed)o(e=i)},compute(e,n,r){var o,i={deps:n,update:(t,i,s)=>{var a=n.map(e=>(e in i&&(s=!0),t[e]));if(s){var l=r.apply(null,a);this._differs(l,o)&&(o=l,i[e]=!0,t[e]=o)}}};this._computed[e]=i,this._sortComputedProperties();var s=t({},this._state),a={};i.update(s,a,!0),this._set(s,a)},fire:C,get:k,on:I,set(e){var t=this._state,n=this._changed={},r=!1;for(var o in e){if(this._computed[o])throw new Error("'".concat(o,"' is a read-only computed property"));this._differs(e[o],t[o])&&(n[o]=r=!0)}r&&this._set(e,n)}});var N=window["contentarea-actionlist-configuration"],P=new L(Object.assign({i18n:{},kpiUrl:void 0,kpis:{},menuOptionItems:[],showAllUrl:null,resourcesUrl:null,singleResourceUrl:null,showOffice365InsteadOfOneDrive:!1,enableUploadFromOneDrive:!1,enableLinkingFromOneDrive:!1,cloudServiceSettings:{},recentCloudFiles:{},cloudFileIcons:{},courseId:null,folderId:null,filesStatus:[],filesForUpload:[],filesForUploadFromExternalSource:[],apiError:null,fileValidationSettings:{},fileRepoSettings:{},antiForgeryHeaderSettings:{},staticContentPath:""},N)),A=window.navigator.userAgent;function $(e,t){var{cloudFileIcons:n}=P.get(),r=n[e];return r||(r=t),r}class H extends Error{constructor(e,t){super(e),this.response=t}}var U=Object.freeze({ok:200,created:201,accepted:202,nonAuthoritativeInformation:203,noContent:204,resetContent:205,partialContent:206,multipleChoices:300,movedPermanently:301,found:302,seeOther:303,notModified:304,useProxy:305,temporaryRedirect:307,badRequest:400,unauthorized:401,paymentRequired:402,forbidden:403,notFound:404,methodNotAllowed:405,notAcceptable:406,proxyAuthenticationRequired:407,requestTimeout:408,conflict:409,gone:410,internalServerError:500,notImplemented:501,badGateway:502,serviceUnavailable:503,gatewayTimeout:504,httpVersionNotSupported:505});function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((r,o)=>{fetch(e,B("POST",JSON.stringify(t),n)).then(M).then(r).catch(o)})}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((n,r)=>{fetch(e,B("GET",void 0,t)).then(M).then(n).catch(r)})}function M(e){if(!e.ok)throw new H(e.statusText,e);return e.status===U.noContent?new Promise(e=>e(void 0)):e.clone().json().catch(()=>e.text())}function B(e,t,n){return{method:e,mode:void 0!==n.mode?n.mode:"cors",cache:void 0!==n.cache?n.cache:"default",credentials:void 0!==n.credentials?n.credentials:"same-origin",headers:Object.assign({"Content-Type":"application/json; charset=utf-8"},n.headers),body:t}}var j=R;function q(e){var{recentCloudFiles:t}=P.get(),n=[];(function(e){var{cloudServiceSettings:t,antiForgeryHeaderSettings:n}=P.get(),r={[n.headerName]:n.headerValue},o=t[e].recentCloudElementsSettings,i=z.getRecentCloudElements.replace("{cloudService}",e).replace("{filesCount}",o.filesCount).replace("{includeSharedFiles}",o.includeSharedFiles).replace("{includeFolders}",o.includeFolders);return j(i,{headers:r}).then(e=>e)})(e).then(r=>{r.forEach(e=>{n.push(e)}),t[e]=n,P.set({recentCloudFiles:t})})}var z={addCloudFilesToCourseFolder:"/restapi/personal/courses/{courseId}/folders/{folderId}/file/cloud/v1",addFileRepoFilesToCourseFolder:"/restapi/personal/courses/{courseId}/folders/{folderId}/file/filerepo/v1",getRecentCloudElements:"/restapi/personal/cloudproxy/recentfiles/{cloudService}/{filesCount}/{includeFolders}/{includeSharedFiles}"},V="content-area-quick-add-menu",G={quickAddButton:"#".concat(V," > .prom-button-dropdown > button.prom-button")},W="contentarea-action-list__itslearning-element",K="quick-add__show-all",J="icons/assignment.svg",Q="icons/xp/googledrive.svg",X="icons/xp/google_file.svg",Y="icons/microsoft-onedrive-2019.svg",Z="icons/office365.svg",ee="icons/computer.svg",te="icons/device.svg",ne="icons/test.svg",re={AssignmentApp:J,Assignment:J,CustomActivity:"icons/task.svg",TestApp:ne,Test:ne};function oe(e,t){var n,s,a,l,d;function c(t){e.fire("click",t)}function u(t){e.fire("focus",t)}function f(t){e.fire("blur",t)}return{c(){n=p("button"),s=p("span"),a=p("span"),l=h(t.text),a.className=t.visuallyHidden,s.className="prom-button__text",m(n,"click",c),m(n,"focus",u),m(n,"blur",f),n.type=t.htmlType,n.className=d="prom-button prom-button__"+t.type+" "+t.isLarge+" "+t.isLoading+" "+t.class,n.disabled=t.disabled,n.dataset.active=t.isActive},m(t,i){o(t,n,i),r(n,s),r(s,a),r(a,l),e.refs.button=n},p(e,t){e.text&&_(l,t.text),e.visuallyHidden&&(a.className=t.visuallyHidden),e.htmlType&&(n.type=t.htmlType),(e.type||e.isLarge||e.isLoading||e.class)&&d!==(d="prom-button prom-button__"+t.type+" "+t.isLarge+" "+t.isLoading+" "+t.class)&&(n.className=d),e.disabled&&(n.disabled=t.disabled),e.isActive&&(n.dataset.active=t.isActive)},d(t){t&&i(n),v(n,"click",c),v(n,"focus",u),v(n,"blur",f),e.refs.button===n&&(e.refs.button=null)}}}function ie(e,t){var n,s,a,l,d;function c(t){e.fire("click",t)}function u(t){e.fire("focus",t)}function f(t){e.fire("blur",t)}return{c(){n=p("button"),s=p("span"),a=p("span"),l=h(t.text),a.className=t.visuallyHidden,s.className="prom-button__text",m(n,"click",c),m(n,"focus",u),m(n,"blur",f),g(n,"aria-haspopup",t.haspopup),n.id=t.id,n.type=t.htmlType,n.className=d="prom-button prom-button__"+t.type+" "+t.isLarge+" "+t.isLoading+" "+t.class,n.disabled=t.disabled,n.dataset.active=t.isActive},m(t,i){o(t,n,i),r(n,s),r(s,a),r(a,l),e.refs.button=n},p(e,t){e.text&&_(l,t.text),e.visuallyHidden&&(a.className=t.visuallyHidden),e.haspopup&&g(n,"aria-haspopup",t.haspopup),e.id&&(n.id=t.id),e.htmlType&&(n.type=t.htmlType),(e.type||e.isLarge||e.isLoading||e.class)&&d!==(d="prom-button prom-button__"+t.type+" "+t.isLarge+" "+t.isLoading+" "+t.class)&&(n.className=d),e.disabled&&(n.disabled=t.disabled),e.isActive&&(n.dataset.active=t.isActive)},d(t){t&&i(n),v(n,"click",c),v(n,"focus",u),v(n,"blur",f),e.refs.button===n&&(e.refs.button=null)}}}function se(e){O(this,e),this.refs={},this._state=t({type:"basic",iconOnly:!1,id:"",class:"",text:"",large:!1,disabled:!1,loading:!1,htmlType:"submit",haspopup:!1},e.data),this._recompute({iconOnly:1,large:1,loading:1,disabled:1},this._state),this._intro=!0,this._fragment=function(e,t){var n;function r(e){return e.id?ie:oe}var s=r(t),a=s(e,t);return{c(){a.c(),n=f()},m(e,t){a.m(e,t),o(e,n,t)},p(t,o){s===(s=r(o))&&a?a.p(t,o):(a.d(1),(a=s(e,o)).c(),a.m(n.parentNode,n))},d(e){a.d(e),e&&i(n)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function ae(e){var n,r,o,i;O(this,e),this.refs={},this._state=t({disabled:!1,haspopup:!1,htmlType:"submit",iconClass:"",iconOnly:!1,id:"",large:!1,loading:!1,text:"",textOnly:!1,type:"basic"},e.data),this._recompute({iconOnly:1,textOnly:1},this._state),this._intro=!0,this._fragment=(n=this,r=this._state,o={class:"prom-icon-button "+r.iconOnlyClass+" "+r.textOnlyClass+"  "+r.iconClass,disabled:r.disabled,haspopup:r.haspopup,iconOnly:r.iconOnly,id:r.id,large:r.large,loading:r.loading,text:r.text,type:r.type,htmlType:r.htmlType},(i=new se({root:n.root,store:n.store,slots:{default:u()},data:o})).on("blur",(function(e){n.fire("blur",e)})),i.on("click",(function(e){n.fire("click",e)})),i.on("focus",(function(e){n.fire("focus",e)})),n.refs.button=i,{c(){i._fragment.c()},m(e,t){i._mount(e,t)},p(e,t){var n={};(e.iconOnlyClass||e.textOnlyClass||e.iconClass)&&(n.class="prom-icon-button "+t.iconOnlyClass+" "+t.textOnlyClass+"  "+t.iconClass),e.disabled&&(n.disabled=t.disabled),e.haspopup&&(n.haspopup=t.haspopup),e.iconOnly&&(n.iconOnly=t.iconOnly),e.id&&(n.id=t.id),e.large&&(n.large=t.large),e.loading&&(n.loading=t.loading),e.text&&(n.text=t.text),e.type&&(n.type=t.type),e.htmlType&&(n.htmlType=t.htmlType),i._set(n)},d(e){i.destroy(e),n.refs.button===i&&(n.refs.button=null)}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),S(this))}t(se.prototype,F),se.prototype._recompute=function(e,t){e.iconOnly&&this._differs(t.visuallyHidden,t.visuallyHidden=function(e){var{iconOnly:t}=e;return t?"prom-button__text--hidden":""}(t))&&(e.visuallyHidden=!0),e.large&&this._differs(t.isLarge,t.isLarge=function(e){var{large:t}=e;return t?"prom-button--large":""}(t))&&(e.isLarge=!0),e.loading&&this._differs(t.isLoading,t.isLoading=function(e){var{loading:t}=e;return t?"prom-button--loading":""}(t))&&(e.isLoading=!0),(e.loading||e.disabled)&&this._differs(t.isActive,t.isActive=function(e){var{loading:t,disabled:n}=e;return!t&&!n}(t))&&(e.isActive=!0)},t(ae.prototype,F),ae.prototype._recompute=function(e,t){e.iconOnly&&this._differs(t.iconOnlyClass,t.iconOnlyClass=function(e){var{iconOnly:t}=e;return t?"prom-icon-button--icon-only":""}(t))&&(e.iconOnlyClass=!0),e.textOnly&&this._differs(t.textOnlyClass,t.textOnlyClass=function(e){var{textOnly:t}=e;return t?"prom-icon-button--text-only":""}(t))&&(e.textOnlyClass=!0)};var le="Down",de="Enter",ce="Escape",ue="Left",pe="Right",he="Space",fe="Tab",me="Up",ve=e=>{switch(e){case"Down":case"ArrowDown":return le;case"Enter":return de;case"Esc":case"Escape":return ce;case"Left":case"ArrowLeft":return ue;case"Right":case"ArrowRight":return pe;case"Spacebar":case" ":return he;case"Tab":return fe;case"Up":case"ArrowUp":return me;default:return e}},ge=['[aria-hidden="true"]',"[disabled]","[hidden]",'[type="hidden"]','[tabindex="-1"]'].map(e=>":not(".concat(e,")")).join(""),_e=["button",'[role="button"]',"a[href]","input","[contentEditable=true]","select","textarea","iframe",'[tabindex="0"]'].map(e=>"".concat(e).concat(ge)).join(",");class ye{constructor(e){this.tabbables=[],this.element=e,this.innerDocBody=null,this.element.addEventListener("keydown",this.maybeLoopFocus.bind(this))}teardown(){this.element.removeEventListener("keydown",this.maybeLoopFocus),this.innerDocBody&&this.innerDocBody.removeEventListener("keydown",this.maybeLoopFocus.bind(this))}init(){var e=be(this.element.querySelectorAll(_e));this.firstTabbable=e[0],this.lastTabbable=e[e.length-1]}maybeLoopFocus(e){"Tab"===e.key&&(e.shiftKey||e.target!==this.lastTabbable||(e.preventDefault(),this.firstTabbable.focus()),e.shiftKey&&e.target===this.firstTabbable&&(e.preventDefault(),this.lastTabbable.focus()))}updateLastTabbableIfIframeIsTheLastElement(e){this.innerDocBody=e;var t=be(e.querySelectorAll(_e));0===t.length?this.lastTabbable=e:this.lastTabbable=t[t.length-1],e.addEventListener("keydown",this.maybeLoopFocus.bind(this))}}function be(e){return[].filter.call(e,e=>"hidden"!==e.style.visibility&&"none"!==e.style.display)}function we(e){e.querySelector("li > .prom-dropdown__listitem").focus()}function xe(e){e.children[e.children.length-1].querySelector(".prom-dropdown__listitem").focus()}function Ce(){var e=document.querySelector(".prom-dropdown__listitems-menu.open");e&&(e.focus(),Se())}function Se(){var e=document.querySelector(".prom-dropdown__listitems-menu.open");e&&e.classList.remove("open")}function ke(e){e.setAttribute("hidden","hidden")}function Oe(e){return e&&e.hasAttribute("hidden")}function Ie(){for(var e=Array.prototype.slice.call(document.querySelectorAll(".prom-dropdown__submenu")),t=0;t<e.length;t++)ke(e[t]);for(var n=document.querySelectorAll(".prom-dropdown__listitems-menu"),r=0;r<n.length;r++)n[r].setAttribute("aria-expanded","false")}function Ee(e){return e.classList.contains("prom-dropdown__listitems-menu")}function Te(e,t){var n,r,s,a;return{c(){(n=p("img")).alt="",n.className="prom-dropdown__listitems-icon",n.src=r=t.option.icon,n.height=s=t.option.iconsize,n.width=a=t.option.iconsize},m(e,t){o(e,n,t)},p(e,t){e.option&&r!==(r=t.option.icon)&&(n.src=r),e.option&&s!==(s=t.option.iconsize)&&(n.height=s),e.option&&a!==(a=t.option.iconsize)&&(n.width=a)},d(e){e&&i(n)}}}function Fe(e,t){var n;return{c(){n=h("…")},m(e,t){o(e,n,t)},d(e){e&&i(n)}}}function Le(e){O(this,e),this._state=t({option:null},e.data),this._intro=!0,this._fragment=function(e,t){var n,s,a,l,d,c,u,f=t.option.label,y=t.option.icon&&Te(e,t),b=t.option.ellipsis&&Fe();function w(t){e.fire("dropdownClose",t)}function x(n){e.fire("mouseenter",{event:n,data:t.option})}function C(n){e.fire("mouseleave",{event:n,data:t.option})}return{c(){n=p("a"),y&&y.c(),s=h("\n\n    "),a=p("span"),l=h(f),d=h("\n    "),b&&b.c(),a.className="prom-dropdown__listitems-text",m(n,"click",w),m(n,"mouseenter",x),m(n,"mouseleave",C),n.className="prom-dropdown__listitem prom-dropdown__listitem-link",n.href=c=t.option.url,n.tabIndex="-1",n.target=u=t.option.target?t.option.target:"mainmenu",g(n,"role","menuitem")},m(e,t){o(e,n,t),y&&y.m(n,null),r(n,s),r(n,a),r(a,l),r(a,d),b&&b.m(a,null)},p(r,o){(t=o).option.icon?y?y.p(r,t):((y=Te(e,t)).c(),y.m(n,s)):y&&(y.d(1),y=null),r.option&&f!==(f=t.option.label)&&_(l,f),t.option.ellipsis?b||((b=Fe()).c(),b.m(a,null)):b&&(b.d(1),b=null),r.option&&c!==(c=t.option.url)&&(n.href=c),r.option&&u!==(u=t.option.target?t.option.target:"mainmenu")&&(n.target=u)},d(e){e&&i(n),y&&y.d(),b&&b.d(),v(n,"click",w),v(n,"mouseenter",x),v(n,"mouseleave",C)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function Ne(e,t){var n,r,s,a;return{c(){(n=p("img")).alt="",n.className="prom-dropdown__listitems-icon",n.src=r=t.option.icon,n.height=s=t.option.iconsize,n.width=a=t.option.iconsize},m(e,t){o(e,n,t)},p(e,t){e.option&&r!==(r=t.option.icon)&&(n.src=r),e.option&&s!==(s=t.option.iconsize)&&(n.height=s),e.option&&a!==(a=t.option.iconsize)&&(n.width=a)},d(e){e&&i(n)}}}function Pe(e,t){var n;return{c(){n=h("…")},m(e,t){o(e,n,t)},d(e){e&&i(n)}}}function Ae(e){O(this,e),this._state=t({cssClass:"",expanded:!1,hasPopup:!1,option:null},e.data),this._intro=!0,this._fragment=function(e,t){var n,s,a,l,d,c,u,f,y,b=t.option.label,w=t.option.icon&&Ne(e,t),x=t.option.ellipsis&&Pe();function C(n){e.fire("click",{event:n,data:t.option})}function S(n){e.fire("mouseenter",{event:n,data:t.option})}function k(n){e.fire("mouseleave",{event:n,data:t.option})}return{c(){n=p("button"),w&&w.c(),s=h("\n\n    "),a=p("span"),l=h(b),d=h("\n    "),x&&x.c(),c=h("\n\n    "),u=p("span"),a.className="prom-dropdown__listitems-text",u.className="prom-dropdown__listitems-menuicon",m(n,"click",C),m(n,"mouseenter",S),m(n,"mouseleave",k),n.className=f="prom-dropdown__listitem prom-dropdown__listitem-action "+t.cssClass,n.tabIndex="-1",n.type="button",g(n,"role","menuitem"),g(n,"aria-haspopup",t.hasPopup),g(n,"aria-expanded",y=t.hasPopup?t.expanded:null)},m(e,t){o(e,n,t),w&&w.m(n,null),r(n,s),r(n,a),r(a,l),r(a,d),x&&x.m(a,null),r(n,c),r(n,u)},p(r,o){(t=o).option.icon?w?w.p(r,t):((w=Ne(e,t)).c(),w.m(n,s)):w&&(w.d(1),w=null),r.option&&b!==(b=t.option.label)&&_(l,b),t.option.ellipsis?x||((x=Pe()).c(),x.m(a,null)):x&&(x.d(1),x=null),r.cssClass&&f!==(f="prom-dropdown__listitem prom-dropdown__listitem-action "+t.cssClass)&&(n.className=f),r.hasPopup&&g(n,"aria-haspopup",t.hasPopup),(r.hasPopup||r.expanded)&&y!==(y=t.hasPopup?t.expanded:null)&&g(n,"aria-expanded",y)},d(e){e&&i(n),w&&w.d(),x&&x.d(),v(n,"click",C),v(n,"mouseenter",S),v(n,"mouseleave",k)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function $e(e){var t=e.parentElement.parentElement.parentElement.children;if(0!==t.length){for(var n=[],r=0;r<t.length;r++){var o=t[r];"ul"===o.nodeName.toLowerCase()&&n.push(o)}return n}}t(Le.prototype,F),t(Ae.prototype,F);var He={clickHandler(e){var{event:t}=e,n=t.currentTarget,r=t.currentTarget.nextElementSibling;this.toggleMenu(n,r,!1)},mouseenterHandler(e){var{event:t}=e,n=t.currentTarget,{isSubmenu:r}=this.get(),o=t.currentTarget.nextElementSibling;Ee(n)?this.openMenu(n,o,!0):r||Ie()},mouseleaveHandler(e){var{event:t}=e,{isSubmenu:n}=this.get(),r=t.currentTarget.nextElementSibling;n||!r||r.contains(t.relatedTarget)||this.closeMenu(r,!1)},moveToNextItem(e){(function(e){var t=e.parentElement.nextElementSibling;return!!t&&(t.querySelector(".prom-dropdown__listitem").focus(),!0)})(e)||function(e){var t=$e(e);t.length<=1&&we(t[0]);var n=e.parentElement.parentElement.nextElementSibling;n?("ul"!==n.nodeName.toLowerCase()&&(n=n.nextElementSibling),we(n)):we(t[0])}(e)},moveToPreviousItem(e){(function(e){var t=e.parentElement.previousElementSibling;return!!t&&(t.querySelector(".prom-dropdown__listitem").focus(),!0)})(e)||function(e){var t=$e(e);if(t.length<=1)xe(t[0]);else{var n=e.parentElement.parentElement.previousElementSibling;n?("h2"===n.nodeName.toLowerCase()&&(n=n.previousElementSibling),"ul"===n.nodeName.toLowerCase()?xe(n):xe(t[t.length-1])):xe(t[t.length-1])}}(e)},keyHandlerDown(e){var{key:t}=e,n=e.target;switch(ve(t)){case me:e.preventDefault(),this.moveToPreviousItem(n);break;case le:e.preventDefault(),this.moveToNextItem(n);break;default:return}},keyHandlerUp(e){var{key:t}=e,n=e.target,r=e.target.nextElementSibling;switch(ve(t)){case ue:Ie(),Ce();break;case pe:Ee(n)&&this.toggleMenu(n,r,!1);break;default:return}},openMenu(e,t,n){Ie(),Se(),function(e){if(e.style.right=null,e.style.left=null,e.style.top=null,window.innerWidth>480){var t=e.parentElement.getBoundingClientRect(),n=function(e,t){for(;null!==e.parentElement;)if((e=e.parentElement).classList.contains(t))return e;return null}(e,"prom-dropdown__body");window.innerWidth-t.right>=t.width?e.style.left=t.width+"px":e.style.right=t.width+"px",e.style.top=t.top-n.getBoundingClientRect().top-5+"px"}e.removeAttribute("hidden")}(t),e.classList.add("open"),e.setAttribute("aria-expanded",!0),n||we(t)},closeMenu(e,t){if(!Oe(e)){ke(e);var n=document.querySelector(".prom-dropdown__listitems-menu.open");n.setAttribute("aria-expanded",!1),n.classList.remove("open"),t||Ce()}},toggleMenu(e,t,n){Oe(t)?this.openMenu(e,t,n):this.closeMenu(t,!0)}};function Ue(e,t,n){var r=Object.create(e);return r.list=t[n],r.index=n,r}function De(e,t){var n={option:t.option,"hasPopup:":!0,false:!0},r=new Ae({root:e.root,store:e.store,data:n});return r.on("click",(function(t){e.fire("click",t)})),r.on("mouseenter",(function(t){e.mouseenterHandler(t)})),r.on("mouseleave",(function(t){e.mouseleaveHandler(t)})),{c(){r._fragment.c()},m(e,t){r._mount(e,t)},p(e,t){var n={};e.option&&(n.option=t.option),r._set(n)},d(e){r.destroy(e)}}}function Re(e,t){var n,s,a,l={option:t.option,cssClass:"prom-dropdown__listitems-menu","hasPopup:":!0,true:!0},d=new Ae({root:e.root,store:e.store,data:l});d.on("click",(function(t){e.clickHandler(t)})),d.on("mouseenter",(function(t){e.mouseenterHandler(t)})),d.on("mouseleave",(function(t){e.mouseleaveHandler(t)}));for(var u=t.option.items,f=[],m=0;m<u.length;m+=1)f[m]=Be(e,Ue(t,u,m));return{c(){d._fragment.c(),n=h("\n\n            "),s=p("section"),a=p("section");for(var e=0;e<f.length;e+=1)f[e].c();a.className="prom-dropdown__body",s.hidden=!0,s.className="prom-dropdown prom-dropdown__submenu"},m(e,t){d._mount(e,t),o(e,n,t),o(e,s,t),r(s,a);for(var i=0;i<f.length;i+=1)f[i].m(a,null)},p(t,n){var r={};if(t.option&&(r.option=n.option),d._set(r),t.option){u=n.option.items;for(var o=0;o<u.length;o+=1){var i=Ue(n,u,o);f[o]?f[o].p(t,i):(f[o]=Be(e,i),f[o].c(),f[o].m(a,null))}for(;o<f.length;o+=1)f[o].d(1);f.length=u.length}},d(e){d.destroy(e),e&&(i(n),i(s)),c(f,e)}}}function Me(e,t){var n={option:t.option},r=new Le({root:e.root,store:e.store,data:n});return r.on("dropdownClose",(function(t){e.fire("dropdownClose",t)})),r.on("mouseenter",(function(t){e.mouseenterHandler(t)})),r.on("mouseleave",(function(t){e.mouseleaveHandler(t)})),{c(){r._fragment.c()},m(e,t){r._mount(e,t)},p(e,t){var n={};e.option&&(n.option=t.option),r._set(n)},d(e){r.destroy(e)}}}function Be(e,t){var n={index:t.index,list:t.list,isSubmenu:"true"},r=new We({root:e.root,store:e.store,data:n});return r.on("click",(function(t){e.fire("click",t)})),r.on("dropdownClose",(function(t){e.fire("dropdownClose",t)})),r.on("keyup",(function(t){e.fire("keyup",t)})),{c(){r._fragment.c()},m(e,t){r._mount(e,t)},p(e,t){var n={};e.option&&(n.list=t.list),r._set(n)},d(e){r.destroy(e)}}}function je(e){O(this,e),this._state=t({isSubmenu:!1,option:null},e.data),this._intro=!0,this._fragment=function(e,t){var n,r;function s(e){return e.option.link?Me:e.option.items?Re:De}var a=s(t),l=a(e,t);function d(t){e.keyHandlerUp(t)}function c(t){e.keyHandlerDown(t)}return{c(){n=p("li"),l.c(),m(n,"keyup",d),m(n,"keydown",c),n.className=r="prom-dropdown__listitems "+(t.option.cssClass||""),y(n,"prom-dropdown__listitems--divider",t.option.divider),y(n,"prom-dropdown__listitems--menu",t.option.items)},m(e,t){o(e,n,t),l.m(n,null)},p(t,o){a===(a=s(o))&&l?l.p(t,o):(l.d(1),(l=a(e,o)).c(),l.m(n,null)),t.option&&r!==(r="prom-dropdown__listitems "+(o.option.cssClass||""))&&(n.className=r),(t.option||t.option)&&(y(n,"prom-dropdown__listitems--divider",o.option.divider),y(n,"prom-dropdown__listitems--menu",o.option.items))},d(e){e&&i(n),l.d(),v(n,"keyup",d),v(n,"keydown",c)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),S(this))}function qe(){var e=(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(16));e[6]=15&e[6]|64,e[8]=63&e[8]|128;var t=0;return"xxxx-xx-xx-xx-xxxxxx".replace(/x/g,()=>{var n=("0"+e[t].toString(16)).slice(-2);return t+=1,n})}function ze(e,t,n){var r=Object.create(e);return r.option=t[n],r}function Ve(e,t){var n,s,a,l=t.list.label;return{c(){n=p("h2"),s=h(l),n.id=a=""+t.id+(t.index+1),n.className="prom-dropdown__listheader"},m(e,t){o(e,n,t),r(n,s)},p(e,t){e.list&&l!==(l=t.list.label)&&_(s,l),(e.id||e.index)&&a!==(a=""+t.id+(t.index+1))&&(n.id=a)},d(e){e&&i(n)}}}function Ge(e,t){var n={isSubmenu:t.isSubmenu,option:t.option},r=new je({root:e.root,store:e.store,data:n});return r.on("dropdownClose",(function(t){e.fire("dropdownClose",t)})),r.on("click",(function(t){e.fire("click",t)})),{c(){r._fragment.c()},m(e,t){r._mount(e,t)},p(e,t){var n={};e.isSubmenu&&(n.isSubmenu=t.isSubmenu),e.list&&(n.option=t.option),r._set(n)},d(e){r.destroy(e)}}}function We(e){O(this,e),this._state=t({id:qe(),index:0,isSubmenu:!1,list:null},e.data),this._intro=!0,this._fragment=function(e,t){for(var n,r,s,a=t.list.label&&Ve(e,t),l=t.list.options,d=[],u=0;u<l.length;u+=1)d[u]=Ge(e,ze(t,l,u));function f(t){e.fire("keyup",t)}return{c(){a&&a.c(),n=h("\n\n"),r=p("ul");for(var e=0;e<d.length;e+=1)d[e].c();m(r,"keyup",f),g(r,"aria-labelledby",s=t.list.label?t.id+(t.index+1):null)},m(e,t){a&&a.m(e,t),o(e,n,t),o(e,r,t);for(var i=0;i<d.length;i+=1)d[i].m(r,null)},p(t,o){if(o.list.label?a?a.p(t,o):((a=Ve(e,o)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),t.isSubmenu||t.list){l=o.list.options;for(var i=0;i<l.length;i+=1){var c=ze(o,l,i);d[i]?d[i].p(t,c):(d[i]=Ge(e,c),d[i].c(),d[i].m(r,null))}for(;i<d.length;i+=1)d[i].d(1);d.length=l.length}(t.list||t.id||t.index)&&s!==(s=o.list.label?o.id+(o.index+1):null)&&g(r,"aria-labelledby",s)},d(e){a&&a.d(e),e&&(i(n),i(r)),c(d,e),v(r,"keyup",f)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),S(this))}t(je.prototype,F),t(je.prototype,He),t(We.prototype,F);var Ke={clickHandler(e){this.refs.root.contains(e.target)||this.fire("dropdownClose",e)},globalKeyHandler(e){var{key:t}=e,{expanded:n}=this.get();switch(ve(t)){case ce:n&&this.keyHandler(e);break;default:return}},keyHandler(e){var t,n,{key:r}=e;switch(ve(r)){case ce:t=document.querySelectorAll(".prom-dropdown__submenu"),n=!1,t.length>0&&t.forEach(e=>{e.hasAttribute("aria-expanded")&&"true"===e.getAttribute("aria-expanded")&&(n=!0)}),n?(Ie(),Ce(),e.stopPropagation()):this.fire("dropdownClose",e);break;case me:case le:break;default:return}},selectOption(e){this.fire("selectedOption",{event:e,data:e.data.value}),this.fire("dropdownClose",e)}};function Je(){this.tabTrapper=new ye(this.refs.root)}function Qe(){setTimeout(()=>{this.tabTrapper.init()},0)}function Xe(e,t,n){var r=Object.create(e);return r.list=t[n],r.index=n,r}function Ye(t,n){var r,s,a=t._slotted.body;return{c:e,m(e,t){a&&(o(e,r||(r=f()),t),o(e,a,t),o(e,s||(s=f()),t))},p:e,d(e){a&&(!function(e,t,n){for(;e.nextSibling&&e.nextSibling!==t;)n.appendChild(e.parentNode.removeChild(e.nextSibling))}(r,s,a),i(r),i(s))}}}function Ze(e,t){for(var n,r=t.items,s=[],a=0;a<r.length;a+=1)s[a]=et(e,Xe(t,r,a));return{c(){for(var e=0;e<s.length;e+=1)s[e].c();n=f()},m(e,t){for(var r=0;r<s.length;r+=1)s[r].m(e,t);o(e,n,t)},p(t,o){if(t.id||t.items){r=o.items;for(var i=0;i<r.length;i+=1){var a=Xe(o,r,i);s[i]?s[i].p(t,a):(s[i]=et(e,a),s[i].c(),s[i].m(n.parentNode,n))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}},d(e){c(s,e),e&&i(n)}}}function et(e,t){var n={id:t.id,index:t.index,list:t.list},r=new We({root:e.root,store:e.store,data:n});return r.on("click",(function(t){e.selectOption(t)})),r.on("dropdownClose",(function(t){e.fire("dropdownClose",t)})),r.on("keyup",(function(t){e.keyHandler(t)})),{c(){r._fragment.c()},m(e,t){r._mount(e,t)},p(e,t){var n={};e.id&&(n.id=t.id),e.items&&(n.list=t.list),r._set(n)},d(e){r.destroy(e)}}}function tt(e){O(this,e),this.refs={},this._state=t({arrow:!0,arrowPosition:"top",expanded:!1,id:"prom-dropdown__list",items:[],responsive:!0,version:1},e.data),this._recompute({arrow:1,arrowPosition:1,expanded:1,responsive:1},this._state),this._intro=!0,this._handlers.update=[Qe],this._slotted=e.slots||{},this._fragment=function(e,t){var n,s,l,d,c,u,f,m,v,_,y,b=e._slotted.header,w=e._slotted.footer;function x(t){e.clickHandler(t)}function C(t){e.globalKeyHandler(t)}function S(e){return e.items.length?Ze:Ye}window.addEventListener("click",x),window.addEventListener("keyup",C);var k=S(t),O=k(e,t);return{c(){n=p("section"),s=p("section"),l=h("\n    "),d=p("header"),c=h("\n\n    "),u=p("section"),f=p("section"),m=h("\n        "),O.c(),v=h("\n\n    "),_=p("footer"),s.className=t.arrowClass,d.className="prom-dropdown__header",f.className="prom-dropdown__bodygradient-top",u.className="prom-dropdown__body",_.className="prom-dropdown__footer",n.className=y="prom-dropdown "+t.notResponsiveClass,n.hidden=t.hidden,g(n,"aria-expanded",t.expanded)},m(t,i){o(t,n,i),r(n,s),r(n,l),r(n,d),b&&r(d,b),r(n,c),r(n,u),r(u,f),r(u,m),O.m(u,null),r(n,v),r(n,_),w&&r(_,w),e.refs.root=n},p(t,r){t.arrowClass&&(s.className=r.arrowClass),k===(k=S(r))&&O?O.p(t,r):(O.d(1),(O=k(e,r)).c(),O.m(u,null)),t.notResponsiveClass&&y!==(y="prom-dropdown "+r.notResponsiveClass)&&(n.className=y),t.hidden&&(n.hidden=r.hidden),t.expanded&&g(n,"aria-expanded",r.expanded)},d(t){window.removeEventListener("click",x),window.removeEventListener("keyup",C),t&&i(n),b&&a(d,b),O.d(),w&&a(_,w),e.refs.root===n&&(e.refs.root=null)}}}(this,this._state),this.root._oncreate.push(()=>{Je.call(this),this.fire("update",{changed:n({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),S(this))}t(tt.prototype,F),t(tt.prototype,Ke),tt.prototype._recompute=function(e,t){(e.arrow||e.arrowPosition)&&this._differs(t.arrowClass,t.arrowClass=function(e){var{arrow:t,arrowPosition:n}=e;return t?"arrow-".concat(n):""}(t))&&(e.arrowClass=!0),e.expanded&&this._differs(t.hidden,t.hidden=function(e){var{expanded:t}=e;return t?"":"hidden"}(t))&&(e.hidden=!0),e.responsive&&this._differs(t.notResponsiveClass,t.notResponsiveClass=function(e){var{responsive:t}=e;return t?"":"prom-dropdown--not-responsive"}(t))&&(e.notResponsiveClass=!0)};var nt={closeHandler(e){var{id:t}=this.get();if(!document.querySelector("#"+t+"-button").contains(e.target)){var{key:n}=e;switch(this.set({expanded:!1}),ve(n)){case ce:this.returnFocus();break;default:return}}},submenuHandler(e){e.stopPropagation(),Ie()},keyHandlerDown(e){var{key:t}=e,{id:n}=this.get(),r=document.querySelector("#"+n+"-button");switch(ve(t)){case le:if(document.activeElement===r)e.preventDefault(),this.set({expanded:!0}),we(document.querySelector("#"+n));break;case fe:Ie(),Se(),this.set({expanded:!1});break;default:return}},keyHandlerUp(e){var{key:t}=e;switch(ve(t)){case ce:this.set({expanded:!1}),this.returnFocus();break;default:return}},toggle(e){e.preventDefault(),this.fire("beforeToggle",e);var{expanded:t,id:n,items:r}=this.get();(t?this.set({expanded:!1}):this.set({expanded:!0}),r.length)&&we(document.querySelector("#"+n))},returnFocus(){var{id:e}=this.get();document.querySelector("#"+e+"-button").focus()}};function rt(e){O(this,e),this.refs={},this._state=t({arrow:!0,iconClass:"prom-button-dropdown-icon",expanded:!1,disabled:!1,iconOnly:!1,id:"button-dropdown",items:[],large:!1,position:"down",responsive:!0,text:"ChangeMe",textOnly:!0,type:"primary",version:1},e.data),this._recompute({position:1,iconClass:1,iconOnly:1,expanded:1,responsive:1},this._state),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){var n,s,l,d,c,f,_,y,b,w=e._slotted.header,x=e._slotted.footer;function C(t){e.toggle(t)}var S={iconClass:t.cssClass,id:t.id+"-button",iconOnly:t.iconOnly,large:t.large,text:t.text,textOnly:t.textOnly,type:t.type,disabled:t.disabled,haspopup:"true",htmlType:"button"},k=new ae({root:e.root,store:e.store,data:S});k.on("click",(function(t){e.toggle(t)}));var O={arrow:t.arrow,arrowPosition:t.arrowPosition,expanded:t.expanded,items:t.items,responsive:t.responsive,id:t.id+"-list"},I=new tt({root:e.root,store:e.store,slots:{default:u(),footer:u(),header:u()},data:O});function E(t){e.keyHandlerUp(t)}function T(t){e.keyHandlerDown(t)}return I.on("dropdownClose",(function(t){e.closeHandler(t)})),I.on("submenuClose",(function(t){e.submenuHandler(t)})),I.on("selectedOption",(function(t){e.fire("selectedOption",t)})),{c(){n=p("section"),l=h("\n\n"),d=p("section"),k._fragment.c(),c=h("\n\n    "),f=p("section"),_=h("\n\n        "),y=p("section"),I._fragment.c(),m(n,"click",C),n.className=s="prom-button-dropdown-overlay "+t.overlayClass,g(f,"slot","header"),g(y,"slot","footer"),m(d,"keyup",E),m(d,"keydown",T),d.className=b="prom-button-dropdown prom-dropdown__"+t.position,d.id=t.id},m(t,i){o(t,n,i),e.refs.overlay=n,o(t,l,i),o(t,d,i),k._mount(d,null),r(d,c),r(I._slotted.header,f),w&&r(f,w),r(I._slotted.default,_),r(I._slotted.footer,y),x&&r(y,x),I._mount(d,null)},p(e,t){e.overlayClass&&s!==(s="prom-button-dropdown-overlay "+t.overlayClass)&&(n.className=s);var r={};e.cssClass&&(r.iconClass=t.cssClass),e.id&&(r.id=t.id+"-button"),e.iconOnly&&(r.iconOnly=t.iconOnly),e.large&&(r.large=t.large),e.text&&(r.text=t.text),e.textOnly&&(r.textOnly=t.textOnly),e.type&&(r.type=t.type),e.disabled&&(r.disabled=t.disabled),k._set(r);var o={};e.arrow&&(o.arrow=t.arrow),e.arrowPosition&&(o.arrowPosition=t.arrowPosition),e.expanded&&(o.expanded=t.expanded),e.items&&(o.items=t.items),e.responsive&&(o.responsive=t.responsive),e.id&&(o.id=t.id+"-list"),I._set(o),e.position&&b!==(b="prom-button-dropdown prom-dropdown__"+t.position)&&(d.className=b),e.id&&(d.id=t.id)},d(t){t&&i(n),v(n,"click",C),e.refs.overlay===n&&(e.refs.overlay=null),t&&(i(l),i(d)),k.destroy(),w&&a(f,w),x&&a(y,x),I.destroy(),v(d,"keyup",E),v(d,"keydown",T)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),S(this))}function ot(e){var{$staticContentPath:t,$i18n:n}=e;if(!A.match(/(CrOS)/g)){var r=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(A);return{icon:t+(r?te:ee),iconsize:24,label:r?n.device:n.computer,link:!1,value:{source:"Computer"}}}return null}t(rt.prototype,F),t(rt.prototype,nt),rt.prototype._recompute=function(e,t){e.position&&this._differs(t.arrowPosition,t.arrowPosition=function(e){var{position:t}=e;return"up"===t?"bottom":"top"}(t))&&(e.arrowPosition=!0),(e.iconClass||e.iconOnly)&&this._differs(t.cssClass,t.cssClass=function(e){var{iconClass:t,iconOnly:n}=e;return n?t:""}(t))&&(e.cssClass=!0),(e.expanded||e.responsive)&&this._differs(t.overlayClass,t.overlayClass=function(e){var{expanded:t,responsive:n}=e;return n&&t?"prom-button-dropdown-overlay--visible":""}(t))&&(e.overlayClass=!0)};var it={optionSelected(e){"Computer"===e.source?this.refs.fileInput.click():this.fire("addFrom",e),this.fire("kpiEvent",e.source)},filesPicked(e){for(var t=[],n=0;n<this.refs.fileInput.files.length;n++)t.push(this.refs.fileInput.files[n]);t&&t.length>0&&(this.fire("addFrom",{source:"Computer",files:t}),this.refs.fileInput.value=null)},onBeforeUnload(e){var{filesStatus:t}=this.store.get();t.some(e=>e.inProgress)&&(e.preventDefault(),e.returnValue="")},globalOnBlur(e){this.set({dropDownExpanded:!1})},globalOnClick(e){if(this.refs.actionList.contains(e.target)){var{dropDownExpanded:t}=this.get(),n=this.refs.actionList.querySelector("."+K),r=document.querySelector(G.quickAddButton);if(r===e.target&&t)this.fire("kpiEvent","QuickAdd"),function(){var{cloudServiceSettings:e}=P.get();Object.keys(e).forEach(t=>{var n=e[t];n.showCloudService&&n.recentCloudElementsSettings.enabled&&q(t)})}();else if(e.target===n||n.contains(e.target))this.fire("kpiEvent","ShowAll"),r.focus();else{this.refs.actionList.querySelectorAll("."+W).forEach(t=>{(e.target===t||t.contains(e.target))&&(this.fire("kpiEvent","ItslearningElement"),r.focus())})}}},getAnchorClickedHref:e=>"a"===e.target.tagName.toLowerCase()?e.target.getAttribute("href"):e.target.parentElement&&"a"===e.target.parentElement.tagName.toLowerCase()?e.target.parentElement.getAttribute("href"):null,showIconWhenSmallScreen(){this.set({iconOnly:window.innerWidth<568})},onResize(e){this.showIconWhenSmallScreen()}};function st(){this.showIconWhenSmallScreen()}function at(e){O(this,e),this.refs={},this._state=t(t(this.store._init(["menuOptionItems","staticContentPath","cloudServiceSettings","i18n","recentCloudFiles","showOffice365InsteadOfOneDrive","showAllUrl"]),{dropDownExpanded:!1,iconOnly:!1,quickAddId:V}),e.data),this.store._add(this,["menuOptionItems","staticContentPath","cloudServiceSettings","i18n","recentCloudFiles","showOffice365InsteadOfOneDrive","showAllUrl"]),this._recompute({$cloudServiceSettings:1,$staticContentPath:1,$i18n:1,$recentCloudFiles:1,$showOffice365InsteadOfOneDrive:1,$menuOptionItems:1,$showAllUrl:1,googleDrivePickerItem:1,oneDrivePickerItem:1,fileUploadOption:1,elementItems:1,showAllItem:1},this._state),this._intro=!0,this._handlers.destroy=[T],this._fragment=function(e,t){var n,r,s,a={};function l(t){e.globalOnClick(t)}function d(t){e.globalOnBlur(t)}function c(t){e.onBeforeUnload(t)}function u(t){e.onResize(t)}function f(t){e.filesPicked(t)}window.addEventListener("click",l),window.addEventListener("blur",d),window.addEventListener("beforeunload",c),window.addEventListener("resize",u);var _={text:t.$i18n.add,iconOnly:t.iconOnly,items:t.items,textOnly:!t.iconOnly};void 0!==t.dropDownExpanded&&(_.expanded=t.dropDownExpanded,a.expanded=!0);var y=new rt({root:e.root,store:e.store,data:_,_bind(t,n){var r={};!a.expanded&&t.expanded&&(r.dropDownExpanded=n.expanded),e._set(r),a={}}});return e.root._beforecreate.push(()=>{y._bind({expanded:1},y.get())}),y.on("selectedOption",(function(t){e.optionSelected(t.data)})),{c(){n=p("input"),r=h("\r\n\r\n"),s=p("div"),y._fragment.c(),m(n,"change",f),g(n,"type","file"),n.hidden=!0,n.multiple=!0,s.className="contentarea-action-list",s.id=t.quickAddId},m(t,i){o(t,n,i),e.refs.fileInput=n,o(t,r,i),o(t,s,i),y._mount(s,null),e.refs.actionList=s},p(e,n){t=n;var r={};e.$i18n&&(r.text=t.$i18n.add),e.iconOnly&&(r.iconOnly=t.iconOnly),e.items&&(r.items=t.items),e.iconOnly&&(r.textOnly=!t.iconOnly),!a.expanded&&e.dropDownExpanded&&(r.expanded=t.dropDownExpanded,a.expanded=void 0!==t.dropDownExpanded),y._set(r),a={},e.quickAddId&&(s.id=t.quickAddId)},d(t){window.removeEventListener("click",l),window.removeEventListener("blur",d),window.removeEventListener("beforeunload",c),window.removeEventListener("resize",u),t&&i(n),v(n,"change",f),e.refs.fileInput===n&&(e.refs.fileInput=null),t&&(i(r),i(s)),y.destroy(),e.refs.actionList===s&&(e.refs.actionList=null)}}}(this,this._state),this.root._oncreate.push(()=>{st.call(this),this.fire("update",{changed:n({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),S(this))}t(at.prototype,F),t(at.prototype,it),at.prototype._recompute=function(e,t){(e.$cloudServiceSettings||e.$staticContentPath||e.$i18n||e.$recentCloudFiles)&&this._differs(t.googleDrivePickerItem,t.googleDrivePickerItem=function(e){var{$cloudServiceSettings:t,$staticContentPath:n,$i18n:r,$recentCloudFiles:o}=e;if(t.GoogleDrive.showCloudService){var i=[{options:[{label:r.selectFileLabel,link:!1,value:{source:"GoogleDrive"},divider:!0,ellipsis:!0}]}];if(t.GoogleDrive.recentCloudElementsSettings.enabled&&o.GoogleDrive&&o.GoogleDrive.length>0){var s=[];i.push({label:r.recent,options:s}),o.GoogleDrive.forEach(e=>{s.push({icon:$(e.mimeType,n+X),iconsize:24,value:{source:"RecentGoogleDrive",elementId:e.id,cloudProvider:"GoogleDrive"},label:e.name,link:!1})})}return{icon:n+Q,iconsize:24,label:r.googleDrive,link:!1,value:{source:"GoogleDrive"},items:i}}}(t))&&(e.googleDrivePickerItem=!0),(e.$cloudServiceSettings||e.$staticContentPath||e.$i18n||e.$showOffice365InsteadOfOneDrive)&&this._differs(t.oneDrivePickerItem,t.oneDrivePickerItem=function(e){var{$cloudServiceSettings:t,$staticContentPath:n,$i18n:r,$showOffice365InsteadOfOneDrive:o}=e;if(t.OneDrive.showCloudService){var i={icon:n+Y,iconsize:24,label:r.oneDrive,link:!1,value:{source:"OneDrive"}};return o&&(i.icon=n+Z,i.label=r.office365),i}}(t))&&(e.oneDrivePickerItem=!0),(e.$staticContentPath||e.$i18n)&&this._differs(t.fileUploadOption,t.fileUploadOption=ot(t))&&(e.fileUploadOption=!0),(e.$menuOptionItems||e.$staticContentPath)&&this._differs(t.elementItems,t.elementItems=function(e){var{$menuOptionItems:t,$staticContentPath:n}=e;return t.map(e=>({icon:re[e.value]?n+re[e.value]:e.icon,iconsize:24,label:e.title,link:!0,url:e.url,cssClass:W}))}(t))&&(e.elementItems=!0),(e.$i18n||e.$showAllUrl)&&this._differs(t.showAllItem,t.showAllItem=function(e){var{$i18n:t,$showAllUrl:n}=e;return{label:t.showAll,link:!0,url:n,cssClass:K}}(t))&&(e.showAllItem=!0),(e.googleDrivePickerItem||e.oneDrivePickerItem||e.fileUploadOption||e.elementItems||e.showAllItem)&&this._differs(t.items,t.items=function(e){var{googleDrivePickerItem:t,oneDrivePickerItem:n,fileUploadOption:r,elementItems:o,showAllItem:i}=e;return[{options:[...o,t,n,r,i].filter(e=>!!e)}]}(t))&&(e.items=!0)};var lt={hide(e){this.set({visible:!1}),this.fire("hidden",{event:e})},show(e){e&&this.set(e),this.set({visible:!0})}};function dt(e,t){var n,s,a,d,c,u,m,v,g,_=e._slotted.default,y=t.text&&ct(e,t),b=t.html&&ut(e,t),w=t.closable&&pt(e,t);return{c(){n=p("div"),s=p("div"),a=h("\n            "),d=p("span"),y&&y.c(),c=h("\n                "),b&&b.c(),u=h("\n                "),v=h("\n            "),w&&w.c(),s.className="prom-banner__icon",d.className="prom-banner__message",n.className=g="prom-banner prom-banner--"+t.type},m(e,t){o(e,n,t),r(n,s),r(n,a),r(n,d),y&&y.m(d,null),r(d,c),b&&b.m(d,null),r(d,u),_&&(r(d,m||(m=f())),r(d,_)),r(n,v),w&&w.m(n,null)},p(t,r){r.text?y?y.p(t,r):((y=ct(e,r)).c(),y.m(d,c)):y&&(y.d(1),y=null),r.html?b?b.p(t,r):((b=ut(e,r)).c(),b.m(d,u)):b&&(b.d(1),b=null),r.closable?w?w.p(t,r):((w=pt(e,r)).c(),w.m(n,null)):w&&(w.d(1),w=null),t.type&&g!==(g="prom-banner prom-banner--"+r.type)&&(n.className=g)},d(e){e&&i(n),y&&y.d(),b&&b.d(),_&&l(m,_),w&&w.d()}}}function ct(e,t){var n;return{c(){n=h(t.text)},m(e,t){o(e,n,t)},p(e,t){e.text&&_(n,t.text)},d(e){e&&i(n)}}}function ut(e,t){var n,r;return{c(){n=p("noscript"),r=p("noscript")},m(e,i){o(e,n,i),n.insertAdjacentHTML("afterend",t.html),o(e,r,i)},p(e,t){e.html&&(s(n,r),n.insertAdjacentHTML("afterend",t.html))},d(e){e&&(s(n,r),i(n),i(r))}}}function pt(e,t){var n,s,a;function l(t){e.hide(t)}return{c(){n=p("button"),s=p("span"),a=h(t.closeText),s.className="prom-banner__close-text",m(n,"click",l),n.type="button",n.className="prom-banner__close"},m(e,t){o(e,n,t),r(n,s),r(s,a)},p(e,t){e.closeText&&_(a,t.closeText)},d(e){e&&i(n),v(n,"click",l)}}}function ht(e){var n,r,s,a;O(this,e),this._state=t({alert:!1,visible:!1,text:null,close:null,type:"info",closable:!0},e.data),this._recompute({close:1,alert:1},this._state),this._intro=!0,this._slotted=e.slots||{},this._fragment=(n=this,r=this._state,a=r.visible&&dt(n,r),{c(){s=p("div"),a&&a.c(),s.className="prom-banner__live-region",g(s,"aria-live",r.ariaLive),g(s,"role",r.role),g(s,"aria-atomic","true")},m(e,t){o(e,s,t),a&&a.m(s,null)},p(e,t){t.visible?a?a.p(e,t):((a=dt(n,t)).c(),a.m(s,null)):a&&(a.d(1),a=null),e.ariaLive&&g(s,"aria-live",t.ariaLive),e.role&&g(s,"role",t.role)},d(e){e&&i(s),a&&a.d()}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}t(ht.prototype,F),t(ht.prototype,lt),ht.prototype._recompute=function(e,t){e.close&&this._differs(t.closeText,t.closeText=function(e){var{close:t}=e;return t||console.warn("Banner close text is required but not included!")}(t))&&(e.closeText=!0),e.alert&&(this._differs(t.ariaLive,t.ariaLive=function(e){var{alert:t}=e;return t?null:"polite"}(t))&&(e.ariaLive=!0),this._differs(t.role,t.role=function(e){var{alert:t}=e;return t?"alert":"status"}(t))&&(e.role=!0))};var ft={handleClick(e){e.target.classList.contains("quick-add__resource-link")&&this.refs.banner.hide(e)},handleBannerClosed(){window.setIframeDefaultHeight()}};function mt(e){var{changed:t,current:n,previous:r}=e;r&&(t.files||t.apiError)&&(n.files.length>0||n.apiError?this.set({bannerVisible:!0}):this.set({bannerVisible:!1}),window.setIframeDefaultHeight())}function vt(e,t,n,r){return e=(e=e.replace(t,'<a\n        class="quick-add__resource-link"\n        href="'.concat(r,'"\n        target="mainmenu"\n    >'))).replace(n,"</a>")}function gt(e,t){var n,r;return{c(){n=p("noscript"),r=p("noscript")},m(e,i){o(e,n,i),n.insertAdjacentHTML("afterend",t.mixedSuccessMessage),o(e,r,i)},p(e,t){e.mixedSuccessMessage&&(s(n,r),n.insertAdjacentHTML("afterend",t.mixedSuccessMessage))},d(e){e&&(s(n,r),i(n),i(r))}}}function _t(e,t){var n,r;return{c(){n=p("noscript"),r=p("noscript")},m(e,i){o(e,n,i),n.insertAdjacentHTML("afterend",t.completeSuccessMessage),o(e,r,i)},p(e,t){e.completeSuccessMessage&&(s(n,r),n.insertAdjacentHTML("afterend",t.completeSuccessMessage))},d(e){e&&(s(n,r),i(n),i(r))}}}function yt(e,t){var n;return{c(){n=h(t.completeFailureMessage)},m(e,t){o(e,n,t)},p(e,t){e.completeFailureMessage&&_(n,t.completeFailureMessage)},d(e){e&&i(n)}}}function bt(e,t){var n;return{c(){n=h(t.inProgressMessage)},m(e,t){o(e,n,t)},p(e,t){e.inProgressMessage&&_(n,t.inProgressMessage)},d(e){e&&i(n)}}}function wt(e,t){var n,r=t.$i18n.errors.unknown;return{c(){n=h(r)},m(e,t){o(e,n,t)},p(e,t){e.$i18n&&r!==(r=t.$i18n.errors.unknown)&&_(n,r)},d(e){e&&i(n)}}}function xt(e,t){var n,s,a=t.$i18n.fileResultsMoreInfo;function l(t){e.fire("showMoreInfo")}return{c(){n=p("button"),s=h(a),m(n,"click",l),n.className="contentarea-feedback__more-info",n.type="button"},m(e,t){o(e,n,t),r(n,s)},p(e,t){e.$i18n&&a!==(a=t.$i18n.fileResultsMoreInfo)&&_(s,a)},d(e){e&&i(n),v(n,"click",l)}}}function Ct(e){O(this,e),this.refs={},this._state=t(t(this.store._init(["i18n"]),{files:[],apiError:!1,bannerVisible:!1,resourcesUrl:""}),e.data),this.store._add(this,["i18n"]),this._recompute({files:1,$i18n:1,resourcesUrl:1,singleResourceUrl:1,apiError:1},this._state),this._intro=!0,this._handlers.state=[mt],this._handlers.destroy=[T],mt.call(this,{changed:n({},this._state),current:this._state}),this._fragment=function(e,t){var n,s,a,l={};function d(e){return e.apiError?wt:e.addInProgress?bt:e.completeFailure?yt:e.completeSuccess?_t:gt}var c=d(t),f=c(e,t),g=t.showResultsButton&&xt(e,t),_={close:t.$i18n.close,type:t.bannerType};void 0!==t.bannerVisible&&(_.visible=t.bannerVisible,l.visible=!0);var y=new ht({root:e.root,store:e.store,slots:{default:u()},data:_,_bind(t,n){var r={};!l.visible&&t.visible&&(r.bannerVisible=n.visible),e._set(r),l={}}});function b(t){e.handleClick(t)}return e.root._beforecreate.push(()=>{y._bind({visible:1},y.get())}),y.on("hidden",(function(t){e.handleBannerClosed()})),e.refs.banner=y,{c(){n=p("div"),s=p("span"),f.c(),a=h("\r\n\r\n            "),g&&g.c(),y._fragment.c(),m(n,"click",b)},m(e,t){o(e,n,t),r(y._slotted.default,s),f.m(s,null),r(s,a),g&&g.m(s,null),y._mount(n,null)},p(n,r){c===(c=d(t=r))&&f?f.p(n,t):(f.d(1),(f=c(e,t)).c(),f.m(s,a)),t.showResultsButton?g?g.p(n,t):((g=xt(e,t)).c(),g.m(s,null)):g&&(g.d(1),g=null);var o={};n.$i18n&&(o.close=t.$i18n.close),n.bannerType&&(o.type=t.bannerType),!l.visible&&n.bannerVisible&&(o.visible=t.bannerVisible,l.visible=void 0!==t.bannerVisible),y._set(o),l={}},d(t){t&&i(n),f.d(),g&&g.d(),y.destroy(),e.refs.banner===y&&(e.refs.banner=null),v(n,"click",b)}}}(this,this._state),this.root._oncreate.push(()=>{this.fire("update",{changed:n({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),S(this))}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){St(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t(Ct.prototype,F),t(Ct.prototype,ft),Ct.prototype._recompute=function(e,t){e.files&&this._differs(t.addInProgress,t.addInProgress=function(e){var{files:t}=e;return t.some(e=>!e.error&&!e.success)}(t))&&(e.addInProgress=!0),(e.files||e.$i18n)&&this._differs(t.inProgressMessage,t.inProgressMessage=function(e){var{files:t,$i18n:n}=e,r=t.filter(e=>!e.error&&!e.success);return 1===r.length?n.addInProgressSingle:n.addInProgressMultiple.replace("{inProgressCount}",r.length)}(t))&&(e.inProgressMessage=!0),e.files&&this._differs(t.completeSuccess,t.completeSuccess=function(e){var{files:t}=e;return!t.some(e=>!e.success)}(t))&&(e.completeSuccess=!0),(e.files||e.$i18n||e.resourcesUrl||e.singleResourceUrl)&&this._differs(t.completeSuccessMessage,t.completeSuccessMessage=function(e){var{files:t,$i18n:n,resourcesUrl:r,singleResourceUrl:o}=e;if(1===t.length){var i=o.replace("{elementId}",t[0].elementId);return vt(n.successfulAddSingle,"{0}","{1}",i)}return vt(n.successfulAddMultiple.replace("{0}",t.length),"{1}","{2}",r)}(t))&&(e.completeSuccessMessage=!0),e.files&&this._differs(t.completeFailure,t.completeFailure=function(e){var{files:t}=e;return!t.some(e=>!e.error)}(t))&&(e.completeFailure=!0),(e.files||e.$i18n)&&this._differs(t.completeFailureMessage,t.completeFailureMessage=function(e){var{files:t,$i18n:n}=e;if(1===t.length){var r=t[0];return n.failedAddSingle.replace("{0}",r.name).replace("{1}",n[r.error+"Error"])}return n.failedAddMultiple}(t))&&(e.completeFailureMessage=!0),(e.files||e.$i18n||e.resourcesUrl||e.singleResourceUrl)&&this._differs(t.mixedSuccessMessage,t.mixedSuccessMessage=function(e){var{files:t,$i18n:n,resourcesUrl:r,singleResourceUrl:o}=e,i=t.filter(e=>e.success),s=t.filter(e=>e.error);return vt(n.mixedSuccessAdd,"{1}","{2}",r).replace("{0}",i.length).replace("{3}",s.length)}(t))&&(e.mixedSuccessMessage=!0),e.files&&this._differs(t.showResultsButton,t.showResultsButton=function(e){var{files:t}=e;return t.some(e=>!e.success)}(t))&&(e.showResultsButton=!0),(e.files||e.apiError)&&this._differs(t.bannerType,t.bannerType=function(e){var{files:t,apiError:n}=e;if(n)return"warning";for(var r=!1,o=0;o<t.length;o++){if(!t[o].error&&!t[o].success)return"loading";t[o].error&&(r=!0)}return r?"warning":"success"}(t))&&(e.bannerType=!0)};var It="modalClosed",Et=window.navigator.userAgent;var Tt={CLOSE:"Close"};var Ft,Lt,Nt,Pt,At={maybeSetBodyHeight(){(Et.indexOf("Trident")>-1||Et.indexOf("Edge")>-1)&&(this.refs.body.style.height="auto",this.refs.body.clientHeight,this.refs.body.style.height="100%")},maybeStyleForScroll(){if(this.refs.body){var e=this.refs.body.scrollHeight>this.refs.body.clientHeight+1?"prom-modal__dialog--has-scroll":"";this.set({scrollModiferClass:e})}},setScroll:(Ft=function(){this.maybeSetBodyHeight(),this.maybeStyleForScroll()},Lt=100,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Nt&&!Pt;window.clearTimeout(Pt),Pt=window.setTimeout(()=>{Pt=null,Nt||Ft.apply(this,t)},Lt),r&&Ft.apply(this,t)}),closeHandler(e){[this.refs.close,this.refs.root].indexOf(e.target)<0||(e.target===this.refs.close&&e.stopPropagation(),this.close(e))},close(e){var{closeable:t}=this.get();t&&this.fire(It,{event:e})},onWindowKeyUp(e){ve(e.key)===ce&&this.fire(It,{event:e})},onWindowResize(){this.setScroll()}};function $t(){this.tabTrapper=new ye(this.refs.root)}function Ht(){this.tabTrapper.teardown()}function Ut(){setTimeout(()=>{this.setScroll(),this.tabTrapper.init()},0)}function Dt(e,t){var n,s,a,l,d=t.showCloseButton&&Rt(e,t);return{c(){n=p("header"),s=p("h1"),a=h(t.heading),l=h("\n                "),d&&d.c(),s.id=t.headerClientId,s.className="prom-modal__heading",n.className="prom-modal__header"},m(e,t){o(e,n,t),r(n,s),r(s,a),r(n,l),d&&d.m(n,null)},p(t,r){t.heading&&_(a,r.heading),t.headerClientId&&(s.id=r.headerClientId),r.showCloseButton?d?d.p(t,r):((d=Rt(e,r)).c(),d.m(n,null)):d&&(d.d(1),d=null)},d(e){e&&i(n),d&&d.d()}}}function Rt(e,t){var n,s,a,l=t.translations.CLOSE;function d(t){e.closeHandler(t)}return{c(){n=p("button"),s=p("span"),a=h(l),s.className="prom-modal__close__text",m(n,"click",d),n.className="prom-modal__close"},m(t,i){o(t,n,i),r(n,s),r(s,a),e.refs.close=n},p(e,t){e.translations&&l!==(l=t.translations.CLOSE)&&_(a,l)},d(t){t&&i(n),v(n,"click",d),e.refs.close===n&&(e.refs.close=null)}}}function Mt(e,t){var n,r;return{c(){n=p("noscript"),r=p("noscript")},m(e,i){o(e,n,i),n.insertAdjacentHTML("afterend",t.body),o(e,r,i)},p(e,t){e.body&&(s(n,r),n.insertAdjacentHTML("afterend",t.body))},d(e){e&&(s(n,r),i(n),i(r))}}}function Bt(e){O(this,e),this.refs={},this._state=t({id:"prom-modal",version:1,i18n:{},role:"",heading:"",body:"",closeable:!0,showCloseButton:!1,hideHeader:!1},e.data),this._recompute({heading:1,hideHeader:1,role:1,i18n:1,id:1},this._state),this._intro=!0,this._handlers.update=[Ut],this._handlers.destroy=[Ht],this._slotted=e.slots||{},this._fragment=function(e,t){var n,s,d,c,u,_,y,b,w,x,C,S=e._slotted.body,k=e._slotted.footer;function O(t){e.onWindowKeyUp(t)}function I(t){e.onWindowResize()}window.addEventListener("keyup",O),window.addEventListener("resize",I);var E=!t.hideHeader&&Dt(e,t),T=t.body&&Mt(e,t);function F(t){e.closeHandler(t)}return{c(){n=p("section"),s=p("div"),E&&E.c(),d=h("\n\n        "),c=p("div"),u=p("div"),T&&T.c(),_=h("\n\n                "),b=h("\n\n        "),w=p("footer"),u.className="prom-modal__body__content",c.id=t.bodyClientId,c.className="prom-modal__body",w.className="prom-modal__footer",s.className=x="prom-modal__dialog "+t.scrollModiferClass,g(s,"role","document"),m(n,"click",F),n.className="prom-modal",g(n,"role",t.role),g(n,"aria-labelledby",C=t.hideHeader?null:t.headerClientId),g(n,"aria-describedby",t.bodyClientId)},m(t,i){o(t,n,i),r(n,s),E&&E.m(s,null),r(s,d),r(s,c),r(c,u),T&&T.m(u,null),r(u,_),S&&(r(u,y||(y=f())),r(u,S)),e.refs.body=c,r(s,b),r(s,w),k&&r(w,k),e.refs.root=n},p(t,r){r.hideHeader?E&&(E.d(1),E=null):E?E.p(t,r):((E=Dt(e,r)).c(),E.m(s,d)),r.body?T?T.p(t,r):((T=Mt(e,r)).c(),T.m(u,_)):T&&(T.d(1),T=null),t.bodyClientId&&(c.id=r.bodyClientId),t.scrollModiferClass&&x!==(x="prom-modal__dialog "+r.scrollModiferClass)&&(s.className=x),t.role&&g(n,"role",r.role),(t.hideHeader||t.headerClientId)&&C!==(C=r.hideHeader?null:r.headerClientId)&&g(n,"aria-labelledby",C),t.bodyClientId&&g(n,"aria-describedby",r.bodyClientId)},d(t){window.removeEventListener("keyup",O),window.removeEventListener("resize",I),t&&i(n),E&&E.d(),T&&T.d(),S&&l(y,S),e.refs.body===c&&(e.refs.body=null),k&&a(w,k),v(n,"click",F),e.refs.root===n&&(e.refs.root=null)}}}(this,this._state),this.root._oncreate.push(()=>{$t.call(this),this.fire("update",{changed:n({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),S(this))}function jt(e){var{changed:t,current:n}=e;if(t.headerChecked){var{items:r}=this.get();r.map(e=>{e.checked=n.headerChecked}),this.set({items:r})}if(t.items){var{items:o}=this.get(),i=!0;o.map(e=>{e.checked||(i=!1)}),this.set({headerChecked:i})}}function qt(e){var s,a,c,u,m,v,_,y;O(this,e),this._state=t({headerChecked:!1,items:[],aria_describedby:null},e.data),this._intro=!0,this._handlers.state=[jt],this._slotted=e.slots||{},jt.call(this,{changed:n({},this._state),current:this._state}),this._fragment=(s=this,a=this._state,_=s._slotted.header,y=s._slotted.body,{c(){c=p("table"),m=h("\n    "),c.className="prom-list",g(c,"aria-describedby",a.aria_describedby)},m(e,t){o(e,c,t),_&&(r(c,_),r(c,u||(u=f()))),r(c,m),y&&(r(c,v||(v=f())),r(c,y))},p(e,t){e.aria_describedby&&g(c,"aria-describedby",t.aria_describedby)},d(e){e&&i(c),_&&d(u,_),y&&l(v,y)}}),this.root._oncreate.push(()=>{this.fire("update",{changed:n({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),S(this))}function zt(e){var n,s,l,d,c;O(this,e),this._state=t({checked:!1},e.data),this._recompute({checked:1,header:1},this._state),this._intro=!0,this._slotted=e.slots||{},this._fragment=(n=this,s=this._state,c=n._slotted.default,{c(){(l=p("tr")).className=d="prom-list-element "+s.listElementClasses},m(e,t){o(e,l,t),c&&r(l,c)},p(e,t){e.listElementClasses&&d!==(d="prom-list-element "+t.listElementClasses)&&(l.className=d)},d(e){e&&i(l),c&&a(l,c)}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function Vt(e,t){var n,s,a,c,u,m=e._slotted.data,v=e._slotted["header-data"];return{c(){n=p("td"),a=h("\n        "),n.className=u="prom-cell__data "+t.classes},m(e,t){o(e,n,t),m&&(r(n,m),r(n,s||(s=f()))),r(n,a),v&&(r(n,c||(c=f())),r(n,v))},p(e,t){e.classes&&u!==(u="prom-cell__data "+t.classes)&&(n.className=u)},d(e){e&&i(n),m&&d(s,m),v&&l(c,v)}}}function Gt(e,t){var n,s,a,c,u,m=e._slotted.header,v=e._slotted["header-data"];return{c(){n=p("th"),a=h("\n        "),n.className=u="prom-cell__header "+t.classes,n.scope="col"},m(e,t){o(e,n,t),m&&(r(n,m),r(n,s||(s=f()))),r(n,a),v&&(r(n,c||(c=f())),r(n,v))},p(e,t){e.classes&&u!==(u="prom-cell__header "+t.classes)&&(n.className=u)},d(e){e&&i(n),m&&d(s,m),v&&l(c,v)}}}function Wt(e){O(this,e),this._state=t({header:!1,type:void 0,priority:1},e.data),this._recompute({type:1,priority:1,size:1},this._state),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){var n;function r(e){return e.header?Gt:Vt}var s=r(t),a=s(e,t);return{c(){a.c(),n=f()},m(e,t){a.m(e,t),o(e,n,t)},p(t,o){s===(s=r(o))&&a?a.p(t,o):(a.d(1),(a=s(e,o)).c(),a.m(n.parentNode,n))},d(e){a.d(e),e&&i(n)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function Kt(e){var n,o,i,s,a,l,d,c,f,m,v,y,b,w,x;O(this,e),this._state=t({text:"",detail:"",textStyle:"plain",header:!1,priority:1},e.data),this._recompute({headerHidden:1},this._state),this._intro=!0,this._fragment=(n=this,o=this._state,w={header:o.header,priority:o.priority,type:"text"},x=new Wt({root:n.root,store:n.store,slots:{default:u(),data:u(),header:u()},data:w}),{c(){i=p("span"),s=p("span"),a=h(o.text),l=h("\n    "),d=p("span"),c=p("span"),f=h(o.text),v=h("\n        "),y=p("span"),b=h(o.detail),x._fragment.c(),s.className=o.headerTextClass,g(i,"slot","header"),c.className=m="prom-text-cell--"+o.textStyle,g(d,"slot","data")},m(e,t){r(x._slotted.header,i),r(i,s),r(s,a),r(x._slotted.default,l),r(x._slotted.data,d),r(d,c),r(c,f),r(d,v),r(d,y),r(y,b),x._mount(e,t)},p(e,t){e.text&&_(a,t.text),e.headerTextClass&&(s.className=t.headerTextClass),e.text&&_(f,t.text),e.textStyle&&m!==(m="prom-text-cell--"+t.textStyle)&&(c.className=m),e.detail&&_(b,t.detail);var n={};e.header&&(n.header=t.header),e.priority&&(n.priority=t.priority),x._set(n)},d(e){x.destroy(e)}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),S(this))}function Jt(e,t,n){var r=Object.create(e);return r.file=t[n],r}function Qt(e,t){var n={text:t.$i18n.fileInProgress,textStyle:"neutral"},r=new Kt({root:e.root,store:e.store,data:n});return{c(){r._fragment.c()},m(e,t){r._mount(e,t)},p(e,t){var n={};e.$i18n&&(n.text=t.$i18n.fileInProgress),r._set(n)},d(e){r.destroy(e)}}}function Xt(e,t){var n={text:t.$i18n.fileAdded,textStyle:"status-positive"},r=new Kt({root:e.root,store:e.store,data:n});return{c(){r._fragment.c()},m(e,t){r._mount(e,t)},p(e,t){var n={};e.$i18n&&(n.text=t.$i18n.fileAdded),r._set(n)},d(e){r.destroy(e)}}}function Yt(e,t){var n={text:t.$i18n[t.file.error+"Error"],textStyle:"status-negative"},r=new Kt({root:e.root,store:e.store,data:n});return{c(){r._fragment.c()},m(e,t){r._mount(e,t)},p(e,t){var n={};(e.$i18n||e.files)&&(n.text=t.$i18n[t.file.error+"Error"]),r._set(n)},d(e){r.destroy(e)}}}function Zt(e,t){var n,o,i={text:t.file.name,textStyle:"title"},s=new Kt({root:e.root,store:e.store,data:i});function a(e){return e.file.error?Yt:e.file.success?Xt:Qt}var l=a(t),d=l(e,t),c=new zt({root:e.root,store:e.store,slots:{default:u()},data:{checkOnClick:!1}});return{c(){s._fragment.c(),n=h("\r\n                        "),d.c(),o=h("\r\n                    "),c._fragment.c()},m(e,t){s._mount(c._slotted.default,null),r(c._slotted.default,n),d.m(c._slotted.default,null),r(c._slotted.default,o),c._mount(e,t)},p(t,n){var r={};t.files&&(r.text=n.file.name),s._set(r),l===(l=a(n))&&d?d.p(t,n):(d.d(1),(d=l(e,n)).c(),d.m(o.parentNode,o))},d(e){s.destroy(),d.d(),c.destroy(e)}}}function en(e){O(this,e),this.refs={},this._state=t(this.store._init(["i18n"]),e.data),this.store._add(this,["i18n"]),this._recompute({$i18n:1},this._state),this._intro=!0,this._handlers.destroy=[T],this._fragment=function(e,t){for(var n,o,i,s,a,l={text:t.$i18n.fileName,header:!0},d=new Kt({root:e.root,store:e.store,data:l}),f={text:t.$i18n.uploadResult,header:!0},m=new Kt({root:e.root,store:e.store,data:f}),v=new zt({root:e.root,store:e.store,slots:{default:u()},data:{header:!0}}),_=t.files,y=[],b=0;b<_.length;b+=1)y[b]=Zt(e,Jt(t,_,b));var w=new qt({root:e.root,store:e.store,slots:{default:u(),body:u(),header:u()}}),x={$i18n:t.modalTranslations,heading:t.$i18n.failedAddModalTitle,closeable:!0},C=new Bt({root:e.root,store:e.store,slots:{default:u(),body:u()},data:x});return C.on("modalClosed",(function(t){e.fire("modalClosed",t)})),e.refs.modal=C,{c(){n=p("div"),o=p("thead"),d._fragment.c(),i=h("\r\n                    "),m._fragment.c(),v._fragment.c(),s=h("\r\n\r\n            "),a=p("tbody");for(var e=0;e<y.length;e+=1)y[e].c();w._fragment.c(),C._fragment.c(),g(o,"slot","header"),g(a,"slot","body"),g(n,"slot","body")},m(e,t){r(C._slotted.body,n),r(w._slotted.header,o),d._mount(v._slotted.default,null),r(v._slotted.default,i),m._mount(v._slotted.default,null),v._mount(o,null),r(w._slotted.default,s),r(w._slotted.body,a);for(var l=0;l<y.length;l+=1)y[l].m(a,null);w._mount(n,null),C._mount(e,t)},p(t,n){var r={};t.$i18n&&(r.text=n.$i18n.fileName),d._set(r);var o={};if(t.$i18n&&(o.text=n.$i18n.uploadResult),m._set(o),t.files||t.$i18n){_=n.files;for(var i=0;i<_.length;i+=1){var s=Jt(n,_,i);y[i]?y[i].p(t,s):(y[i]=Zt(e,s),y[i].c(),y[i].m(a,null))}for(;i<y.length;i+=1)y[i].d(1);y.length=_.length}var l={};t.modalTranslations&&(l.$i18n=n.modalTranslations),t.$i18n&&(l.heading=n.$i18n.failedAddModalTitle),C._set(l)},d(t){d.destroy(),m.destroy(),v.destroy(),c(y,t),w.destroy(),C.destroy(t),e.refs.modal===C&&(e.refs.modal=null)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),S(this))}t(Bt.prototype,F),t(Bt.prototype,At),Bt.prototype._recompute=function(e,t){(e.heading||e.hideHeader)&&this._differs(t.heading,t.heading=function(e){var{heading:t,hideHeader:n}=e;return n||t&&"string"==typeof t||console.warn("`heading` must be supplied or `hideHeader` must be true"),t}(t))&&(e.heading=!0),e.role&&this._differs(t.role,t.role=function(e){var{role:t}=e;return["dialog","alertdialog"].indexOf(t)>=0?t:"dialog"}(t))&&(e.role=!0),e.i18n&&this._differs(t.translations,t.translations=function(e){var{i18n:t}=e;return Ot(Ot({},Tt),t)}(t))&&(e.translations=!0),e.id&&(this._differs(t.headerClientId,t.headerClientId=function(e){var{id:t}=e;return"".concat(t,"__label")}(t))&&(e.headerClientId=!0),this._differs(t.bodyClientId,t.bodyClientId=function(e){var{id:t}=e;return"".concat(t,"__body")}(t))&&(e.bodyClientId=!0))},t(qt.prototype,F),t(zt.prototype,F),zt.prototype._recompute=function(e,t){(e.checked||e.header)&&this._differs(t.listElementClasses,t.listElementClasses=function(e){var{checked:t,header:n}=e;return[t?"prom-list-element--checked":"",n?"prom-list-element--header":""].join(" ")}(t))&&(e.listElementClasses=!0)},t(Wt.prototype,F),Wt.prototype._recompute=function(e,t){(e.type||e.priority||e.size)&&this._differs(t.classes,t.classes=function(e){var{type:t,priority:n,size:r}=e;return["prom-cell","prom-cell__".concat(t),"prom-cell--priority-".concat(n)].join(" ")}(t))&&(e.classes=!0)},t(Kt.prototype,F),Kt.prototype._recompute=function(e,t){e.headerHidden&&this._differs(t.headerTextClass,t.headerTextClass=function(e){var{headerHidden:t}=e;return"".concat(t?"prom-text-cell--header-hidden":"")}(t))&&(e.headerTextClass=!0)},t(en.prototype,F),en.prototype._recompute=function(e,t){e.$i18n&&this._differs(t.modalTranslations,t.modalTranslations=function(e){var{$i18n:t}=e;return{CLOSE:t.close}}(t))&&(e.modalTranslations=!0)};var tn={toggleModal(){var{showInfoModal:e}=this.get();this.set({showInfoModal:!e}),e?document.querySelector(".contentarea-feedback__more-info").focus():this.refs.resultsModal.refs.modal.refs.close.focus()}};function nn(e,t){var n={files:t.$filesStatus},r=new en({root:e.root,store:e.store,data:n});return r.on("modalClosed",(function(t){e.toggleModal()})),e.refs.resultsModal=r,{c(){r._fragment.c()},m(e,t){r._mount(e,t)},p(e,t){var n={};e.$filesStatus&&(n.files=t.$filesStatus),r._set(n)},d(t){r.destroy(t),e.refs.resultsModal===r&&(e.refs.resultsModal=null)}}}function rn(e){O(this,e),this.refs={},this._state=t(this.store._init(["filesStatus","resourcesUrl","singleResourceUrl"]),e.data),this.store._add(this,["filesStatus","resourcesUrl","singleResourceUrl"]),this._intro=!0,this._handlers.destroy=[T],this._fragment=function(e,t){var n,s,a={files:t.$filesStatus,resourcesUrl:t.$resourcesUrl,singleResourceUrl:t.$singleResourceUrl},l=new Ct({root:e.root,store:e.store,data:a});l.on("showMoreInfo",(function(t){e.toggleModal()})),e.refs.filesBanner=l;var d=t.showInfoModal&&nn(e,t);return{c(){n=p("div"),l._fragment.c(),s=h("\r\n\r\n    "),d&&d.c(),n.className="contentarea-feedback"},m(e,t){o(e,n,t),l._mount(n,null),r(n,s),d&&d.m(n,null)},p(t,r){var o={};t.$filesStatus&&(o.files=r.$filesStatus),t.$resourcesUrl&&(o.resourcesUrl=r.$resourcesUrl),t.$singleResourceUrl&&(o.singleResourceUrl=r.$singleResourceUrl),l._set(o),r.showInfoModal?d?d.p(t,r):((d=nn(e,r)).c(),d.m(n,null)):d&&(d.d(1),d=null)},d(t){t&&i(n),l.destroy(),e.refs.filesBanner===l&&(e.refs.filesBanner=null),d&&d.d()}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),S(this))}function on(e,t,n){var r=window.screenX+window.innerWidth/2-t/2,o=window.screenY+window.innerHeight/2-n/2,i=window.open(e,"","top=".concat(o,",left=").concat(r,",height=").concat(n,",width=").concat(t,",location=no,resizable=yes,toolbar=no,scrollbars=yes,status=no,menubar=no"));return i.focus&&i.focus(),i}t(rn.prototype,F),t(rn.prototype,tn);var sn=0,an=1,ln=2;function dn(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:660,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:550,s=new URL(e),a=qe();return s.searchParams.append("target",a),s.searchParams.append("mode",JSON.stringify({allowToSelectMultipleFiles:n,allowedFileExtensions:r,allowCollaboration:!1,purpose:t})),on(s.href,o,i),new Promise((e,t)=>{window.addEventListener("message",t=>{t.data&&t.data.target===a&&e(t.data)})})}var cn=2,un=4;class pn{constructor(e){var{downloadUrl:t,editUrl:n,id:r,isRegisteredWithCasper:o,isSupportedByCasper:i,isTemplate:s,mimeType:a,name:l,oAuthContext:d,sourceType:c,viewUrl:u}=e;this.downloadUrl=t,this.editUrl=n,this.id=r,this.isRegisteredWithCasper=o,this.isSupportedByCasper=i,this.isTemplate=s,this.mimeType=a,this.name=l,this.oAuthContext=d,this.sourceType=c,this.viewUrl=u}static fromGoogle(e,t){var n="https://drive.google.com/uc?export=download&id={fileId}".replace("{fileId}",e.id);return new pn({downloadUrl:n,editUrl:e.url,id:e.id,isRegisteredWithCasper:!1,isSupportedByCasper:!0,isTemplate:!1,mimeType:e.mimeType,name:e.name,oAuthContext:t,sourceType:cn,viewUrl:e.url})}static fromOneDrive(e,t){return new pn({downloadUrl:null,editUrl:e.url,id:e.id,isRegisteredWithCasper:!1,isSupportedByCasper:!0,isTemplate:!1,mimeType:e.mimeType,name:e.name,oAuthContext:t,sourceType:e.sourceType,viewUrl:e.url})}}var hn={unknown:"unknown",tooLarge:"tooLarge",tooSmall:"tooSmall",nameTooLong:"nameTooLong",invalidFileName:"invalidFileName",invalidExtension:"invalidExtension"};function fn(e,t,n,r){if(e.length>r)return{valid:!1,error:hn.nameTooLong};if(""===e.trim())return{valid:!1,error:hn.invalidFileName};for(var o of n)if(-1!==e.indexOf(o))return{valid:!1,error:hn.invalidFileName};var i=e.split(".").pop().toLowerCase();return-1!==t.indexOf(i)?{valid:!1,error:hn.invalidExtension}:{valid:!0,error:void 0}}class mn{constructor(e){var{name:t,elementId:n,cloudId:r,success:o,error:i,fileRepoFile:s,cloudFile:a}=e;this.name=t,this.elementId=n,this.cloudId=r,this.success=o,this.error=i,this.fileRepoFile=s,this.cloudFile=a}static fromApi(e){var t=new mn({name:e.Title,elementId:e.ElementId,cloudId:e.CloudId,success:e.Success,error:void 0});if(!e.Success){var n=e.ErrorCodes&&e.ErrorCodes.length?e.ErrorCodes[0]:void 0,r={1:hn.invalidExtension,2:hn.invalidFileName,3:hn.tooLarge,10:hn.invalidFileName,11:hn.invalidFileName,14:hn.nameTooLong,17:hn.invalidFileType,28:hn.invalidFileType}[n];t.error=void 0===r?hn.unknown:r}return t}}class vn{constructor(e){var{id:t,name:n,mimeType:r,signedFileRepoId:o,signature:i,error:s}=e;this.id=t,this.name=n,this.sourceType=un,this.mimeType=r,this.signedFileRepoId=o,this.signature=i,this.error=s}static fromFileRepo(e){var t=null;if(e.error){var n={InvalidPathCharacters:hn.invalidFileName,ExtensionNotAllowed:hn.invalidExtension,FileSizeTooLarge:hn.tooLarge,FileSizeTooSmall:hn.tooSmall}[e.error];t=void 0===n?"unknown":n}return new vn({id:e.fileGuid,name:e.fileName,mimeType:e.mimeType,signedFileRepoId:e.signedFileRepoId,signature:e.signedGuid,error:t})}}function gn(e,t,n,r,o,i){var s={Url:t,Name:n,Size:r,SourceType:o};return D(i.endpoint,s,{headers:{[i.authorizationHeaderKey]:"Bearer "+i.token,[i.validationHeaderKey]:i.validationHeader,[i.publicUploadFromExternalSourceHeaderKey]:i.publicUploadFromExternalSourceHeader,Accept:"application/json, text/javascript, */*; q=0.01"}}).then(t=>{var r=vn.fromFileRepo(t);return t.error?Ot(Ot({},r),{},{name:n,originalFileId:e,sourceType:o}):Ot(Ot({},r),{},{originalFileId:e,sourceType:o})}).catch(t=>({name:n,originalFileId:e,sourceType:o,error:hn.unknown}))}function _n(e,t,n,r,o,i,s,a){return function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:660,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:550;return dn(e,an,t,n,r,o)}(new URL(n,window.location.origin).href,r).then(n=>{var{oAuthContext:r,files:l}=n,d=l.map(e=>pn.fromGoogle(e,r));return yn(e,t,d,o,i,s,a)})}function yn(e,t,n,r,o,i,s){return function(e,t,n,r,o){var i=r.replace("{courseId}",e).replace("{folderId}",t),s={[o.headerName]:o.headerValue};return D(i,n,{headers:s}).then(e=>e.map(e=>mn.fromApi(e)))}(e,t,n=n.filter(e=>{s(e);var t=fn(e.name,r.invalidExtensions,[],r.maxFileNameLength);return t.valid||s({name:e.name,error:t.error}),t.valid}),i,o).then(e=>(e.forEach(e=>{s(e)}),e.forEach(e=>{var t=n.find(t=>t.id===e.cloudId);t&&(e.cloudFile=t)}),e)).catch(e=>{throw n.forEach(e=>{s({name:e.name,error:hn.unknown})}),e})}function bn(e,t,n,r,o,i,s,a){var l=[];n.forEach(e=>a(e)),n=n.filter(e=>{var t=function(e,t){var{invalidExtensions:n,invalidFileNameCharacters:r,maxFileNameLength:o,maxFileSizeBytes:i}=t;return e.size>i?{valid:!1,error:hn.tooLarge}:e.size<=0?{valid:!1,error:hn.tooSmall}:fn(e.name,n,r,o)}(e,r);return t.valid||a({name:e.name,error:t.error}),t.valid});var d=function r(d){if(0!==n.length){var c=n.pop();i(c).then(n=>{if(n.error)return a(Ot(Ot({},n),{},{name:c.name})),void r(d);(function(e,t,n,r,o){return D(r.replace("{courseId}",e).replace("{folderId}",t),n,{headers:{[o.headerName]:o.headerValue}}).then(e=>e.map(e=>mn.fromApi(e)))})(e,t,[n],s,o).then(e=>{e.forEach(e=>{a(e),e.fileRepoFile=n,l.push(e)}),r(d)})}).catch(()=>{a({name:c.name,error:hn.unknown}),r(d)})}else d()},c=new Promise(e=>d(e)),u=new Promise(e=>d(e));return Promise.all([c,u]).then(()=>l)}function wn(e,t,n,r,o,i,s,a){return bn(e,t,n,r,o,e=>xn(e,i).then(t=>function(e,t,n){n=n||e.name;var r=new FormData;return r.append("file",e,n),fetch(t.endpoint,{body:r,method:"POST",mode:"cors",headers:{[t.authorizationHeaderKey]:"Bearer "+t.token,[t.validationHeaderKey]:t.validationHeader,[t.publicUploadHeaderKey]:t.publicUploadHeader,Accept:"application/json, text/javascript, */*; q=0.01"}}).then(M).then(e=>e.error?Object.assign({name:n},vn.fromFileRepo(e)):vn.fromFileRepo(e)).catch(e=>({name:n,error:hn.unknown}))}(e,t)),s,a)}function xn(e,t){return function(e,t,n){return R(t.replace("~","")+"?FileName="+encodeURIComponent(e.name)).then(e=>e).catch(()=>n)}(e,t.tokenProviderEndpoint,t.token).then(e=>(t.token=e,t))}var Cn="/restapi/personal/courses/measurefilelinkingkpi/v1",Sn="/restapi/personal/courses/measurefileuploadkpi/v1";function kn(e,t,n){n&&n.length>0&&function(e,t,n){D(e,n,{headers:{[t.headerName]:t.headerValue}})}(e,t,n)}function On(e){var{filesStatus:t}=P.get(),n=!1;t=t.map(t=>t.name===e.name?(n=!0,e):t),n||t.push(e),P.set({filesStatus:t})}function In(){P.set({apiError:!1});var{filesStatus:e}=P.get();e.every(e=>e.error||e.success)&&P.set({filesStatus:[]})}function En(e){In();var{courseId:t,folderId:n,cloudServiceSettings:r,fileValidationSettings:o,antiForgeryHeaderSettings:i,fileRepoSettings:s,enableUploadFromOneDrive:a,enableLinkingFromOneDrive:l}=P.get();(function(e,t,n,r,o,i,s,a,l,d){var c=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],u=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],p=new URL(n,window.location.origin),h=ln;return!c&&u?h=an:c&&!u&&(h=sn),dn(p.href,h,r).then(n=>{var{oAuthContext:r,files:c,isLinkMode:u}=n;if(u){var p=c.map(e=>pn.fromOneDrive(e,r));return yn(e,t,p,o,i,a,d)}return bn(e,t,c,o,i,e=>xn(e,s).then(t=>gn(e.id,e.url,e.name,e.size,e.sourceType,t)),l,d)})})(t,n,r.OneDrive.pickerUrl,!0,o,i,s,z.addCloudFilesToCourseFolder,z.addFileRepoFilesToCourseFolder,On,a,l).then(t=>Fn(t,e)).catch(Ln)}function Tn(e,t,n){var{recentCloudFiles:r,courseId:o,folderId:i,fileValidationSettings:s,antiForgeryHeaderSettings:a}=P.get();(function(e,t,n,r,o,i,s){return yn(e,t,[new pn({downloadUrl:null,editUrl:n.viewUrl,id:n.id,isRegisteredWithCasper:!1,isSupportedByCasper:!0,isTemplate:!1,mimeType:n.mimeType,name:n.name,oAuthContext:n.oAuthContext,sourceType:n.sourceType,viewUrl:n.viewUrl})],r,o,i,s)})(o,i,r[t].find(t=>t.id===e),s,a,z.addCloudFilesToCourseFolder,On).then(e=>Fn(e,n)).catch(Ln)}function Fn(e,t){document.querySelector(G.quickAddButton).focus(),t&&t(),function(e,t){var n=t.filter(e=>e.cloudFile).map(e=>e.cloudFile),r=t.filter(e=>e.fileRepoFile).map(e=>e.fileRepoFile);kn(Cn,e,n),kn(Sn,e,r)}(P.get().antiForgeryHeaderSettings,e)}function Ln(e){console.error(e),P.set({apiError:!0})}function Nn(e){var t=P.get().kpis[e];t&&function(e,t,n){var{antiForgeryHeaderSettings:r,kpiUrl:o}=P.get();D(o,{measureSection:e,measurement:t,measureContext:n},{headers:{[r.headerName]:r.headerValue}})}(t.measureSection,t.measurement,t.measureContext)}document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("contentarea-bannerfeedback"),t=document.getElementById("contentarea-actionlist");if(!t)return;var n=new at({target:t,store:P}),r=()=>{var e=document.querySelector("#link-resources");e.classList.contains("active")&&e.click()};n.on("addFrom",e=>{switch(e.source){case"OneDrive":En(r);break;case"GoogleDrive":!function(e){In();var{courseId:t,folderId:n,cloudServiceSettings:r,fileValidationSettings:o,antiForgeryHeaderSettings:i}=P.get();_n(t,n,r.GoogleDrive.pickerUrl,!0,o,i,z.addCloudFilesToCourseFolder,On).then(t=>Fn(t,e)).catch(Ln)}(r);break;case"RecentGoogleDrive":Tn(e.elementId,e.cloudProvider,r);break;case"Computer":!function(e,t){In();var{courseId:n,folderId:r,fileValidationSettings:o,fileRepoSettings:i,antiForgeryHeaderSettings:s}=P.get();wn(n,r,e,o,s,i,z.addFileRepoFilesToCourseFolder,On).then(e=>Fn(e,t)).catch(Ln)}(e.files,r)}}),n.on("kpiEvent",Nn);new rn({target:e,store:P});window.store=P}));
//# sourceMappingURL=index.bundle.js.map
