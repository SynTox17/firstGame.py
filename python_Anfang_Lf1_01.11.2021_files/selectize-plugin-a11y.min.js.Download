Selectize.define("selectize-plugin-a11y", function (t) { var i, e, a = this; void 0 === a.accessibility && (a.accessibility = {}), a.accessibility.helpers = { randomId: function (t) { for (var i = "", e = t || 10, a = "abcdefghijklmnopqrstuvwxyz0123456789", s = a.length, r = 0; r < e; r++)i += a[Math.floor(s * Math.random())]; return i } }, a.accessibility.liveRegion = { $region: "", speak: function (t) { var i = $("<div>" + t + "</div>"); this.$region.html(i) }, domListener: function () { var t = new MutationObserver(function (t) { t.forEach(function (t) { var i = $(t.target); i.hasClass("items") ? i.hasClass("dropdown-active") ? a.$control_input.attr("aria-expanded", "true") : (a.$control_input.attr("aria-expanded", "false"), a.$control_input.removeAttr("aria-activedescendant")) : i.hasClass("active") && i.attr("data-value") && (a.$control_input.attr("aria-activedescendant", i.attr("id")), a.accessibility.liveRegion.speak(i.text(), 500)) }) }); t.observe(a.$dropdown[0], { attributes: !0, attributeFilter: ["class"], subtree: !0, attributeOldValue: !0 }), t.observe(a.$control[0], { attributes: !0, attributeFilter: ["class"] }), t.observe(a.$control_input[0], { attributes: !0, attributeFilter: ["value"] }) }, setAttributes: function () { this.$region.attr({ "aria-live": "assertive", role: "log", "aria-relevant": "additions", "aria-atomic": "true" }) }, setStyles: function () { this.$region.css({ position: "absolute", width: "1px", height: "1px", "margin-top": "-1px", top: "-1px", clip: "rect(1px, 1px, 1px, 1px)", overflow: "hidden" }) }, init: function () { this.$region = $("<div>"), this.setAttributes(), this.setStyles(), $("body").append(this.$region), this.domListener() } }, this.setup = (i = a.setup, function () { i.apply(this, arguments), a.accessibility.helpers.randomId(); var t = a.accessibility.helpers.randomId(); a.$control.on("keydown", function (t) { 13 === t.keyCode && $(this).click() }), a.$control_input.attr({ role: "combobox", "aria-expanded": "false", haspopup: "listbox", "aria-owns": t, "aria-label": a.$wrapper.closest("[data-accessibility-selectize-label]").attr("data-accessibility-selectize-label") }), a.$dropdown_content.attr({ role: "listbox", id: t }), a.accessibility.liveRegion.init() }), this.destroy = (e = a.destroy, function () { return a.accessibility.liveRegion.$region.remove(), e.apply(this, arguments) }) });