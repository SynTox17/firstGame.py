!function(B,u){"object"==typeof exports&&"undefined"!=typeof module?module.exports=u():"function"==typeof define&&define.amd?define(u):B.ES6Promise=u()}(this,function(){function B(){return function(){return process.nextTick(l)}}function u(){return"undefined"!=typeof C?function(){C(l)}:D()}function U(){var a=0,b=new L(l),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function V(){var a=new MessageChannel;return a.port1.onmessage=l,function(){return a.port2.postMessage(0)}}
function D(){var a=setTimeout;return function(){return a(l,1)}}function l(){for(var a=0;a<m;a+=2)(0,p[a])(p[a+1]),p[a]=void 0,p[a+1]=void 0;m=0}function W(){try{var a=require("vertx");return C=a.runOnLoop||a.runOnContext,u()}catch(b){return D()}}function E(a,b){var c=arguments,d=this,g=new this.constructor(q);void 0===g[z]&&M(g);var e=d._state;return e?!function(){var a=c[e-1];k(function(){return N(e,g,a,d._result)})}():F(d,g,a,b),g}function G(a){if(a&&"object"==typeof a&&a.constructor===this)return a;
var b=new this(q);return v(b,a),b}function q(){}function O(a){try{return a.then}catch(b){return w.error=b,w}}function X(a,b,c,d){try{a.call(b,c,d)}catch(g){return g}}function Y(a,b,c){k(function(a){var d=!1,e=X(c,b,function(c){d||(d=!0,b!==c?v(a,c):n(a,c))},function(b){d||(d=!0,h(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,h(a,e))},a)}function Z(a,b){b._state===x?n(a,b._result):b._state===r?h(a,b._result):F(b,void 0,function(b){return v(a,b)},function(b){return h(a,b)})}function P(a,
b,c){b.constructor===a.constructor&&c===E&&b.constructor.resolve===G?Z(a,b):c===w?(h(a,w.error),w.error=null):void 0===c?n(a,b):"function"==typeof c?Y(a,b,c):n(a,b)}function v(a,b){a===b?h(a,new TypeError("You cannot resolve a promise with itself")):"function"==typeof b||"object"==typeof b&&null!==b?P(a,b,O(b)):n(a,b)}function aa(a){a._onerror&&a._onerror(a._result);H(a)}function n(a,b){a._state===t&&(a._result=b,a._state=x,0!==a._subscribers.length&&k(H,a))}function h(a,b){a._state===t&&(a._state=
r,a._result=b,k(aa,a))}function F(a,b,c,d){var g=a._subscribers,e=g.length;a._onerror=null;g[e]=b;g[e+x]=c;g[e+r]=d;0===e&&a._state&&k(H,a)}function H(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,g,e=a._result,f=0;f<b.length;f+=3)d=b[f],g=b[f+c],d?N(c,d,g,e):g(e);a._subscribers.length=0}}function Q(){this.error=null}function N(a,b,c,d){var g="function"==typeof c,e=void 0,f=void 0,k=void 0,l=void 0;if(g){try{var m=c(d)}catch(ba){m=(I.error=ba,I)}if(e=m,e===I?(l=!0,f=e.error,e.error=
null):k=!0,b===e)return void h(b,new TypeError("A promises callback cannot return that same promise."))}else e=d,k=!0;b._state!==t||(g&&k?v(b,e):l?h(b,f):a===x?n(b,e):a===r&&h(b,e))}function ca(a,b){try{b(function(b){v(a,b)},function(b){h(a,b)})}catch(c){h(a,c)}}function M(a){a[z]=R++;a._state=void 0;a._result=void 0;a._subscribers=[]}function y(a,b){this._instanceConstructor=a;this.promise=new a(q);this.promise[z]||M(this.promise);S(b)?(this._input=b,this.length=b.length,this._remaining=b.length,
this._result=Array(this.length),0===this.length?n(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&n(this.promise,this._result))):h(this.promise,Error("Array Methods must be provided an Array"))}function f(a){this[z]=R++;this._result=this._state=void 0;this._subscribers=[];if(q!==a){if("function"!=typeof a)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof f)ca(this,a);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}var J=void 0,S=J=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},m=0,C=void 0,K=void 0,k=function(a,b){p[m]=a;p[m+1]=b;m+=2;2===m&&(K?K(l):T())},A=(J="undefined"!=typeof window?window:void 0)||{},L=A.MutationObserver||A.WebKitMutationObserver;A="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process);var da="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,
p=Array(1E3),T=void 0;T=A?B():L?U():da?V():void 0===J&&"function"==typeof require?W():D();var z=Math.random().toString(36).substring(16),t=void 0,x=1,r=2,w=new Q,I=new Q,R=0;return y.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===t&&c<a;c++)this._eachEntry(b[c],c)},y.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;d===G?(d=O(a),d===E&&a._state!==t?this._settledAt(a._state,b,a._result):"function"!=typeof d?(this._remaining--,this._result[b]=
a):c===f?(c=new c(q),P(c,a,d),this._willSettleAt(c,b)):this._willSettleAt(new c(function(b){return b(a)}),b)):this._willSettleAt(d(a),b)},y.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===t&&(this._remaining--,a===r?h(d,c):this._result[b]=c);0===this._remaining&&n(d,this._result)},y.prototype._willSettleAt=function(a,b){var c=this;F(a,void 0,function(a){return c._settledAt(x,b,a)},function(a){return c._settledAt(r,b,a)})},f.all=function(a){return(new y(this,a)).promise},f.race=
function(a){var b=this;return new b(S(a)?function(c,d){for(var f=a.length,e=0;e<f;e++)b.resolve(a[e]).then(c,d)}:function(a,b){return b(new TypeError("You must pass an array to race."))})},f.resolve=G,f.reject=function(a){var b=new this(q);return h(b,a),b},f._setScheduler=function(a){K=a},f._setAsap=function(a){k=a},f._asap=k,f.prototype={constructor:f,then:E,"catch":function(a){return this.then(null,a)}},f.polyfill=function(){var a=void 0;if("undefined"!=typeof global)a=global;else if("undefined"!=
typeof self)a=self;else try{a=Function("return this")()}catch(d){throw Error("polyfill failed because global object is unavailable in this environment");}var b=a.Promise;if(b){var c=null;try{c=Object.prototype.toString.call(b.resolve())}catch(d){}if("[object Promise]"===c&&!b.cast)return}a.Promise=f},f.Promise=f,f.polyfill(),f});
