/*

 jPlayer Plugin for jQuery JavaScript Library
 http://www.jplayer.org

 Copyright (c) 2009 - 2014 Happyworm Ltd
 Licensed under the MIT license.
 http://opensource.org/licenses/MIT

 Author: Mark J Panaghiston
 Version: 2.9.2
 Date: 14th December 2014

// jQuery Alert Dialogs Plugin
//
// Version 1.1
//
// Cory S.N. LaViska
// A Beautiful Site (http://abeautifulsite.net/)
// 14 May 2009
//
// Visit http://abeautifulsite.net/notebook/87 for more information
//
// Usage:
//      jAlert( message, [title, callback] )
//      jConfirm( message, [title, callback] )
//      jPrompt( message, [value, title, callback] )
// 
// History:
//
//      1.00 - Released (29 December 2008)
//
//      1.01 - Fixed bug where unbinding would destroy all resize events
//
// License:
// 
// This plugin is dual-licensed under the GNU General Public License and the MIT License and
// is copyright 2008 A Beautiful Site, LLC. 
// https://github.com/aurels/jquery.alerts
//

 Auto-growing textareas; technique ripped from Facebook
 https://github.com/jaz303/jquery-grab-bag/blob/f1a3cc1e86cbb248bcb41391d6eff115b1be6d89/javascripts/jquery.autogrow-textarea.js
 jQuery-ajaxTransport-XDomainRequest - v1.0.2 - 2014-05-02
 https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 Copyright (c) 2014 Jason Moon (@JSONMOON)
 Licensed MIT (/blob/master/LICENSE.txt)
 File: OkOrCancel.js

 A client part of the OkOrCancel control

 Dependencies :
   - jQuery 1.7.1 or higher (http://jquery.com/)
   - CommonFunctions.js

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,e,d){b!=Array.prototype&&b!=Object.prototype&&(b[e]=d.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var b=0;return function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+b++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var e=0;return $jscomp.iteratorPrototype(function(){return e<b.length?{done:!1,value:b[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.findInternal=function(b,e,d){b instanceof String&&(b=String(b));for(var c=b.length,a=0;a<c;a++){var f=b[a];if(e.call(d,f,a,b))return{i:a,v:f}}return{i:-1,v:void 0}};
$jscomp.polyfill=function(b,e,d,c){if(e){d=$jscomp.global;b=b.split(".");for(c=0;c<b.length-1;c++){var a=b[c];a in d||(d[a]={});d=d[a]}b=b[b.length-1];c=d[b];e=e(c);e!=c&&null!=e&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,d){return $jscomp.findInternal(this,b,d).v}},"es6","es3");
$jscomp.iteratorFromArray=function(b,e){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var d=0,c={next:function(){if(d<b.length){var a=d++;return{value:e(a,b[a]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
$jscomp.checkStringArgs=function(b,e,d){if(null==b)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return b+""};
$jscomp.polyfill("String.prototype.repeat",function(b){return b?b:function(b){var d=$jscomp.checkStringArgs(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var c="";b;)if(b&1&&(c+=d),b>>>=1)d+=d;return c}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b,d){return d})}},"es8","es3");$jscomp.owns=function(b,e){return Object.prototype.hasOwnProperty.call(b,e)};
$jscomp.polyfill("Object.assign",function(b){return b?b:function(b,d){for(var c=1;c<arguments.length;c++){var a=arguments[c];if(a)for(var f in a)$jscomp.owns(a,f)&&(b[f]=a[f])}return b}},"es6","es3");$jscomp.polyfill("String.prototype.endsWith",function(b){return b?b:function(b,d){var c=$jscomp.checkStringArgs(this,b,"endsWith");b+="";void 0===d&&(d=c.length);d=Math.max(0,Math.min(d|0,c.length));for(var a=b.length;0<a&&0<d;)if(c[--d]!=b[--a])return!1;return 0>=a}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var b={},e=Object.create(new $jscomp.global.Proxy(b,{get:function(d,c,a){return d==b&&"q"==c&&a==e}}));return!0===e.q}catch(d){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var e=b[Symbol.iterator];return e?e.call(b):$jscomp.arrayIterator(b)};
$jscomp.polyfill("WeakMap",function(b){function e(){if(!b||!Object.seal)return!1;try{var a=Object.seal({}),c=Object.seal({}),f=new b([[a,2],[c,3]]);if(2!=f.get(a)||3!=f.get(c))return!1;f.delete(a);f.set(c,4);return!f.has(a)&&4==f.get(c)}catch(m){return!1}}function d(c){$jscomp.owns(c,a)||$jscomp.defineProperty(c,a,{value:{}})}function c(a){var c=Object[a];c&&(Object[a]=function(a){d(a);return c(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(e())return b;
var a="$jscomp_hidden_"+Math.random();c("freeze");c("preventExtensions");c("seal");var f=0,g=function(a){this.id_=(f+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};g.prototype.set=function(c,f){d(c);if(!$jscomp.owns(c,a))throw Error("WeakMap key fail: "+c);c[a][this.id_]=f;return this};g.prototype.get=function(c){return $jscomp.owns(c,a)?c[a][this.id_]:void 0};g.prototype.has=
function(c){return $jscomp.owns(c,a)&&$jscomp.owns(c[a],this.id_)};g.prototype.delete=function(c){return $jscomp.owns(c,a)&&$jscomp.owns(c[a],this.id_)?delete c[a][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(b){function e(){if($jscomp.ASSUME_NO_NATIVE_MAP||!b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),c=new b($jscomp.makeIterator([[a,"s"]]));if("s"!=c.get(a)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var f=c.entries(),g=f.next();if(g.done||g.value[0]!=a||"s"!=g.value[1])return!1;g=f.next();return g.done||4!=g.value[0].x||"t"!=g.value[1]||!f.next().done?!1:!0}catch(q){return!1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&
$jscomp.ES6_CONFORMANCE)return b}else if(e())return b;$jscomp.initSymbol();$jscomp.initSymbolIterator();var d=new WeakMap,c=function(a){this.data_={};this.head_=g();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};c.prototype.set=function(c,f){var b=a(this,c);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=f:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:f},b.list.push(b.entry),this.head_.previous.next=
b.entry,this.head_.previous=b.entry,this.size++);return this};c.prototype.delete=function(c){c=a(this,c);return c.entry&&c.list?(c.list.splice(c.index,1),c.list.length||delete this.data_[c.id],c.entry.previous.next=c.entry.next,c.entry.next.previous=c.entry.previous,c.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};c.prototype.has=function(c){return!!a(this,c).entry};c.prototype.get=function(c){return(c=a(this,c).entry)&&
c.value};c.prototype.entries=function(){return f(this,function(a){return[a.key,a.value]})};c.prototype.keys=function(){return f(this,function(a){return a.key})};c.prototype.values=function(){return f(this,function(a){return a.value})};c.prototype.forEach=function(a,c){for(var f=this.entries(),b;!(b=f.next()).done;)b=b.value,a.call(c,b[1],b[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var a=function(a,c){var f=c&&typeof c;"object"==f||"function"==f?d.has(c)?f=d.get(c):(f=""+ ++h,d.set(c,
f)):f="p_"+c;var b=a.data_[f];if(b&&$jscomp.owns(a.data_,f))for(a=0;a<b.length;a++){var g=b[a];if(c!==c&&g.key!==g.key||c===g.key)return{id:f,list:b,index:a,entry:g}}return{id:f,list:b,index:-1,entry:void 0}},f=function(a,c){var f=a.head_;return $jscomp.iteratorPrototype(function(){if(f){for(;f.head!=a.head_;)f=f.previous;for(;f.next!=f.head;)return f=f.next,{done:!1,value:c(f)};f=null}return{done:!0,value:void 0}})},g=function(){var a={};return a.previous=a.next=a.head=a},h=0;return c},"es6","es3");
(function(b){"function"===typeof define&&define.amd?define(["jquery","jquery.ui.widget"],b):b(window.jQuery)})(function(b){b.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader);b.support.xhrFormDataFileUpload=!!window.FormData;b.propHooks.elements={get:function(e){return b.nodeName(e,"form")?b.grep(e.elements,function(d){return!b.nodeName(d,"input")||"file"!==d.type}):null}};b.widget("blueimp.fileupload",{options:{dropZone:b(document),pasteZone:b(document),fileInput:void 0,replaceFileInput:!0,
paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(b){return b.serializeArray()},add:function(b,d){d.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart",
"forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date;this.bitrate=this.loaded=0;this.getBitrate=function(b,d,c){var a=b-this.timestamp;if(!this.bitrate||!c||a>c)this.bitrate=1E3/a*(d-this.loaded)*8,this.loaded=d,this.timestamp=b;return this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&b.support.xhrFileUpload||b.support.xhrFormDataFileUpload)},_getFormData:function(e){if("function"===typeof e.formData)return e.formData(e.form);if(b.isArray(e.formData))return e.formData;
if(e.formData){var d=[];b.each(e.formData,function(c,a){d.push({name:c,value:a})});return d}return[]},_getTotal:function(e){var d=0;b.each(e,function(c,a){d+=a.size||1});return d},_onProgress:function(b,d){if(b.lengthComputable){var c=+new Date;if(!(d._time&&d.progressInterval&&c-d._time<d.progressInterval&&b.loaded!==b.total)){d._time=c;var a=d.total||this._getTotal(d.files);var f=parseInt(b.loaded/b.total*(d.chunkSize||a),10)+(d.uploadedBytes||0);this._loaded+=f-(d.loaded||d.uploadedBytes||0);d.lengthComputable=
!0;d.loaded=f;d.total=a;d.bitrate=d._bitrateTimer.getBitrate(c,f,d.bitrateInterval);this._trigger("progress",b,d);this._trigger("progressall",b,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(c,this._loaded,d.bitrateInterval)})}}},_initProgressListener:function(e){var d=this,c=e.xhr?e.xhr():b.ajaxSettings.xhr();c.upload&&(b(c.upload).bind("progress",function(a){var c=a.originalEvent;a.lengthComputable=c.lengthComputable;a.loaded=c.loaded;a.total=c.total;
d._onProgress(a,e)}),e.xhr=function(){return c})},_initXHRData:function(e){var d=e.files[0],c=e.multipart||!b.support.xhrFileUpload,a=e.paramName[0];e.headers=e.headers||{};e.contentRange&&(e.headers["Content-Range"]=e.contentRange);if(!c)e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(d.name)+'"',e.contentType=d.type,e.data=e.blob||d;else if(b.support.xhrFormDataFileUpload){if(e.postMessage){var f=this._getFormData(e);e.blob?f.push({name:a,value:e.blob}):b.each(e.files,function(c,
b){f.push({name:e.paramName[c]||a,value:b})})}else e.formData instanceof FormData?f=e.formData:(f=new FormData,b.each(this._getFormData(e),function(a,c){f.append(c.name,c.value)})),e.blob?(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(d.name)+'"',f.append(a,e.blob,d.name)):b.each(e.files,function(c,b){(window.Blob&&b instanceof Blob||window.File&&b instanceof File)&&f.append(e.paramName[c]||a,b,b.name)});e.data=f}e.blob=null},_initIframeSettings:function(e){e.dataType="iframe "+
(e.dataType||"");e.formData=this._getFormData(e);e.redirect&&b("<a></a>").prop("href",e.url).prop("host")!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(b){this._isXHRUpload(b)?(this._chunkedUpload(b,!0)||(b.data||this._initXHRData(b),this._initProgressListener(b)),b.postMessage&&(b.dataType="postmessage "+(b.dataType||""))):this._initIframeSettings(b,"iframe")},_getParamName:function(e){var d=b(e.fileInput),c=e.paramName;c?b.isArray(c)||
(c=[c]):(c=[],d.each(function(){var a=b(this),f=a.prop("name")||"files[]";for(a=(a.prop("files")||[1]).length;a;)c.push(f),--a}),c.length||(c=[d.prop("name")||"files[]"]));return c},_initFormSettings:function(e){e.form&&e.form.length||(e.form=b(e.fileInput.prop("form")),e.form.length||(e.form=b(this.options.fileInput.prop("form"))));e.paramName=this._getParamName(e);e.url||(e.url=e.form.prop("action")||location.href);e.type=(e.type||e.form.prop("method")||"").toUpperCase();"POST"!==e.type&&"PUT"!==
e.type&&"PATCH"!==e.type&&(e.type="POST");e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){e=b.extend({},this.options,e);this._initFormSettings(e);this._initDataSettings(e);return e},_enhancePromise:function(b){b.success=b.done;b.error=b.fail;b.complete=b.always;return b},_getXHRPromise:function(e,d,c){var a=b.Deferred(),f=a.promise();d=d||this.options.context||f;!0===e?a.resolveWith(d,c):!1===e&&a.rejectWith(d,c);f.abort=a.promise;return this._enhancePromise(f)},
_getUploadedBytes:function(b){return(b=(b=(b=b.getResponseHeader("Range"))&&b.split("-"))&&1<b.length&&parseInt(b[1],10))&&b+1},_chunkedUpload:function(e,d){var c=this,a=e.files[0],f=a.size,g=e.uploadedBytes=e.uploadedBytes||0,h=e.maxChunkSize||f,k=a.slice||a.webkitSlice||a.mozSlice,l=b.Deferred(),m=l.promise(),n;if(!(this._isXHRUpload(e)&&k&&(g||h<f))||e.data)return!1;if(d)return!0;if(g>=f)return a.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,e.context,[null,"error",a.error]);var q=
function(){var d=b.extend({},e);d.blob=k.call(a,g,g+h,a.type);d.chunkSize=d.blob.size;d.contentRange="bytes "+g+"-"+(g+d.chunkSize-1)+"/"+f;c._initXHRData(d);c._initProgressListener(d);n=(!1!==c._trigger("chunksend",null,d)&&b.ajax(d)||c._getXHRPromise(!1,d.context)).done(function(a,h,k){g=c._getUploadedBytes(k)||g+d.chunkSize;(!d.loaded||d.loaded<d.total)&&c._onProgress(b.Event("progress",{lengthComputable:!0,loaded:g-d.uploadedBytes,total:g-d.uploadedBytes}),d);e.uploadedBytes=d.uploadedBytes=g;
d.result=a;d.textStatus=h;d.jqXHR=k;c._trigger("chunkdone",null,d);c._trigger("chunkalways",null,d);g<f?q():l.resolveWith(d.context,[a,h,k])}).fail(function(a,f,b){d.jqXHR=a;d.textStatus=f;d.errorThrown=b;c._trigger("chunkfail",null,d);c._trigger("chunkalways",null,d);l.rejectWith(d.context,[a,f,b])})};this._enhancePromise(m);m.abort=function(){return n.abort()};q();return m},_beforeSend:function(b,d){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer);this._active+=
1;this._loaded+=d.uploadedBytes||0;this._total+=this._getTotal(d.files)},_onDone:function(e,d,c,a){if(!this._isXHRUpload(a)||!a.loaded||a.loaded<a.total){var f=this._getTotal(a.files)||1;this._onProgress(b.Event("progress",{lengthComputable:!0,loaded:f,total:f}),a)}a.result=e;a.textStatus=d;a.jqXHR=c;this._trigger("done",null,a)},_onFail:function(b,d,c,a){a.jqXHR=b;a.textStatus=d;a.errorThrown=c;this._trigger("fail",null,a);a.recalculateProgress&&(this._loaded-=a.loaded||a.uploadedBytes||0,this._total-=
a.total||this._getTotal(a.files))},_onAlways:function(b,d,c,a){--this._active;this._trigger("always",null,a);0===this._active&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(e,d){var c=this,a,f,g=c._getAJAXSettings(d),h=function(){c._sending+=1;g._bitrateTimer=new c._BitrateTimer;return a=a||((f||!1===c._trigger("send",e,g))&&c._getXHRPromise(!1,g.context,f)||c._chunkedUpload(g)||b.ajax(g)).done(function(a,f,b){c._isXHRUpload(g)||"undefined"!==typeof a?
c._onDone(a,f,b,g):c._onFail(b,"error","Unknown",g)}).fail(function(a,f,b){c._onFail(a,f,b,g)}).always(function(a,f,b){--c._sending;c._onAlways(a,f,b,g);if(g.limitConcurrentUploads&&g.limitConcurrentUploads>c._sending)for(a=c._slots.shift();a;){if(f=a.state?"pending"===a.state():!a.isRejected()){a.resolve();break}a=c._slots.shift()}})};this._beforeSend(e,g);if(this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending){if(1<this.options.limitConcurrentUploads){var k=
b.Deferred();this._slots.push(k);d=k.pipe(h)}else d=this._sequence=this._sequence.pipe(h,h);d.abort=function(){f=[void 0,"abort","abort"];return a?a.abort():(k&&k.rejectWith(g.context,f),h())};return this._enhancePromise(d)}return h()},_onAdd:function(e,d){var c=this,a=!0,f=b.extend({},this.options,d),g=f.limitMultiFileUploads,h=this._getParamName(f),k;if((f.singleFileUploads||g)&&this._isXHRUpload(f))if(!f.singleFileUploads&&g){var l=[];var m=[];for(k=0;k<d.files.length;k+=g)l.push(d.files.slice(k,
k+g)),f=h.slice(k,k+g),f.length||(f=h),m.push(f)}else m=h;else l=[d.files],m=[h];d.originalFiles=d.files;b.each(l||d.files,function(f,g){var h=b.extend({},d);h.files=l?g:[g];h.paramName=m[f];h.submit=function(){return h.jqXHR=this.jqXHR=!1!==c._trigger("submit",e,this)&&c._onSend(e,this)};return a=c._trigger("add",e,h)});return a},_replaceFileInput:function(e){var d=e.clone(!0);b("<form></form>").append(d)[0].reset();e.after(d).detach();b.cleanData(e.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(c,
a){return a===e[0]?d[0]:a});e[0]===this.element[0]&&(this.element=d)},_handleFileTreeEntry:function(e,d){var c=this,a=b.Deferred(),f=function(c){c&&!c.entry&&(c.entry=e);a.resolve([c])};d=d||"";if(e.isFile)e._file?(e._file.relativePath=d,a.resolve(e._file)):e.file(function(c){c.relativePath=d;a.resolve(c)},f);else if(e.isDirectory){var g=e.createReader();g.readEntries(function(b){c._handleFileTreeEntries(b,d+e.name+"/").done(function(c){a.resolve(c)}).fail(f)},f)}else a.resolve([]);return a.promise()},
_handleFileTreeEntries:function(e,d){var c=this;return b.when.apply(b,b.map(e,function(a){return c._handleFileTreeEntry(a,d)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var d=e.items;return d&&d.length&&(d[0].webkitGetAsEntry||d[0].getAsEntry)?this._handleFileTreeEntries(b.map(d,function(c){var a;if(c.webkitGetAsEntry){if(a=c.webkitGetAsEntry())a._file=c.getAsFile();return a}return c.getAsEntry()})):b.Deferred().resolve(b.makeArray(e.files)).promise()},
_getSingleFileInputFiles:function(e){e=b(e);var d=e.prop("webkitEntries")||e.prop("entries");if(d&&d.length)return this._handleFileTreeEntries(d);d=b.makeArray(e.prop("files"));if(d.length)void 0===d[0].name&&d[0].fileName&&b.each(d,function(c,a){a.name=a.fileName;a.size=a.fileSize});else{e=e.prop("value");if(!e)return b.Deferred().resolve([]).promise();d=[{name:e.replace(/^.*\\/,"")}]}return b.Deferred().resolve(d).promise()},_getFileInputFiles:function(e){return e instanceof b&&1!==e.length?b.when.apply(b,
b.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var d=this,c={fileInput:b(e.target),form:b(e.target.form)};this._getFileInputFiles(c.fileInput).always(function(a){c.files=a;d.options.replaceFileInput&&d._replaceFileInput(c.fileInput);!1!==d._trigger("change",e,c)&&d._onAdd(e,c)})},_onPaste:function(e){var d=e.originalEvent.clipboardData,c={files:[]};b.each(d&&d.items||[],function(a,
f){(a=f.getAsFile&&f.getAsFile())&&c.files.push(a)});if(!1===this._trigger("paste",e,c)||!1===this._onAdd(e,c))return!1},_onDrop:function(b){var d=this,c=b.dataTransfer=b.originalEvent.dataTransfer,a={};c&&c.files&&c.files.length&&b.preventDefault();this._getDroppedFiles(c).always(function(c){a.files=c;!1!==d._trigger("drop",b,a)&&d._onAdd(b,a)})},_onDragOver:function(e){var d=e.dataTransfer=e.originalEvent.dataTransfer;if(!1===this._trigger("dragover",e))return!1;d&&-1!==b.inArray("Files",d.types)&&
(d.dropEffect="copy",e.preventDefault())},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste}));this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(e,d){var c=-1!==
b.inArray(e,this._refreshOptionsList);c&&this._destroyEventHandlers();this._super(e,d);c&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof b||(e.fileInput=b(e.fileInput));e.dropZone instanceof b||(e.dropZone=b(e.dropZone));e.pasteZone instanceof b||(e.pasteZone=b(e.pasteZone))},_create:function(){var e=
this.options;b.extend(e,b(this.element[0].cloneNode(!1)).data());e.blueimpFileupload=null;e.fileupload=null;this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=this._loaded=this._total=0;this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(e){var d=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(c){e.files=c;d._onAdd(null,e)}):(e.files=b.makeArray(e.files),
this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var d=this,c=b.Deferred(),a=c.promise(),f,g;a.abort=function(){g=!0;if(f)return f.abort();c.reject(null,"abort","abort");return a};this._getFileInputFiles(e.fileInput).always(function(a){g||(e.files=a,f=d._onSend(null,e).then(function(a,f,b){c.resolve(a,f,b)},function(a,f,b){c.reject(a,f,b)}))});return this._enhancePromise(a)}e.files=b.makeArray(e.files);if(e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,
e&&e.context)}})});
(function(b){var e=b.HTMLCanvasElement&&b.HTMLCanvasElement.prototype,d;if(d=b.Blob)try{d=!!new Blob}catch(h){d=!1}var c=d;if(d=c&&b.Uint8Array)try{d=100===(new Blob([new Uint8Array(100)])).size}catch(h){d=!1}var a=d,f=b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||b.MSBlobBuilder,g=(c||f)&&b.atob&&b.ArrayBuffer&&b.Uint8Array&&function(b){var g,d,e,h;0<=b.split(",")[0].indexOf("base64")?g=atob(b.split(",")[1]):g=decodeURIComponent(b.split(",")[1]);var q=new ArrayBuffer(g.length);var p=new Uint8Array(q);
for(d=0;d<g.length;d+=1)p[d]=g.charCodeAt(d);return e=b.split(",")[0].split(":")[1].split(";")[0],c?new Blob([a?p:q],{type:e}):(h=new f,h.append(q),h.getBlob(e))};b.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(a,c,f){f&&e.toDataURL&&g?a(g(this.toDataURL(c,f))):a(this.mozGetAsFile("blob",c))}:e.toDataURL&&g&&(e.toBlob=function(a,c,f){a(g(this.toDataURL(c,f)))}));"function"==typeof define&&define.amd?define(function(){return g}):b.dataURLtoBlob=g})(this);
(function(b){"function"===typeof define&&define.amd?define(["jquery","load-image","canvas-to-blob","./jquery.fileupload"],b):b(window.jQuery,window.loadImage)})(function(b,e){b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{process:[],add:function(d,c){b(this).fileupload("process",c).done(function(){c.submit()})}},processActions:{load:function(d,c){var a=this,f=d.files[d.index],g=b.Deferred();window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype.toBlob&&("number"!==b.type(c.maxFileSize)||
f.size<c.maxFileSize)&&(!c.fileTypes||c.fileTypes.test(f.type))?e(f,function(c){if(!c.src)return g.rejectWith(a,[d]);d.img=c;g.resolveWith(a,[d])}):g.rejectWith(a,[d]);return g.promise()},resize:function(d,c){var a=d.img;c=b.extend({canvas:!0},c);a&&(c=e.scale(a,c),c.width!==a.width||c.height!==a.height)&&(d.canvas=c);return d},save:function(d,c){if(!d.canvas)return d;var a=this,f=d.files[d.index];c=f.name;var g=b.Deferred(),e=function(c){c.name||(f.type===c.type?c.name=f.name:f.name&&(c.name=f.name.replace(/\..+$/,
"."+c.type.substr(6))));d.files[d.index]=c;g.resolveWith(a,[d])};d.canvas.mozGetAsFile?e(d.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(f.type)&&c||(c&&c.replace(/\..+$/,"")||"blob")+".png",f.type)):d.canvas.toBlob(e,f.type);return g.promise()}},_processFile:function(d,c,a){var f=this,g=b.Deferred().resolveWith(f,[{files:d,index:c}]).promise();f._processing+=1;b.each(a.process,function(a,c){g=g.pipe(function(a){return f.processActions[c.action].call(this,a,c)})});g.always(function(){--f._processing;
0===f._processing&&f.element.removeClass("fileupload-processing")});1===f._processing&&f.element.addClass("fileupload-processing");return g},process:function(d){var c=this,a=b.extend({},this.options,d);a.process&&a.process.length&&this._isXHRUpload(a)&&b.each(d.files,function(f,g){c._processingQueue=c._processingQueue.pipe(function(){var g=b.Deferred();c._processFile(d.files,f,a).always(function(){g.resolveWith(c)});return g.promise()})});return this._processingQueue},_create:function(){this._super();
this._processing=0;this._processingQueue=b.Deferred().resolveWith(this).promise()}})});
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(window.jQuery)})(function(b){var e=0;b.ajaxTransport("iframe",function(d){if(d.async){var c=d.initialIframeSrc||"javascript:false;",a,f,g;return{send:function(h,k){a=b('<form style="display:none;"></form>');a.attr("accept-charset",d.formAcceptCharset);g=/\?/.test(d.url)?"&":"?";"DELETE"===d.type?(d.url=d.url+g+"_method=DELETE",d.type="POST"):"PUT"===d.type?(d.url=d.url+g+"_method=PUT",d.type="POST"):"PATCH"===d.type&&(d.url=
d.url+g+"_method=PATCH",d.type="POST");e+=1;f=b('<iframe src="'+c+'" name="iframe-transport-'+e+'"></iframe>').bind("load",function(){var g=b.isArray(d.paramName)?d.paramName:[d.paramName];f.unbind("load").bind("load",function(){try{var g=f.contents();if(!g.length||!g[0].firstChild)throw Error();}catch(q){g=void 0}k(200,"success",{iframe:g});b('<iframe src="'+c+'"></iframe>').appendTo(a);window.setTimeout(function(){a.remove()},0)});a.prop("target",f.prop("name")).prop("action",d.url).prop("method",
d.type);d.formData&&b.each(d.formData,function(c,f){b('<input type="hidden"/>').prop("name",f.name).val(f.value).appendTo(a)});if(d.fileInput&&d.fileInput.length&&"POST"===d.type){var e=d.fileInput.clone();d.fileInput.after(function(a){return e[a]});d.paramName&&d.fileInput.each(function(a){b(this).prop("name",g[a]||d.paramName)});a.append(d.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");d.fileInput.removeAttr("form")}a.submit();e&&e.length&&d.fileInput.each(function(a,
c){a=b(e[a]);b(c).prop("name",a.prop("name")).attr("form",a.attr("form"));a.replaceWith(c)})});a.append(f).appendTo(document.body)},abort:function(){f&&f.unbind("load").prop("src",c);a&&a.remove()}}}});b.ajaxSetup({converters:{"iframe text":function(d){return d&&b(d[0].body).text()},"iframe json":function(d){return d&&b.parseJSON(b(d[0].body).text())},"iframe html":function(d){return d&&b(d[0].body).html()},"iframe xml":function(d){return(d=d&&d[0])&&b.isXMLDoc(d)?d:b.parseXML(d.XMLDocument&&d.XMLDocument.xml||
b(d.body).html())},"iframe script":function(d){return d&&b.globalEval(b(d[0].body).text())}}})});
!function(b){var e=function(c,a,f){var b,d=document.createElement("img");if(d.onerror=a,d.onload=function(){!b||f&&f.noRevoke||e.revokeObjectURL(b);a&&a(e.scale(d,f))},e.isInstanceOf("Blob",c)||e.isInstanceOf("File",c)){var k=b=e.createObjectURL(c);d._type=c.type}else{if("string"!=typeof c)return!1;k=c;f&&f.crossOrigin&&(d.crossOrigin=f.crossOrigin)}return k?(d.src=k,d):e.readFile(c,function(c){var f=c.target;f&&f.result?d.src=f.result:a&&a(c)})},d=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&
URL||window.webkitURL&&webkitURL;e.isInstanceOf=function(c,a){return Object.prototype.toString.call(a)==="[object "+c+"]"};e.transformCoordinates=function(){};e.getTransformedOptions=function(c){return c};e.renderImageToCanvas=function(c,a,f,b,d,e,l,m,n,q){return c.getContext("2d").drawImage(a,f,b,d,e,l,m,n,q),c};e.hasCanvasOption=function(c){return c.canvas||c.crop};e.scale=function(c,a){a=a||{};var f,b,d,k,l,m,n,q,p,v=document.createElement("canvas"),u=c.getContext||e.hasCanvasOption(a)&&v.getContext,
w=c.naturalWidth||c.width,r=c.naturalHeight||c.height,t=w,y=r,C=function(){var a=Math.max((d||t)/t,(k||y)/y);1<a&&(t=Math.ceil(t*a),y=Math.ceil(y*a))},z=function(){var a=Math.min((f||t)/t,(b||y)/y);1>a&&(t=Math.ceil(t*a),y=Math.ceil(y*a))};return u&&(a=e.getTransformedOptions(a),n=a.left||0,q=a.top||0,a.sourceWidth?(l=a.sourceWidth,void 0!==a.right&&void 0===a.left&&(n=w-l-a.right)):l=w-n-(a.right||0),a.sourceHeight?(m=a.sourceHeight,void 0!==a.bottom&&void 0===a.top&&(q=r-m-a.bottom)):m=r-q-(a.bottom||
0),t=l,y=m),f=a.maxWidth,b=a.maxHeight,d=a.minWidth,k=a.minHeight,u&&f&&b&&a.crop?(t=f,y=b,p=l/m-f/b,0>p?(m=b*l/f,void 0===a.top&&void 0===a.bottom&&(q=(r-m)/2)):0<p&&(l=f*m/b,void 0===a.left&&void 0===a.right&&(n=(w-l)/2))):((a.contain||a.cover)&&(d=f=f||d,k=b=b||k),a.cover?(z(),C()):(C(),z())),u?(v.width=t,v.height=y,e.transformCoordinates(v,a),e.renderImageToCanvas(v,c,n,q,l,m,0,0,t,y)):(c.width=t,c.height=y,c)};e.createObjectURL=function(c){return d?d.createObjectURL(c):!1};e.revokeObjectURL=
function(c){return d?d.revokeObjectURL(c):!1};e.readFile=function(c,a,f){if(window.FileReader){var b=new FileReader;if(b.onload=b.onerror=a,f=f||"readAsDataURL",b[f])return b[f](c),b}return!1};"function"==typeof define&&define.amd?define(function(){return e}):b.loadImage=e}(this);
(function(b){"function"==typeof define&&define.amd?define(["load-image"],b):b(window.loadImage)})(function(b){if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var e=b.renderImageToCanvas;b.detectSubsampling=function(b){var c,a;return 1048576<b.width*b.height?(c=document.createElement("canvas"),c.width=c.height=1,a=c.getContext("2d"),a.drawImage(b,-b.width+1,0),0===a.getImageData(0,0,1,1).data[3]):!1};b.detectVerticalSquash=function(b,c){var a=b.naturalHeight||
b.height;var f=document.createElement("canvas");var d=f.getContext("2d");c&&(a/=2);f.width=1;f.height=a;d.drawImage(b,0,0);b=d.getImageData(0,0,1,a).data;c=0;for(d=f=a;d>c;){var e=b[4*(d-1)+3];0===e?f=d:c=d;d=f+c>>1}return d/a||1};b.renderImageToCanvas=function(d,c,a,f,g,h,k,l,m,n){if("image/jpeg"===c._type){var q,p,v=d.getContext("2d"),u=document.createElement("canvas"),w=u.getContext("2d");if(u.width=1024,u.height=1024,v.save(),q=b.detectSubsampling(c),q&&(a/=2,f/=2,g/=2,h/=2),p=b.detectVerticalSquash(c,
q),q||1!==p){f*=p;m=Math.ceil(1024*m/g);n=Math.ceil(1024*n/h/p);for(p=l=0;h>p;){for(q=k=0;g>q;)w.clearRect(0,0,1024,1024),w.drawImage(c,a,f,g,h,-q,-p,g,h),v.drawImage(u,0,0,1024,1024,k,l,m,n),q+=1024,k+=m;p+=1024;l+=n}return v.restore(),d}}return e(d,c,a,f,g,h,k,l,m,n)}}});
(function(b){"function"==typeof define&&define.amd?define(["load-image"],b):b(window.loadImage)})(function(b){var e=b.hasCanvasOption;b.hasCanvasOption=function(b){return e(b)||b.orientation};b.transformCoordinates=function(b,c){var a=b.getContext("2d"),f=b.width,d=b.height;if(c=c.orientation)switch(4<c&&(b.width=d,b.height=f),c){case 2:a.translate(f,0);a.scale(-1,1);break;case 3:a.translate(f,d);a.rotate(Math.PI);break;case 4:a.translate(0,d);a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI);a.scale(1,
-1);break;case 6:a.rotate(.5*Math.PI);a.translate(0,-d);break;case 7:a.rotate(.5*Math.PI);a.translate(f,-d);a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-f,0)}};b.getTransformedOptions=function(b){if(!b.orientation||1===b.orientation)return b;var c,a={};for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);switch(b.orientation){case 2:a.left=b.right;a.right=b.left;break;case 3:a.left=b.right;a.top=b.bottom;a.right=b.left;a.bottom=b.top;break;case 4:a.top=b.bottom;a.bottom=b.top;break;case 5:a.left=
b.top;a.top=b.left;a.right=b.bottom;a.bottom=b.right;break;case 6:a.left=b.top;a.top=b.right;a.right=b.bottom;a.bottom=b.left;break;case 7:a.left=b.bottom;a.top=b.right;a.right=b.top;a.bottom=b.left;break;case 8:a.left=b.bottom,a.top=b.left,a.right=b.top,a.bottom=b.right}return 4<b.orientation&&(a.maxWidth=b.maxHeight,a.maxHeight=b.maxWidth,a.minWidth=b.minHeight,a.minHeight=b.minWidth,a.sourceWidth=b.sourceHeight,a.sourceHeight=b.sourceWidth),a}});
(function(b){"function"==typeof define&&define.amd?define(["load-image"],b):b(window.loadImage)})(function(b){b.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice)&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)};b.metaDataParsers={jpeg:{65505:[]}};b.parseMetaData=function(e,d,c){c=c||{};var a=this,f=c.maxMetaDataSize||262144,g={};window.DataView&&e&&12<=e.size&&"image/jpeg"===e.type&&b.blobSlice&&b.readFile(b.blobSlice.call(e,
0,f),function(f){var e,h,m;f=f.target.result;var n=new DataView(f),q=2,p=n.byteLength-4;var v=q;if(65496===n.getUint16(0)){for(;p>q&&(e=n.getUint16(q),65504<=e&&65519>=e||65534===e);){if(h=n.getUint16(q+2)+2,q+h>n.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(v=b.metaDataParsers.jpeg[e])for(m=0;m<v.length;m+=1)v[m].call(a,n,q,h,g,c);v=q+=h}!c.disableImageHead&&6<v&&(g.imageHead=f.slice?f.slice(0,v):(new Uint8Array(f)).subarray(0,v))}else console.log("Invalid JPEG file: Missing JPEG marker.");
d(g)},"readAsArrayBuffer")||d(g)}});
(function(b){"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],b):b(window.loadImage)})(function(b){b.ExifMap=function(){return this};b.ExifMap.prototype.map={Orientation:274};b.ExifMap.prototype.get=function(b){return this[b]||this[this.map[b]]};b.getExifThumbnail=function(b,d,c){var a;if(!c||d+c>b.byteLength)return console.log("Invalid Exif data: Invalid thumbnail data."),void 0;var f=[];for(a=0;c>a;a+=1){var g=b.getUint8(d+a);f.push((16>g?"0":"")+g.toString(16))}return"data:image/jpeg,%"+
f.join("%")};b.exifTagTypes={1:{getValue:function(b,d){return b.getUint8(d)},size:1},2:{getValue:function(b,d){return String.fromCharCode(b.getUint8(d))},size:1,ascii:!0},3:{getValue:function(b,d,c){return b.getUint16(d,c)},size:2},4:{getValue:function(b,d,c){return b.getUint32(d,c)},size:4},5:{getValue:function(b,d,c){return b.getUint32(d,c)/b.getUint32(d+4,c)},size:8},9:{getValue:function(b,d,c){return b.getInt32(d,c)},size:4},10:{getValue:function(b,d,c){return b.getInt32(d,c)/b.getInt32(d+4,c)},
size:8}};b.exifTagTypes[7]=b.exifTagTypes[1];b.getExifValue=function(e,d,c,a,f,g){var h,k,l;a=b.exifTagTypes[a];if(!a)return console.log("Invalid Exif data: Invalid tag type."),void 0;if(h=a.size*f,k=4<h?d+e.getUint32(c+8,g):c+8,k+h>e.byteLength)return console.log("Invalid Exif data: Invalid data offset."),void 0;if(1===f)return a.getValue(e,k,g);d=[];for(c=0;f>c;c+=1)d[c]=a.getValue(e,k+c*a.size,g);if(a.ascii){e="";for(c=0;c<d.length&&(l=d[c],"\x00"!==l);c+=1)e+=l;return e}return d};b.parseExifTag=
function(e,d,c,a,f){var g=e.getUint16(c,a);f.exif[g]=b.getExifValue(e,d,c,e.getUint16(c+2,a),e.getUint32(c+4,a),a)};b.parseExifTags=function(b,d,c,a,f){var g,e,k;if(c+6>b.byteLength)return console.log("Invalid Exif data: Invalid directory offset."),void 0;if(g=b.getUint16(c,a),e=c+2+12*g,e+4>b.byteLength)return console.log("Invalid Exif data: Invalid directory size."),void 0;for(k=0;g>k;k+=1)this.parseExifTag(b,d,c+2+12*k,a,f);return b.getUint32(e,a)};b.parseExifData=function(e,d,c,a,f){if(!f.disableExif){var g;
c=d+10;if(1165519206===e.getUint32(d+4)){if(c+8>e.byteLength)return console.log("Invalid Exif data: Invalid segment size."),void 0;if(0!==e.getUint16(d+8))return console.log("Invalid Exif data: Missing byte alignment offset."),void 0;switch(e.getUint16(c)){case 18761:d=!0;break;case 19789:d=!1;break;default:return console.log("Invalid Exif data: Invalid byte alignment marker."),void 0}if(42!==e.getUint16(c+2,d))return console.log("Invalid Exif data: Missing TIFF marker."),void 0;var h=e.getUint32(c+
4,d);a.exif=new b.ExifMap;(h=b.parseExifTags(e,c,c+h,d,a))&&!f.disableExifThumbnail&&(g={exif:{}},b.parseExifTags(e,c,c+h,d,g),g.exif[513]&&(a.exif.Thumbnail=b.getExifThumbnail(e,c+g.exif[513],g.exif[514])));a.exif[34665]&&!f.disableExifSub&&b.parseExifTags(e,c,c+a.exif[34665],d,a);a.exif[34853]&&!f.disableExifGps&&b.parseExifTags(e,c,c+a.exif[34853],d,a)}}};b.metaDataParsers.jpeg[65505].push(b.parseExifData)});
(function(b){"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],b):b(window.loadImage)})(function(b){b.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",
273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",
37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",
37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",
41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",
4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",
30:"GPSDifferential",31:"GPSHPositioningError"};b.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",
10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",
15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",
77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",
5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},
Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}};b.ExifMap.prototype.getText=function(b){var d=this.get(b);switch(b){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":case "Orientation":return this.stringValues[b][d];
case "ExifVersion":case "FlashpixVersion":return String.fromCharCode(d[0],d[1],d[2],d[3]);case "ComponentsConfiguration":return this.stringValues[b][d[0]]+this.stringValues[b][d[1]]+this.stringValues[b][d[2]]+this.stringValues[b][d[3]];case "GPSVersionID":return d[0]+"."+d[1]+"."+d[2]+"."+d[3]}return String(d)};(function(b){var d,c=b.tags;b=b.map;for(d in c)c.hasOwnProperty(d)&&(b[c[d]]=d)})(b.ExifMap.prototype);b.ExifMap.prototype.getAll=function(){var b,d,c={};for(b in this)this.hasOwnProperty(b)&&
(d=this.tags[b],d&&(c[d]=this.getText(d)));return c}});
(function(b){var e=function(b,c){var a=/[^\w\-\.:]/.test(b)?new Function(e.arg+",tmpl","var _e=tmpl.encode"+e.helper+",_s='"+b.replace(e.regexp,e.func)+"';return _s;"):e.cache[b]=e.cache[b]||e(e.load(b));return c?a(c,e):function(c){return a(c,e)}};e.cache={};e.load=function(b){return document.getElementById(b).innerHTML};e.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g;e.func=function(b,c,a,f,g,e){if(c)return{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[b]||"\\"+b;if(a)return"="===
a?"'+_e("+f+")+'":"'+("+f+"||'')+'";if(g)return"';";if(e)return"_s+='"};e.encReg=/[<>&"'\x00]/g;e.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};e.encode=function(b){return String(b||"").replace(e.encReg,function(c){return e.encMap[c]||""})};e.arg="o";e.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}";"function"===typeof define&&define.amd?define(function(){return e}):b.tmpl=e})(this);
(function(b,e){"function"===typeof define&&define.amd?define(["jquery"],e):"object"===typeof exports?e(require("jquery")):b.jQuery?e(b.jQuery):e(b.Zepto)})(this,function(b,e){b.fn.jPlayer=function(a){var c="string"===typeof a,f=Array.prototype.slice.call(arguments,1),g=this;a=!c&&f.length?b.extend.apply(null,[!0,a].concat(f)):a;if(c&&"_"===a.charAt(0))return g;c?this.each(function(){var c=b(this).data("jPlayer"),d=c&&b.isFunction(c[a])?c[a].apply(c,f):c;if(d!==c&&d!==e)return g=d,!1}):this.each(function(){var c=
b(this).data("jPlayer");c?c.option(a||{}):b(this).data("jPlayer",new b.jPlayer(a,this))});return g};b.jPlayer=function(a,c){if(arguments.length){this.element=b(c);this.options=b.extend(!0,{},this.options,a);var f=this;this.element.bind("remove.jPlayer",function(){f.destroy()});this._init()}};"function"!==typeof b.fn.stop&&(b.fn.stop=function(){});b.jPlayer.emulateMethods="load play pause";b.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";b.jPlayer.emulateOptions=
"muted volume";b.jPlayer.reservedEvent="ready flashreset resize repeat error warning";b.jPlayer.event={};b.each("ready setmedia flashreset resize repeat click error warning loadstart progress suspend abort emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange".split(" "),function(){b.jPlayer.event[this]="jPlayer_"+this});b.jPlayer.htmlEvent="loadstart abort emptied stalled loadedmetadata canplay canplaythrough".split(" ");
b.jPlayer.pause=function(){b.jPlayer.prototype.destroyRemoved();b.each(b.jPlayer.prototype.instances,function(a,c){c.data("jPlayer").status.srcSet&&c.jPlayer("pause")})};b.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var d=function(){this.init()};d.prototype={init:function(){this.options={timeFormat:b.jPlayer.timeFormat}},time:function(a){var c=new Date(1E3*(a&&"number"===typeof a?a:0)),f=c.getUTCHours();a=this.options.timeFormat.showHour?
c.getUTCMinutes():c.getUTCMinutes()+60*f;c=this.options.timeFormat.showMin?c.getUTCSeconds():c.getUTCSeconds()+60*a;f=this.options.timeFormat.padHour&&10>f?"0"+f:f;a=this.options.timeFormat.padMin&&10>a?"0"+a:a;c=this.options.timeFormat.padSec&&10>c?"0"+c:c;f=""+(this.options.timeFormat.showHour?f+this.options.timeFormat.sepHour:"");f+=this.options.timeFormat.showMin?a+this.options.timeFormat.sepMin:"";return f+=this.options.timeFormat.showSec?c+this.options.timeFormat.sepSec:""}};var c=new d;b.jPlayer.convertTime=
function(a){return c.time(a)};b.jPlayer.uaBrowser=function(a){a=a.toLowerCase();var c=/(opera)(?:.*version)?[ \/]([\w.]+)/,f=/(msie) ([\w.]+)/,b=/(mozilla)(?:.*? rv:([\w.]+))?/;a=/(webkit)[ \/]([\w.]+)/.exec(a)||c.exec(a)||f.exec(a)||0>a.indexOf("compatible")&&b.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};b.jPlayer.uaPlatform=function(a){var c=a.toLowerCase(),f=/(android)/,b=/(mobile)/;a=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(c)||[];c=/(ipad|playbook)/.exec(c)||
!b.exec(c)&&f.exec(c)||[];a[1]&&(a[1]=a[1].replace(/\s/g,"_"));return{platform:a[1]||"",tablet:c[1]||""}};b.jPlayer.browser={};b.jPlayer.platform={};var a=b.jPlayer.uaBrowser(navigator.userAgent);a.browser&&(b.jPlayer.browser[a.browser]=!0,b.jPlayer.browser.version=a.version);a=b.jPlayer.uaPlatform(navigator.userAgent);a.platform&&(b.jPlayer.platform[a.platform]=!0,b.jPlayer.platform.mobile=!a.tablet,b.jPlayer.platform.tablet=!!a.tablet);b.jPlayer.getDocMode=function(){if(b.jPlayer.browser.msie)if(document.documentMode)var a=
document.documentMode;else a=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(a=7);return a};b.jPlayer.browser.documentMode=b.jPlayer.getDocMode();b.jPlayer.nativeFeatures={init:function(){var a=document,c=a.createElement("video"),f={w3c:"fullscreenEnabled fullscreenElement requestFullscreen exitFullscreen fullscreenchange fullscreenerror".split(" "),moz:"mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),
webkit:" webkitCurrentFullScreenElement webkitRequestFullScreen webkitCancelFullScreen webkitfullscreenchange ".split(" "),webkitVideo:"webkitSupportsFullscreen webkitDisplayingFullscreen webkitEnterFullscreen webkitExitFullscreen  ".split(" "),ms:" msFullscreenElement msRequestFullscreen msExitFullscreen MSFullscreenChange MSFullscreenError".split(" ")},b=["w3c","moz","webkit","webkitVideo","ms"],d;this.fullscreen=c={support:{w3c:!!a[f.w3c[0]],moz:!!a[f.moz[0]],webkit:"function"===typeof a[f.webkit[3]],
webkitVideo:"function"===typeof c[f.webkitVideo[2]],ms:"function"===typeof c[f.ms[2]]},used:{}};var e=0;for(d=b.length;e<d;e++){var q=b[e];if(c.support[q]){c.spec=q;c.used[q]=!0;break}}if(c.spec){var p=f[c.spec];c.api={fullscreenEnabled:!0,fullscreenElement:function(c){c=c?c:a;return c[p[1]]},requestFullscreen:function(a){return a[p[2]]()},exitFullscreen:function(c){c=c?c:a;return c[p[3]]()}};c.event={fullscreenchange:p[4],fullscreenerror:p[5]}}else c.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},
requestFullscreen:function(){},exitFullscreen:function(){}},c.event={}}};b.jPlayer.nativeFeatures.init();b.jPlayer.focus=null;b.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var f=function(a){var c=b.jPlayer.focus,f;c&&(b.each(b.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(c,b){if(a.target.nodeName.toUpperCase()===b.toUpperCase())return f=!0,!1}),f||b.each(c.options.keyBindings,function(f,d){if(d&&b.isFunction(d.fn)&&("number"===typeof d.key&&a.which===d.key||"string"===typeof d.key&&
a.key===d.key))return a.preventDefault(),d.fn(c),!1}))};b.jPlayer.keys=function(a){b(document.documentElement).unbind("keydown.jPlayer");a&&b(document.documentElement).bind("keydown.jPlayer",f)};b.jPlayer.keys(!0);b.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,
minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",
duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,
hold:1E3},loop:!1,repeat:function(a){a.jPlayer.options.loop?b(this).unbind(".jPlayerRepeat").bind(b.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){b(this).jPlayer("play")}):b(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},
noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(a){a.status.paused?a.play():a.pause()}},fullScreen:{key:70,fn:function(a){(a.status.video||a.options.audioFullScreen)&&a._setOption("fullScreen",!a.options.fullScreen)}},muted:{key:77,fn:function(a){a._muted(!a.options.muted)}},
volumeUp:{key:190,fn:function(a){a.volume(a.options.volume+.1)}},volumeDown:{key:188,fn:function(a){a.volume(a.options.volume-.1)}},loop:{key:76,fn:function(a){a._loop(!a.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",
cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},
m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},
fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',
flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var a=this;this.element.empty();this.status=b.extend({},this.status);this.internal=b.extend({},this.internal);this.options.timeFormat=b.extend({},b.jPlayer.timeFormat,this.options.timeFormat);this.internal.cmdsIgnored=b.jPlayer.platform.ipad||b.jPlayer.platform.iphone||b.jPlayer.platform.ipod;this.internal.domNode=this.element.get(0);
this.options.keyEnabled&&!b.jPlayer.focus&&(b.jPlayer.focus=this);this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN};b.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto");this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.aurora={};this.aurora.formats=[];this.aurora.properties=[];this.flash={};this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=[];this.options.volume=
this._limitValue(this.options.volume,0,1);b.each(this.options.supplied.toLowerCase().split(","),function(c,f){var d=f.replace(/^\s+|\s+$/g,"");if(a.format[d]){var e=!1;b.each(a.formats,function(a,c){if(d===c)return e=!0,!1});e||a.formats.push(d)}});b.each(this.options.solution.toLowerCase().split(","),function(c,f){var d=f.replace(/^\s+|\s+$/g,"");if(a.solution[d]){var e=!1;b.each(a.solutions,function(a,c){if(d===c)return e=!0,!1});e||a.solutions.push(d)}});b.each(this.options.auroraFormats.toLowerCase().split(","),
function(c,f){var d=f.replace(/^\s+|\s+$/g,"");if(a.format[d]){var e=!1;b.each(a.aurora.formats,function(a,c){if(d===c)return e=!0,!1});e||a.aurora.formats.push(d)}});this.internal.instance="jp_"+this.count;this.instances[this.internal.instance]=this.element;this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);this.internal.self=b.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=b.extend({},{id:this.options.idPrefix+"_audio_"+this.count,
jq:e});this.internal.video=b.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:e});this.internal.flash=b.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:e,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")});this.internal.poster=b.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:e});b.each(b.jPlayer.event,function(c,f){a.options[c]!==e&&(a.element.bind(f+
".jPlayer",a.options[c]),a.options[c]=e)});this.require.audio=!1;this.require.video=!1;b.each(this.formats,function(c,f){a.require[a.format[f].media]=!0});this.options=this.require.video?b.extend(!0,{},this.optionsVideo,this.options):b.extend(!0,{},this.optionsAudio,this.options);this._setSize();this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this.status.noVolume=this._uaBlocklist(this.options.noVolume);
b.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners();this._restrictNativeVideoControls();this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){a.status.video&&!a.status.waitForPlay||a.internal.poster.jq.show()};this.element.append(this.htmlElement.poster);this.internal.poster.jq=b("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});
this.internal.poster.jq.hide();this.internal.poster.jq.bind("click.jPlayer",function(c){c.stopPropagation();a._trigger(b.jPlayer.event.click)});this.html.audio.available=!1;this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio));this.html.video.available=!1;this.require.video&&(this.htmlElement.video=document.createElement("video"),
this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video));this.flash.available=this._checkForFlash(10.1);this.html.canPlay={};this.aurora.canPlay={};this.flash.canPlay={};b.each(this.formats,function(c,f){a.html.canPlay[f]=a.html[a.format[f].media].available&&""!==a.htmlElement[a.format[f].media].canPlayType(a.format[f].codec);a.aurora.canPlay[f]=-1<b.inArray(f,a.aurora.formats);a.flash.canPlay[f]=
a.format[f].flashCanPlay&&a.flash.available});this.html.desired=!1;this.aurora.desired=!1;this.flash.desired=!1;b.each(this.solutions,function(c,f){if(0===c)a[f].desired=!0;else{var d=!1,e=!1;b.each(a.formats,function(c,f){a[a.solutions[0]].canPlay[f]&&("video"===a.format[f].media?e=!0:d=!0)});a[f].desired=a.require.audio&&!d||a.require.video&&!e}});this.html.support={};this.aurora.support={};this.flash.support={};b.each(this.formats,function(c,f){a.html.support[f]=a.html.canPlay[f]&&a.html.desired;
a.aurora.support[f]=a.aurora.canPlay[f]&&a.aurora.desired;a.flash.support[f]=a.flash.canPlay[f]&&a.flash.desired});this.html.used=!1;this.aurora.used=!1;this.flash.used=!1;b.each(this.solutions,function(c,f){b.each(a.formats,function(c,b){if(a[f].support[b])return a[f].used=!0,!1})});this._resetActive();this._resetGate();this._cssSelectorAncestor(this.options.cssSelectorAncestor);this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:b.jPlayer.error.NO_SOLUTION,
context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:b.jPlayer.errorMsg.NO_SOLUTION,hint:b.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show());if(this.flash.used){var c="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(b.jPlayer.browser.msie&&(9>Number(b.jPlayer.browser.version)||9>b.jPlayer.browser.documentMode)){c=['<param name="movie" value="'+
this.internal.flash.swf+'" />','<param name="FlashVars" value="'+c+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];var f=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>');for(var d=0;d<c.length;d++)f.appendChild(document.createElement(c[d]))}else d=function(a,
c,f){var b=document.createElement("param");b.setAttribute("name",c);b.setAttribute("value",f);a.appendChild(b)},f=document.createElement("object"),f.setAttribute("id",this.internal.flash.id),f.setAttribute("name",this.internal.flash.id),f.setAttribute("data",this.internal.flash.swf),f.setAttribute("type","application/x-shockwave-flash"),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("tabindex","-1"),d(f,"flashvars",c),d(f,"allowscriptaccess","always"),d(f,"bgcolor",this.options.backgroundColor),
d(f,"wmode",this.options.wmode);this.element.append(f);this.internal.flash.jq=b(f)}this.status.playbackRateEnabled=this.html.used&&!this.flash.used?this._testPlaybackRate("audio"):!1;this._updatePlaybackRate();this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=b("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),
this.element.append(this.htmlElement.video),this.internal.video.jq=b("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(c){c.stopPropagation();a._trigger(b.jPlayer.event.click)})));this.options.emulateHtml&&this._emulateHtmlBridge();!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){a.internal.ready=
!0;a.version.flash="n/a";a._trigger(b.jPlayer.event.repeat);a._trigger(b.jPlayer.event.ready)},100);this._updateNativeVideoControls();this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();b.jPlayer.prototype.count++},destroy:function(){this.clearMedia();this._removeUiClass();this.css.jq.currentTime.length&&this.css.jq.currentTime.text("");this.css.jq.duration.length&&this.css.jq.duration.text("");b.each(this.css.jq,function(a,c){c.length&&c.unbind(".jPlayer")});this.internal.poster.jq.unbind(".jPlayer");
this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer");this._fullscreenRemoveEventListeners();this===b.jPlayer.focus&&(b.jPlayer.focus=null);this.options.emulateHtml&&this._destroyHtmlBridge();this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();delete this.instances[this.internal.instance]},destroyRemoved:function(){var a=this;b.each(this.instances,function(c,f){a.element===f||f.data("jPlayer")||(f.jPlayer("destroy"),delete a.instances[c])})},enable:function(){},
disable:function(){},_testCanPlayType:function(a){try{return a.canPlayType(this.format.mp3.codec),!0}catch(h){return!1}},_testPlaybackRate:function(a){a=document.createElement("string"===typeof a?a:"audio");try{return"playbackRate"in a?(a.playbackRate=.5,.5===a.playbackRate):!1}catch(h){return!1}},_uaBlocklist:function(a){var c=navigator.userAgent.toLowerCase(),f=!1;b.each(a,function(a,b){if(b&&b.test(c))return f=!0,!1});return f},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&
(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",
height:"0px"})))},_addHtmlEventListeners:function(a,c){var f=this;a.preload=this.options.preload;a.muted=this.options.muted;a.volume=this.options.volume;this.status.playbackRateEnabled&&(a.defaultPlaybackRate=this.options.defaultPlaybackRate,a.playbackRate=this.options.playbackRate);a.addEventListener("progress",function(){c.gate&&(f.internal.cmdsIgnored&&0<this.readyState&&(f.internal.cmdsIgnored=!1),f._getHtmlStatus(a),f._updateInterface(),f._trigger(b.jPlayer.event.progress))},!1);a.addEventListener("loadeddata",
function(){c.gate&&(f.androidFix.setMedia=!1,f.androidFix.play&&(f.androidFix.play=!1,f.play(f.androidFix.time)),f.androidFix.pause&&(f.androidFix.pause=!1,f.pause(f.androidFix.time)),f._trigger(b.jPlayer.event.loadeddata))},!1);a.addEventListener("timeupdate",function(){c.gate&&(f._getHtmlStatus(a),f._updateInterface(),f._trigger(b.jPlayer.event.timeupdate))},!1);a.addEventListener("durationchange",function(){c.gate&&(f._getHtmlStatus(a),f._updateInterface(),f._trigger(b.jPlayer.event.durationchange))},
!1);a.addEventListener("play",function(){c.gate&&(f._updateButtons(!0),f._html_checkWaitForPlay(),f._trigger(b.jPlayer.event.play))},!1);a.addEventListener("playing",function(){c.gate&&(f._updateButtons(!0),f._seeked(),f._trigger(b.jPlayer.event.playing))},!1);a.addEventListener("pause",function(){c.gate&&(f._updateButtons(!1),f._trigger(b.jPlayer.event.pause))},!1);a.addEventListener("waiting",function(){c.gate&&(f._seeking(),f._trigger(b.jPlayer.event.waiting))},!1);a.addEventListener("seeking",
function(){c.gate&&(f._seeking(),f._trigger(b.jPlayer.event.seeking))},!1);a.addEventListener("seeked",function(){c.gate&&(f._seeked(),f._trigger(b.jPlayer.event.seeked))},!1);a.addEventListener("volumechange",function(){c.gate&&(f.options.volume=a.volume,f.options.muted=a.muted,f._updateMute(),f._updateVolume(),f._trigger(b.jPlayer.event.volumechange))},!1);a.addEventListener("ratechange",function(){c.gate&&(f.options.defaultPlaybackRate=a.defaultPlaybackRate,f.options.playbackRate=a.playbackRate,
f._updatePlaybackRate(),f._trigger(b.jPlayer.event.ratechange))},!1);a.addEventListener("suspend",function(){c.gate&&(f._seeked(),f._trigger(b.jPlayer.event.suspend))},!1);a.addEventListener("ended",function(){c.gate&&(b.jPlayer.browser.webkit||(f.htmlElement.media.currentTime=0),f.htmlElement.media.pause(),f._updateButtons(!1),f._getHtmlStatus(a,!0),f._updateInterface(),f._trigger(b.jPlayer.event.ended))},!1);a.addEventListener("error",function(){c.gate&&(f._updateButtons(!1),f._seeked(),f.status.srcSet&&
(clearTimeout(f.internal.htmlDlyCmdId),f.status.waitForLoad=!0,f.status.waitForPlay=!0,f.status.video&&!f.status.nativeVideoControls&&f.internal.video.jq.css({width:"0px",height:"0px"}),f._validString(f.status.media.poster)&&!f.status.nativeVideoControls&&f.internal.poster.jq.show(),f.css.jq.videoPlay.length&&f.css.jq.videoPlay.show(),f._error({type:b.jPlayer.error.URL,context:f.status.src,message:b.jPlayer.errorMsg.URL,hint:b.jPlayer.errorHint.URL})))},!1);b.each(b.jPlayer.htmlEvent,function(d,e){a.addEventListener(this,
function(){c.gate&&f._trigger(b.jPlayer.event[e])},!1)})},_addAuroraEventListeners:function(a,c){var f=this;a.volume=100*this.options.volume;a.on("progress",function(){c.gate&&(f.internal.cmdsIgnored&&0<this.readyState&&(f.internal.cmdsIgnored=!1),f._getAuroraStatus(a),f._updateInterface(),f._trigger(b.jPlayer.event.progress),0<a.duration&&f._trigger(b.jPlayer.event.timeupdate))},!1);a.on("ready",function(){c.gate&&f._trigger(b.jPlayer.event.loadeddata)},!1);a.on("duration",function(){c.gate&&(f._getAuroraStatus(a),
f._updateInterface(),f._trigger(b.jPlayer.event.durationchange))},!1);a.on("end",function(){c.gate&&(f._updateButtons(!1),f._getAuroraStatus(a,!0),f._updateInterface(),f._trigger(b.jPlayer.event.ended))},!1);a.on("error",function(){c.gate&&(f._updateButtons(!1),f._seeked(),f.status.srcSet&&(f.status.waitForLoad=!0,f.status.waitForPlay=!0,f.status.video&&!f.status.nativeVideoControls&&f.internal.video.jq.css({width:"0px",height:"0px"}),f._validString(f.status.media.poster)&&!f.status.nativeVideoControls&&
f.internal.poster.jq.show(),f.css.jq.videoPlay.length&&f.css.jq.videoPlay.show(),f._error({type:b.jPlayer.error.URL,context:f.status.src,message:b.jPlayer.errorMsg.URL,hint:b.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(a,c){isFinite(a.duration)&&(this.status.duration=a.duration);var f=a.currentTime;var b=0<this.status.duration?100*f/this.status.duration:0;if("object"===typeof a.seekable&&0<a.seekable.length){var d=0<this.status.duration?100*a.seekable.end(a.seekable.length-1)/this.status.duration:
100;var e=0<this.status.duration?100*a.currentTime/a.seekable.end(a.seekable.length-1):0}else d=100,e=b;c&&(b=e=f=0);this.status.seekPercent=d;this.status.currentPercentRelative=e;this.status.currentPercentAbsolute=b;this.status.currentTime=f;this.status.remaining=this.status.duration-this.status.currentTime;this.status.videoWidth=a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=a.readyState;this.status.networkState=a.networkState;this.status.playbackRate=a.playbackRate;this.status.ended=
a.ended},_getAuroraStatus:function(a,c){this.status.duration=a.duration/1E3;var f=a.currentTime/1E3;var b=0<this.status.duration?100*f/this.status.duration:0;if(0<a.buffered){var d=0<this.status.duration?a.buffered*this.status.duration/this.status.duration:100;a=0<this.status.duration?f/(a.buffered*this.status.duration):0}else d=100,a=b;c&&(b=a=f=0);this.status.seekPercent=d;this.status.currentPercentRelative=a;this.status.currentPercentAbsolute=b;this.status.currentTime=f;this.status.remaining=this.status.duration-
this.status.currentTime;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=!1},_resetStatus:function(){this.status=b.extend({},this.status,b.jPlayer.prototype.status)},_trigger:function(a,c,f){a=b.Event(a);a.jPlayer={};a.jPlayer.version=b.extend({},this.version);a.jPlayer.options=b.extend(!0,{},this.options);a.jPlayer.status=b.extend(!0,{},this.status);a.jPlayer.html=b.extend(!0,{},this.html);a.jPlayer.aurora=b.extend(!0,{},this.aurora);a.jPlayer.flash=
b.extend(!0,{},this.flash);c&&(a.jPlayer.error=b.extend({},c));f&&(a.jPlayer.warning=b.extend({},f));this.element.trigger(a)},jPlayerFlashEvent:function(a,c){if(a===b.jPlayer.event.ready)if(!this.internal.ready)this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=c.version,this.version.needFlash!==this.version.flash&&this._error({type:b.jPlayer.error.VERSION,context:this.version.flash,message:b.jPlayer.errorMsg.VERSION+this.version.flash,hint:b.jPlayer.errorHint.VERSION}),
this._trigger(b.jPlayer.event.repeat),this._trigger(a);else if(this.flash.gate){if(this.status.srcSet){var f=this.status.currentTime,d=this.status.paused;this.setMedia(this.status.media);this.volumeWorker(this.options.volume);0<f&&(d?this.pause(f):this.play(f))}this._trigger(b.jPlayer.event.flashreset)}if(this.flash.gate)switch(a){case b.jPlayer.event.progress:this._getFlashStatus(c);this._updateInterface();this._trigger(a);break;case b.jPlayer.event.timeupdate:this._getFlashStatus(c);this._updateInterface();
this._trigger(a);break;case b.jPlayer.event.play:this._seeked();this._updateButtons(!0);this._trigger(a);break;case b.jPlayer.event.pause:this._updateButtons(!1);this._trigger(a);break;case b.jPlayer.event.ended:this._updateButtons(!1);this._trigger(a);break;case b.jPlayer.event.click:this._trigger(a);break;case b.jPlayer.event.error:this.status.waitForLoad=!0;this.status.waitForPlay=!0;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._validString(this.status.media.poster)&&
this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show();this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);this._updateButtons(!1);this._error({type:b.jPlayer.error.URL,context:c.src,message:b.jPlayer.errorMsg.URL,hint:b.jPlayer.errorHint.URL});break;case b.jPlayer.event.seeking:this._seeking();this._trigger(a);break;case b.jPlayer.event.seeked:this._seeked();this._trigger(a);break;case b.jPlayer.event.ready:break;
default:this._trigger(a)}return!1},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent;this.status.currentPercentRelative=a.currentPercentRelative;this.status.currentPercentAbsolute=a.currentPercentAbsolute;this.status.currentTime=a.currentTime;this.status.duration=a.duration;this.status.remaining=a.duration-a.currentTime;this.status.videoWidth=a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=
!1},_updateButtons:function(a){a===e?a=!this.status.paused:this.status.paused=!a;a?this.addStateClass("playing"):this.removeStateClass("playing");!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen");this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped");this.css.jq.play.length&&this.css.jq.pause.length&&(a?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide()));
this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide()));this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},
_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%");this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));if(this.css.jq.currentTime.length){var a=this._convertTime(this.status.currentTime);a!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime))}a=
this.status.duration;var c=this.status.remaining;this.css.jq.duration.length&&("string"===typeof this.status.media.duration?a=this.status.media.duration:("number"===typeof this.status.media.duration&&(a=this.status.media.duration,c=a-this.status.currentTime),a=this.options.remainingDuration&&0<a?(0<c?"-":"")+this._convertTime(c):this._convertTime(a)),a!==this.css.jq.duration.text()&&this.css.jq.duration.text(a))},_convertTime:d.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg");
this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg");this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1;this.html.video.gate=!1;this.aurora.gate=!1;this.flash.gate=!1},_resetActive:function(){this.html.active=!1;this.aurora.active=!1;this.flash.active=!1},_escapeHtml:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(a){var c=
document.createElement("div");c.innerHTML='<a href="'+this._escapeHtml(a)+'">x</a>';return c.firstChild.href},_absoluteMediaUrls:function(a){var c=this;b.each(a,function(f,b){b&&c.format[f]&&"data:"!==b.substr(0,5)&&(a[f]=c._qualifyURL(b))});return a},addStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[a])},removeStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[a])},setMedia:function(a){var c=this,f=!1,
d=this.status.media.poster!==a.poster;this._resetMedia();this._resetGate();this._resetActive();this.androidFix.setMedia=!1;this.androidFix.play=!1;this.androidFix.pause=!1;a=this._absoluteMediaUrls(a);b.each(this.formats,function(d,e){var g="video"===c.format[e].media;b.each(c.solutions,function(d,h){if(c[h].support[e]&&c._validString(a[e]))return d="html"===h,h="aurora"===h,g?(d?(c.html.video.gate=!0,c._html_setVideo(a),c.html.active=!0):(c.flash.gate=!0,c._flash_setVideo(a),c.flash.active=!0),c.css.jq.videoPlay.length&&
c.css.jq.videoPlay.show(),c.status.video=!0):(d?(c.html.audio.gate=!0,c._html_setAudio(a),c.html.active=!0,b.jPlayer.platform.android&&(c.androidFix.setMedia=!0)):h?(c.aurora.gate=!0,c._aurora_setAudio(a),c.aurora.active=!0):(c.flash.gate=!0,c._flash_setAudio(a),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.hide(),c.status.video=!1),f=!0,!1});if(f)return!1});f?(this.status.nativeVideoControls&&this.html.video.gate||!this._validString(a.poster)||(d?this.htmlElement.poster.src=a.poster:
this.internal.poster.jq.show()),"string"===typeof a.title&&(this.css.jq.title.length&&this.css.jq.title.html(a.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",a.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",a.title)),this.status.srcSet=!0,this.status.media=b.extend({},a),this._updateButtons(!1),this._updateInterface(),this._trigger(b.jPlayer.event.setmedia)):this._error({type:b.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+
"'}",message:b.jPlayer.errorMsg.NO_SUPPORT,hint:b.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus();this._updateButtons(!1);this._updateInterface();this._seeked();this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia();this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():
this.flash.active&&this._flash_clearMedia();this._resetGate();this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(b.jPlayer.focus=this)},play:function(a){"object"===typeof a&&this.options.useStateClassSkin&&!this.status.paused?this.pause(a):(a="number"===typeof a?a:NaN,this.status.srcSet?(this.focus(),this.html.active?
this._html_play(a):this.aurora.active?this._aurora_play(a):this.flash.active&&this._flash_play(a)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(a){a="number"===typeof a?a:NaN;this.status.srcSet?this.html.active?this._html_pause(a):this.aurora.active?this._aurora_pause(a):this.flash.active&&this._flash_pause(a):this._urlNotSetError("pause")},tellOthers:function(a,c){var f=this,d="function"===typeof c,e=Array.prototype.slice.call(arguments);"string"===typeof a&&(d&&
e.splice(1,1),b.jPlayer.prototype.destroyRemoved(),b.each(this.instances,function(){f.element===this||d&&!c.call(this.data("jPlayer"),f)||this.jPlayer.apply(this,e)}))},pauseOthers:function(a){this.tellOthers("pause",function(){return this.status.srcSet},a)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,0,100);this.status.srcSet?
this.html.active?this._html_playHead(a):this.aurora.active?this._aurora_playHead(a):this.flash.active&&this._flash_playHead(a):this._urlNotSetError("playHead")},_muted:function(a){this.mutedWorker(a);this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},a)},mutedWorker:function(a){this.options.muted=a;this.html.used&&this._html_setProperty("muted",a);this.aurora.used&&this._aurora_mute(a);this.flash.used&&this._flash_mute(a);this.html.video.gate||this.html.audio.gate||
(this._updateMute(a),this._updateVolume(this.options.volume),this._trigger(b.jPlayer.event.volumechange))},mute:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(a=a===e?!0:!!a,this._muted(a))},unmute:function(a){a=a===e?!0:!!a;this._muted(!a)},_updateMute:function(a){a===e&&(a=this.options.muted);a?this.addStateClass("muted"):this.removeStateClass("muted");this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),
this.css.jq.unmute.hide()):a?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(a){this.volumeWorker(a);this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},a)},volumeWorker:function(a){a=this._limitValue(a,0,1);this.options.volume=a;this.html.used&&this._html_setProperty("volume",a);this.aurora.used&&this._aurora_volume(a);this.flash.used&&this._flash_volume(a);this.html.video.gate||
this.html.audio.gate||(this._updateVolume(a),this._trigger(b.jPlayer.event.volumechange))},volumeBar:function(a){if(this.css.jq.volumeBar.length){var c=b(a.currentTarget),f=c.offset(),d=a.pageX-f.left,e=c.width();a=c.height()-a.pageY+f.top;c=c.height();this.options.verticalVolume?this.volume(a/c):this.volume(d/e)}this.options.muted&&this._muted(!1)},_updateVolume:function(a){a===e&&(a=this.options.volume);a=this.options.muted?0:a;this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&
this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*a+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1);
this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(a){var c=this;this.options.cssSelectorAncestor=a;this._removeUiClass();this.ancestorJq=a?b(a):[];a&&1!==this.ancestorJq.length&&this._warning({type:b.jPlayer.warning.CSS_SELECTOR_COUNT,context:a,message:b.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:b.jPlayer.warningHint.CSS_SELECTOR_COUNT});this._addUiClass();b.each(this.options.cssSelector,function(a,f){c._cssSelector(a,f)});
this._updateInterface();this._updateButtons();this._updateAutohide();this._updateVolume();this._updateMute()},_cssSelector:function(a,c){var f=this;"string"===typeof c?b.jPlayer.prototype.options.cssSelector[a]?(this.css.jq[a]&&this.css.jq[a].length&&this.css.jq[a].unbind(".jPlayer"),this.options.cssSelector[a]=c,this.css.cs[a]=this.options.cssSelectorAncestor+" "+c,this.css.jq[a]=c?b(this.css.cs[a]):[],this.css.jq[a].length&&this[a]&&this.css.jq[a].bind("click.jPlayer",function(c){c.preventDefault();
f[a](c);f.options.autoBlur?b(this).blur():b(this).focus()}),c&&1!==this.css.jq[a].length&&this._warning({type:b.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[a],message:b.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[a].length+" found for "+a+" method.",hint:b.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:b.jPlayer.warning.CSS_SELECTOR_METHOD,context:a,message:b.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:b.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:b.jPlayer.warning.CSS_SELECTOR_STRING,
context:c,message:b.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:b.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(a){this.options.toggleDuration&&(this.options.captureDuration&&a.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(a){if(this.css.jq.seekBar.length){var c=b(a.currentTarget),f=c.offset();a=a.pageX-f.left;c=c.width();this.playHead(100*a/c)}},playbackRate:function(a){this._setOption("playbackRate",a)},playbackRateBar:function(a){if(this.css.jq.playbackRateBar.length){var c=
b(a.currentTarget),f=c.offset(),d=a.pageX-f.left,e=c.width();a=c.height()-a.pageY+f.top;c=c.height();this.playbackRate((this.options.verticalPlaybackRate?a/c:d/e)*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate)}},_updatePlaybackRate:function(){var a=(this.options.playbackRate-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),
this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*a+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.loop?this._loop(!1):this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(a){this.options.loop!==
a&&(this.options.loop=a,this._updateButtons(),this._trigger(b.jPlayer.event.repeat))},option:function(a,c){var f=a;if(0===arguments.length)return b.extend(!0,{},this.options);if("string"===typeof a){var d=a.split(".");if(c===e){f=b.extend(!0,{},this.options);for(var g=0;g<d.length;g++)if(f[d[g]]!==e)f=f[d[g]];else return this._warning({type:b.jPlayer.warning.OPTION_KEY,context:a,message:b.jPlayer.warningMsg.OPTION_KEY,hint:b.jPlayer.warningHint.OPTION_KEY}),e;return f}g=f={};for(var h=0;h<d.length;h++)h<
d.length-1?(g[d[h]]={},g=g[d[h]]):g[d[h]]=c}this._setOptions(f);return this},_setOptions:function(a){var c=this;b.each(a,function(a,f){c._setOption(a,f)});return this},_setOption:function(a,c){var f=this;switch(a){case "volume":this.volume(c);break;case "muted":this._muted(c);break;case "globalVolume":this.options[a]=c;break;case "cssSelectorAncestor":this._cssSelectorAncestor(c);break;case "cssSelector":b.each(c,function(a,c){f._cssSelector(a,c)});break;case "playbackRate":this.options[a]=c=this._limitValue(c,
this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("playbackRate",c);this._updatePlaybackRate();break;case "defaultPlaybackRate":this.options[a]=c=this._limitValue(c,this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("defaultPlaybackRate",c);this._updatePlaybackRate();break;case "minPlaybackRate":this.options[a]=c=this._limitValue(c,.1,this.options.maxPlaybackRate-.1);this._updatePlaybackRate();break;case "maxPlaybackRate":this.options[a]=
c=this._limitValue(c,this.options.minPlaybackRate+.1,16);this._updatePlaybackRate();break;case "fullScreen":if(this.options[a]!==c){var d=b.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;if(!d||d&&!this.status.waitForPlay)d||(this.options[a]=c),c?this._requestFullscreen():this._exitFullscreen(),d||this._setOption("fullWindow",c)}break;case "fullWindow":this.options[a]!==c&&(this._removeUiClass(),this.options[a]=c,this._refreshSize());break;case "size":this.options.fullWindow||this.options[a].cssClass===
c.cssClass||this._removeUiClass();this.options[a]=b.extend({},this.options[a],c);this._refreshSize();break;case "sizeFull":this.options.fullWindow&&this.options[a].cssClass!==c.cssClass&&this._removeUiClass();this.options[a]=b.extend({},this.options[a],c);this._refreshSize();break;case "autohide":this.options[a]=b.extend({},this.options[a],c);this._updateAutohide();break;case "loop":this._loop(c);break;case "remainingDuration":this.options[a]=c;this._updateInterface();break;case "toggleDuration":this.options[a]=
c;break;case "nativeVideoControls":this.options[a]=b.extend({},this.options[a],c);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this._restrictNativeVideoControls();this._updateNativeVideoControls();break;case "noFullWindow":this.options[a]=b.extend({},this.options[a],c);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this._restrictNativeVideoControls();this._updateButtons();
break;case "noVolume":this.options[a]=b.extend({},this.options[a],c);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._updateVolume();this._updateMute();break;case "emulateHtml":this.options[a]!==c&&((this.options[a]=c)?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case "timeFormat":this.options[a]=b.extend({},this.options[a],c);break;case "keyEnabled":this.options[a]=c;c||this!==b.jPlayer.focus||(b.jPlayer.focus=null);break;case "keyBindings":this.options[a]=b.extend(!0,
{},this.options[a],c);break;case "audioFullScreen":this.options[a]=c;break;case "autoBlur":this.options[a]=c}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize();this._updateButtons();this._updateAutohide();this._trigger(b.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,
this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass);this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height});!this.status.waitForPlay&&this.html.active&&
this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var a=this,c=function(c){var f=!1;if("undefined"!==typeof a.internal.mouse){f=a.internal.mouse.x-c.pageX;var b=a.internal.mouse.y-c.pageY;f=0<Math.floor(f)||
0<Math.floor(b)}else f=!0;a.internal.mouse={x:c.pageX,y:c.pageY};f&&a.css.jq.gui.fadeIn(a.options.autohide.fadeIn,function(){clearTimeout(a.internal.autohideId);a.internal.autohideId=setTimeout(function(){a.css.jq.gui.fadeOut(a.options.autohide.fadeOut)},a.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?
this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",c),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",c),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",
!1)},_fullscreenAddEventListeners:function(){var a=this,c=b.jPlayer.nativeFeatures.fullscreen;c.api.fullscreenEnabled&&c.event.fullscreenchange&&("function"!==typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){a._fullscreenchange()}),document.addEventListener(c.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var a=b.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(a.event.fullscreenchange,
this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!b.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var a=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],c=b.jPlayer.nativeFeatures.fullscreen;c.used.webkitVideo&&(a=this.htmlElement.video);c.api.fullscreenEnabled&&c.api.requestFullscreen(a)},_exitFullscreen:function(){var a=b.jPlayer.nativeFeatures.fullscreen;if(a.used.webkitVideo)var c=
this.htmlElement.video;a.api.fullscreenEnabled&&a.api.exitFullscreen(c)},_html_initMedia:function(a){var c=b(this.htmlElement.media).empty();b.each(a.track||[],function(a,f){a=document.createElement("track");a.setAttribute("kind",f.kind?f.kind:"");a.setAttribute("src",f.src?f.src:"");a.setAttribute("srclang",f.srclang?f.srclang:"");a.setAttribute("label",f.label?f.label:"");f.def&&a.setAttribute("default",f.def);c.append(a)});this.htmlElement.media.src=this.status.src;"none"!==this.options.preload&&
this._html_load();this._trigger(b.jPlayer.event.timeupdate)},_html_setFormat:function(a){var c=this;b.each(this.formats,function(f,b){if(c.html.support[b]&&a[b])return c.status.src=a[b],c.status.format[b]=!0,c.status.formatType=b,!1})},_html_setAudio:function(a){this._html_setFormat(a);this.htmlElement.media=this.htmlElement.audio;this._html_initMedia(a)},_html_setVideo:function(a){this._html_setFormat(a);this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(a.poster)?
a.poster:"");this.htmlElement.media=this.htmlElement.video;this._html_initMedia(a)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=
!1,this.htmlElement.media.load());clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var c=this,f=this.htmlElement.media;this.androidFix.pause=!1;this._html_load();if(this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=a;else if(isNaN(a))f.play();else{this.internal.cmdsIgnored&&f.play();try{if(!f.seekable||"object"===typeof f.seekable&&0<f.seekable.length)f.currentTime=a,f.play();else throw 1;}catch(l){this.internal.htmlDlyCmdId=setTimeout(function(){c.play(a)},250);
return}}this._html_checkWaitForPlay()},_html_pause:function(a){var c=this,f=this.htmlElement.media;this.androidFix.play=!1;0<a?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);f.pause();if(this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=a;else if(!isNaN(a))try{if(!f.seekable||"object"===typeof f.seekable&&0<f.seekable.length)f.currentTime=a;else throw 1;}catch(l){this.internal.htmlDlyCmdId=setTimeout(function(){c.pause(a)},250);return}0<a&&this._html_checkWaitForPlay()},
_html_playHead:function(a){var c=this,f=this.htmlElement.media;this._html_load();try{if("object"===typeof f.seekable&&0<f.seekable.length)f.currentTime=a*f.seekable.end(f.seekable.length-1)/100;else if(0<f.duration&&!isNaN(f.duration))f.currentTime=a*f.duration/100;else throw"e";}catch(l){this.internal.htmlDlyCmdId=setTimeout(function(){c.playHead(a)},250);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=
!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(a,c){this.html.audio.available&&(this.htmlElement.audio[a]=c);this.html.video.available&&(this.htmlElement.video[a]=c)},_aurora_setAudio:function(a){var c=this;b.each(this.formats,function(f,b){if(c.aurora.support[b]&&a[b])return c.status.src=a[b],c.status.format[b]=!0,c.status.formatType=
b,!1});this.aurora.player=new AV.Player.fromURL(this.status.src);this._addAuroraEventListeners(this.aurora.player,this.aurora);"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(a){this.status.waitForLoad||isNaN(a)||this.aurora.player.seek(a);
this.aurora.player.playing||this.aurora.player.play();this.status.waitForLoad=!1;this._aurora_checkWaitForPlay();this._updateButtons(!0);this._trigger(b.jPlayer.event.play)},_aurora_pause:function(a){isNaN(a)||this.aurora.player.seek(1E3*a);this.aurora.player.pause();0<a&&this._aurora_checkWaitForPlay();this._updateButtons(!1);this._trigger(b.jPlayer.event.pause)},_aurora_playHead:function(a){0<this.aurora.player.duration&&this.aurora.player.seek(a*this.aurora.player.duration/100);this.status.waitForLoad||
this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(a){this.aurora.player.volume=100*a},_aurora_mute:function(a){a?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume;this.aurora.properties.muted=a},_flash_setAudio:function(a){var c=this;try{b.each(this.formats,function(f,b){if(c.flash.support[b]&&a[b]){switch(b){case "m4a":case "fla":c._getMovie().fl_setAudio_m4a(a[b]);
break;case "mp3":c._getMovie().fl_setAudio_mp3(a[b]);break;case "rtmpa":c._getMovie().fl_setAudio_rtmp(a[b])}c.status.src=a[b];c.status.format[b]=!0;c.status.formatType=b;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(k){this._flashError(k)}},_flash_setVideo:function(a){var c=this;try{b.each(this.formats,function(f,b){if(c.flash.support[b]&&a[b]){switch(b){case "m4v":case "flv":c._getMovie().fl_setVideo_m4v(a[b]);break;case "rtmpv":c._getMovie().fl_setVideo_rtmp(a[b])}c.status.src=
a[b];c.status.format[b]=!0;c.status.formatType=b;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(k){this._flashError(k)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(g){this._flashError(g)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(g){this._flashError(g)}this.status.waitForLoad=!1},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(h){this._flashError(h)}this.status.waitForLoad=
!1;this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(h){this._flashError(h)}0<a&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(h){this._flashError(h)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&
(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(h){this._flashError(h)}},_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(h){this._flashError(h)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var a=0;if(window.ActiveXObject)try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");var f=c.GetVariable("$version");
f&&(f=f.split(" ")[1].split(","),a=parseInt(f[0],10)+"."+parseInt(f[1],10))}catch(l){}else navigator.plugins&&0<navigator.mimeTypes.length&&(c=navigator.plugins["Shockwave Flash"])&&(a=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*a},_checkForFlash:function(a){var c=!1;this._getFlashPluginVersion()>=a&&(c=!0);return c},_validString:function(a){return a&&"string"===typeof a},_limitValue:function(a,c,f){return a<c?c:a>f?f:a},_urlNotSetError:function(a){this._error({type:b.jPlayer.error.URL_NOT_SET,
context:a,message:b.jPlayer.errorMsg.URL_NOT_SET,hint:b.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(a){var c=this.internal.ready?"FLASH_DISABLED":"FLASH";this._error({type:b.jPlayer.error[c],context:this.internal.flash.swf,message:b.jPlayer.errorMsg[c]+a.message,hint:b.jPlayer.errorHint[c]});this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(a){this._trigger(b.jPlayer.event.error,a);this.options.errorAlerts&&this._alert("Error!"+(a.message?"\n"+a.message:"")+(a.hint?
"\n"+a.hint:"")+"\nContext: "+a.context)},_warning:function(a){this._trigger(b.jPlayer.event.warning,e,a);this.options.warningAlerts&&this._alert("Warning!"+(a.message?"\n"+a.message:"")+(a.hint?"\n"+a.hint:"")+"\nContext: "+a.context)},_alert:function(a){a="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+a;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(a):alert(a)},_emulateHtmlBridge:function(){var a=this;b.each(b.jPlayer.emulateMethods.split(/\s+/g),
function(c,f){a.internal.domNode[f]=function(c){a[f](c)}});b.each(b.jPlayer.event,function(c,f){var d=!0;b.each(b.jPlayer.reservedEvent.split(/\s+/g),function(a,f){if(f===c)return d=!1});d&&a.element.bind(f+".jPlayer.jPlayerHtml",function(){a._emulateHtmlUpdate();var f=document.createEvent("Event");f.initEvent(c,!1,!0);a.internal.domNode.dispatchEvent(f)})})},_emulateHtmlUpdate:function(){var a=this;b.each(b.jPlayer.emulateStatus.split(/\s+/g),function(c,f){a.internal.domNode[f]=a.status[f]});b.each(b.jPlayer.emulateOptions.split(/\s+/g),
function(c,f){a.internal.domNode[f]=a.options[f]})},_destroyHtmlBridge:function(){var a=this;this.element.unbind(".jPlayerHtml");b.each((b.jPlayer.emulateMethods+" "+b.jPlayer.emulateStatus+" "+b.jPlayer.emulateOptions).split(/\s+/g),function(c,f){delete a.internal.domNode[f]})}};b.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};b.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",
FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+b.jPlayer.prototype.version.script+
" needs Jplayer.swf version "+b.jPlayer.prototype.version.needFlash+" but found "};b.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};
b.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};b.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};
b.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}});
function Accordion(b){window[b]=this;var e=this,d,c,a,f,g;e.initialize=function(){d=e.settings.cssClasses.expandedSectionHeader;c=e.settings.cssClasses.sectionHeader;a=e.settings.onSectionSlideDown;f=e.settings.onSectionSlideUp;g=e.settings.onInitComplete;$.each(e.foldableSections(),function(a,c){$("#"+c.headerLink+", #"+c.header).click(function(){e.handleSectionClick(c)})});null!=g&&$(document).trigger(g,e)};e.foldableSections=function(){return $(e.sections).filter(function(a,c){return c.isFoldable})};
e.handleSectionClick=function(a){a.isExpanded?e.collapseSection(a):e.expandSection(a);$("#"+a.headerLink).attr("aria-expanded",a.isExpanded)};e.expandSection=function(f){$("#"+f.header).removeClass(c).addClass(d);$("#"+f.content).slideDown(e.settings.animationDuration,function(){null!=a&&$(document).trigger(a,f.content)});f.isExpanded=!f.isExpanded};e.collapseSection=function(a){$("#"+a.header).removeClass(d).addClass(c);$("#"+a.content).slideUp(e.settings.animationDuration,function(){null!=f&&$(document).trigger(f,
a.content)});a.isExpanded=!a.isExpanded};return e}
function AccordionGrid(b){window[b]=this;var e=this;this.expandedRowCssClass=this.hiddenGridCssClass=null;this.subGridClientIds=[];e.toggleAccordionGrid=function(b,c){var a=$("."+b).parent("li");a.hasClass(e.hiddenGridCssClass)||void 0==c?("UL"!=$("."+b).get(0).tagName&&$(e.subGridClientIds).each(function(){this.cssClass==b&&1>this.totalCount&&this.refresh()}),$(c).addClass(e.expandedRowCssClass),a.removeClass(e.hiddenGridCssClass)):($(c).removeClass(e.expandedRowCssClass),a.addClass(e.hiddenGridCssClass))};
e.reOpenOnPostBack=function(b,c){""!=b&&void 0!=b&&e.toggleAccordionGrid(b);""!=c&&void 0!=c&&e.toggleAccordionGrid(c)};e.getSelectedValues=function(){var b=!1;$(e.subGridClientIds).each(function(){0<this.getSelectedValues().length&&(b=!0)});return b?!0:""}}
function AsyncDependenciesResolver(){var b={},e={deferredObjects:{},getOrCreateDeferredObject:function(b){if(e.deferredObjects[b])return e.deferredObjects[b];e.deferredObjects[b]=$.Deferred();return e.deferredObjects[b]}};b.dependencyLoaded=function(b){e.getOrCreateDeferredObject(b).resolve()};b.subscribeToDependencyLoadEvent=function(b,c){e.getOrCreateDeferredObject(b).done(c)};b.loadScriptDynamically=function(b,c){var a=document.createElement("script");a.type="text/javascript";a.onload=c;a.onreadystatechange=
function(){"complete"===a.readyState&&c()};a.src=b;$(window).load(function(){document.getElementsByTagName("head")[0].appendChild(a)})};b.loadScriptAsync=function(b){var c=$.Deferred(),a=function(){c.resolve()},f=function(){c.reject()},d=function(){c.notify()},e=document.createElement("script");e.type="text/javascript";e.onload=a;e.onreadystatechange=function(){"complete"===e.readyState&&a()};e.onerror=f;if(b.attributes)for(var k in b.attributes)b.attributes.hasOwnProperty(k)&&e.setAttribute(k,b.attributes[k]);
e.src=b.url;document.getElementsByTagName("head")[0].appendChild(e);b.timeoutInMilliseconds&&setTimeout(f,b.timeoutInMilliseconds);b.notifyLongLoading&&setTimeout(d,3E3);return c.promise()};return b}var asyncDependencies={signalRHubScript:0},asyncDependenciesResolver=AsyncDependenciesResolver();
function BrowserSniffer(){var b={isDirectoryUploadSupported:function(){var b=document.createElement("input");return"webkitdirectory"in b||"directory"in b},isDragAndDropSupported:function(){return"draggable"in document.createElement("span")},isInternetExplorer9:function(){return $("body").hasClass("h-ie9")},isInternetExplorer10OrOlder:function(){return 0<window.navigator.userAgent.indexOf("MSIE ")?!0:!1},isInternetExplorer11:function(){return 0<window.navigator.userAgent.indexOf("Trident/")?!0:!1},
isInternetExplorerAnyVersion:function(){return b.isInternetExplorer9()||b.isInternetExplorer10OrOlder()||b.isInternetExplorer11()?!0:!1},isFirefox:function(){return 0<navigator.userAgent.indexOf("Firefox")?!0:!1},isEdge:function(){return 0<window.navigator.userAgent.indexOf("Edge/")?!0:!1},isMobileIos:function(){return window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1},isAnyMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?
!0:!1},isChromeBookOs:function(){return window.navigator.userAgent.match(/(CrOS)/g)?!0:!1}};return b}var browserSniffer=BrowserSniffer();
function Calendar(b){window[b]=this;var e=this,d,c,a,f;e.initialize=function(){c=e.settings;a=e.customSettings;f=e.customScripts;d=e.calendar;$.extend(c,{select:f.onSelect,eventRender:f.eventRender,dayRender:f.dayRender,eventDrop:f.eventDrop,eventResize:f.eventResize,eventClick:f.eventClick,loading:f.loading,weekNumberCalculation:function(a){var f=d.fullCalendar("getView");return f&&f.name==window.fullCalendarViews.agendaDay?"":Calendar.getWeekNumber(a,c.firstDay)},viewChange:f.onChangeView,viewRender:function(a){d.fullCalendar("option",
"contentHeight",a.name==window.fullCalendarViews.month?NaN:2500);f.viewRender(a)},updateTodayButton:f.updateTodayButton,eventAfterAllRender:f.eventAfterAllRender,showMoreMousedown:f.showMoreMousedown});d.fullCalendar(c)};e.refetchEvents=function(c,f){var b=[];$.each(c,function(a,c){b.push(c.id)});$.isFunction(f)&&f(!0);CCL.CommonFunctions.safeAjaxPost({url:a.refetchEventsSource,data:{ids:b},datatype:"json",success:function(a){$.each(c,function(a,c){d.fullCalendar("removeEvents",c.id)});$.each(a,function(a,
f){a=$.grep(c,function(a){return a.id==f.id})[0];a.source?d.fullCalendar("renderEventForSource",f,a.source):d.fullCalendar("renderEvent",f)});$.isFunction(f)&&f(!1)},error:function(){$.isFunction(f)&&f(!1)}})}}
Calendar.getWeekNumber=function(b,e){e="number"==typeof e?e:1;e=0==e?7:e;var d=Calendar.calculateWeekNumber(b,e);if(11==b.getMonth()){var c=new Date(b.getFullYear()+1,0,1);if(7==e)c=new Date(b.getFullYear(),b.getMonth(),b.getDate()-b.getDay()),(new Date(c.getFullYear(),c.getMonth(),c.getDate()+6)).getFullYear()>c.getFullYear()&&(d=1);else{c=c.getIsoDay();var a=new Date(b.getFullYear(),b.getMonth(),b.getDate()-(b.getIsoDay()-1));(new Date(a.getFullYear(),a.getMonth(),a.getDate()+6)).getFullYear()>
a.getFullYear()&&5>c&&(d=1)}}0==d&&(b=new Date(b.getFullYear(),b.getMonth(),b.getDate()-7),d=Calendar.calculateWeekNumber(b,e));return d};
Calendar.calculateWeekNumber=function(b,e){var d=[0,31,59,90,120,151,181,212,243,273,304,334],c=[0,31,60,91,121,152,182,213,244,274,305,335];d=1==(new Date(b.getFullYear(),1,29)).getMonth()?b.getDate()+c[b.getMonth()]:b.getDate()+d[b.getMonth()];b=b.getIsoDay();b=Calendar.getShiftBetweenNumbers(e,b);b=Calendar.shiftNumber(1,b);return Math.floor((d-b+(7==e?13:10))/7)};Calendar.getShiftBetweenNumbers=function(b,e){for(var d=0;7>d;d++){if(b==e)return d;b++;8==b&&(b=1)}return 0};
Calendar.shiftNumber=function(b,e){if(0==e)return b;for(var d=0;d<e;d++)b++,8==b&&(b=1);return b};Date.prototype.getIsoDay=function(){var b=this.getDay();return 0==b?7:b};
function ClientInlineEditor(b,e,d,c,a,f,g){if(b){var h=this;h.isWatermarkMode=!1;h.isGetInitialTextFromHidden=!!d;h.hiddenField=d;h.viewField=$(b);h.editModeActivator=e?$(e):h.viewField;h.editField=void 0;h.editHidden=void 0;h.editLink=$();h.onEditFunction=a;h.onChangeModeFunction=f;h.userData=g;h.options=$.extend({multiline:!1,watermark:"",autoResize:!1,autoResizeAdditionalHeight:void 0,clickToEditToolTip:"",clickToSaveToolTip:"",submitOnEnter:!1,ignoreViewModeText:!1,editFieldCssClass:"",watermarkCssClass:"",
editFieldAutoWidth:!0,editFieldDisplayInline:!1,viewFieldRemoveDisplay:!1,highlightOnSave:!1,highlightOnFocus:!1,maxLength:0,renderRightLinkWithIcon:!1,rightLinkCssClass:"",rightLinkViewModeCssClass:"",rightLinkEditModeCssClass:"",suppressOriginalBehaviour:!1,blockedCharacters:[],forceContainerSize:!1,preventLineBreaksInMultilineMode:!1},c);h.options.useWatermark=!!h.options.watermark;h.options.useClickToEditToolTip=!!h.options.clickToEditToolTip;h.options.useEditFieldCssClass=!!h.options.editFieldCssClass;
h.options.useWatermarkCssClass=!!h.options.watermarkCssClass;h.options.renderRightLinkWithIcon&&(h.editLink=$("<a href='#'></a>").addClass(h.options.rightLinkCssClass).append($("<span/>").addClass(this.hiddenCssClass)).append($("<span/>").attr("aria-hidden","true").append($("<img alt='' />").prop("src",CommonConstants.onePixelTransparentImageSource))).insertAfter(h.viewField).click({self:h},h.rightLinkClick).keydown({self:h},h.rightLinkKeyDown),h.initDeviceChecks(),h.toggleRightLinkMode(!0,!0));h.options.suppressOriginalBehaviour||
h.editModeActivator.click($.proxy(h.switchToEditMode,h)).filter("a").keydown({self:h},h.editModeActivatorKeyDown);h.toggleActivatorTooltip(!0);h.fixSize();return{hideWatermark:function(){h.hideWatermark()},switchToEditMode:function(){h.switchToEditMode();return h.editField},setNewText:function(a){h.setNewText(a)},getEditFieldText:function(){return h.getEditFieldText()},setToolTip:function(a){h.options.clickToEditToolTip=a;h.editModeActivator.attr("title",a)},updateTextOnBlur:function(){h.updateTextOnBlur()}}}}
ClientInlineEditor.prototype={isIos:void 0,hiddenCssClass:"h-hidden",createEditor:function(b){this.options.renderRightLinkWithIcon||this.initDeviceChecks();this.editField=$(b.multiline?"<textarea/>":'<input type="text"/>').css("resize","none").addClass(this.hiddenCssClass);this.setEditFieldWidth();b.useEditFieldCssClass&&this.editField.addClass(b.editFieldCssClass);!b.multiline&&b.maxLength&&this.editField.attr("maxlength",b.maxLength);b.multiline&&b.maxLength&&this.editField.maxlength({max:b.maxLength});
this.editHidden=this.isGetInitialTextFromHidden?$(this.hiddenField):$('<input type="hidden"/>').val(this.viewField.text());this.setNewText(b.ignoreViewModeText?"":$.trim(this.editHidden.val()));this.viewField.after(this.editField);this.isGetInitialTextFromHidden||this.viewField.after(this.editHidden);b.multiline&&b.autoResize&&this.editField.autogrow(void 0===b.autoResizeAdditionalHeight?{}:{additionalHeight:b.autoResizeAdditionalHeight});this.switchToViewMode(!1);this.editField.removeClass(this.hiddenCssClass).keyup({self:this},
this.editFieldKeyUp).keypress({self:this},this.editFieldKeyPress).on("paste",$.proxy(this.hideWatermark,this)).focus({self:this},this.editFieldFocus).blur({self:this},this.editFieldBlur)},setNewText:function(b){this.options.ignoreViewModeText||this.options.suppressOriginalBehaviour||(b?this.options.multiline?this.viewField.html(CommonFunctions.replaceLineBreaksWithBrTags(b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;"))):this.viewField.text(b):this.viewField.html(""));
this.editField||this.createEditor(this.options);this.editField.val(b);this.editHidden.val(b)},fixSize:function(){if(this.options.forceContainerSize){var b=this.viewField.parent();b.css("width","0px");setTimeout(function(){b.css("width","auto")},10)}},switchToViewMode:function(b,e){this.editField.hide();b&&this.options.highlightOnSave?this.viewField.fadeIn("slow"):this.viewField.show();this.options.viewFieldRemoveDisplay&&this.viewField.css("display","");this.toggleActivatorTooltip(!0);this.fireChangeMode(!1,
b,e);this.toggleRightLinkMode(!0)},switchToEditMode:function(){this.editField?this.setEditFieldWidth():this.createEditor(this.options);this.isViewMode()&&(this.viewField.hide(),this.editField.show(),this.options.editFieldDisplayInline&&this.editField.css("display","inline"),this.toggleActivatorTooltip(!1),this.fireChangeMode(!0,!1),this.editField.focus(),this.toggleRightLinkMode(!1))},fireChangeMode:function(b,e,d){if(this.onChangeModeFunction){var c=this;setTimeout(function(){c.onChangeModeFunction({isEditMode:b,
isNewTextSaved:e,actualText:d,source:c.viewField,currentOptions:c.options,userData:c.userData})})}this.fixSize()},isViewMode:function(){return this.editField.is(":hidden")},updateText:function(){var b=this;b.updateValue();var e={isUpdateSuccess:!0,stopOnEdit:!1,actualText:b.isWatermarkMode?"":b.editField.val(),source:b.viewField,currentOptions:b.options,userData:b.userData};if(e.actualText===b.editHidden.val())setTimeout(function(){b.switchToViewMode(!1)},b.options.renderRightLinkWithIcon?100:0);
else if(b.toggleEditField(!1),b.onEditFunction)b.onEditFunction(e,$.proxy(b.onUpdateComplete,b));else setTimeout(function(){b.onUpdateComplete(e)})},onUpdateComplete:function(b){this.toggleEditField(!0);b.isUpdateSuccess?(this.setNewText(b.actualText),this.switchToViewMode(!0,b.actualText)):b.stopOnEdit||this.rollbackText()},rollbackText:function(){this.editField.val(this.editHidden.val());this.switchToViewMode(!1)},toggleEditField:function(b){this.editField.prop("disabled",!b)},toggleActivatorTooltip:function(b){this.editModeActivator.css("cursor",
b?"pointer":"default");this.options.useClickToEditToolTip&&this.editModeActivator.attr("title",b?this.options.clickToEditToolTip:null)},isEnterKey:function(b){return b.which===CommonConstants.keyCodes.enter&&!b.shiftKey},isEnterKeyAndNeedToSubmit:function(b){return this.options.submitOnEnter&&b.which===CommonConstants.keyCodes.enter&&!b.shiftKey},shouldPreventLineBreakEntering:function(b){return b.which===CommonConstants.keyCodes.enter&&!this.isEnterKeyAndNeedToSubmit(b)&&(this.options.multiline&&
this.options.preventLineBreaksInMultilineMode||!this.options.multiline&&!b.shiftKey)},showWatermark:function(){!this.options.useWatermark||this.isWatermarkMode||this.editField.val()||(this.options.useWatermarkCssClass&&this.editField.addClass(this.options.watermarkCssClass),this.editField.val(this.options.watermark),this.isWatermarkMode=!0)},hideWatermark:function(){this.options.useWatermark&&this.isWatermarkMode&&(this.options.useWatermarkCssClass&&this.editField.removeClass(this.options.watermarkCssClass),
this.editField.val(""),this.isWatermarkMode=!1)},editModeActivatorKeyDown:function(b){var e=b.data.self;e.fireClickByKeyDown(b,e.editModeActivator)},rightLinkKeyDown:function(b){var e=b.data.self;e.fireClickByKeyDown(b,e.editLink)},fireClickByKeyDown:function(b,e){b.which===CommonConstants.keyCodes.enter&&(b.preventDefault(),setTimeout(function(){e.click()},400))},editFieldFocus:function(b){b=b.data.self;var e=b.editField.get(0);b.showWatermark();CommonFunctions.setFocusTo(e,!b.isWatermarkMode);b.options.highlightOnFocus&&
(b.isIos?e.setSelectionRange(0,e.value.length):b.editField.select());b.options.multiline&&b.options.autoResize&&b.editField.change()},editFieldBlur:function(b){b.data.self.updateTextOnBlur();b.stopPropagation()},updateTextOnBlur:function(){this.editField&&!this.editField.prop("disabled")&&(this.hideWatermark(),this.updateText())},editFieldKeyUp:function(b){var e=b.data.self;if(!e.isViewMode()){if(e.editField.prop("disabled"))return!0;if(b.which!==CommonConstants.keyCodes.escape||e.options.doNotRollbackTextOnEscape)if(e.isEnterKey(b)){if(e.options.multiline&&
!e.isEnterKeyAndNeedToSubmit(b))return!0;e.updateText();if(e.isEnterKeyAndNeedToSubmit(b))return b.stopPropagation(),!1}else e.isIos||e.isAndroidDevice||e.updateValue();else e.rollbackText()}return!0},updateValue:function(){if(null!=this.options.blockedCharacters&&0<this.options.blockedCharacters.length){for(var b=this.editField.val(),e=b,d=this.options.blockedCharacters.length,c=0;c<d;c++)if(this.options.blockedCharacters[c])for(;-1<b.indexOf(this.options.blockedCharacters[c]);)b=b.replace(this.options.blockedCharacters[c],
"");b!==e&&this.editField.val(b)}},editFieldKeyPress:function(b){var e=b.data.self;e.hideWatermark();e.shouldPreventLineBreakEntering(b)&&b.preventDefault();return!e.isEnterKeyAndNeedToSubmit(b)},initDeviceChecks:function(){this.isAndroidDevice=(this.isIos=CommonFunctions.isIos())?!1:CommonFunctions.isAndroidDevice()},rightLinkClick:function(b){var e=b.data.self;!e.editField||e.isViewMode()?e.switchToEditMode():e.isIos&&e.updateTextOnBlur();b.preventDefault()},toggleRightLinkMode:function(b,e){this.editLink.toggleClass(this.options.rightLinkEditModeCssClass,
!b);var d=b?this.options.clickToEditToolTip:this.options.clickToSaveToolTip;this.editLink.find("."+this.hiddenCssClass).text(d);this.editLink.find("[aria-hidden=true]").prop("title",d);this.isIos||this.isAndroidDevice||this.editLink.toggleClass(this.options.rightLinkViewModeCssClass,b);b&&!e&&this.editLink.focus().blur()},getEditFieldText:function(){return this.editField.val()},setEditFieldWidth:function(){this.options.editFieldAutoWidth&&this.editField.width(this.viewField.width())}};
function CodeContracts(){return{require:function(b,e){if(!objectState.isBoolean(b)||objectState.isNullOrUndefined(e))throw"invalid contract";if(!b)if(objectState.isFunction(e))e();else throw e;}}}var contract=CodeContracts();
function ColorPicker(b){function e(a){a=$(a).find("input:hidden:first").val();c(a)}function d(){var a=h.getSelectedColorKey();c(a)}function c(a){k.trigger(h.settings.clientEvents.colorOver,a)}function a(){if(l.is(":hidden")){var a=k.offset(),c=a.top+k.height()+3+"px";a=h.settings.popupAlignment===h.settings.popupAlignmentType.right?a.left-l.width()+k.width()+3+"px":a.left+"px";l.css({top:c,left:a}).show()}else f()}function f(a){l.hide();a&&k.focus()}function g(){l=$("<div></div>").addClass(h.settings.cssClasses.popup).addClass(h.settings.cssClasses.customPopup).appendTo("form").keydown(function(a){(a||
window.event).which===CommonConstants.keyCodes.escape&&(d(),f());return!0});m=$("<ul></ul>").appendTo(l);for(var a=0;a<h.settings.colorKeys.length;a++){var c=h.settings.colorKeys[a],b=$("<li></li>").append($('<input type="hidden" />').val(c)).append($("<a></a>").attr("href","javascript:void(0);").addClass(h.settings.colors[c].PickerColorCssClass)).appendTo(m);c===h.settings.selectedColorKey&&b.addClass(h.settings.cssClasses.selected)}}window[b]=this;var h=this,k,l,m;h.initialize=function(){k=h.controls.pickerLink;
g();$(document).click(function(a){a=a?a:window.event;var c=a.srcElement||a.target;!l.length||l.is(":hidden")||c===k.get(0)||$(c).parents().filter("#"+k.prop("id")).length||(c=l.offset(),a.clientX>c.left&&a.clientX<c.left+l.width()&&a.clientY>c.top&&a.clientY<c.top+l.height()||f())}).on("closeColorPicker",function(){f(!1)});var b=m.find("li");b.find("a").click(function(){var a=$(this.parentNode),d=a.find("input:hidden:first").val();f();b.removeClass(h.settings.cssClasses.selected);a.addClass(h.settings.cssClasses.selected);
c(d);k.trigger(h.settings.clientEvents.colorChange,d);return!1}).mouseenter(function(){e(this.parentNode)}).mouseleave(function(){d()}).focusin(function(){e(this.parentNode)}).focusout(function(){d()});k.click(function(c){c.preventDefault();$(document).click();a()})};h.getColorByKey=function(a){return h.settings.colors[a].RepaintColorCssClass};h.setColor=function(a){var c=m.find("li > input:hidden:[value='"+a+"']").parent();m.find("li").removeClass(h.settings.cssClasses.selected);c.addClass(h.settings.cssClasses.selected);
k.trigger(h.settings.clientEvents.colorChange,a)};h.setPickerLink=function(a){h.controls.pickerLink!==a&&(d(),f(),h.controls.pickerLink=a,h.initialize())};h.openPopup=function(){a()};h.getSelectedColorKey=function(){return m.find("li."+h.settings.cssClasses.selected+" input:hidden:first").val()};return h}
function ColorPickerMVC(b,e,d,c){function a(c){f(n,w,r);f(v,w,r);u&&u.setAttribute("class",m.preview+" "+r);p.classList.toggle(m.open);p.classList.contains(m.open)?(document.addEventListener("click",a),document.addEventListener("touch",a)):(document.removeEventListener("click",a),document.removeEventListener("touch",a));c&&c.stopPropagation();return!1}function f(a,c,f){a.setAttribute("value",c);a.setAttribute("class",f);try{a.dispatchEvent(new Event("change"))}catch(E){c=document.createEvent("Event"),
c.initEvent("change",!0,!0),a.dispatchEvent(c)}}function g(a,c){a&&c&&(t&&t.removeAttribute("selected"),t=c,w=c.value,r=a.classList?a.classList[0]:"",f(n,w,r),f(v,w,r),u&&u.setAttribute("class",m.preview+" "+r),c.setAttribute("selected","selected"))}function h(c,f){return function(b){g(c,f);a(b);return!1}}function k(a,c){return function(b){f(v,c.value,a.classList[0]);u&&u.setAttribute("class",m.preview+" "+a.classList[0]);b.stopPropagation();return!1}}function l(c,f){return function(c){if(c.keyCode===
CCL.CommonConstants.keyCodes.escape)return a(c),!1}}var m={preview:"ccl-colorpicker-mvc__previewbox",open:"ccl-colorpicker-mvc--open"},n=document.getElementById(b),q=document.getElementById(e),p=n.parentElement,v=p.getElementsByTagName("input")[1],u=p.getElementsByClassName(m.preview)[0];b=p.getElementsByTagName("ul")[0].children;var w,r;p.addEventListener("mouseout",function(){f(n,w,r);f(v,w,r);u&&u.setAttribute("class",m.preview+" "+r)});p.addEventListener("click",function(a){a.stopPropagation();
!1});p.addEventListener("touch",function(a){a.stopPropagation();!1});u&&u.addEventListener("click",a);u&&u.addEventListener("touch",a);q.addEventListener("click",a);q.addEventListener("touch",a);Array.prototype.forEach.call(b,function(a){var c=a.children[0],f=a.children[1];a.addEventListener("click",h(f,c));a.addEventListener("touch",h(f,c));a.addEventListener("mouseover",k(f,c));a.addEventListener("focus",k(f,c));a.addEventListener("keydown",l(f,c))});b[b.length-1].addEventListener("keydown",function(a){a.keyCode===
CCL.CommonConstants.keyCodes.tab&&(q.focus(),a.stopPropagation())});c&&(d=Math.floor(Math.random()*b.length)+1);var t=p.querySelector("ul > li > input[value='"+d+"']");g(t.nextElementSibling,t)}Array.removeElements=function(b,e){for(var d=[].concat(e),c=d.length,a;c&&b.length;)for(e=d[--c];-1!=(a=b.indexOf(e));)b.splice(a,1);return b};String.format||(String.format=function(b){return CCL.CommonFunctions.formatString.apply(this,arguments)});
String.prototype.getQueryStringParameter||(String.prototype.getQueryStringParameter=function(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");b=(new RegExp("[\\?&]"+b+"=([^&#]*)","i")).exec(this);return null===b?"":decodeURIComponent(b[1].replace(/\+/g," "))});
String.prototype.setQueryStringParameter||(String.prototype.setQueryStringParameter=function(b,e){return e?-1<this.indexOf(b+"=")?this.replace(new RegExp(b+"=[^&]*(&|$)"),b+"="+encodeURIComponent(e)+"&"):this.slice(0,this.indexOf("?")+1)+b+"="+encodeURIComponent(e)+"&"+this.slice(this.indexOf("?")+1):-1<this.indexOf(b+"=")?this.replace(new RegExp(b+"=[^&]*(&|$)"),""):this.toString()});
String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(b,e){e=e||0;return this.lastIndexOf(b,e)===e}});var CCL;
(function(b){(function(b){})(b.CommonConstants||(b.CommonConstants={}));(function(b){b.setFocusTo=function(b,c){b.setSelectionRange?(b.focus(),c=c?b.value.length:0,b.setSelectionRange(c,c)):b.createTextRange&&(b=b.createTextRange(),c&&b.collapse(!1),b.select())};b.setupDropDownMenu=function(b,c,a,f){var d=b?"touchstart":"click";a.find("a").click(function(){a.hide();f&&f()});c.on(d+" keydown",function(c){if(c.type===d||c.which===CommonConstants.keyCodes.arrowDown)"false"===$(".c-messages-popup").attr("aria-hidden")&&
$(".c-messages__overlay").click(),a.toggle()});$(document).on(d+" "+CommonTriggers.clickInInnerFrame,function(b){if(a.is(":visible")){var d=b.target,e=$(d);b=d===c.get(0)||1===e.closest(c).length;d=!b&&(d===a.get(0)||1===e.closest(a).length);b||d||(a.hide(),f&&f())}});$(document).keydown(function(c){c.which===CommonConstants.keyCodes.escape&&($(a).hide(),f&&f())})};b.safeExecuteFunction=function(b){if(b)try{return b()}catch(c){}return!0};b.isPlainText=function(b){var c=/^s*<[a-z]+>[^<]*<\/[a-z]+>(s|\n)*$/ig;
b=b.replace(/<br((\s*)|(\s[^>]*))\/?>/gi,"");b=b.replace(/<\/p>\s*<p(\s+[^>]*)?>/gi,"\n");return-1==b.indexOf("<")||null!=b.match(c)};b.isIos=function(){return null!=navigator.userAgent.match(/iPod|iPhone|iPad/i)};b.isAndroidDevice=function(){return null!=navigator.userAgent.match(/Android/i)};b.isAndroidBrowser=function(){return $("body").hasClass("h-android")};b.isIe=function(){return-1!==navigator.userAgent.indexOf("MSIE")||/rv:11.0/i.test(navigator.userAgent)};b.setEmbeddedObjectsVisibility=function(d,
c,a){c&&c.find("applet").toggle(d);a&&(c=a.find("iframe,object"),b.isIe()?c.toggle(d):c.css("visibility",d?"visible":"hidden").toggleClass("h-visibility-hidden",!d))}})(b.CommonFunctions||(b.CommonFunctions={}));(function(b){})(b.CommonWindowMessages||(b.CommonWindowMessages={}));(function(b){})(b.CommonTriggers||(b.CommonTriggers={}))})(CCL||(CCL={}));var CommonConstants=CCL.CommonConstants,CommonFunctions=CCL.CommonFunctions,CommonWindowMessages=CCL.CommonWindowMessages,CommonTriggers=CCL.CommonTriggers;
(function(b){b.fn.setCursorPosition=function(b){this.each(function(d,c){c.setSelectionRange?c.setSelectionRange(b,b):c.createTextRange&&(d=c.createTextRange(),d.collapse(!0),d.moveEnd("character",b),d.moveStart("character",b),d.select())});return this};b.fn.scrollMinimal=function(){var e=this.offset().top,d=this.outerHeight(!0),c=b(window).scrollTop(),a=b(window).height();e<c?b(window).scrollTop(e):e+d>c+a&&b(window).scrollTop(e-a+d)};b.fn.toggleHyperlink=function(b){b?(this.removeAttr("disabled"),
this.removeData("disabled")):(this.attr("disabled","disabled"),this.data("disabled",!0));return this};b.fn.getIfHyperLinkEnabled=function(){return"disabled"!==this.attr("disabled")&&!this.data("disabled")};b.fn.maxlength=function(e){e=b.extend({max:200},e);return this.each(function(){var d=b(this);d.keypress(function(c){var a=e.max,f=b(c.target),d=c.which;(d>=CommonConstants.keyCodes.space||d===CommonConstants.keyCodes.enter)&&f.val().length>=a&&c.preventDefault()});d.change(function(c){var a=e.max;
c=b(c.target);c.val().length>a&&(a=c.val().substr(0,a),c.val(a))})})};b.fn.tclick=function(b){this.on("touchstart",function(d){b.call(this,d);d.stopPropagation();d.preventDefault()});this.on("click",function(d){b.call(this,d)});return this}})(jQuery);
(function(b){b.ContentBlockExpander=function(b,d){function c(a){if(!a)return!1;var c=a.css("max-height");return!c||0>=c.indexOf("px")?!1:parseInt(c.replace("px",""),10)==a.height()}function a(){n||(n=$('<div class="'+h.container+'" data-collapsed="1"><span class="'+h.line+'"></span><button type="button" id="'+m+'">'+d.lang.showMore+'</button><span class="'+h.line+'"></span></div>').insertAfter(b),n.find("button").attr({"aria-controls":b.prop("id")||null,"aria-expanded":"false"}).click(function(){f(!!n.attr("data-collapsed"))}))}
function f(a){(a=!!a)?n.removeAttr("data-collapsed"):n.attr("data-collapsed",1);$("#"+m).attr("aria-expanded",a.toString()).text(a?d.lang.showLess:d.lang.showMore);b.css("max-height",a?"":l)}if(!b||!d)throw"error invoking ContentBlockExpander";d.clientInstanceName&&(window[d.clientInstanceName]=this);var e=this,h=$.extend({},{overflow:"h-ov-hidden",container:"ccl-textexpander-container",line:"ccl-textexpander-line"},d.css),k=d.maxHeight||0,l=d.collapseHeight||k,m=d.clientInstanceName+b.prop("id")+
"_button",n;e.renderShowMoreLinkIfNeed=function(e){0<k&&(c(b)||b.height()>k)?setTimeout(function(){b.addClass(h.overflow);b.css("max-height",l);a();n.show();d.callback&&d.callback();f(e)},0):n&&(b.css("max-height",""),n.hide())};e.reRenderShowMoreLink=function(){n&&e.renderShowMoreLinkIfNeed(!n.attr("data-collapsed"))};e.renderShowMoreLinkIfNeed(!1)}})(CCL||(CCL={}));
function ContextDialog(b,e){function d(a,c,f){if(CommonFunctions.isIe()||CommonFunctions.isEdge()){var b=setInterval(c,1);setTimeout(function(){clearInterval(b);f&&f()},a)}else{var d=performance.now();requestAnimationFrame(function Q(b){c();b-d<=a?requestAnimationFrame(Q):f&&f()})}}function c(){try{return window.parent.location.href?window.parent:window.itslTop||window.top}catch(M){return window.itslTop||window.top}}var a=this,f=$(b),g,h={setFocus:!0,width:300,maxWidth:null,showArrow:!0,arrowOffset:"auto",
arrowLeft:void 0,arrowTop:void 0,align:"auto",valign:"auto",marginLeft:10,marginRight:10,marginTop:-40,marginBottom:40,toggleElement:null,customScripts:{beforeCloseDialog:null},zIndex:999,closeWithOutsideClick:!0,scrollToLastWindowOnClose:!0,allowAccessToParentWindow:!0,expandParentFrame:!0,closeButtonTooltip:"",blackThemeActivated:!1,showHeader:!0,showCloseLink:!0,useMobileViewIfNeeded:!0,closeOnEscape:!0,fadeContentEdgesOnScroll:!1,canHaveNegativeTop:!0,defaultPaddingTopPixels:5},k=f.wrap("<div class='ccl-context-dialog'></div>").parent(),
l=k.parent(),m=$("<header class='ccl-context-dialog-header'></header>").prependTo(k),n,q=$("<div class='ccl-context-dialog-header-beforetitle'></div>").appendTo(m),p=$("<h2></h2>").appendTo(m),v=$("<div class='ccl-context-dialog-arrow'></div>").prependTo(k),u,w=$("html"),r=$("body"),t=$(window),y,C,z=CommonFunctions.isAndroidBrowser(),E,G,D,F;a.dispose=function(){f.removeClass("ccl-context-dialog-content");f.insertBefore(k);k.remove();a=null};a.openDialogAt=function(b,d,e){e?b+=l.width():(b||(b=0),
d||(d=0));$(document).trigger("contextdialog:show",[f]);u=t.scrollTop();a.isMobileView=!1;h.useMobileViewIfNeeded?(w.addClass("ccl-context-dialog-has-overlay"),a.isMobileView=t.width()<=CommonConstants.mediaScreenSizes.mobile):k.addClass("ccl-disable-mobile-view");k.toggleClass("ccl-context-dialog-black-theme",h.blackThemeActivated);k.toggleClass("show-arrow",h.showArrow);k.removeClass("top bottom left right");h.width&&k.outerWidth(h.width);h.maxWidth&&k.css("max-width",h.maxWidth+"px");h.showHeader||
a.hideHeader();h.showCloseLink?n.css("top",h.defaultPaddingTopPixels):a.toggleCloseLink(!1);var m=l.position().left,q=t.width();if(a.isMobileView&&e)k.addClass("bottom"),k.css({left:h.marginLeft-m,width:q-h.marginLeft-h.marginRight}),v.css({left:m-h.marginLeft+b});else if(a.isMobileView){if(h.expandParentFrame&&(h.scrollToLastWindowOnClose&&t.scrollTop(0),CommonFunctions.makePostMessageCall(window.itslTop||window.top,new CommonWindowMessages.GenericMessage(CommonWindowMessages.MessageNames.expandContentAreaFrame)),
IframeResizer.reportSetIframeDefaultHeight()),m=c(),h.allowAccessToParentWindow&&m&&$(m).width()>CommonConstants.mediaScreenSizes.mobile&&a.adjustDialogPosition(b,d,e,q),(window.itslTop||window.top)!=window)try{var p=$(window.itslTop||window.top).width();p<t.width()&&r.outerWidth(p,!0)}catch(L){}}else a.adjustDialogPosition(b,d,e,q);k.show();y=(b=c())&&h.allowAccessToParentWindow?b.document.activeElement:document.activeElement;h.setFocus&&h.focusTarget&&h.focusTarget.focus();h.fadeContentEdgesOnScroll&&
G.invokeCallback(void 0,0);g=!0};a.openDialog=function(c){if(!g){var f=0,b=0;c&&("touchend"===c.type&&null!=c.originalEvent&&(f=c.originalEvent.changedTouches[0],c.pageX=f.pageX,c.pageY=f.pageY),f=c.pageX,b=c.pageY,0>=f&&0>=b&&c.target&&(b=$(c.target).offset(),f=b.left+c.target.offsetWidth/2,b=b.top+c.target.offsetHeight/2),c.stopPropagation());D=f;F=b;a.openDialogAt(f,b)}};a.openModal=function(){g||(E&&E.remove(),E=$("<div id='mask'></div>").appendTo("body").addClass("ccl-dialog-mask").click(a.closeDialog).css({opacity:"0",
filter:"alpha(opacity=0)","z-index":h.zIndex-1}),E.fadeTo(400,.5),a.openDialogAt($(window).width()/2,$(window).height()/2))};a.closeDialog=function(c){h.customScripts.beforeCloseDialog&&CommonFunctions.safeExecuteFunction(h.customScripts.beforeCloseDialog(c));a.isMobileView&&h.expandParentFrame&&(CommonFunctions.makePostMessageCall(window.itslTop||window.top,new CommonWindowMessages.GenericMessage(CommonWindowMessages.MessageNames.collapseContentAreaFrame)),IframeResizer.reportSetIframeDefaultHeight(),
r.width(""));E&&E.fadeOut(400,0,function(){E.remove();E=null});k.hide();w.removeClass("ccl-context-dialog-has-overlay");h.scrollToLastWindowOnClose&&t.scrollTop(u);$(document).trigger("contextdialog:close",[f]);g=!1;h.scrollToLastWindowOnClose&&y&&y.focus()};a.setCloseFunction=function(c){a.closeDialog=c;n.unbind("click");n.click(c)};a.setTitle=function(a){h.title=a;p.text(h.title)};a.setTitleTooltip=function(a){h.titleTooltip=a;p.attr("title",h.titleTooltip)};a.setHeader=function(a){q.html(a)};a.setContent=
function(a){f.html(a)};a.setCloseLinkFunction=function(a){n.unbind("click");n.click(a)};a.showFooter=function(){C&&C.show()};a.hideFooter=function(){C&&C.hide()};a.showHeader=function(){m.show()};a.hideHeader=function(){m.hide()};a.toggleCloseLink=function(a){n.toggle(a)};a.isOpened=function(){return g};a.setBeforeCloseDialog=function(a){h.customScripts.beforeCloseDialog=a};a.onEscape=function(){n.trigger("click")};a.mainContainer=k;a.arrowContainer=v;a.closeWithOutsideClick=function(a){h.closeWithOutsideClick=
a};a.adjustDialogPosition=function(a,c,f,b){a||(a=D);c||(c=F);b||(b=t.width());var d,e,g=k.outerWidth(),m=k.outerHeight(),n=t.scrollLeft(),q=t.scrollTop(),p=t.width()+n,w=t.height()+q;q=l.position().left;"auto"==h.align?e=p-a>g+h.marginLeft?a+h.marginLeft:a-g-h.marginRight:"center"==h.align?e=a-g/2:"left"==h.align?e=a-g-h.marginRight:"right"==h.align&&(e=a+h.marginLeft);"auto"==h.valign?d=w-h.marginBottom-c>m+h.marginTop?c+h.marginTop:w-m-h.marginBottom:"top"==h.valign?d=c-m-h.marginBottom:"center"==
h.valign?d=c-m/2:"bottom"==h.valign&&(d=c+h.marginTop);f||(e=e<n?n:e);!h.canHaveNegativeTop&&0>d&&(d=0);k.css({top:d,left:e,bottom:""});if(d<=c&&d+m>c){var u="top";var r=Math.max(0,Math.min(c-d,m-12));e+g<a?k.addClass("left"):a<e&&k.addClass("right")}else e<=a&&e+g>a&&(u="left",r=Math.max(0,Math.min(a-e,g-12)),d>c?k.addClass("bottom"):d+m<c&&k.addClass("top"));"auto"==h.arrowOffset?"top"==u?v.css({top:r,left:""}):"left"==u&&v.css({top:"",left:r}):"manual"==h.arrowOffset?(c={},void 0!=h.arrowTop&&
(c.top=h.arrowTop),void 0!=h.arrowLeft&&(c.left=h.arrowLeft),v.css(c)):v.css({top:"",left:""});f&&(f=k.outerWidth()/2,0<f-q&&(k.css({left:h.marginLeft-q}),v.css({left:q-h.marginLeft+a})),b=f-(b-q-a-h.marginRight),0<b&&(k.css({left:a-f-b-h.marginRight}),v.css({left:f+b+h.marginRight})),z||(k.css("max-height",""),a=t.height()-d-h.marginBottom,0<a&&k.height()>a&&k.css("max-height",a)))};a.adjustDialogPositionOnHeightChange=function(a){var c=function(){var a=v.position().top,c=a+v.outerHeight()-k.outerHeight();
0<c&&(k.css("top",k.position().top+c),v.css("top",a-c))};a&&0<a?d(a,c):c()};a.setToggleElement=function(a){h.toggleElement=a};a.setWidth=function(a){h.width=a};a.toggleArrow=function(a){h.showArrow=a;g&&k.toggleClass("show-arrow",h.showArrow)};a.toggleMainContainerCssClass=function(a,c){k.toggleClass(a,c)};(function(){$.extend(h,e);p.uniqueId();h.noTitle&&p.remove();k.attr({role:"dialog","aria-labelledby":p.attr("id")});f.addClass("ccl-context-dialog-content");if(h.fadeContentEdgesOnScroll){var c=
$("<div class='ccl-context-dialog-content-edge-top'></div>").insertBefore(f),b=$("<div class='ccl-context-dialog-content-edge-bottom'></div>").insertAfter(f),d=f.get(0);G=new CCL.CallbackDebouncer(function(){c.toggleClass("ccl-context-dialog-content-edge-active",0<d.scrollTop);b.toggleClass("ccl-context-dialog-content-edge-active",d.scrollHeight-d.scrollTop!==d.clientHeight)});f.scroll(function(){G.invokeCallback(void 0,25)});(new MutationObserver(function(a){0<a.length&&G.invokeCallback(void 0,50)})).observe(d,
{childList:!0,attributes:!0,attributeFilter:["style","src","height","width","class"],characterData:!0,subtree:!0})}if(h.footerContent){var g=$("#"+h.footerContent);C=$("<footer class='ccl-context-dialog-footer'></footer>");C.appendTo(k);g.appendTo(C)}h.cssClass&&k.addClass(h.cssClass);k.css({"z-index":h.zIndex});a.setTitle(h.title);a.setTitleTooltip(h.titleTooltip);f.show();n=$("<button type='button'></button>").appendTo(k);h.closeButtonTooltip&&n.attr("aria-label",h.closeButtonTooltip);h&&h.closeCssClass?
n.addClass(h.closeCssClass):n.addClass("ccl-context-dialog-close");n.click(a.closeDialog)})();$(function(){function f(c){g&&0===$(c.target).closest(k).length&&!(h.toggleElement&&0<$(c.target).closest(h.toggleElement).length)&&c.pageX<$(window).width()&&h.closeWithOutsideClick&&a.closeDialog(c)}function b(c){if(g&&h.closeOnEscape&&c.which===CommonConstants.keyCodes.escape)a.onEscape()}function d(a){a.each(function(a,c){c.addEventListener?(c.addEventListener(l,f,!0),c.addEventListener("keydown",b,!0)):
($(c).on(l,f),$(c).on("keydown",b))})}var e=$(window),m=c();m&&h.allowAccessToParentWindow&&(e=e.add(m));var l=window.CommonFunctions.isIos()?"touchstart":"mousedown";d(e);$("iframe").on("load",function(){try{var a=$(this.contentWindow||this.contentDocument);d(a)}catch(Q){}});$(document).on(CommonTriggers.clickInInnerFrame,function(){g&&h.closeWithOutsideClick&&a.closeDialog()})});return a}
function CssModal(b){function e(){!t.closeButton.getIfHyperLinkEnabled()||C&&!C()||CssModal.closeDialog()}function d(){return window.location.hash.replace("#","")===v}function c(){$(document).off("cssmodal:hide",c);a()}function a(){if(d()&&!w){if(CssModal.IsAnyDialogOpened()){$(document).on("cssmodal:hide",c);return}if(!f())return;w=!0;CommonFunctions.safeExecuteFunction(y.beforeOpenDialog);k();CommonFunctions.safeExecuteFunction(y.afterOpenDialog)}!d()&&w&&(w=!1,CommonFunctions.safeExecuteFunction(y.beforeCloseDialog),
setTimeout(function(){H&&H.stopTrackFocus();if(r.userInputControlsSelector){var a=$(r.userInputControlsSelector);CommonFunctions.setEmbeddedObjectsVisibility(!0,a,a)}t.contentContainer.removeClass(CssModal.commonSettings.cssClasses.webkitOverflow);F.removeClass(CssModal.commonSettings.cssClasses.overlay);r.isIos&&F.removeClass(CssModal.commonSettings.cssClasses.overlayIos);r.PreventScrollingBeforeCloseDialog||D.scrollTop(G);if(E){if(CssModal.modes.ajaxDynamically===u||CssModal.modes.iframeDynamically===
u)t.contentContainer.find("iframe").attr("src","about:blank"),setTimeout(m,100);$(E).removeClass(CssModal.commonSettings.cssClasses.isActive);r.addMaskToTopMenu&&(CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.unregisterExtraNavBar)),CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.unmaskNavigationBar)));r.isNestedDialog||(q(CommonWindowMessages.MessageNames.collapseContentAreaFrame),
M.width(""));$(document).trigger(CssModal.commonSettings.events.hide,[E,v]);E=null}p.setCloseConfirmation(null);z&&z.focus();r.isNestedDialog&&CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.nestedCssModalDialogCollapsed});r.addMaskToTopMenu&&IframeResizer.reportSetIframeDefaultHeight();CommonFunctions.safeExecuteFunction(y.afterCloseDialog)},100))}function f(){var a=!0;CCL.FormCheckBeforeUnload.manuallyRunBeforeUnloadHandler();var c=CCL.DialogWhiteList.isDialogAllowed(p.getId());
c.isAllowed||(confirm(c.confirmationMessage)?c.deniedByInstances.forEach(function(a){a.clearStateCallback()}):(CssModal.closeDialog(),a=!1));return a}function g(a){R&&clearTimeout(R);R=setTimeout(h,a||r.resizeTimeoutInMilliseconds)}function h(){if(d()&&w){t.innerContainer.removeAttr("style");r.preventScrollTopOnAdjust||t.contentContainer.removeAttr("style");if(D.width()>CommonConstants.mediaScreenSizes.mobile&&!r.isNestedDialog){if(p._maximized)t.innerContainer.css({width:$(window).width(),height:$(window).height(),
left:"0",top:"0"});else if(!r.useAdaptiveWidth&&r.preferredWidth&&0<r.preferredWidth&&t.innerContainer.width(Math.min(r.preferredWidth,D.width()-40)),r.preferredHeight&&0<r.preferredHeight){var a=t.contentContainer.outerHeight(!0)-t.contentContainer.height();t.contentContainer.outerHeight(r.preferredHeight+a,!0)}a=D.height()-t.headerContainer.outerHeight()-t.footerContainer.outerHeight();100<a&&(a-=100);var c;r.visualStyleBenevolent&&!r.isNestedDialog?c=a:r.maxContentHeight&&0<r.maxContentHeight?
c=r.maxContentHeight:r.visualStyleBenevolent||(c=r.preferredHeight&&0<r.preferredHeight&&r.preferredHeight<a?r.preferredHeight:a);t.contentContainer.css({width:r.minContentWidth&&0<r.minContentWidth?r.minContentWidth:void 0,minWidth:r.minContentWidth&&0<r.minContentWidth?r.minContentWidth:void 0,minHeight:r.minContentHeight&&0<r.minContentHeight?r.minContentHeight:void 0,maxWidth:r.maxContentWidth&&0<r.maxContentWidth?r.maxContentWidth:void 0,maxHeight:c});u!==CssModal.modes.iframeDynamically&&u!==
CssModal.modes.iframeStatically||r.usesCrossDomainIframe||(u!==CssModal.modes.iframeStatically||p.getIframe()[0].contentWindow.document.body?(p.getIframe().css("height",""),c=r.useSimpleInnerFrameHeightCalculation?u===CssModal.modes.iframeDynamically?p.getIframe().contents().height():p.getIframe()[0].contentWindow.document.body.scrollHeight:CCL.CommonFunctions.getHtmlDocumentHeight(p.getIframe()[0].contentWindow.document)+10,p.getIframe().css("height",c)):g(1500));c=t.innerContainer.height()-t.feedbackContainer.outerHeight()-
t.headerContainer.outerHeight()-t.subheaderContainer.outerHeight()-t.footerContainer.outerHeight();p._maximized?t.contentContainer.outerHeight(c):(!r.preventScrollTopOnAdjust&&t.contentContainer.outerHeight()-1>c?t.contentContainer.outerHeight(c):r.forceContentHeight&&t.contentContainer.outerHeight(c+1),r.visualStyleBenevolent||(r.addMaskToTopMenu?(c=0,a="0"):(c=t.innerContainer.height()/2,a="50%"),t.innerContainer.css({left:"50%","margin-left":-t.innerContainer.width()/2,"margin-top":-c,top:a})))}else{var f=
0;t.innerContainer.children().not(t.contentContainer).each(function(){f+=$(this).outerHeight()});t.contentContainer.css({width:"",minWidth:"",minHeight:"",maxWidth:"",maxHeight:""}).outerHeight(t.innerContainer.height()-f);u!==CssModal.modes.iframeDynamically&&u!==CssModal.modes.iframeStatically||r.usesCrossDomainIframe||p.getIframe().css("height","")}CommonFunctions.safeExecuteFunction(y.adjustWindowSize)}}function k(){if(d()&&w){if(r.userInputControlsSelector){var a=$(r.userInputControlsSelector);
CommonFunctions.setEmbeddedObjectsVisibility(!1,a,a)}G=D.scrollTop();F.addClass(CssModal.commonSettings.cssClasses.overlay);r.isIos&&F.addClass(CssModal.commonSettings.cssClasses.overlayIos);r.isNestedDialog||q(CommonWindowMessages.MessageNames.expandContentAreaFrame);if(window.top!=window)try{var c=$(window.top).width();c<D.width()&&M.outerWidth(c,!0)}catch(L){}$(E).removeClass(CssModal.commonSettings.cssClasses.isActive);t.container.addClass(CssModal.commonSettings.cssClasses.isActive);E=t.container.get(0);
r.addMaskToTopMenu&&(CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.registerExtraNavBar)),CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.maskNavigationBar)));CssModal.modes.ajaxDynamically===u&&l();CssModal.modes.iframeDynamically===u&&n();E&&(z=document.activeElement,E.focus());$(document).trigger(CssModal.commonSettings.events.show,
[E,v]);CssModal.modes.ajaxDynamically!==u&&CssModal.modes.iframeDynamically!==u&&h();t.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow);r.isNestedDialog&&CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.nestedCssModalDialogExpanded});r.addMaskToTopMenu&&IframeResizer.reportSetIframeDefaultHeight();CssModal.modes.iframeDynamically!==u&&CssModal.modes.ajaxDynamically!==u&&H&&H.startTrackFocus()}}function l(){t.contentContainer.empty();
t.contentContainer.html(r.loadingText);if(CssModal.modes.ajaxStatically===u)t.contentContainer.load(r.ajaxUrl,h);else if(CssModal.modes.ajaxDynamically===u){var a=void 0!==S?$.param(S,!0):{};$.ajax({type:"GET",url:r.ajaxUrl,data:a,success:function(a){t.contentContainer.html(a);h();p&&p.getIsOpened()&&(a=p.getFocusTracker())&&a.startTrackFocus();CommonFunctions.safeExecuteFunction(y.afterOpenDialogAjaxDynamicallySuccess)},error:function(a,c,f){CommonFunctions.alertAjaxError(a,c,f)}})}}function m(){t.contentContainer.html("")}
function n(){var a=$("<iframe/>").attr("src",r.iframeUrl).addClass(CssModal.commonSettings.cssClasses.iframe).attr("seamless","seamless").attr("frameborder","0").attr("title",r.iframeTitle).on("load",function(){h()});r.IframeClientId&&a.attr("id",r.IframeClientId);r.IframeAllowMedia&&a.attr("allow","microphone *; camera *");t.contentContainer.empty().append(a)}function q(a){r.expandToAllWindowSize&&(CommonFunctions.makePostMessageCallRecursivelyToTopmostFrame(window.parent,{messageName:a}),IframeResizer.reportSetIframeDefaultHeight())}
window[b]=this;var p=this,v=b,u,w=!1,r,t,y,C,z,E,G,D=$(window),F=$("html"),M=$("body"),R,S={},H;p.initialize=function(c,f,b){y=f;r=b;t=$.extend(c,{closeButton:$("."+r.closeButtonClass)});u=r.mode;H=new CCL.FocusTracker(t.innerContainer);$(document).keyup(function(a){p.keyUp(a)});CssModal.modes.ajaxStatically===u&&l();CssModal.modes.iframeStatically===u&&n();D.on("hashchange",a);D.on("resize orientationchange",function(){g()});D.on("load",a);t.closeButton.click(e);CssModal.addOrReplaceInstance(this);
if(CssModal.modes.iframeStatically===u||CssModal.modes.iframeDynamically===u)CommonFunctions.attachPostMessageEventListener($(window),CommonWindowMessages.MessageNames.nestedCssModalDialogExpanded,function(){t.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow,!1);t.innerContainer.toggleClass(r.mobileExpandedNestedContentClass,!0)}),CommonFunctions.attachPostMessageEventListener($(window),CommonWindowMessages.MessageNames.nestedCssModalDialogCollapsed,function(){t.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow,
!0);t.innerContainer.toggleClass(r.mobileExpandedNestedContentClass,!1)});p.verifyEmptyTitle()};p.getId=function(){return v};p.getFocusTracker=function(){return H};p.openDialog=function(a){p._maximized=a;window.location.hash="#"+v;a?(t.innerContainer.addClass("ccl-cssmodal-modal-maximized"),t.innerContainer.removeClass("ccl-cssmodal-modal-inner")):(t.innerContainer.addClass("ccl-cssmodal-modal-inner"),t.innerContainer.removeClass("ccl-cssmodal-modal-maximized"))};p.keyUp=function(a){d()&&a.which===
CommonConstants.keyCodes.escape&&e()&&CssModal.closeDialog()};p.setContentMinSize=function(a,c){r.minContentWidth=a;r.minContentHeight=c;h()};p.setContentMaxSize=function(a,c){r.maxContentWidth=a;r.maxContentHeight=c;h()};p.getInnerContentMaxHeight=function(){var a=window.getComputedStyle(t.contentContainer[0]);a=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom);return r.maxContentHeight-a};p.setPreferredSize=function(a,c){0<a&&(r.preferredWidth=a);0<c&&(r.preferredHeight=c);h()};p.setPreventScrollTopOnAdjust=
function(a){r.preventScrollTopOnAdjust=a};p.getIframe=function(){return t.contentContainer.find("iframe")};p.clearContent=function(){t.contentContainer.empty()};p.getHeaderContainer=function(){return t.headerContainer};p.verifyEmptyTitle=function(){var a=$("h2",t.headerContainer);a&&0===a.text().trim().length&&a.hide()};p.setTitle=function(a){var c=$("h2",t.headerContainer);c&&((a=a.trim())?(c.text(a),c.show()):c.hide())};p.setTitleTooltip=function(a){var c=$("h2",t.headerContainer);c&&c.attr("title",
a)};p.setAjaxUrl=function(a,c,f){r.ajaxUrl=a;S=c;f&&l()};p.setIframeUrl=function(a,c){r.iframeUrl=a;c&&n()};p.setIframeTitle=function(a){r.setIframeTitle=a};p.setCloseConfirmation=function(a){C=a};p.toggleDialogCloseButton=function(a){t.closeButton.toggleHyperlink(a)};p.getHeader=function(){return t.headerContainer};p.getContent=function(){return t.contentContainer};p.getFooter=function(){return t.footerContainer};p.adjustWindowSize=function(){h()};p.setMode=function(a){u=a};p.setCustomScripts=function(a){y=
a};p.clearLastActiveElement=function(){z=null};p.setAfterOpenDialog=function(a){y.afterOpenDialog=a};p.setAfterOpenDialogAjaxDynamicallySuccess=function(a){y.afterOpenDialogAjaxDynamicallySuccess=a};p.getIsOpened=function(){return w};return p}CssModal.commonSettings=void 0;CssModal.modes=void 0;CssModal.closeDialog=function(){window.location.hash="!"};CssModal.instances=[];
CssModal.addOrReplaceInstance=function(b){for(var e=b.getId(),d=-1,c=0;c<CssModal.instances.length;c++)e===CssModal.instances[c].getId()&&(d=c);-1!==d?CssModal.instances[d]=b:CssModal.instances.push(b)};CssModal.IsAnyDialogOpened=function(b){for(var e=0;e<CssModal.instances.length;e++)if((!b||b(CssModal.instances[e].getId()))&&CssModal.instances[e].getIsOpened())return!0;return!1};
function DatePicker(b){function e(a){if("date"===$.type(a))return!0;try{if(1E3>$.datepicker.parseDate(m.dateFormat,a,{shortYearCutoff:99}).getFullYear())return!1}catch(E){return!1}return!0}function d(){return!l.controls.dateInput.val()||l.controls.dateInput.val()===m.waterMark}function c(){l.controls.dateInput.val(m.waterMark).removeClass(n.watermark).addClass(n.watermark)}function a(){!w&&r&&(w=window[l.settings.timeSlotPickerClientInstanceName]);return w}function f(a,c){if((q||t)&&l.getAvailableDatesFunction){var f=
12==c?new Date(a,12,6):new Date(a,c,6);a={startDate:JSON.stringify(1==c?new Date(a,-1,25):new Date(a,c-2,25)),endDate:JSON.stringify(f),filterId:y};l.getAvailableDatesFunction(a);p=a.allowedDates}}function g(a,c){if(v&&l.getCssClassesForCalendarDatesFunction){var f=12==c?new Date(a,12,6):new Date(a,c,6);a={startDate:JSON.stringify(1==c?new Date(a,-1,25):new Date(a,c-2,25)),endDate:JSON.stringify(f)};l.getCssClassesForCalendarDatesFunction(a);u=a.customCssClassesForCalendarDates}}function h(){var a=
l.controls.dateInput.datepicker("option","defaultDate");if(a){var c=typeof a;if("string"===c&&"null"!==a)return $.datepicker.parseDate(m.dateFormat,a);if("object"===c&&a.getTime)return new Date(a.getTime())}}function k(a,c){a.val()===$.datepicker._get(c,"waterMark")&&a.val("");a.removeClass(n.watermark)}window[b]=this;var l=this,m,n,q,p,v,u,w,r,t,y,C;l.initialize=function(){m=l.settings;n=m.cssClasses;v=m.useCustomCssClassesForCalendarDates;q=m.useRestrictedDateSelection;r=!!l.settings.timeSlotPickerClientInstanceName;
DatePickerPool.add(l.controls.dateInput,l);l.controls.dateInput.datepicker({showOn:m.hideInput?"button":"both",buttonImage:"",buttonImageOnly:!1,showButtonPanel:!0,showOtherMonths:!0,selectOtherMonths:!0,defaultDate:m.defaultDate,dateFormat:m.dateFormat,firstDay:m.firstDayOfWeek,waterMark:m.waterMark,monthNames:m.monthNames,monthNamesShort:m.abbreviatedMonthNames,dayNames:m.dayNames,dayNamesShort:m.abbreviatedDayNames,dayNamesMin:m.abbreviatedDayNames,closeText:m.closeText,prevText:m.previousMonthText,
nextText:m.nextMonthText,currentText:m.todayText,disabled:m.disabled,showWeek:m.showWeek,weekHeader:m.weekHeader,disableWeekSelection:m.DisableWeekSelection,beforeShow:function(a,c){C=!1;l.settings.DisableAccessibilityAdapter||CCL.DatePickerAccessibilityAdapter.setCurrentDatePicker(l);a=$(a);k(a,c);c=a.datepicker("getDate")||h()||new Date;(q||t)&&f(c.getFullYear(),c.getMonth()+1);v&&g(c.getFullYear(),c.getMonth()+1);setTimeout(function(){a.trigger("update")},1)},onChangeMonthYear:function(a,c,b){f(a,
c);g(a,c);setTimeout(function(){$(b.input).trigger("update")},1)},beforeShowDay:function(a){if(!q&&!t&&!v||void 0==p&&void 0==u)return[!0];a=[a.getFullYear(),a.getMonth()+1,a.getDate()].join("_");var c=[!0];(q||t)&&void 0!=p&&(c=void 0==p[a]?[!1,n.disabled]:1==p[a]?[!0,n.avalaible]:[!1,n.busy]);v&&void 0!=u&&void 0!=u[a]&&$.each(u[a],function(a,f){c[1]=a;c[2]=f});return c},onClose:function(c,f){C=!0;var b=$(this);b.val()||(b.val($.datepicker._get(f,"waterMark")).addClass(n.watermark),r&&a().resetTimes());
l.relatedWithDateInput&&l.relatedWithDateInput.fillMissingDateFromRelatedInput&&c&&""===window[l.relatedWithDateInput.id].getDateAsString()&&window[l.relatedWithDateInput.id].setDate(c);m.hideInput?b.parent().find(".ui-datepicker-trigger").focus():(CCL.CommonFunctions.isIe()?(b.datepicker("option","showOn","button"),setTimeout(function(){b.focus();setTimeout(function(){b.datepicker("option","showOn","both")})})):b.focus(),k(b,f))}}).on("update",function(){if(l.settings.showWeek)if(l.settings.disableWeekSelection)$("td.ui-datepicker-week-col").addClass(n.disabled).wrapInner("<span></span>");
else $("td.ui-datepicker-week-col").wrapInner('<a href="javascript:void(0);"></a>').on("click",function(){var a;if(l.relatedWithDateInput){if(l.relatedWithDateInput.isLater){$(this).next().click();var c=a=l.controls.dateInput.datepicker("getDate");c.setDate(a.getDate()+6)}else a=$(this).parent().find("td"),a.get(a.length-1).click(),c=a=l.controls.dateInput.datepicker("getDate"),c.setDate(a.getDate()-6);window[l.relatedWithDateInput.id].setDate(c)}else $(this).next().click()});m.hideTodayButton&&$(".ui-datepicker-current").hide()}).trigger("update");
$("#ui-datepicker-div").hide();m.hideInput&&l.controls.dateInput.hide();d()&&c();l.controls.dateInput.change(function(){if(l.onDateSelectedFunction){var a={dateText:l.getDateAsString(),dateFilterId:t?y:0};l.onDateSelectedFunction(a);l.triggerEventsOnChange()}}).keypress(function(a){a.which===CommonConstants.keyCodes.enter&&(l.controls.dateInput.change(),a.preventDefault())}).parent().find(".ui-datepicker-trigger").text(m.openText);if(q)l.controls.dateInput.keydown(function(a){a.which!==CommonConstants.keyCodes.tab&&
(a.preventDefault(),a.which===CommonConstants.keyCodes.del||a.which===CommonConstants.keyCodes.backspace)&&(l.clearDateAndTime(!1),l.closePicker(),$(l.controls.dateInput).trigger("change"))}).on("paste",function(a){a.preventDefault()})};l.closePicker=function(){l.controls.dateInput.datepicker("hide")};l.triggerEventsOnChange=function(){var a=d();a&&m.DateClearedEventName?$(l).trigger(m.DateClearedEventName):!a&&m.DateSetEventName&&$(l).trigger(m.DateSetEventName)};l.getDateAsString=function(){if(d())return"";
var a=l.controls.dateInput.val();return e(a)?a:""};l.getDateAsQueryStringParameter=function(){return $.datepicker.formatDate("yy-mm-dd",l.getDate())};l.getTime=function(){var a=$("#"+l.settings.timePickerSelectHourClientId),c=$("#"+l.settings.timePickerSelectMinuteClientId),f={};0<a.length&&0<c.length&&(f.hours=a.val(),f.minutes=c.val());return f};l.getDateTimeAsString=function(){var a=l.getDateAsString();if(""===a)return a;var c=l.getTime();return null==c.hours||null==c.minutes?a:a+" "+c.hours+":"+
c.minutes};l.isDateValid=function(){if(d())return!1;var a=l.controls.dateInput.val();return e(a)};l.getDate=function(){return d()?void 0:l.controls.dateInput.datepicker("getDate")};l.setDate=function(a){a&&e(a)?(l.controls.dateInput.removeClass(n.watermark),l.controls.dateInput.datepicker("setDate",a)):c()};l.setDefaultDate=function(a){var f=l.getDate();l.controls.dateInput.datepicker("option","defaultDate",a);l.setDate(f);d()&&c()};l.clearDateAndTime=function(c){d()||c||(l.setDate(""),m.DateClearedEventName&&
$(l).trigger(m.DateClearedEventName));r&&a().resetTimes()};l.setFilteringMode=function(a){t=a};l.setFilterId=function(a){y=a};l.focus=function(){l.controls.dateInput.focus()};l.isPickerVisible=function(){return $("#ui-datepicker-div").is(":visible")};l.isPickerClosing=function(){return C};return l}
(function(b,e){function d(a,f){f=f?f:0;if(f<a.length)for(var b=c.length-1;0<=b;b--)if(c[b].jQueryInput.get(0)===a.get(f))return c[b].datePickerFunction;return e}var c=[];b.DatePickerPool={add:function(a,f){c.push({jQueryInput:a,datePickerFunction:f})},getDateAsString:function(a){return(a=d(a))?a.getDateAsString():""},isDateValid:function(a){return(a=d(a))?a.isDateValid():!1},getDate:function(a){return d(a)?d(a).getDate():e},setDate:function(a,c){for(var f=a.length-1;0<=f;f--){var b=d(a,f);b&&b.setDate(c)}}}})(window);
function DateTimeActivation(b){function e(){f||(f=window[d.settings.datePickerClientInstanceName]);return f}window[b]=this;var d=this,c,a,f,g,h,k,l;d.initialize=function(){c=d.settings;a=c.cssClasses;g=c.dateFilteringInUse;h=d.controls.selectActivationMode.parent();l=c.modes;k=!!c.timeSlotPickerClientInstanceName;d.controls.selectActivationMode.change(function(){var f=d.getMode();d.controls.dateTimeControlsContainer.toggle(f!=l.empty&&f!=l.infinity);$("."+a.timeControlsContainer,h).toggleClass(a.hiddenTimeControlsContainer,
f!=l.date&&f!=l.dateAndEndOfDayCombined);d.controls.endOfDayLabel.toggle(f==l.endOfDay);var b=g&&f==l.filtering;d.controls.datePickerFilterHolder.toggle(b);e().setFilteringMode(b);g&&e().clearDateAndTime(f!=l.filtering);k&&window[c.timeSlotPickerClientInstanceName].toggle(f==l.filtering);if(d.onChangeActivationModeFunction)d.onChangeActivationModeFunction()});g&&(d.controls.filterDropDown.change(function(){var a=d.controls.filterDropDown.val();d.controls.filterHidden.val(a);e().clearDateAndTime();
e().setFilterId(a)}),e()&&(e().setFilterId(d.controls.filterHidden.val()),e().setFilteringMode(g&&d.getMode()==l.filtering)))};d.getMode=function(){return c.useRadioButtonStyle?$(d.controls.selectActivationMode).find("input:radio:checked").val():d.controls.selectActivationMode.val()};d.isDateSelected=function(){return d.getMode()==(l.empty||l.infinity)?!1:e().isDateValid()};d.getAllowToSubmitAfterDeadline=function(){return 0<d.controls.useEndOfDateCheckBox.length?d.controls.useEndOfDateCheckBox.is(":checked"):
null};d.getSelectedEventId=function(){return k?window[c.timeSlotPickerClientInstanceName].getSelectedTimeSlotId():null};d.getSelectedDateTime=function(){return e().getDateTimeAsString()};return d}
function Dialog(b){function e(){w&&(l.show(),c(),CommonFunctions.safeExecuteFunction(g.customScripts.afterOpenDialog),IframeResizer.reportSetIframeDefaultHeight(),w=!1)}function d(){k.scrollLeft(y);k.scrollTop(t);IframeResizer.reportSetIframeDefaultHeight();r=!1}function c(){var a=function(a,c,f,b){f=Math.max((a-f)/2,10);a<b&&(f+=c);return 0>f?0:f},c=$(document);l.offset({left:a(k.width(),k.scrollLeft(),l.width(),c.width()),top:a(k.height(),k.scrollTop(),l.height(),c.height())})}function a(){g.settings.useInProgressFunctionality?
(k.unload(function(){g.close()}),n.attr("title",g.settings.okButtonInProgressTitle),n.addClass(g.settings.inProgressCssClass),g.disableDialog(),setTimeout(function(){CommonFunctions.safeExecuteFunction(g.customScripts.afterOkClick);l.find("input,button").prop("disabled",!0)},100)):CommonFunctions.safeExecuteFunction(g.customScripts.afterOkClick)&&g.close()}function f(){CommonFunctions.safeExecuteFunction(g.customScripts.afterCancelClick)&&g.close()}window[b]=this;var g=this,h=$("#mask"),k=$(window),
l,m,n,q,p,v,u,w=!1,r=!1,t,y,C=!1;g.initialize=function(){l=g.controls.container;m=g.controls.iframe;n=g.controls.okButton;q=g.settings.showBackgroundMask;p=g.settings.useTransparentMask;v=g.settings.expandToAllWindowSize;u=g.settings.saveAndCloseDialogOnEnterKey;C=!v||window==(window.itslTop||window.top);l.css("z-index",g.settings.zIndex).keydown(function(a){return g.keyDown(a)}).keypress(function(a){return g.keyPress(a)});g.controls.closeLink.click(function(){f();return!1}).keydown(function(a){return a.which===
CommonConstants.keyCodes.enter?(f(),!1):!0});n.click(function(){a();return!1});g.controls.cancelLink.click(function(){f();return!1});v&&(CommonFunctions.attachPostMessageEventListener(k,CommonWindowMessages.MessageNames.contentAreaFrameHasExpanded,function(){w&&e()}),CommonFunctions.attachPostMessageEventListener(k,CommonWindowMessages.MessageNames.contentAreaFrameHasCollapsed,function(){r&&d()}));g.settings.openDialogAfterLoading&&g.open()};g.openWithTitle=function(a){g.setNewTitle(a);g.open()};
g.open=function(){w=!0;y=k.scrollLeft();t=k.scrollTop();q&&(0==h.length&&(h=$("<div id='mask'></div>").appendTo("body").addClass(g.settings.maskCssClass)),h.css({opacity:p?"0":"1","z-index":g.settings.backgroundMaskZIndex}),h.show());CommonFunctions.safeExecuteFunction(g.customScripts.beforeOpenDialog);C?e():g.toggleContentAreaFrame(!0);setTimeout(e,100)};g.close=function(){r=!0;CommonFunctions.safeExecuteFunction(g.customScripts.beforeCloseDialog);q&&h.hide();l.hide();CommonFunctions.safeExecuteFunction(g.customScripts.afterCloseDialog);
C?d():g.toggleContentAreaFrame(!1)};g.setupIframe=function(a,c,f,b){m.attr("width",c?c:m.attr("width")).attr("height",f?f:m.attr("height")).attr("scrolling",b?b:m.attr("scrolling"));g.setIframeSrc(a)};g.setIframeSrc=function(a){g.settings.frameLoadingText&&m.contents().find("body").empty().text(g.settings.frameLoadingText);document.getElementById(m.prop("id")).contentWindow.location.href=a};g.setNewAfterOkClickFunction=function(a){g.customScripts.afterOkClick=a};g.setNewAfterCancelClickFunction=function(a){g.customScripts.afterCancelClick=
a};g.setNewBeforeCloseDialogFunction=function(a){g.customScripts.beforeCloseDialog=a};g.setNewTitle=function(a){g.controls.titleContainer.text(a)};g.enableOrDisableOkButton=function(a){n.prop("disabled",!a)};g.toggleButtonsVisibility=function(a){var c=l.get(0).getElementsByClassName("ccl-okorcancel")[0];c&&(c.style.display=a?"block":"none")};g.disableDialog=function(){g.enableOrDisableOkButton(!1);g.controls.cancelLink.unbind("click").attr("disabled",!0);g.controls.closeLink.unbind("click").attr("disabled",
!0);g.controls.closeLink.find("img").prop("src",g.settings.closeImageDisabledUrl)};g.getContainerJQueryElement=function(){return l};g.focusOnCloseLink=function(){g.controls.closeLink.focus()};g.keyDown=function(c){if(c.target&&c.target.className&&0<=c.target.className.indexOf("cke_source"))return!0;c.which===CommonConstants.keyCodes.escape?f():!u||c.which!==CommonConstants.keyCodes.enter||c.shiftKey||c.srcElement&&"A"===c.srcElement.tagName||a();return!0};g.keyPress=function(a){return!0};g.scrollWindowToCenter=
function(){var a=l.offset().top,c=k.height(),f=l.height();window.scrollTo(0,a-(c/2-f/2))};g.toggleContentAreaFrame=function(a){v&&(CommonFunctions.makePostMessageCallRecursivelyToTopmostFrame(window.parent,{messageName:a?CommonWindowMessages.MessageNames.expandContentAreaFrame:CommonWindowMessages.MessageNames.collapseContentAreaFrame}),IframeResizer.reportSetIframeDefaultHeight())};g.setWidth=function(a){l.css("width",a);c()};return g}
function DivToggler(b){var e=this;e.settings=b;e.div=e.settings.divControl?$(e.settings.divControl):$("#"+e.settings.divId);void 0==e.settings.changeDivVisibility&&(e.settings.changeDivVisibility=!0);e.initialize=function(){e.settings.isCollapsed?e.collapseDiv():e.expandDiv();return e};e.afterToggle=function(){e.settings.afterToggle&&"function"===typeof e.settings.afterToggle&&e.settings.afterToggle()};e.toggleDiv=function(b){e.settings.isCollapsed?e.expandDiv():e.collapseDiv();b&&"function"===typeof b&&
b()};e.collapseDiv=function(){e.settings.changeDivVisibility&&e.div.hide();e.settings.isCollapsed=!0;e.afterToggle()};e.expandDiv=function(){e.settings.changeDivVisibility&&e.div.show();e.settings.isCollapsed=!1;e.afterToggle()};return e}
function DropDownMenu(b,e){function d(a,c){n&&clearTimeout(n);n=setTimeout(function(){var a=c.relatedTarget||document.activeElement,f=$(a),b=a===k[0]||1===f.closest(k).length;a=a===l[0]||1===f.closest(l).length;b||a||h.hideMenu()},a)}function c(){if(l.getIfHyperLinkEnabled()){p.scroll(a);h.settings.cssClasses&&h.settings.cssClasses.selectedHolder&&l.addClass(h.settings.cssClasses.selectedHolder);var c=h.settings.useTargetPosition?m.position():m.offset();h.settings.setMinWidthByTarget&&k.css("min-width",
m.outerWidth()+"px");var b=c.top+m.outerHeight(!1),d="auto",e="auto";switch(h.settings.horizontalPosition){case DropDownMenuCommonSettings.horizontalPositions.center:d=c.left+(m.outerWidth(!1)-k.outerWidth(!1))/2;break;case DropDownMenuCommonSettings.horizontalPositions.rightEdge:d=c.left+m.outerWidth(!1)-k.outerWidth(!1);0>d&&(d=c.left);break;case DropDownMenuCommonSettings.horizontalPositions.rightEdgeRightOffset:e=p.width()-p.scrollLeft()-c.left-m.outerWidth(!1);0>e&&(e=0);break;case DropDownMenuCommonSettings.horizontalPositions.auto:break;
case DropDownMenuCommonSettings.horizontalPositions.leftEdgeParentRightBorder:d=c.left;c=m.offsetParent();c=c.outerWidth(!1)+(h.settings.useTargetPosition?0:c.offset().left);var g=k.outerWidth(!1);c<d+g&&(d=c-g);break;default:d=c.left}var n={top:h.settings.useFixedPosition?b-p.scrollTop():b,left:d,right:e,"z-index":h.settings.zIndex};h.settings.useFixedPosition&&(n.position="fixed");h.settings.autofitHeight&&(b=p.height()-b-(k.outerHeight(!0)-k.height()),n["max-height"]=0>b?0:b,n["overflow-y"]="auto");
p.scroll(function(){k.css(n)});k.css(n).show();k.trigger("menu:show");h.settings.renderListItemButton&&f(q);$(l).attr("aria-expanded",!0)}}function a(){var a=h.settings.useTargetPosition?m.position():m.offset();k.css({top:a.top+m.outerHeight(!1)})}function f(a){$(a).addClass("ccl-dropdownmenu-selected");$("button, a",a).focus()}function g(a,c){$(a).removeClass("ccl-dropdownmenu-selected");a=h.settings.items[c];f(a);q=a}window[b]=this;var h=this,k,l,m,n,q,p=$(window);h.name=b;e&&DropDownMenu.instances.push(this);
h.initialize=function(){k||h.initializeControls($("#"+h.controls.menuContainerId),$("#"+h.controls.targetLinkId),$("#"+h.controls.layoutAlignmentControlId))};h.initializeControls=function(a,b,e){if(!k){k=a;h.settings.renderListItemButton&&(h.settings.items=$(k).find("li").toArray(),q=h.settings.items[0],f(q));l=b;m=e;h.settings.cssClasses&&h.settings.cssClasses.targetLink&&l.addClass(h.settings.cssClasses.targetLink);l.attr("aria-haspopup","true");0<k.length&&l.attr("aria-controls",k.get(0).id);if(h.settings.operatesInManagedMode)CCL.DropDownMenuManager.getInstance().containerAddOrReplaceInstance(h.settings.manageModeContainerKey,
h);else if(!h.settings.showMenuOnHover||h.settings.isIos)$(document).on((h.settings.isIos?"touchend":"click")+" "+CommonTriggers.clickInInnerFrame,function(a){a.target===l[0]||1===l.find(a.target).length?k.is(":visible")?h.hideMenu():c():k.is(":visible")&&a.target!==k[0]&&1!==k.find(a.target).length&&h.hideMenu()});else l.on("focusin mouseover",function(){c()}),k.add(l).on("focusout mouseout",function(a){d(250,a)});h.settings.closeMenuWhenClickingOnLink&&k.find("li").click(function(){h.hideMenu()});
h.settings.closeMenuWhenClickingInside&&k.click(function(){h.hideMenu()});$(document).ready(function(){h.settings.appendToBody&&k.appendTo("body")});h.settings.renderListItemButton&&k.keydown(function(a){switch(a.which){case CommonConstants.keyCodes.enter:var c=$("a",q);0===c.length?($("button",q).trigger("click"),h.hideMenu()):window.location.href=c[0].href;$("#"+h.controls.targetLinkId).focus();a.preventDefault();return!1;case CommonConstants.keyCodes.escape:return!1;case CommonConstants.keyCodes.tab:return h.hideMenu(),
$("#"+h.controls.targetLinkId).focus(),!1;case CommonConstants.keyCodes.arrowUp:return k.is(":visible")&&(c=h.settings.items.indexOf(q),c=0===c?h.settings.items.length-1:c-1,g(q,c)),a.preventDefault(),!1;case CommonConstants.keyCodes.arrowDown:return k.is(":visible")&&(c=h.settings.items.indexOf(q),c=c===h.settings.items.length-1?0:c+1,g(q,c)),a.preventDefault(),!1}return!0}).keyup(function(a){return a.which===CommonConstants.keyCodes.escape?(h.hideMenu(),$("#"+h.controls.targetLinkId).focus(),!1):
!0})}};h.toggleManagedMenu=function(){k.is(":visible")?(h.hideMenu(),$("#"+h.controls.targetLinkId).focus()):c()};h.hideMenu=function(){p.unbind("scroll",a);k.hide();h.settings.cssClasses&&h.settings.cssClasses.selectedHolder&&l.removeClass(h.settings.cssClasses.selectedHolder);k.trigger("menu:hide");$(l).attr("aria-expanded",!1);h.settings.renderListItemButton&&($(q).removeClass("ccl-dropdownmenu-selected"),q=h.settings.items[0])};return h}DropDownMenu.instances=[];
DropDownMenu.initialize=function(){for(var b=0,e=this.instances.length;b<e;b+=1)this.instances[b].initialize()};ExpandableContainer.defaults={isExpanded:!1,expander:".ccl-expandable-container-header",target:".ccl-expandable-container-content",keepStateInCookie:!1,cookieName:"ExpandableContainerState",accessibleExpander:"a",expandTooltip:void 0,collapseTooltip:void 0};
function ExpandableContainer(b,e){function d(a){g.settings.collapseTooltip&&g.settings.expandTooltip&&m.attr("title",a?g.settings.collapseTooltip:g.settings.expandTooltip)}function c(){var a=f();a?h.addClass("expanded"):l.hide();d(a)}function a(){var a=$.cookie(g.settings.cookieName);return null===a||""===a?{}:JSON.parse(a)}function f(){if(g.settings.isExpanded)return!0;if(!g.settings.keepStateInCookie)return!1;var c=h.attr("Id");return void 0===c?!1:!0===a()[c]||!1}var g=this,h=$(b);g.settings={};
$.extend(g.settings,ExpandableContainer.defaults);$.extend(g.settings,e);var k=$(g.settings.expander,b);e=k.attr("data-expander-target")||g.settings.target;var l=$(e,b),m=$(g.settings.accessibleExpander,k);g.toggle=function(){var c=!g.getIsExpandedState();c?(h.addClass("expanded"),l.slideDown()):(h.removeClass("expanded"),l.slideUp());$(document).trigger("expandablecontainer:toggled",[b,c]);if(g.settings.onToggleCallback)g.settings.onToggleCallback(c,h);d(c);if(g.settings.keepStateInCookie){var f=
h.attr("Id");if(void 0!==f){var e=a();e[f]=c;$.cookie(g.settings.cookieName,JSON.stringify(e),{path:"/"})}}return!1};g.getIsExpandedState=function(){return h.hasClass("expanded")};(function(){if(g.settings.keepStateInCookie&&void 0===$.cookie)throw Error("keepStateInCookie option requires $.cookie to be defined.");k.addClass("ccl-expandable-container-expander");if((0===l.length||0===k.length)&&g.settings.throwOnMissingTarget)throw"Targets not found";c();k.click(function(){g.toggle()})})();return g}
function ExpandableList(b){function e(){try{var a=parent.document.getElementsByTagName("iframe");if(void 0!=a)for(var c=0,b=a.length;c<b;c++){var d=a[c];if((d.contentDocument||d.contentWindow.document)===document)return d}}catch(l){}return null}window[b]=this;var d=this,c,a;d.initialize=function(){c=d.controls;a=d.settings};d.expand=function(f){var b=$(c.showlink).position(),d=b.top,k=$(window).scrollTop(),l=null,m=!1;CommonFunctions.isIos()&&(m=!0,b=e(),null!==b&&(l=b.parentNode,null!==l&&(k=l.scrollTop)));
c.list.children("li").show().removeClass(a.lastVisibleItemCssClass);c.showlink.hide();c.hidelink.show();b=$(c.hidelink).position();k+=b.top-d;a.remainInTheSamePosition&&(m?null!==l&&(l.scrollTop=k):$(window).scrollTop(k));f()};d.collapse=function(f){var b=$(c.hidelink).position(),d=b.top,k=$(window).scrollTop(),l=null,m=!1;CommonFunctions.isIos()&&(m=!0,b=e(),null!==b&&(l=b.parentNode,null!==l&&(k=l.scrollTop)));0<a.maxItemsShown?(b=c.list.children("li").eq(a.maxItemsShown-1),b.addClass(a.lastVisibleItemCssClass),
b.nextAll().hide()):c.list.children("li").hide();c.hidelink.hide();c.showlink.show();b=$(c.showlink).position();k-=d-b.top;a.remainInTheSamePosition&&(m?null!==l&&(l.scrollTop=k):$(window).scrollTop(k));f()};return d}
$.widget("itslccl.extendedTextBox",{options:{watermarkText:"",watermarkCssClass:""},_input:void 0,_isWatermarkMode:!1,_create:function(){var b=this;this._input=this.element;this._input.is(":focus")?this._input.setCursorPosition(this._input.val().length):this._showWatermark();this._input.keypress(function(e){e=e?e:window.event;b._hideWatermark();return e.which!==CommonConstants.keyCodes.enter||e.shiftKey});this._input.blur(function(){b._input.is(":visible")&&b._showWatermark()});this._input.focus(function(){b._hideWatermark()});
this._input.on("paste",function(){b._hideWatermark()})},_showWatermark:function(){this._isWatermarkMode||this._input.val()||(this._input.val(this.options.watermarkText),this._input.addClass(this.options.watermarkCssClass),this._isWatermarkMode=!0)},_hideWatermark:function(){this._isWatermarkMode&&(this._input.val(""),this._input.removeClass(this.options.watermarkCssClass),this._isWatermarkMode=!1)},isEmpty:function(){return this._isWatermarkMode||0==$.trim(this._input.val()).length}});
function ExternalStorageAvailabilityChecker(){return{isDropboxAvailable:function(){return void 0!==window.Dropbox?!0:!1},isGoogleDriveAvailable:function(){return void 0!==window.gapi?!0:!1}}}
function Feedback(b,e,d,c){window[b]=this;var a=this;a.controls=d;a.settings=e;a.functions=c;var f={initialize:function(){a.controls.showMoreLink.click(function(){f.onShowMoreClick()});a.controls.showLessLink.click(function(){f.onShowLessClick()});a.settings.multiline||(a.controls.messageContainer.css("display","block"),a.controls.messageContainer.css("overflow","hidden"),f.setMaxMessageContainerHeight(),$(window).resize(function(){f.handleContainerSizeChange()}),f.handleContainerSizeChange())},onShowMoreClick:function(){a.controls.showMoreLink.hide();
a.controls.showLessLink.show();f.showHideableContent()},showHideableContent:function(){a.settings.multiline?$(".hideable-line").show():a.controls.messageContainer.css("max-height","none")},onShowLessClick:function(){a.controls.showMoreLink.show();a.controls.showLessLink.hide();f.hideHideableContent()},hideHideableContent:function(){a.settings.multiline?$(".hideable-line").hide():f.setMaxMessageContainerHeight()},handleContainerSizeChange:function(){$(a.controls.messageContainer).prop("scrollHeight")>
f.getMaxMessageContainerHeight()?"none"===$(a.controls.showLessLink).css("display")&&a.controls.showMoreLink.show():(a.controls.showMoreLink.hide(),a.controls.showLessLink.hide(),f.setMaxMessageContainerHeight())},setMaxMessageContainerHeight:function(){var c=parseFloat(a.controls.container.css("line-height"));a.controls.messageContainer.css("max-height",c*a.settings.maxLinesToDisplayByDefault+"px")},getMaxMessageContainerHeight:function(){return parseFloat(a.controls.messageContainer.css("line-height"))*
a.settings.maxLinesToDisplayByDefault}};a.showMessage=function(c,f){a.controls.icon.removeClass(a.settings.iconCssClasses.join(" ")).addClass(a.settings.iconCssClasses[c]);a.controls.container.removeClass(a.settings.cssClasses.join(" ")).addClass(a.settings.feedbackCssClass).addClass(a.settings.cssClasses[c]).show();f?a.controls.textSpan.html(f).show():a.controls.textSpan.hide();a.hideUndo()};a.updateMessageContainer=function(c){c?a.controls.messageContainer.html(c).show():a.controls.messageContainer.hide()};
a.hide=function(c){a.controls.container.hide();if((void 0==c||c)&&a.functions.onClose)a.functions.onClose()};a.hideUndo=function(){a.controls.undoLink.hide()};a.show=function(){a.controls.container.show()};a.toggleCloseLink=function(c){a.controls.closeLink.toggle(c)};a.undo=function(){if(a.functions.onUndo)if(a.settings.undoConfirmationText){if(confirm(a.settings.undoConfirmationText))a.functions.onUndo()}else a.functions.onUndo()};f.initialize();return a}
function FileList(b){window[b]=this;var e={},d=this;e.getTitle=function(c){return d.settings.titleText+" "+c};e.setTitle=function(c){$(d.controls.title).html(c)};e.urlHasQueryParams=function(c){return-1===c.indexOf("?")?!1:!0};e.appendQueryParamsToUrl=function(c,a){return c=e.urlHasQueryParams(c)?c+("&"+$.param(a)):c+("?"+$.param(a))};e.getUrl=function(c,a,f,b){var g=d.settings.serviceMethodUrl;e.urlHasQueryParams(g)?(g=g.replace(d.settings.templateQueryParams.fileName,encodeURIComponent(c)),g=g.replace(d.settings.templateQueryParams.viewOnly,
b.toString()),g=g.replace(d.settings.templateQueryParams.fileRepoId,encodeURIComponent(a)),g=g.replace(d.settings.templateQueryParams.uniqueId,f)):g=e.appendQueryParamsToUrl(g,{fileName:c,fileId:a,uniqueFileId:f,viewOnly:b});return g};e.openInModalDialog=function(c,a,f,b){var e=d.controls.dialog.replace("#","");window[e].setAjaxUrl(f);window[e].setContentMinSize(c,a);window[e].openDialog(b)};e.checkIfBrowserIsOldIE=function(){var c=navigator.userAgent.toLowerCase();return-1!=c.indexOf("msie")?10>=
parseInt(c.split("msie")[1])?!0:!1:!1};e.attachEventForOldIE=function(c,a,f){c.addEventListener?c.addEventListener(a,f,!1):c.attachEvent?c.attachEvent(a,f):c[a]=f};e.openInWindow=function(c){var a=window.open(c,"","width="+.8*screen.width+", height="+.8*screen.height+",location = 0, directories = 0, toolbar = 0, scrollbars = 0, status = 0, menubars = 0, resizable = 1");e.checkIfBrowserIsOldIE()&&e.attachEventForOldIE(a,"onload",function(){$("head",a.document).append('<style type="text/css">html,body{height:100%}html{width:auto;margin-top:-8px;}</style>')})};
e.openInNewTab=function(c){window.open(c)};e.getFileExtension=function(c){return(/[.]/.exec(c)?/[^.]+$/.exec(c):void 0).pop()};e.shouldBeOpenedInPopup=function(c){if(!Array.isArray(d.settings.fileExtensionsPreviewedInPopup))return!1;c=e.getFileExtension(c);return 0<=d.settings.fileExtensionsPreviewedInPopup.indexOf(c)};d.showPreview=function(c,a,f,b,d,k,l){var g=e.getTitle(c);e.setTitle(g);a=e.getUrl(c,a,f,b);e.shouldBeOpenedInPopup(c)?e.openInWindow(a):e.openInModalDialog(d,k,a,l)};d.showCloudItemPreview=
function(c){var a=d.settings.cloudItemViewerUrl;a=e.appendQueryParamsToUrl(a,{id:c});e.openInNewTab(a)};d.getUrl=e.getUrl;return d}
(function(b){"function"===typeof define&&define.amd?define(["jquery","tmpl","load-image","./jquery.fileupload-fp"],b):b(window.jQuery,window.tmpl,window.loadImage)})(function(b,e,d){b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{autoUpload:!0,maxNumberOfFiles:void 0,maxFileSize:void 0,minFileSize:void 0,acceptFileTypes:/.+$/i,previewSourceFileTypes:/^image\/(gif|jpeg|png)$/,previewSourceMaxFileSize:5E6,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:!0,filesContainer:void 0,prependFiles:!1,
dataType:"json",kbText:"KB",mbText:"MB",confirmReplaceFile:function(){return!0},customErrors:void 0,drop:function(c,a){c=(b(this).data("blueimp-fileupload")||b(this).data("fileupload")).options;var f=[],d=!1;b.each(a.files,function(a,c){!c.type&&(void 0===c.size||1>c.size||0==c.size%4096&&2>c.name.split(".").length)?d=!0:f.push(c)});d&&(a.files=f);c.singleFileMode&&1<a.files.length&&(a.files=a.files.slice(0,1))},add:function(c,a){var f=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),
d=f.options,e=a.files;b(this).fileupload("process",a).done(function(){if(d.singleFileMode&&0==d.maxNumberOfFiles)if(d.confirmReplaceFile())f.emptyFileList();else return!1;f._adjustMaxNumberOfFiles(-e.length);a.maxNumberOfFilesAdjusted=!0;a.files.valid=a.isValidated=f._validate(e);0<a.files.length&&f.options.defaultThumbnailUrl&&(a.files[0].thumbnailUrl=f.options.defaultThumbnailUrl);a.context=f._renderUpload(e).data("data",a);d.filesContainer[d.prependFiles?"prepend":"append"](a.context);f._renderPreviews(a);
f._forceReflow(a.context);f._transition(a.context).done(function(){!1!==f._trigger("added",c,a)&&(d.autoUpload||a.autoUpload)&&!1!==a.autoUpload&&a.isValidated&&a.submit()})})},send:function(c,a){var f=b(this).data("blueimp-fileupload")||b(this).data("fileupload");if(f._additionalClientValidationCallback&&!f._additionalClientValidationCallback(a)||!a.isValidated&&(a.maxNumberOfFilesAdjusted||(f._adjustMaxNumberOfFiles(-a.files.length),a.maxNumberOfFilesAdjusted=!0),!f._validate(a.files)))return!1;
a.context&&a.dataType&&"iframe"===a.dataType.substr(0,6)&&(a.context.find(".ccl-progressbar").addClass(!b.support.transition&&"progress-animated").find(".ui-progressbar-value").css("width","100%"),a.context.find(".ccl-progressbar-labelcontainer").html("100%"));f._addUploadToList(c,a);return f._trigger("sent",c,a)},done:function(c,a){var f=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),d=f._getFilesFromResponse(a);if(a.context)a.context.each(function(g){var h=d[g]||{error:"Empty file upload result"},
k=f._addFinishedDeferreds();h.error||f._addFilesToList(d);f._transition(b(this)).done(function(){var d=b(this);e=f._renderDownload([h]).replaceAll(d);f._forceReflow(e);f._transition(e).done(function(){a.context=b(this);f._renderPreviews(a);f._trigger("completed",c,a);f._trigger("finished",c,a);k.resolve()})})});else{d.length&&(b.each(d,function(c,b){a.maxNumberOfFilesAdjusted&&b.error?f._adjustMaxNumberOfFiles(1):a.maxNumberOfFilesAdjusted||b.error||f._adjustMaxNumberOfFiles(-1)}),a.maxNumberOfFilesAdjusted=
!0);var e=f._renderDownload(d).appendTo(f.options.filesContainer);f._renderPreviews(a);f._forceReflow(e);var k=f._addFinishedDeferreds();f._transition(e).done(function(){a.context=b(this);f._trigger("completed",c,a);f._trigger("finished",c,a);k.resolve()})}},fail:function(c,a){var f=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),d;a.maxNumberOfFilesAdjusted&&f._adjustMaxNumberOfFiles(a.files.length);if(a.context)a.context.each(function(g){if("abort"!==a.errorThrown){var h=a.files[g];
if(a.jqXHR&&a.jqXHR.responseText)try{var k=b.parseJSON(a.jqXHR.responseText).message}catch(n){k=void 0}else k=void 0;h.error=h.error||k||a.errorThrown||f.options.customErrors.unknownError;e=f._addFinishedDeferreds();f._transition(b(this)).done(function(){var g=b(this);d=f._renderDownload([h]).replaceAll(g);f._forceReflow(d);f._transition(d).done(function(){a.context=b(this);f._trigger("failed",c,a);f._trigger("finished",c,a);e.resolve()})})}else e=f._addFinishedDeferreds(),f._transition(b(this)).done(function(){b(this).remove();
f._trigger("failed",c,a);f._trigger("finished",c,a);e.resolve()})});else if("abort"!==a.errorThrown){a.context=f._renderUpload(a.files).appendTo(f.options.filesContainer).data("data",a);f._forceReflow(a.context);var e=f._addFinishedDeferreds();f._transition(a.context).done(function(){a.context=b(this);f._trigger("failed",c,a);f._trigger("finished",c,a);e.resolve()})}else f._trigger("failed",c,a),f._trigger("finished",c,a),f._addFinishedDeferreds().resolve()},progress:function(c,a){a.context&&(c=parseInt(a.loaded/
a.total*100,10),a.context.find(".ccl-progressbar .ui-progressbar-value").css("width",c+"%"),a.context.find(".ccl-progressbar-labelcontainer").html(c+"%"))},progressall:function(c,a){c=b(this);var f=parseInt(a.loaded/a.total*100,10),d=c.find(".fileupload-progress"),e=d.find(".progress-extended");e.length&&e.html((c.data("blueimp-fileupload")||c.data("fileupload"))._renderExtendedProgress(a));d.find(".ccl-progressbar .ui-progressbar-value").css("width",f+"%");d.find(".ccl-progressbar-labelcontainer").html(f+
"%")},start:function(c){var a=b(this).data("blueimp-fileupload")||b(this).data("fileupload");a._resetFinishedDeferreds();a._transition(b(this).find(".fileupload-progress")).done(function(){a._trigger("started",c)});a._startUploadCallback&&a._startUploadCallback()},stop:function(c){var a=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),f=a._addFinishedDeferreds();b.when.apply(b,a._getFinishedDeferreds()).done(function(){a._trigger("stopped",c)});a._transition(b(this).find(".fileupload-progress")).done(function(){var a=
b(this);a.find(".ccl-progressbar .ui-progressbar-value").css("width","0");a.find(".ccl-progressbar-labelcontainer").html("0%");a.find(".progress-extended").html("&nbsp;");f.resolve()});a._stopUploadCallback&&a._stopUploadCallback()},destroy:function(c,a){var f=b(this).data("blueimp-fileupload")||b(this).data("fileupload");a.url&&b.ajax(a);a.filekey&&f._adjustMaxNumberOfFiles(1);f._removeFilesFromList(a.filekey);f._transition(a.context).done(function(){b(this).remove();f._trigger("destroyed",c,a)})}},
_addFilesToList:function(c){var a=this;a._fileList||(a._fileList=[],a._fileListKeys=[]);b.each(c,function(c,b){a._fileList.push(b);a._fileListKeys.push(b.id)});a.options.stateHiddenField.val(JSON.stringify(a._fileList));a._notifyAboutResultChanges();a._addFileCallback&&a._addFileCallback()},_addUploadToList:function(c,a){this._uploadsList||(this._uploadsList=[]);this._uploadsList.push({element:c,data:a})},_removeFilesFromList:function(c){this._fileList&&0<this._fileList.length&&(c=this._fileListKeys.indexOf(c),
-1<c&&(this._fileList.splice(c,1),this._fileListKeys.splice(c,1)));this.options.stateHiddenField.val(JSON.stringify(this._fileList));this._notifyAboutResultChanges();this._removeFileCallback&&this._removeFileCallback()},_notifyAboutResultChanges:function(){this._trigger("resultschanged",null,{results:this._fileList})},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(c){c||(c=b.Deferred());this._finishedUploads.push(c);return c},_getFinishedDeferreds:function(){return this._finishedUploads},
_getFilesFromResponse:function(c){return c.result&&b.isArray(c.result.files)?c.result.files:[]},_enableDragToDesktop:function(){var c=b(this),a=c.prop("href"),f=c.prop("download");c.bind("dragstart",function(c){try{c.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",f,a].join(":"))}catch(h){}})},_adjustMaxNumberOfFiles:function(c){"number"===typeof this.options.maxNumberOfFiles&&(this.options.maxNumberOfFiles+=c,1>this.options.maxNumberOfFiles&&!this.options.singleFileMode?
this._disableFileInputButton():this._enableFileInputButton())},_formatFileSize:function(c){return"number"!==typeof c?"":1048576<=c?(c/1048576).toFixed(2)+" "+this.options.mbText:(c/1024).toFixed(2)+" "+this.options.kbText},_formatBitrate:function(c){return"number"!==typeof c?"":1E9<=c?(c/1E9).toFixed(2)+" Gbit/s":1E6<=c?(c/1E6).toFixed(2)+" Mbit/s":1E3<=c?(c/1E3).toFixed(2)+" kbit/s":c.toFixed(2)+" bit/s"},_formatTime:function(c){var a=new Date(1E3*c);c=parseInt(c/86400,10);return(c?c+"d ":"")+("0"+
a.getUTCHours()).slice(-2)+":"+("0"+a.getUTCMinutes()).slice(-2)+":"+("0"+a.getUTCSeconds()).slice(-2)},_formatPercentage:function(c){return(100*c).toFixed(2)+" %"},_renderExtendedProgress:function(c){return this._formatBitrate(c.bitrate)+" | "+this._formatTime(8*(c.total-c.loaded)/c.bitrate)+" | "+this._formatPercentage(c.loaded/c.total)+" | "+this._formatFileSize(c.loaded)+" / "+this._formatFileSize(c.total)},_hasError:function(c){return c.error?c.error:0>this.options.maxNumberOfFiles?this.options.customErrors&&
this.options.customErrors.maxNumberOfFilesExceeded?this.options.customErrors.maxNumberOfFilesExceeded:"Maximum number of files exceeded":this.options.acceptFileTypes.test(c.type)||this.options.acceptFileTypes.test(c.name)?this.options.maxFileSize&&c.size>this.options.maxFileSize?(this._errorCallback&&this._errorCallback(),this.options.customErrors&&this.options.customErrors.fileIsTooBig?this.options.customErrors.fileIsTooBig:"File is too big"):"number"===typeof c.size&&c.size<this.options.minFileSize?
this.options.customErrors&&this.options.customErrors.fileIsTooSmall?this.options.customErrors.fileIsTooSmall:"File is too small":null:this.options.customErrors&&this.options.customErrors.fileTypeNotAllowed?this.options.customErrors.fileTypeNotAllowed:"Filetype not allowed"},_validate:function(c){var a=this,f=!!c.length;b.each(c,function(c,b){b.error=a._hasError(b);b.error&&(f=!1)});return f},_renderTemplate:function(c,a){if(!c)return b();c=c({files:a,formatFileSize:this._formatFileSize,options:this.options});
return c instanceof b?c:b(this.options.templatesContainer).html(c).children()},_renderPreview:function(c,a){var f=this,e=this.options,h=b.Deferred();if(d){var k=0,l=function(){d(c,function(c){a.empty();a.append(c);f._forceReflow(a);f._transition(a).done(function(){h.resolveWith(a)});b.contains(f.document[0].body,a[0])||h.resolveWith(a)},{maxWidth:e.previewMaxWidth,maxHeight:e.previewMaxHeight,canvas:e.previewAsCanvas,orientation:k})};d.parseMetaData?d.parseMetaData(c,function(a){k=a.exif?a.exif.get("Orientation"):
0;l()}):l();return h}return h.resolveWith(a)&&h},_renderPreviews:function(c){var a=this,f=this.options;c.context.find(".preview span").each(function(d,e){var g=c.files[d];f.previewSourceFileTypes.test(g.type)&&("number"!==b.type(f.previewSourceMaxFileSize)||g.size<f.previewSourceMaxFileSize)&&(a._processingQueue=a._processingQueue.pipe(function(){var f=b.Deferred(),d=b.Event("previewdone",{target:e});a._renderPreview(g,b(e)).done(function(){a._trigger(d.type,d,c);f.resolveWith(a)});return f.promise()}))});
return this._processingQueue},_renderUpload:function(c){return this._renderTemplate(this.options.uploadTemplate,c)},_renderDownload:function(c){return this._renderTemplate(this.options.downloadTemplate,c).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(c){c.preventDefault();c=b(c.currentTarget);var a=c.closest(".template-upload").data("data");a&&a.submit&&!a.jqXHR&&a.submit()&&c.prop("disabled",!0)},_cancelHandler:function(c){c.preventDefault();var a=b(c.currentTarget).closest(".template-upload").data("data")||
{};this._notifyAboutResultChanges();this._removeFileCallback&&this._removeFileCallback();a.jqXHR?a.jqXHR.abort():(a.errorThrown="abort",this._trigger("fail",c,a))},_deleteHandler:function(c){c.preventDefault();var a=b(c.currentTarget);this._trigger("destroy",c,b.extend({context:a.closest(".template-download"),type:"POST",dataType:this.options.dataType},a.data()))},_forceReflow:function(c){return b.support.transition&&c.length&&c[0].offsetWidth},_transition:function(c){var a=b.Deferred();b.support.transition&&
c.hasClass("fade")?c.bind(b.support.transition.end,function(f){f.target===c[0]&&(c.unbind(b.support.transition.end),a.resolveWith(c))}).toggleClass("in"):(c.toggleClass("in"),a.resolveWith(c));return a},_initButtonBarEventHandlers:function(){var c=this.element.find(".fileupload-buttonbar"),a=this.options.filesContainer;this._on(c.find(".start"),{click:function(c){c.preventDefault();a.find(".start button").click()}});this._on(c.find(".cancel"),{click:function(c){c.preventDefault();a.find(".cancel button").click()}});
this._on(c.find(".delete"),{click:function(f){f.preventDefault();a.find(".delete input:checked").siblings("button").click();c.find(".toggle").prop("checked",!1)}});this._on(c.find(".toggle"),{change:function(c){a.find(".delete input").prop("checked",b(c.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar button"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();
this._on(this.options.filesContainer,{"click .start button":this._startHandler,"click .cancel button":this._cancelHandler,"click .delete .button":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".ccl-fileuploader-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".ccl-fileuploader-button input").prop("disabled",
!0).parent().addClass("disabled")},_initTemplates:function(){var c=this.options;c.templatesContainer=this.document[0].createElement(c.filesContainer.prop("nodeName"));e&&(c.uploadTemplateId&&(c.uploadTemplate=e(c.uploadTemplateId)),c.downloadTemplateId&&(c.downloadTemplate=e(c.downloadTemplateId)))},_initFilesContainer:function(){var c=this.options;void 0===c.filesContainer?c.filesContainer=this.element.find(".files"):c.filesContainer instanceof b||(c.filesContainer=b(c.filesContainer))},_stringToRegExp:function(c){c=
c.split("/");var a=c.pop();c.shift();return new RegExp(c.join("/"),a)},_initRegExpOptions:function(){var c=this.options;"string"===b.type(c.acceptFileTypes)&&(c.acceptFileTypes=this._stringToRegExp(c.acceptFileTypes));"string"===b.type(c.previewSourceFileTypes)&&(c.previewSourceFileTypes=this._stringToRegExp(c.previewSourceFileTypes))},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates();this._initRegExpOptions()},_setOption:function(c,a){this._super(c,a);
"maxNumberOfFiles"===c&&this._adjustMaxNumberOfFiles(0)},_create:function(){this._super();this._refreshOptionsList.push("filesContainer","uploadTemplateId","downloadTemplateId");this._processingQueue||(this._processingQueue=b.Deferred().resolveWith(this).promise(),this.process=function(){return this._processingQueue});this._resetFinishedDeferreds()},enable:function(){var c=!1;this.options.disabled&&(c=!0);this._super();c&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},
disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton());this._super()},emptyFileList:function(){this.options.filesContainer.find(".delete .button, .cancel button").click()},clearResults:function(){b(this.options.filesContainer[0]).find("tr").each(function(){var c=b(this);c.hasClass("clearme")||0===c.find(".error").length?c.remove():c.addClass("clearme")});this._fileList&&(this._adjustMaxNumberOfFiles(this._fileList.length),
this._fileList.length=0,this._fileListKeys.length=0);this.options.stateHiddenField.val(JSON.stringify(this._fileList));this._notifyAboutResultChanges()},allowHide:function(){return 0===b(this.options.filesContainer[0]).find("tr .error").length},abortAllUploads:function(){if(this._uploadsList){var c=this;b.each(this._uploadsList,function(a,f){f.data.jqXHR?f.data.jqXHR.abort():(f.data.errorThrown="abort",c._trigger("fail",f,f.data))})}},getUploadedFiles:function(){return this._fileList||[]},setStartUploadCallback:function(c){"function"==
typeof c&&(this._startUploadCallback=c)},setStopUploadCallback:function(c){"function"==typeof c&&(this._stopUploadCallback=c)},setAddFileCallback:function(c){"function"==typeof c&&(this._addFileCallback=c)},setRemoveFileCallback:function(c){"function"==typeof c&&(this._removeFileCallback=c)},setErrorCallback:function(c){"function"==typeof c&&(this._errorCallback=c)},setAdditionalClientValidationCallback:function(c){"function"==typeof c&&(this._additionalClientValidationCallback=c)},renderHiddenFieldContent:function(){var c=
this.options,a=this.options.stateHiddenField.val();if((a=a?JSON.parse(a):[])&&0<a.length){var f=this._renderDownload(a);f.appendTo(c.filesContainer);var d=[];b.each(a,function(a,c){c.error&&0!=c.error.length||d.push(c)});0<d.length&&this._addFilesToList(d);this._adjustMaxNumberOfFiles(c.singleFileMode?-a.length:-d.length);var e=[];b.each(a,function(a,f){f.type&&c.previewSourceFileTypes.test(f.type)&&f.fileUrl&&(e.push(f),e[e.length-1].toString=function(){return f.fileUrl})});0<e.length&&(a=f.data("data",
{files:a}),this._renderPreviews({context:a,files:e}))}}})});var FixedHeader;
(function(b,e,d){FixedHeader=function(c,a){if(c)if(!this instanceof FixedHeader)alert("FixedHeader warning: FixedHeader must be initialised with the 'new' keyword.");else{var f={aoCache:[],oSides:{top:!0,bottom:!1,left:0,right:0},oZIndexes:{top:104,bottom:103,left:102,right:101,topLeft:105},oCloneOnDraw:{top:!1,bottom:!1,left:!0,right:!0},oMes:{iTableWidth:0,iTableHeight:0,iTableLeft:0,iTableRight:0,iTableTop:0,iTableBottom:0},oOffset:{top:0},nTable:null,bFooter:!1,bInitComplete:!1};this.fnGetSettings=
function(){return f};this.fnUpdate=function(){this._fnUpdateClones();this._fnUpdatePositions()};this.fnPosition=function(){this._fnUpdatePositions()};this.fnInit(c,a);"function"==typeof c.fnSettings&&(c._oPluginFixedHeader=this)}};FixedHeader.prototype={fnInit:function(c,a){var f=this.fnGetSettings(),e=this;this.fnInitSettings(f,a);f.nTable=c;f.bFooter=0<d(">tfoot",f.nTable).length?!0:!1;f.oSides.left&&f.aoCache.push(e._fnCloneTable("fixedLeft","FixedHeader_Left",e._fnCloneTLeft,f.oSides.left));f.oSides.top&&
f.oSides.left&&f.aoCache.push(e._fnCloneTable("fixedTopLeft","FixedHeader_TopLeft",e._fnCloneTTopLeft,f.oSides.left));f.oSides.top&&f.aoCache.push(e._fnCloneTable("fixedHeader","FixedHeader_Header",e._fnCloneThead));FixedHeader.afnScroll.push(function(){e._fnUpdatePositions.call(e)});d(b).resize(function(){FixedHeader.fnCalculatePosition()});f.frameSizeChangedEvent&&d(b).bind(f.frameSizeChangedEvent,function(){FixedHeader.fnCalculatePosition()});d(f.nTable).on("column-reorder column-visibility",function(){FixedHeader.fnMeasure();
e._fnUpdateClones(!0);e._fnUpdatePositions()}).on("row-resize",function(){e._fnFindEqualiseTLeftRowsHeight()});FixedHeader.fnMeasure();e._fnUpdateClones();e._fnUpdatePositions();e._fnRemoveExcessIdentifiers();f.bInitComplete=!0},fnInitSettings:function(c,a){void 0!==a&&(void 0!==a.top&&(c.oSides.top=a.top),void 0!==a.bottom&&(c.oSides.bottom=a.bottom),"boolean"==typeof a.left?c.oSides.left=a.left?1:0:void 0!==a.left&&(c.oSides.left=a.left),"boolean"==typeof a.right?c.oSides.right=a.right?1:0:void 0!==
a.right&&(c.oSides.right=a.right),void 0!==a.zTop&&(c.oZIndexes.top=a.zTop),void 0!==a.zBottom&&(c.oZIndexes.bottom=a.zBottom),void 0!==a.zLeft&&(c.oZIndexes.left=a.zLeft),void 0!==a.zRight&&(c.oZIndexes.right=a.zRight),void 0!==a.offsetTop&&(c.oOffset.top=a.offsetTop),void 0!==a.alwaysCloneTop&&(c.oCloneOnDraw.top=a.alwaysCloneTop),void 0!==a.alwaysCloneBottom&&(c.oCloneOnDraw.bottom=a.alwaysCloneBottom),void 0!==a.alwaysCloneLeft&&(c.oCloneOnDraw.left=a.alwaysCloneLeft),void 0!==a.alwaysCloneRight&&
(c.oCloneOnDraw.right=a.alwaysCloneRight),void 0!=a.frameSizeChangedEvent&&(c.frameSizeChangedEvent=a.frameSizeChangedEvent))},_fnCloneTable:function(c,a,f,b){var d=this.fnGetSettings();var g=d.nTable.cloneNode(!1);g.removeAttribute("id");var l=e.createElement("div");l.style.position="absolute";l.style.top="0px";l.style.left="0px";l.className+=" FixedHeader_Cloned "+c+" "+a;"fixedHeader"==c&&(l.style.zIndex=d.oZIndexes.top);"fixedLeft"==c&&(l.style.zIndex=d.oZIndexes.left);"fixedTopLeft"==c&&(l.style.zIndex=
d.oZIndexes.topLeft);g.style.margin="0";l.appendChild(g);e.body.appendChild(l);return{nNode:g,nWrapper:l,sType:c,sPosition:"",sTop:"",sLeft:"",fnClone:f,iCells:b}},_fnMeasure:function(){var c=this.fnGetSettings(),a=c.oMes,f=d(c.nTable),b=f.offset(),e=this._fnSumScroll(c.nTable.parentNode,"scrollTop");this._fnSumScroll(c.nTable.parentNode,"scrollLeft");a.iTableWidth=f.outerWidth();a.iTableHeight=f.outerHeight();a.iTableLeft=b.left+c.nTable.parentNode.scrollLeft;a.iTableTop=b.top+e;a.iTableRight=FixedHeader.oDoc.iWidth-
a.iTableLeft-a.iTableWidth;a.iTableBottom=FixedHeader.oDoc.iHeight-a.iTableTop-a.iTableHeight},_fnSumScroll:function(c,a){for(var f=c[a];(c=c.parentNode)&&"HTML"!=c.nodeName&&"BODY"!=c.nodeName;)f=c[a];return f},_fnUpdatePositions:function(){var c=this.fnGetSettings();this._fnMeasure();for(var a=0,f=c.aoCache.length;a<f;a++)"fixedHeader"==c.aoCache[a].sType?this._fnScrollFixedHeader(c.aoCache[a]):"fixedLeft"==c.aoCache[a].sType?this._fnScrollHorizontalLeft(c.aoCache[a]):"fixedTopLeft"==c.aoCache[a].sType&&
this._fnScrollHorisontalOrVerticalTopLeft(c.aoCache[a])},_fnRemoveExcessIdentifiers:function(){var c=this.fnGetSettings();d("thead",c.nTable).find(":not(input[type=hidden])").removeAttr("id").removeAttr("name");d("td:nth-child(-n+"+c.oSides.left+")",c.nTable).find(":not(input[type=hidden])").andSelf().removeAttr("id").removeAttr("name");for(var a=0,f=c.aoCache.length;a<f;a++){var b=c.aoCache[a].nNode;d("input[type=hidden]",b).remove();switch(c.aoCache[a].sType){case "fixedHeader":d("th:nth-child(-n+"+
c.oSides.left+")",b).children().andSelf().removeAttr("id").removeAttr("name");break;case "fixedLeft":d("thead",b).find("*").removeAttr("id").removeAttr("name")}}},_fnUpdateClones:function(c){var a=this.fnGetSettings();c&&(a.bInitComplete=!1);for(var f=0,b=a.aoCache.length;f<b;f++)a.aoCache[f].fnClone.call(this,a.aoCache[f]);c&&(a.bInitComplete=!0)},_fnClearTableColumnWidths:function(){},_fnScrollHorizontalLeft:function(c){var a=this.fnGetSettings().oMes,f=FixedHeader.oWin,b=c.nWrapper,e=d(b).outerWidth();
f.iScrollLeft<a.iTableLeft?(this._fnUpdateCache(c,"sPosition","absolute","position",b.style),this._fnUpdateCache(c,"sTop",a.iTableTop+"px","top",b.style),this._fnUpdateCache(c,"sLeft",a.iTableLeft+"px","left",b.style)):f.iScrollLeft<a.iTableLeft+a.iTableWidth-e?(this._fnUpdateCache(c,"sPosition","fixed","position",b.style),this._fnUpdateCache(c,"sTop",a.iTableTop-f.iScrollTop+"px","top",b.style),this._fnUpdateCache(c,"sLeft","0px","left",b.style)):(this._fnUpdateCache(c,"sPosition","absolute","position",
b.style),this._fnUpdateCache(c,"sTop",a.iTableTop+"px","top",b.style),this._fnUpdateCache(c,"sLeft",a.iTableLeft+a.iTableWidth-e+"px","left",b.style))},_fnScrollHorisontalOrVerticalTopLeft:function(c){var a=this.fnGetSettings(),f=a.oMes,b=FixedHeader.oWin,e=c.nWrapper,k=d(e).outerWidth();a.nTable.getElementsByTagName("tbody");b.iScrollLeft<f.iTableLeft&&f.iTableTop>b.iScrollTop+a.oOffset.top?(this._fnUpdateCache(c,"sPosition","absolute","position",e.style),this._fnUpdateCache(c,"sTop",f.iTableTop+
"px","top",e.style),this._fnUpdateCache(c,"sLeft",f.iTableLeft+"px","left",e.style)):f.iTableTop>b.iScrollTop+a.oOffset.top?b.iScrollLeft<f.iTableLeft?(this._fnUpdateCache(c,"sPosition","absolute","position",e.style),this._fnUpdateCache(c,"sTop",f.iTableTop+"px","top",e.style),this._fnUpdateCache(c,"sLeft",f.iTableLeft+"px","left",e.style)):b.iScrollLeft<f.iTableLeft+f.iTableWidth-k?(this._fnUpdateCache(c,"sPosition","fixed","position",e.style),this._fnUpdateCache(c,"sTop",f.iTableTop-b.iScrollTop+
"px","top",e.style),this._fnUpdateCache(c,"sLeft","0px","left",e.style)):(this._fnUpdateCache(c,"sPosition","absolute","position",e.style),this._fnUpdateCache(c,"sTop",f.iTableTop+"px","top",e.style),this._fnUpdateCache(c,"sLeft",f.iTableLeft+f.iTableWidth-k+"px","left",e.style)):(this._fnUpdateCache(c,"sPosition","fixed","position",e.style),this._fnUpdateCache(c,"sTop",a.oOffset.top+"px","top",e.style),b.iScrollLeft<f.iTableLeft?this._fnUpdateCache(c,"sLeft",f.iTableLeft-b.iScrollLeft+"px","left",
e.style):this._fnUpdateCache(c,"sLeft","0px","left",e.style))},_fnScrollFixedHeader:function(c){for(var a=this.fnGetSettings(),f=a.oMes,b=FixedHeader.oWin,d=c.nWrapper,e=0,l=a.nTable.getElementsByTagName("tbody"),m=0;m<l.length;++m)e+=l[m].offsetHeight;f.iTableTop>b.iScrollTop+a.oOffset.top?(this._fnUpdateCache(c,"sPosition","absolute","position",d.style),this._fnUpdateCache(c,"sTop",f.iTableTop+"px","top",d.style),this._fnUpdateCache(c,"sLeft",f.iTableLeft+"px","left",d.style)):b.iScrollTop+a.oOffset.top>
f.iTableTop+e?(this._fnUpdateCache(c,"sPosition","absolute","position",d.style),this._fnUpdateCache(c,"sTop",f.iTableTop+e+"px","top",d.style),this._fnUpdateCache(c,"sLeft",f.iTableLeft+"px","left",d.style)):(this._fnUpdateCache(c,"sPosition","fixed","position",d.style),this._fnUpdateCache(c,"sTop",a.oOffset.top+"px","top",d.style),this._fnUpdateCache(c,"sLeft",f.iTableLeft-b.iScrollLeft+"px","left",d.style))},_fnUpdateCache:function(c,a,f,b,d){c[a]!=f&&(d[b]=f,c[a]=f)},_fnClassUpdate:function(c,
a){var f=this;if("TR"===c.nodeName.toUpperCase()||"TH"===c.nodeName.toUpperCase()||"TD"===c.nodeName.toUpperCase()||"SPAN"===c.nodeName.toUpperCase())a.className=c.className;d(c).children().each(function(b){f._fnClassUpdate(d(c).children()[b],d(a).children()[b])})},_fnCloneThead:function(c){var a=this.fnGetSettings(),f=c.nNode;if(a.bInitComplete&&!a.oCloneOnDraw.top)this._fnClassUpdate(d("thead",a.nTable)[0],d("thead",f)[0]);else{var b=d(a.nTable).outerWidth();c.nWrapper.style.width=b+"px";for(f.style.width=
b+"px";0<f.childNodes.length;)d("thead th",f).unbind("click"),f.removeChild(f.childNodes[0]);c=d("thead",a.nTable).clone(!0,!0)[0];f.appendChild(c);var e=[],k=[];d("thead>tr th",a.nTable).each(function(a){e.push(d(this).width())});d("thead>tr td",a.nTable).each(function(a){k.push(d(this).width())});d("thead>tr th",a.nTable).each(function(a){d("thead>tr th:eq("+a+")",f).width(e[a]);d(this).width(e[a])});d("thead>tr td",a.nTable).each(function(a){d("thead>tr td:eq("+a+")",f).width(k[a]);d(this).width(k[a])})}},
_fnCloneTLeft:function(c){for(var a=this.fnGetSettings(),f=c.nNode,b=d("tbody",a.nTable)[0];0<f.childNodes.length;)f.removeChild(f.childNodes[0]);f.appendChild(d("thead",a.nTable).clone(!0)[0]);f.appendChild(d("tbody",a.nTable).clone(!0)[0]);var e="gt("+(c.iCells-1)+")";d("thead tr",f).each(function(a){d("th:"+e,this).remove()});d("tbody tr",f).each(function(a){d("td:"+e,this).remove()});this._fnEqualiseRowsHeight(a,c,b,f);for(var k=b=0;k<c.iCells;k++)b+=d("thead tr th:eq("+k+")",a.nTable).outerWidth();
f.style.width=b+"px";c.nWrapper.style.width=b+"px"},_fnEqualiseRowsHeight:function(c,a,f,b){d("tr",b).removeClass("ccl-table-highlight");d("tr",c.nTable).height("auto");this._fnEqualiseHeights("thead",f.parentNode,b);this._fnEqualiseHeights("tbody",f.parentNode,b)},_fnFindEqualiseTLeftRowsHeight:function(){var c=this.fnGetSettings();this._fnMeasure();for(var a=0,f=c.aoCache.length;a<f;a++)if("fixedLeft"==c.aoCache[a].sType){var b=c.aoCache[a],e=d("tbody",c.nTable)[0];this._fnEqualiseRowsHeight(c,
b,e,b.nNode)}},_fnCloneTTopLeft:function(c){var a=this.fnGetSettings(),f=c.nNode;for(d("tbody",a.nTable);0<f.childNodes.length;)f.removeChild(f.childNodes[0]);f.appendChild(d("thead",a.nTable).clone(!0)[0]);var b="gt("+(c.iCells-1)+")";d("thead tr",f).each(function(a){d("th:"+b,this).remove()});for(var e=0,k=0;k<c.iCells;k++)e+=d("thead tr th:eq("+k+")",a.nTable).outerWidth();f.style.width=e+"px";c.nWrapper.style.width=e+"px"},_fnEqualiseHeights:function(c,a,f){var b=d(c+" tr",a),e;d(c+" tr",f).each(function(a){e=
b.eq(a).css("height");"Microsoft Internet Explorer"==navigator.appName&&(e=parseInt(e,10)+1);d(this).css("height",e);b.eq(a).css("height",e)})}};FixedHeader.oWin={iScrollTop:0,iScrollRight:0,iScrollBottom:0,iScrollLeft:0,iHeight:0,iWidth:0};FixedHeader.oDoc={iHeight:0,iWidth:0};FixedHeader.afnScroll=[];FixedHeader.fnMeasure=function(){var c=d(b),a=d(e),f=FixedHeader.oWin,g=FixedHeader.oDoc;g.iHeight=a.height();g.iWidth=a.width();f.iHeight=c.height();f.iWidth=c.width();f.iScrollTop=c.scrollTop();f.iScrollLeft=
c.scrollLeft();f.iScrollRight=g.iWidth-f.iScrollLeft-f.iWidth;f.iScrollBottom=g.iHeight-f.iScrollTop-f.iHeight};FixedHeader.VERSION="2.1.0-dev";FixedHeader.prototype.VERSION=FixedHeader.VERSION;FixedHeader.fnCalculatePosition=function(){FixedHeader.fnMeasure();for(var c=0,a=FixedHeader.afnScroll.length;c<a;c++)FixedHeader.afnScroll[c]()};d(b).scroll(function(){FixedHeader.fnCalculatePosition()})})(window,document,jQuery);
function FolderSelector(b){window[b.clientId]=this;var e=this;e.settings=b;e.id=b.clientId;e.rootId="0";e.rootTitle="";e.hideRootCrumb=!1;e.selectedId="";e.parentId="";e.cache={};e.hiddenItems=b.hiddenItems;e.loadingTreshold=b.loadingTreshold;e.insertFeedbackClientId=b.insertFeedbackClientId;e.showBreadCrumbs="true"===b.showBreadCrumbs;e.closeOnlyAfterSelectionSaved="true"===b.closeOnlyAfterSelectionSaved;e.needToClose=!1;e.showUnpublishedFolders=b.showUnpublishedFolders||!1;e.controls={dialog:window[b.dialogClientId],
grid:window[b.gridClientId]};e.dialogContainer=$("#"+b.dialogClientId);e.gridContainer=e.dialogContainer.find("."+b.cssClasses.gridContainer);e.treeContainer=e.dialogContainer.find("."+b.cssClasses.treeContainer);e.navigation=e.dialogContainer.find("."+b.cssClasses.navigation);e.loadingIndicator=e.dialogContainer.find("."+b.cssClasses.loadingIndicator);e.dialogContainer.addClass(b.cssClasses.folderSelector);e.gridContainer.addClass(b.cssClasses.hidecontents);e.treeContainer.addClass(b.cssClasses.hidecontents);
e.selectButton=$("."+b.cssClasses.selectButton);e.selectAndCloseButton=$("."+b.cssClasses.selectAndCloseButton);e.navigateUpLink=$("a."+b.cssClasses.navigateUpLink);e.openDialog=function(a){e.toggleSelectButtons(!1);e.needToClose=!1;e.hideSelectFeedback();e.initializeCurrentView(a);window[b.dialogClientId].openDialog()};e.buildStructure=function(){e.reinitialize();$(e).trigger(b.eventNames.open);return!1};e.disposeStructure=function(){$(e).trigger(b.eventNames.close);e.treeContainer.empty();delete e.controls.tree};
e.reinitialize=function(a,f){a&&(e.cache={});e.treeContainer.empty();delete e.controls.tree;e.selectedId="";e.parentId="";e.toggleNavigateUpLink(!(e.selectedId===e.rootId||!e.parentId&&!e.selectedId));e.showBreadCrumbs&&c(0);e.hideSelectFeedback();e.initializeCurrentView(f);e.createTreeMenu()};e.initializeCurrentView=function(a){a&&(e.rootId="0",""!=a.ReadDataServiceUrl&&(e.controls.grid.dataSourceWebMethodUrl=a.ReadDataServiceUrl))};e.createTreeMenu=function(){e.treeContainer.empty();e.treeContainer.jstree({json_data:{data:e._loadTreeData},
plugins:["ui","json_data"],core:{animation:0,strings:{loading:" "}}}).bind("select_node.jstree",function(a,c){e.navigateToNode(c.rslt.obj.attr("nodeId"))});e.controls.tree=$.jstree._reference(e.treeContainer)};e.showEmptyContentFeedback=function(){e.dialogContainer.find("."+b.cssClasses.content).hide();e.navigation.hide();e.selectButton.hide();e.selectAndCloseButton.hide();e.dialogContainer.find("."+b.cssClasses.emptyContent).show()};e.controls.grid.refresh=function(){e.navigateToPage(e.controls.grid.pageNumber,
e.controls.grid.pageSize)};$(e.controls.grid).on(CclAjaxGrid.selectionChangeEvent,function(a,c){e.toggleSelectButtons(0<c.nodeIds.length)});e.toggleSelectButtons=function(a){e.selectButton.toggleHyperlink(a);e.selectAndCloseButton.toggleHyperlink(a)};var d=function(){var a=e.controls.grid.getSelectedValues();$(e).trigger(b.eventNames.select,[{selectedId:e.selectedId,nodeIds:a}])};e.saveSelection=function(){if(!e.selectButton.getIfHyperLinkEnabled())return!1;e.needToClose=!1;d();return!1};e.saveSelectionAndClose=
function(){if(!e.selectAndCloseButton.getIfHyperLinkEnabled())return!1;e.needToClose=!0;d();e.closeOnlyAfterSelectionSaved?e.toggleSelectButtons(!1):CssModal.closeDialog();return!1};$(document).on(b.eventNames.selectionSaved,function(){e.needToClose&&(CssModal.closeDialog(),e.toggleSelectButtons(!0))});e.gridContainer.on("click","a."+b.cssClasses.folderLink,function(){e.navigateToNode($(this).attr("folderId"));return!1});e.navigateUp=function(){if(!e.navigateUpLink.getIfHyperLinkEnabled())return!1;
if(e.parentId&&"0"!=e.parentId||"0"==e.parentId&&"0"==e.rootId)e.selectedId==e.rootId?(e.rootId=e.parentId,e.reinitialize(),e.showBreadCrumbs&&c()):e.navigateToNode(e.parentId);return!1};e.toggleNavigateUpLink=function(a){e.navigateUpLink.toggleHyperlink(a)};e._loadTreeData=function(a,c){var f=(a.data?a.attr("nodeId"):void 0)||e.rootId;a=(a.data?a.attr("setRootAsParent"):void 0)||!1;e.getData(f,1,e.controls.grid.pageSize,function(a){a=e.getCachedFolderData(a);if(!b.hideEmptyStateFeedback&&e.showFeedbackOnEmpty&&
e.isContentEmpty(f,a))e.showEmptyContentFeedback();else{for(var d=-1,g=[],h=a.folders.length,n=0;n<h;n++){var q=a.folders[n];g.push({data:{title:q.title,icon:q.cssClass},attr:{nodeId:q.id,setRootAsParent:q.setRootAsParent},state:"closed"});q.selectedByDefault&&0>d&&(d=n)}c(g);""===e.selectedId&&(e.selectedId=e.rootId,e.renderGrid(e.selectedId,1,e.controls.grid.pageSize),0<=d&&d<h&&(e.hideRootCrumb=!0,e.navigateToNode(a.folders[d].id,!0)))}},a)};e.isContentEmpty=function(a,c){return"0"==a?0==c.folders.length&&
0==c.items.pages[1].length:!1};e.navigateToNode=function(a,f,d,h){var g="undefined"==typeof d||!0===d;if(a!=e.selectedId){e.hideSelectFeedback();e.treeContainer.find("li").removeClass(b.cssClasses.selected);var l=e.treeContainer.find("li[nodeId="+a+"]");l.addClass(b.cssClasses.selected);e.showBreadCrumbs&&c(l);d=(l.data?l.attr("setRootAsParent"):void 0)||!1;e.getData(a,1,e.controls.grid.pageSize,function(a){e.selectedId=a;f&&(e.rootId=a);e.toggleNavigateUpLink(!(e.selectedId===e.rootId||!e.parentId&&
!e.selectedId));g&&e.renderGrid(a,1,e.controls.grid.pageSize);l[0]&&e.controls.tree.open_node(l);h&&h()},d)}};e.navigateToPage=function(a,c){e.hideSelectFeedback();e.getData(e.selectedId,a,c,function(){e.renderGrid(e.selectedId,a,c);e.controls.dialog.adjustWindowSize()})};e.getData=function(a,f,d,h,k){f=f||e.controls.grid.page;d=d||e.controls.grid.pageSize;e.hasCachedFolderData(a)&&e.hasCachedItemData(a,f,d)?h(a):(e.showLoadingIndicator(),$(e).trigger(b.eventNames.loadStart,[{nodeId:a,page:f,pageSize:d}]),
$.ajax({type:"GET",url:e.controls.grid.dataSourceWebMethodUrl,data:e.getRequestData(a,f,d,k),dataType:"json",xhrFields:{withCredentials:!0},success:function(g){var k=$.Event(b.eventNames.loadComplete);$(e).trigger(k,[{success:!0,data:g}]);k.isPropagationStopped()||(a==e.rootId&&(e.rootId=g.Id,e.rootTitle=g.Title,e.showBreadCrumbs&&c()),e.cacheData(g,g.Id,f,d),h(g.Id),e.hideLoadingIndicator())},error:function(){$(e).trigger(b.eventNames.loadComplete,[{success:!1}]);e.hideLoadingIndicator()}}))};e.showLoadingIndicator=
function(){clearTimeout(e.loadingTimeout);e.loadingTimeout=setTimeout(function(){e.loadingIndicator.show()},e.loadingTreshold)};e.hideLoadingIndicator=function(){clearTimeout(e.loadingTimeout);e.loadingIndicator.hide();e.gridContainer.removeClass(b.cssClasses.hidecontents);e.treeContainer.removeClass(b.cssClasses.hidecontents)};e.getCachedFolderData=function(a){return e.cache[a]};e.getCachedItemData=function(a,c,b){a=e.cache[a];if(void 0!==a&&null!==a&&(a=a.items||{},a.pageSize===b&&a.pages))return a.pages[c.toString()]};
e.hasCachedFolderData=function(a){a=e.getCachedFolderData(a);return void 0!==a&&null!==a};e.hasCachedItemData=function(a,c,b){a=e.getCachedItemData(a,c,b);return void 0!==a&&null!==a};e.getRequestData=function(a,c,b,d){return{nodeId:a,page:c,pageSize:b,omitItems:e.hasCachedItemData(a,c,b),omitFolders:e.hasCachedFolderData(a),includeUnpublished:e.showUnpublishedFolders,setRootAsParent:void 0!==d?d||!1:!1}};e.cacheData=function(a,c,b,d){var f=e.cache[c]||{};f.description=a.Description;f.parentId=a.SetRootAsParent?
e.rootId:a.ParentId;f.title=a.Title;if(null!=a.Folders){f.folders=[];for(var g=a.Folders.length,h=0;h<g;h++){var n=a.Folders[h];f.folders.push({id:n.Id,title:n.Title,description:n.Description,cssClass:n.CssClass,isFolder:n.IsFolder,selectedByDefault:n.SelectedByDefault,setRootAsParent:n.SetRootAsParent})}}if(null!=a.Items){g=[];var q=a.Items.length;for(h=0;h<q;h++)n=a.Items[h],g.push({id:n.Id,title:n.Title,description:n.Description,cssClass:n.CssClass,isFolder:n.IsFolder,selectable:n.Selectable&&
(!e.hiddenItems||-1===e.hiddenItems.indexOf(parseInt(n.Id))),selectedByDefault:n.SelectedByDefault});f.items=f.items||{};d!==f.items.pageSize&&(f.items={});f.items.pageSize=d;f.items.pages=f.items.pages||{};f.items.pages[b.toString()]=g;f.virtualItemCount=a.VirtualItemCount}e.cache[c]=f};e.renderTypeCell=function(a){return"<div class='"+a.cssClass+"'></div>"};e.renderItemCell=function(a){var c="<span class='"+a.cssClass+"'>"+CommonFunctions.htmlEncode(a.title)+"</span>",d="";a.description&&void 0!==
a.description&&(d="<div class='"+b.cssClasses.itemDescription+"'>"+CommonFunctions.htmlEncode(a.description)+"</div>");return a.isFolder?"<a href='#' class='"+b.cssClasses.folderLink+"' folderId='"+a.id+"'>"+c+"</a>"+d:c+d};e.getItemXML=function(a){var c=[];c.push("<Item>");c.push("<Id>"+a.id+"</Id>");c.push("<Item>"+CommonFunctions.htmlEncode(e.renderItemCell(a))+"</Item>");c.push("<Selectable>"+(!0===a.selectable?"true":"false")+"</Selectable>");c.push("</Item>");return c.join("")};e.renderGrid=
function(a,c,d){a=e.cache[a];e.controls.grid.pageNumber=c;e.controls.grid.pageSize=d;d=e.gridContainer.find("."+b.cssClasses.gridHeader+" > h2");var f=e.gridContainer.find("."+b.cssClasses.gridHeader+" > span");d.show();d.text(a.title);f.text(a.description);e.parentId=a.parentId;d=e.gridContainer.find("."+b.cssClasses.navigateUpLink);""===e.parentId?d.addClass(b.cssClasses.disabled):d.removeClass(b.cssClasses.disabled);e.controls.grid.clearSelection();e.toggleSelectButtons(!1);d=a.items.pages[c].length;
f=[];f.push("<Data>");f.push("<Items>");for(var g=0;g<d;g++)f.push(e.getItemXML(a.items.pages[c][g]));f.push("</Items>");f.push("<VirtualCount>"+a.virtualItemCount+"</VirtualCount>");f.push("</Data>");e.controls.grid.render(f.join(""),!1);$(e).trigger(b.eventNames.gridRender,[e.controls.grid,a])};e.showSuccessFeedback=function(){"undefined"!=e.insertFeedbackClientId&&window[e.insertFeedbackClientId].showMessage(b.feedbackTypes.info,b.terms.insertSuccessFeedbackText)};e.showErrorFeedback=function(){"undefined"!=
e.insertFeedbackClientId&&window[e.insertFeedbackClientId].showMessage(b.feedbackTypes.error,b.terms.insertErrorFeedbackText)};e.showProgressFeedback=function(){if("undefined"!=e.insertFeedbackClientId){var a=$("<span></span>").addClass(b.cssClasses.progressMessage).html(b.terms.insertProgressFeedbackText);window[e.insertFeedbackClientId].showMessage(b.feedbackTypes.info,a)}};e.hideSelectFeedback=function(){"undefined"!=e.insertFeedbackClientId&&window[e.insertFeedbackClientId].hide()};var c=function(a){var c=
[];a&&(null!=a.attr("nodeid")&&c.push([a.attr("nodeid"),a.children("a:first").contents().last().text()]),a.parentsUntil("."+b.cssClasses.treeContainer,"li").each(function(){var a=$(this);c.push([a.attr("nodeid"),a.children("a:first").contents().last().text()])}));e.hideRootCrumb||c.push([e.rootId,e.rootTitle]);var d=$("<ul />").addClass(b.cssClasses.crumbs);a=$("<nav />").addClass(b.cssClasses.crumbsWrapper).append(d);$.each(c,function(a,c){var f=$("<li />").append($("<span />").addClass(b.cssClasses.crumbsSeparator).text(b.breadCrumbsSeparator));
0<a?f.append($("<span />").append($("<a />").addClass(b.cssClasses.crumb).attr("href","#").data("node-id",c[0]).text(c[1]))):f.append($("<span />").text(c[1]));f.prependTo(d)});e.navigation.children("."+b.cssClasses.crumbsWrapper).remove().end().append(a)};e.navigation.on("click","a."+b.cssClasses.leftMenuToggler,function(){768<$(window).width()?e.dialogContainer.toggleClass(b.cssClasses.desktopTreeContainerVisible).toggleClass(b.cssClasses.desktopTreeContainerHidden):e.dialogContainer.toggleClass(b.cssClasses.mobileTreeContainerVisible).toggleClass(b.cssClasses.mobileTreeContainerHidden);
return!1});e.navigation.on("click","."+b.cssClasses.crumb,function(){e.navigateToNode($(this).data("node-id"));return!1});return e}function FunctionFinder(){return{getFunctionByName:function(b,e){if(void 0!==b&&null!==b){if(void 0===e||null===e)e=window;b=b.split(".");for(var d=b.pop(),c=0;c<b.length;c++)e=e[b[c]];return e[d]}}}}
function CclGridColumn(b,e,d,c,a,f,g,h){this.dataField=b;this.sortField=e;this.sortDescendingByDefault=a;this.headerHtml=d;this.width=c;this.title=f;this.className=g;this.renderTableDataCellValueInsideDiv=h}CclAjaxGrid.selectionChangeEvent="grid:selectionChange";
function CclAjaxGrid(b){function e(){$(d).trigger(CclAjaxGrid.selectionChangeEvent,[{nodeIds:d.getSelectedValues()}])}window[b]=this;var d=this;d.name=b;d.pageSize=null;d.pageNumber=null;d.mainColumn=null;d.sortingProperty=null;d.filteringPreference=null;d.sortingDirection=null;d.dataSourceWebMethodUrl=null;d.dataSourceWebMethodParams={};d.gridClientID=null;d.columnChooserDialogName=null;d.columnChooserClientID=null;d.pagerInstanceName=null;d.allowSelecting=!1;d.allowColumnChoosing=!0;d.dataKeyName=
null;d.selectingHiddenClientID=null;d.pageNumberHiddenClientID=null;d.pageSizeHiddenClientID=null;d.sortingHiddenClientID=null;d.filteringHiddenClientID=null;d.columnOrderHiddenClientID=null;d.gridContentHiddenClientID=null;d.preferenceCategoryName=null;d.visibleColumns=[];d.columns=[];d.totalCount=0;d.keepSelection=!0;d.allowRowExpanding=!0;d.expandedRowButtonTitle=null;d.emptyTableText=null;d.accordionDataSourceUrl=null;d.saveToPreferencesWebMethodUrl=null;d.gridEmbeddedInAccordionGridControlClientId=
null;d.cclGridConstants=null;d.virtualCount=null;d.rowClickable=!1;d.selectAllCheckBoxClientID=null;d.$selectAllCheckBox=null;d.getSelectedIds=function(){return CCL.CommonFunctions.getIdsFromHidden($("#"+d.selectingHiddenClientID))};d.getSelectCheckBox=function(c){return $("#"+d.gridClientID+" tr[data-id='"+c+"'] td ."+d.cclGridConstants.cssClasses.checkboxCssClass)};d._getColumnsCount=function(){return d.visibleColumns.length+(d.allowColumnChoosing?1:0)+(d.allowSelecting?1:0)};d._saveToPreferences=
function(c,a,f,b){d.saveToPreferencesWebMethodUrl&&CCL.CommonFunctions.safeAjaxPost({url:d.saveToPreferencesWebMethodUrl,data:{category:c,name:a,value:f}}).done(b)};d._getInvisibleColumns=function(){for(var c=[],a=0;a<d.columns.length;a++)d.visibleColumns.contains(d.columns[a].dataField)||c.push(d.columns[a].dataField);return c};d._applySelectedRowClass=function(c,a){c.toggleClass(d.cclGridConstants.cssClasses.selectedRow,a)};d._addRemoveSelectedValue=function(c,a){a?CCL.CommonFunctions.addIdToHidden($("#"+
d.selectingHiddenClientID),c.toString()):CCL.CommonFunctions.removeIdFromHidden($("#"+d.selectingHiddenClientID),c.toString())};d.createCheckbox=function(c){return $("<input />",{type:"checkbox",id:c,name:c})};d.toggleSelectById=function(c,a){c=$("#"+d.gridClientID+" tr[data-id='"+c+"'] ."+d.cclGridConstants.cssClasses.checkboxCssClass);c.length&&(c.prop("checked",!0).change(),a&&c.prop("disabled",!0),d._applySelectedRowClass(c.closest("tr"),!0),e())};d.toggleSelectAll=function(c){$.each(d._getCheckBoxesIds(),
function(a,f){a=$("#"+f);a.prop("disabled")||(a.prop("checked",c),a=a.closest("tr"),d._applySelectedRowClass(a,c),d._addRemoveSelectedValue(a.data("id"),c))});d.$selectAllCheckBox.length&&d.$selectAllCheckBox.prop("checked",c);e()};d.toggleEnableAll=function(c){d.$selectAllCheckBox.prop("disabled",!c);$.each(d._getCheckBoxesIds(),function(a,f){$("#"+f).prop("disabled",!c)})};d.init=function(){d.restoreState();d.hidePagerDependingOnElementsNumberAndGridSettings();d.rowClickable&&$("#"+d.gridClientID+
" tr."+d.cclGridConstants.cssClasses.rowClickable+" td").not("."+d.cclGridConstants.cssClasses.selectColumn).mousedown(d._mousedown.bind(this)).mouseup(d._mouseup.bind(this));$(function(){setTimeout(function(){d.selectAllCheckBoxClientID&&(d.$selectAllCheckBox=$("#"+d.selectAllCheckBoxClientID),d.$selectAllCheckBox.length&&d.$selectAllCheckBox.change(function(c){d.toggleSelectAll(c.target.checked)}));$.each(d._getCheckBoxesIds(),function(c,a){d.addCheckBoxHandler(a)})},1)})};d.addCheckBoxHandler=
function(c){$("#"+c).change(function(a){var c=a.target;d._applySelectedRowClass($(a.currentTarget).closest("tr"),c.checked);var b=!0;$.each(d._getCheckBoxesIds(),function(a,c){a=$("#"+c);a.prop("checked")||(b=!1);d._addRemoveSelectedValue(a.closest("tr").data("id"),a.prop("checked"));d.selectAllCheckBoxClientID&&d.$selectAllCheckBox.length&&d.$selectAllCheckBox.prop("checked",b)});e()})};d._getCheckBoxesIds=function(){return $("#"+d.gridClientID+" td ."+d.cclGridConstants.cssClasses.checkboxCssClass).map(function(){return this.id})};
d._mousedown=function(c){d._skipRowClickAction(c)||d._isRightButton(c)||(window.getSelection?window.getSelection().removeAllRanges():document.selection.empty())};d._mouseup=function(c){d._skipRowClickAction(c)||d._isRightButton(c)||0<(window.getSelection?window.getSelection().toString():document.selection.createRange().text).length||$(c.target).trigger("clickableRowClicked")};d._isRightButton=function(c){if("which"in c)return 3===c.which;if("button"in c)return 2===c.button};d._skipRowClickAction=
function(c){return c.target instanceof HTMLInputElement||c.target instanceof HTMLAnchorElement||$(c.target).hasClass(d.cclGridConstants.cssClasses.emptyTableCell)?!0:!1};d.restoreState=function(){var c=document.getElementById(d.sortingHiddenClientID).value.split(":");d.pageSize=parseInt(document.getElementById(d.pageSizeHiddenClientID).value,10);d.pageNumber=parseInt(document.getElementById(d.pageNumberHiddenClientID).value,10);d.sortingProperty=c[0];d.sortingDirection=c[1];d.filteringPreference=
document.getElementById(d.filteringHiddenClientID).value;d.visibleColumns=document.getElementById(d.columnOrderHiddenClientID).value.split(",")};d.hidePagerDependingOnElementsNumberAndGridSettings=function(){var c=$("#"+d.pagerContainerClientId);c&&d.hidePagerWhenTotalCountLessMinPageSize&&d.virtualCount<=d.cclGridConstants.minRowCount&&c.hide()};d.saveState=function(){document.getElementById(d.sortingHiddenClientID).value=d.sortingProperty+":"+d.sortingDirection;document.getElementById(d.pageSizeHiddenClientID).value=
d.pageSize;document.getElementById(d.pageNumberHiddenClientID).value=d.pageNumber;document.getElementById(d.columnOrderHiddenClientID).value=d.visibleColumns.toString();document.getElementById(d.filteringHiddenClientID).value=d.filteringPreference};d._getParams=function(){var c={},a;for(a in d.dataSourceWebMethodParams)c[a]=d.dataSourceWebMethodParams[a];return c};d.refresh=function(){d.saveState();if(d.dataSourceWebMethodUrl){var c="",a="";d.sortingProperty&&(c=d.sortingProperty+":"+d.sortingDirection,
d.columns.findBySortField(d.sortingProperty).dataField!=d.mainColumn&&(c+=","+d.columns.findByDataField(d.mainColumn).sortField+":asc"));d.filteringPreference&&(a=d.filteringPreference);if(0<d.gridEmbeddedInAccordionGridControlClientId.length&&0<d.getSelectedValues().length&&0<document.getElementById(d.gridContentHiddenClientID).value.length)d.render(document.getElementById(d.gridContentHiddenClientID).value,!1);else{if(0==d.totalCount&&d.gridEmbeddedInAccordionGridControlClientId.length){var f=$("#"+
d.gridClientID+" ."+d.cclGridConstants.cssClasses.emptyTableCell);1>$(f).length&&(f=$("#"+d.gridClientID+" > tbody"),$(f).empty(),$("#"+d.gridClientID+" > tfoot").empty(),d._addRowWithText(f,"<img class='"+d.cclGridConstants.cssClasses.gridEmbededInAccordionGridControlLoadingCssClass+"'src='"+d.cclGridConstants.onePixelTransparentImageUrl+"' />",d._getColumnsCount(),d.cclGridConstants.cssClasses.emptyTableCell))}c=$.extend({pageNumber:d.pageNumber,pageSize:d.pageSize,sort:c,filter:a},d._getParams());
CCL.CommonFunctions.safeAjaxPost({url:d.dataSourceWebMethodUrl,data:c,dataType:"xml"}).done(function(a){0<d.gridEmbeddedInAccordionGridControlClientId.length&&(document.getElementById(d.gridContentHiddenClientID).value=a.xml?a.xml:d.XmlToString(a));d.render(a,!0)})}}else d.postbackFunction()};d.sort=function(c){d.sortingDirection=d.sortingProperty==c?"asc"==d.sortingDirection?"desc":"asc":d.columns.findBySortField(c).sortDescendingByDefault?"desc":"asc";d.sortingProperty=c;d.goToPage(1);c=d.sortingProperty+
":"+d.sortingDirection;d.columns.findByDataField(d.mainColumn).sortField==d.sortingProperty&&"asc"==d.sortingDirection&&(c=null);d._saveToPreferences(d.preferenceCategoryName,d.cclGridConstants.preferenceKeys.sorting,c)};d.filter=function(c){d.filteringPreference!=c&&(d.filteringPreference=c,d.goToPage(1),d._saveToPreferences(d.preferenceCategoryName,d.cclGridConstants.preferenceKeys.filtering,c))};d.goToPage=function(c){d.keepSelection||c==d.pageNumber||(document.getElementById(d.selectingHiddenClientID).value=
"");d.pageNumber=c;d.refresh()};d.changePageSize=function(c){d.pageSize=c;d.goToPage(1);d._saveToPreferences(d.preferenceCategoryName,d.cclGridConstants.preferenceKeys.pagesize,c)};d._getPageHref=function(c){return"javascript:"+d.name+".goToPage("+c+");"};d._addPager=function(){var c=window[d.pagerInstanceName];c&&(c.totalCount=d.totalCount,c.pageSize=d.pageSize,c.pageNumber=d.pageNumber,d.hidePagerWhenTotalCountLessMinPageSize&&d.totalCount<=c.getMinAvailablePageSize()?$("#"+d.pagerContainerClientId).hide():
($("#"+d.pagerContainerClientId).show(),c.createIn($("#"+d.pagerContainerClientId).empty())))};d._addHeader=function(c){var a=$("<tr></tr>");if(d.allowSelecting){var f=$("<th></th>").attr("scope","col").attr("class",d.cclGridConstants.cssClasses.selectColumn);f.append(d.createCheckbox(d.selectAllCheckBoxClientID));a.append(f)}for(var b=0;b<d.visibleColumns.length;b++){var e=d.columns.findByDataField(d.visibleColumns[b]);f=$("<th></th>").attr("scope","col");if(e.sortField){var k=$("<a></a>").attr("href",
"#").attr("title",e.title).click({sortField:e.sortField},function(a){d.sort(a.data.sortField);return!1}),l=d.sortingProperty==e.sortField?"asc"==d.sortingDirection?d.cclGridConstants.cssClasses.sortingAsc:d.cclGridConstants.cssClasses.sortingDesc:"";l=$("<span></span>").attr("class",d.cclGridConstants.cssClasses.thText+" "+l).html(e.headerHtml);f.attr("class",d.sortingProperty==e.sortField?d.cclGridConstants.cssClasses.thSelected:d.cclGridConstants.cssClasses.thSortable);k.append(l);f.append(k)}else f.html(e.headerHtml);
e.className&&f.addClass(e.className);e.width&&f.css("width",e.width+"px");f.appendTo(a)}d.allowColumnChoosing&&(f=$("<a class='"+d.cclGridConstants.cssClasses.columnChooserLink+"'></a>").attr("href","javascript:"+d.name+".showColumnChooser();").attr("title",d.cclGridConstants.terms.columnChooserToolTip),f.append($("<img />").attr("src",d.cclGridConstants.onePixelTransparentImageUrl).attr("alt",d.cclGridConstants.terms.columnChooserToolTip)),$("<th></th>").attr("class",d.cclGridConstants.cssClasses.columnChooserColumn).append(f).appendTo(a));
c.append(a);d.allowSelecting&&(d.$selectAllCheckBox=$("#"+d.selectAllCheckBoxClientID),CCL.ModernCheckbox.BuildCheckbox(d.$selectAllCheckBox,d.cclGridConstants.terms.selectAllRows,!0,!0),d.$selectAllCheckBox.change(function(a){d.toggleSelectAll(a.target.checked)}))};d.getSelectedValues=function(){var c=$("#"+d.selectingHiddenClientID).val();return 0==c.length?[]:c.slice(0,c.length-1).split(",")};d.clearSelection=function(){$("#"+d.selectingHiddenClientID).val("")};d.clear=function(){d.totalCount=
0;d._addHeader($("#"+d.gridClientID+" > thead").empty());d._addPager();var c=$("#"+d.gridClientID+" > tbody");c.empty();var a=d._getColumnsCount();d._addRowWithText(c,d.emptyTableText,a,d.cclGridConstants.cssClasses.emptyTableCell);d._addEmptyRows(c,d.cclGridConstants.minRowCount-1,a);$("tr:nth-child(even)",c).addClass(d.cclGridConstants.cssClasses.alternateRow)};d.render=function(c,a){a||(c=d.StringToXml(c));d.totalCount=$("VirtualCount",c).last().text();var f=d.getSelectedValues();d._addHeader($("#"+
d.gridClientID+" > thead").empty());d._addPager();var b=$("#"+d.gridClientID+" > tbody");b.empty();a=$(":first-child > Items > *",c);var e=0<a.length;1>a.length&&""!=$(c).text()&&(a=$(c).children().children());1>d.totalCount&&(a.length=0,e=!1);a.each(function(a,c){var g=$(d.dataKeyName,c).text();a=$("<tr data-id='"+g+"'></tr>");var h=$(d.cclGridConstants.rowTooltipTextProperty,c);0<h.length&&a.attr("title",h.text());d.allowRowExpanding&&(a.css("cursor","pointer"),a.on("click",function(a){d.expandCollapseRow(c,
a,g);return!0}));h=d.allowSelecting?d.name+"_select_"+g:"";if(d.allowSelecting){var k=f.contains(g);e&=k;var l=$("<td></td>").attr("class",d.cclGridConstants.cssClasses.selectColumn);0!=d.dataKeySelectionVisible.length&&"true"!==$(d.dataKeySelectionVisible,c).text()||l.append(d.createCheckbox(h));a.append(l);k&&a.addClass(d.cclGridConstants.cssClasses.selectedRow)}for(k=0;k<d.visibleColumns.length;k++){l=d.columns.findByDataField(d.visibleColumns[k]);var v=$(d.visibleColumns[k],c),u=$("<td></td>");
u.html(l.renderTableDataCellValueInsideDiv?"<div title='"+v.text()+"'>"+v.text()+"</div>":v.text());l.className&&u.addClass(l.className);u.appendTo(a)}d.allowColumnChoosing&&a.append($("<td></td>"));b.append(a);d.allowSelecting&&(a=$("#"+h),CCL.ModernCheckbox.BuildCheckbox(a,d.cclGridConstants.terms.selectOneRow,!0,!0),d.addCheckBoxHandler(h))});d.allowSelecting&&$("#"+d.selectAllCheckBoxClientID).prop("checked",!!e);c=d._getColumnsCount();0==a.length&&d._addRowWithText(b,d.emptyTableText,c,d.cclGridConstants.cssClasses.emptyTableCell);
a.length<d.cclGridConstants.minRowCount&&d._addEmptyRows(b,d.cclGridConstants.minRowCount-Math.max(a.length,1),c);$("tr:nth-child(even)",b).addClass(d.cclGridConstants.cssClasses.alternateRow)};d._addRowWithText=function(c,a,f,b){c.append($("<tr></tr>").append($("<td></td>").attr("class",b).attr("colSpan",f).html(a)))};d._addEmptyRows=function(c,a,f){for(var b=0;b<a;b++)d._addRowWithText(c,"&nbsp;",f,"")};d.createColumnChooser=function(c){d.columnChooserClientID&&$("#"+d.columnChooserClientID).sortable({opacity:.8,
placeholder:c,tolerance:"pointer"})};d.showColumnChooser=function(){$("#"+d.columnChooserClientID).empty();for(var c=d.visibleColumns.concat(d._getInvisibleColumns()),a=0;a<c.length;a++){var f=d.columns.findByDataField(c[a]),b=d.visibleColumns.contains(f.dataField);f=$("<li />").attr("class",d.cclGridConstants.cssClasses.columnChooser).append($("<input type='checkbox'/>").val(f.dataField).attr("id",d.name+"_"+f.dataField+"_chk").prop("checked",b).prop("defaultChecked",b)).append($("<label></label>").attr("for",
d.name+"_"+f.dataField+"_chk").html(f.headerHtml));$("#"+d.columnChooserClientID).append(f)}window[d.columnChooserDialogName].open();(c=$("#"+this.columnChooserClientID).find("input:not(:disabled):first"))&&c.focus()};d.updateColumnsList=function(){var c=[];$(":checkbox","#"+d.columnChooserClientID).each(function(a,b){a=$(b);a.prop("checked")&&c.push(a.val())});0==c.length&&c.push(d.mainColumn);if(!c.isEqual(d.visibleColumns)){d.visibleColumns=c;d.visibleColumns.contains(d.columns.findBySortField(d.sortingProperty).dataField)?
d.refresh():d.sort(d.columns.findByDataField(d.visibleColumns[0]).sortField);var a=null;c.isEqual(d.defaultColumnOrder)||(a=d.visibleColumns.toString());d._saveToPreferences(d.preferenceCategoryName,d.cclGridConstants.preferenceKeys.columnOrder,a)}return!0};d._collapseAll=function(){$("#"+d.gridClientID+" > tbody > tr."+d.accordionRow).hide()};d.expandCollapseRow=function(c,a,f){if(a=a?a:window.event)if(a=a.srcElement||a.target,"TD"!=a.tagName&&"TR"!=a.tagName)return;if($(c).next().hasClass(d.cclGridConstants.cssClasses.accordionRow))b=
$(c).next(),b.is(":hidden")?(d._collapseAll(),b.show(),b.removeAttr("style")):b.hide();else{d._collapseAll();var b=$("<tr class='"+d.cclGridConstants.cssClasses.accordionRow+"'></tr>").hide(),e=$("<td></td>").attr("colSpan",d._getColumnsCount());a=0<this.accordionDataSourceUrl.indexOf("?")?"&":"?";$.get(d.accordionDataSourceUrl+a+d.accordionDataSourceUrlParameterName+"="+encodeURIComponent(f),{},function(a){e.html(a);b.show();b.removeAttr("style")},"html");b.append(e);$(c).after(b)}};d.getRow=function(c){return $("#"+
d.gridClientID+" > tbody tr[data-id='"+c+"']")};Array.prototype.findByDataField=function(c){for(x in this)if(this[x].dataField==c)return this[x];return null};Array.prototype.findBySortField=function(c){for(x in this)if(this[x].sortField==c)return this[x];return null};Array.prototype.isEqual=function(c){if(this.length!=c.length)return!1;for(var a=0;a<c.length;a++)if(this[a].compare&&!this[a].compare(c[a])||this[a]!==c[a])return!1;return!0};Array.prototype.contains=function(c){for(x in this)if(this[x]==
c)return!0;return!1};d.StringToXml=function(c){if(window.ActiveXObject){var a=new ActiveXObject("Microsoft.XMLDOM");a.async="false";a.loadXML(c)}else a=(new DOMParser).parseFromString(c,"text/xml");return a};d.XmlToString=function(c){return window.ActiveXObject?c.xml:(new XMLSerializer).serializeToString(c)}}
function CclGridSearchFilterInstance(b){window[b]=this;var e=this;this.inputEmptyCssClass=null;e.firstLoad=function(){e.isEmpty=e.settings.isEmpty;e.controls.searchInput.focus(function(){e.onFocus()}).keyup(function(b){return e.onKeyUp(b)}).keydown(function(b){b.which===CommonConstants.keyCodes.enter&&b.stopPropagation()}).keypress(function(b){return b.which!==CommonConstants.keyCodes.enter}).blur(function(){e.onBlur()});e.refresh()};e.onFocus=function(){e.isEmpty&&(e.isEmpty=!1,e.refresh(!0))};e.onBlur=
function(){if(0==e.controls.searchInput.val().length)e.isEmpty=!0,e.refresh(),e.filter("");else{var b=e.settings.preferenceWithoutValue+e.controls.searchInput.val();e.filter(b)}};e.onKeyUp=function(b){if(e.isEmpty)return e.isEmpty=!1,e.refresh(!0),!0;if(b.which===CommonConstants.keyCodes.enter)return b=e.settings.preferenceWithoutValue+e.controls.searchInput.val(),e.filter(b),!1};e.defineState=function(){e.isEmpty||0!=e.controls.searchInput.val().length||(e.isEmpty=!0)};e.refresh=function(b){e.isEmpty?
(e.controls.searchInput.addClass(e.inputEmptyCssClass),e.controls.searchInput.val(e.settings.searchText)):(b&&e.controls.searchInput.val(""),e.controls.searchInput.removeClass(e.inputEmptyCssClass))}}
function HtmlItemPicker(b){function e(){q.css("width",n.width()-u);q.removeClass(l.settings.cssClasses.hiddenClass)}function d(){return m.is(":visible")}function c(a){$(m).find("li[data-id='"+a+"']").addClass("ccl-htmlitempicker-highlighteditem");document.querySelector(".ccl-htmlitempicker-highlighteditem").scrollIntoView({block:"center"})}function a(a){$(m).find("li[data-id='"+a+"']").removeClass("ccl-htmlitempicker-highlighteditem")}function f(f,b){a(f.id);f=l.settings.items[b];c(f.id);p=f}function g(){m=
$("<span></span>").attr("id",b+"_menu").addClass(l.settings.cssClasses.menu).insertAfter(n).hide();var a=$(String.format("<ul class='{0}'></ul>",l.settings.cssClasses.alignment)).appendTo(m);$.each(l.settings.items,function(c,f){a.append($("<li>").attr("data-id",f.id.toString()).append($("<span>").addClass("ccl-htmlitempicker-item").html(f.innerHtml).mouseenter(function(a){a=$(a.currentTarget);this.offsetWidth<this.scrollWidth&&!a.prop("title")&&a.prop("title",a.text())}).click(function(a){h();l.controls.selectedValueHidden.val()!==
f.id.toString()&&(k(f.id,f.innerHtml),l.onValueChangedFunction(f,l));a.preventDefault()})))})}function h(){m.hide();a(p.id);n.removeClass(l.settings.cssClasses.menuOpen)}function k(a,c){l.controls.selectedValueHidden.val(a);l.setSelectedHtmlContainer(c);l.controls.container.trigger(l.settings.StateChangedEventName);e()}window[b]=this;var l=this,m,n,q,p,v=$(window),u;l.initialize=function(){n=l.controls.container;q=n.find("> span");n.find("> a");g();u=q.outerWidth(!0)-q.width();e();$(document).click(function(a){if(a.target===
n[0]||1===$(a.target).closest(n).length){if(n.getIfHyperLinkEnabled())if(m.is(":visible"))h();else{var f=n.offset();a=l.settings.menuAlignment===l.settings.menuAlignmentEnum.top?f.top-m.outerHeight():f.top+n.outerHeight();var b=n.position();a=l.settings.menuAlignment===l.settings.menuAlignmentEnum.top?0<a?b.top-m.outerHeight():b.top-f.top:b.top+n.outerHeight();b=b.left;var e=v.width(),g=n.innerWidth();m.css("width",m.width()<=g?g:"auto");var k=m.outerWidth();g=v.scrollLeft();l.settings.menuHorizontalAlignment===
l.settings.menuHorizontalAlignmentEnum.left?b=0:k<e?(f=f.left+k,f>e+g&&(b-=f-e-g)):b=-f.left+g;e=(f=CCL.CommonFunctions.isIosDevice())&&10>CCL.CommonFunctions.getIosVersion();!CCL.CommonFunctions.isSafari()||f&&!e||(b=a=0);m.css({top:a+"px",left:b+"px","z-index":l.settings.zIndex});null!==l.settings.listHeight&&m.css("max-height",l.settings.listHeight);l.settings.useModernSkin&&m.css("top",n.outerHeight(!0)+"px");m.show();n.addClass(l.settings.cssClasses.menuOpen)}d()&&(p=l.getSelectedItem(),c(p.id))}else d()&&
(b=m.offset(),a.clientX>b.left&&a.clientX<b.left+m.width()&&a.clientY>b.top&&a.clientY<b.top+m.height()||h())});$(document).keydown(function(a){if(d())switch(a.which){case CommonConstants.keyCodes.enter:return l.controls.selectedValueHidden.val()!==p.id.toString()&&(k(p.id,p.innerHtml),l.onValueChangedFunction(p,l)),h(),a.preventDefault(),!1;case CommonConstants.keyCodes.tab:case CommonConstants.keyCodes.escape:h();break;case CommonConstants.keyCodes.arrowUp:if(d()){var c=l.settings.items.indexOf(p);
c=0==c?l.settings.items.length-1:c-1;f(p,c)}a.preventDefault();return!1;case CommonConstants.keyCodes.arrowDown:return d()&&(c=l.settings.items.indexOf(p),c=c==l.settings.items.length-1?0:c+1,f(p,c)),a.preventDefault(),!1}});$(window).resize(function(a){q.addClass(l.settings.cssClasses.hiddenClass);e()});l.settings.disabled&&l.toggleEnabled(!1)};l.loadMenu=function(a){l.settings.items=a;l.getMenu().remove();g()};l.selectItem=function(a){k(a,$.grep(l.settings.items,function(c){return c.id.toString()===
a.toString()})[0].innerHtml)};l.hasAnyItems=function(){return 0<l.settings.items.length};l.onchange=function(a){l.controls.container.on(l.settings.StateChangedEventName,a)};l.toggleEnabled=function(a){l.controls.container.toggleHyperlink(a)};l.closeMenu=function(){m.is(":visible")&&h()};l.getMenu=function(){return m};l.getSelectedItem=function(){var a=l.settings.items[0];$.each(l.settings.items,function(c,f){l.controls.selectedValueHidden.val()==f.id.toString()&&(a=f)});return a};l.setSelectedHtmlContainer=
function(a){q.html("\n"+a+"\n")};l.setMenuItemContent=function(a,c){$(m.find("a")[a]).html(c);l.settings.items[a].innerHtml=c};l.resizeComponent=function(){e()};return l}
(function(b,e){b(document).on("click","div[data-hybrid-editor-settings]>div.ccl-hybrideditoritem-text-container, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",null,function(d){var c=b(d.currentTarget).parent("div.ccl-hybrideditoritem");c.hybridEditorItem();c.hybridEditorItem("edit",d.currentTarget,d.target)});b(document).on("keydown","div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",
null,function(b){b.which===CommonConstants.keyCodes.enter&&(b.preventDefault(),setTimeout(function(){b.target.click()},400))});b(document).on("mouseenter mouseleave focus blur","div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",null,function(d){b(d.currentTarget).siblings("div.ccl-hybrideditoritem-text-container:first").toggleClass("ccl-hybrideditoritem-text-container-hovered","mouseenter"==d.type||"focusin"==
d.type)});b.widget("ccl.hybridEditor",{options:{editorClientId:e,editorSetContentFuncName:e,editorGetContentFuncName:e,dialogClientId:e,saveButtonClientId:e,modalDialogCloseHref:e,textUpdateCompleted:b.noop,ckePopupFixClass:e,isIos:!1,containerCss:e,textContainerCss:e,closeAfterSave:!1},_create:function(){var d=b("#"+this.options.saveButtonClientId);d.on("click",b.proxy(this._handleSaveClick,this));var c=b("#"+this.options.cancelButtonClientId);c.on("click",b.proxy(this._handleCancelClick,this));
b(document).on("keyup","."+this.options.containerCss,b.proxy(this._handleContainerKeyUp,this));new CCL.ButtonLoadingIndicator(d,"ccl-button-in-progress",[d,c],0);if(this.options.isIos){var a=this,f=b("html");b(document).on("cssmodal:show",function(c,b,d){d==a.options.dialogClientId&&f.addClass(a.options.ckePopupFixClass)}).on("cssmodal:hide",function(c,b,d){d==a.options.dialogClientId&&f.removeClass(a.options.ckePopupFixClass)})}},_handleContainerKeyUp:function(d){d.which===CCL.CommonConstants.keyCodes.enter&&
b(d.target).find("."+this.options.textContainerCss).click()},_handleCancelClick:function(b){this._closeDialog();return!1},_handleSaveClick:function(b){var c="";this.options.editorClientId&&this.options.editorGetContentFuncName&&(c=this.options.editorGetContentFuncName(this.options.editorClientId));this._trigger("textUpdateCompleted",b,c);this.options.closeAfterSave||this._closeDialog();return!1},_closeDialog:function(){window.location.href=this.options.modalDialogCloseHref},activateButtons:function(){b("#"+
this.options.saveButtonClientId).trigger(CCL.ButtonLoadingIndicator.eventRemoveLoadingIndicator)},closeDialog:function(){this._closeDialog()},setCloseAfterSave:function(b){this.options.closeAfterSave=b},openEditor:function(b,c){this.activateButtons();this.updateEditorText(b);c&&""!=c&&window[this.options.dialogClientId].setTitle(c);window.location.href="#"+this.options.dialogClientId},updateEditorText:function(b){this.options.editorClientId&&this.options.editorSetContentFuncName&&(this.options.editorSetContentFuncName(b,
this.options.editorClientId),window[this.options.dialogClientId].adjustWindowSize())}})})(jQuery);
(function(b,e){b.widget("ccl.hybridEditorItem",{options:{groupSettingsFunctionName:e,groupSettingsFunctionParam:e,textContainerId:e,editLinkId:e,hybridEditorClientId:e,editModeEnabled:"hybrid",webMethodParams:e,webMethodDataParamName:e,saveContentWebUrl:e,inlineEditorOptions:e,editorDialogTitle:"",editToolTipText:e,textContainerWatermark:e,textContainerWatermarkCssClass:e,plainTextContainerCssClass:e,watermarkDataAttributeName:e,enable:!0},widgetState:{idle:0,inlineEditorOpened:1,savingPlainText:2,
savingRichContent:3},_editor:e,_inlineEditor:e,_textContainer:e,_editLink:e,_isAjaxEnabled:!1,_isWatermarkUsed:!1,_groupSettingsAreUsed:!1,_currentState:e,_create:function(){this._initializeSettings();this.options.webMethodParams=this._groupSettingsAreUsed?this.options.webMethodParams:JSON.parse(this.options.webMethodParams);this.options.webMethodDataParamName=this.options.webMethodDataParamName?this.options.webMethodDataParamName:"data";this._isAjaxEnabled=!!this.options.saveContentWebUrl;this._textContainer=
b("#"+this.options.textContainerId);this._textValueHidden=b("#"+this.options.textValueHiddenId);this._editLink=b("#"+this.options.editLinkId);this._isWatermarkUsed=this.options.textContainerWatermark!=e&&""!==this.options.textContainerWatermark;if(("hybrid"===this.options.editModeEnabled||"inline"===this.options.editModeEnabled)&&this.options.inlineEditorOptions){var d=this._groupSettingsAreUsed?this.options.inlineEditorOptions:JSON.parse(this.options.inlineEditorOptions);d.editFieldCssClass=(d.editFieldCssClass?
d.editFieldCssClass:"")+(d.multiline?" ccl-modern-textarea":" ccl-modern-input");this._inlineEditor=new ClientInlineEditor(this._textContainer,null,this._textValueHidden,d,b.proxy(this._savePlainText,this),b.proxy(this._inlineEditorModeChanged,this),null)}this.options.hybridEditorClientId&&(this._editor=b("#"+this.options.hybridEditorClientId));this._editor&&0!==this._editor.length||(this.options.editModeEnabled="inline");this._currentState=this.widgetState.idle},edit:function(d,c){if(this.options.enable){if(d===
this._textContainer.get(0)){if(c&&0<b(c).closest("a,input,button,textarea").length)return;this._handleTextContainerClick()}d===this._editLink.get(0)&&this._handleIconClick()}},updateInlineEditorText:function(){this._inlineEditor&&"function"===typeof this._inlineEditor.updateTextOnBlur&&this._inlineEditor.updateTextOnBlur()},updateTextContainer:function(b,c){this._updateText(b,c)},connectHybridEditor:function(d){this._editor=b("#"+d);this.options.editModeEnabled="hybrid"},_initializeSettings:function(){var d=
this.element.data("hybrid-editor-settings");if(b.isFunction(window[d.groupSettingsFunctionName])){var c=d.groupSettingsFunctionParam?window[d.groupSettingsFunctionName](d.groupSettingsFunctionParam):window[d.groupSettingsFunctionName]();b.extend(this.options,c);this.options.textContainerId=d.textContainerId;this.options.textValueHiddenId=d.textValueHiddenId;this.options.editLinkId=d.editLinkId;this.options.hybridEditorClientId||(this.options.hybridEditorClientId=d.hybridEditorClientId);this.options.watermarkDataAttributeName=
d.watermarkDataAttributeName;this.options.plainTextContainerCssClass=d.plainTextContainerCssClass;b.extend(this.options.inlineEditorOptions,{suppressOriginalBehaviour:!0,editFieldAutoWidth:!1});this._groupSettingsAreUsed=!0}else b.extend(this.options,d)},_handleTextContainerClick:function(){if(this._editor)switch(this.options.editModeEnabled){case "dialog":this._openHybridEditor();break;case "hybrid":var b=this._textContainer.html();""===b||this._isWatermarkApplied()||CommonFunctions.isPlainText(b)?
this._openInlineEditor():this._openHybridEditor();break;default:this._openInlineEditor()}else this._openInlineEditor()},_handleIconClick:function(){!this._editor||"hybrid"!==this.options.editModeEnabled&&"dialog"!==this.options.editModeEnabled?this._openInlineEditor():this._openHybridEditor()},_openInlineEditor:function(){this._inlineEditor&&this._currentState===this.widgetState.idle&&(this._removeWatermark(),this._inlineEditor.switchToEditMode(),this._currentState=this.widgetState.inlineEditorOpened)},
_openHybridEditor:function(){if(this._editor&&this._currentState!==this.widgetState.savingRichContent){var d=this._currentState===this.widgetState.inlineEditorOpened||this._currentState===this.widgetState.savingPlainText,c=b.proxy(this._saveRichContent,this);this._editor.off("hybrideditortextupdatecompleted").one("hybrideditortextupdatecompleted",c);c=this._textValueHidden.val();CommonFunctions.isPlainText(c)&&(c=this._textContainer.html());d&&(c=CommonFunctions.replaceLineBreaksWithBrTags(this._inlineEditor.getEditFieldText()));
!this._isAjaxEnabled&&this.options.processContentWebUrl&&this._editor.hybridEditor("setCloseAfterSave",!0);this._editor.hybridEditor("openEditor",this._isWatermarkApplied()&&!d?"":c,this.options.editorDialogTitle)}},_savePlainText:function(d,c){var a=b.trim(d.actualText);if(this._isAjaxEnabled){if(this.options.saveContentWebUrl&&this.options.webMethodParams){var f=this,e={};e[this.options.webMethodDataParamName]=encodeURIComponent(this._processPlainText(a));a=b.extend(this.options.webMethodParams,
e);this._currentState=this.widgetState.savingPlainText;CCL.CommonFunctions.safeAjaxPost({url:this.options.saveContentWebUrl,data:a,success:function(a){a&&(a.IsSuccessfull?(d.actualText=a.Value,f._textUpdated(a.SafeHtml,a.Value,a.CustomData)):(d.isUpdateSuccess=!1,d.stopOnEdit=!0,f._handleError(a.ErrorText)))},error:function(a,c,b){d.isUpdateSuccess=!1;d.stopOnEdit=!0;f._handleAjaxError(a,c,b)},complete:function(){c(d);f.options.textUpdatedCallback&&(new Function(f.options.textUpdatedCallback))()}})}}else this._textUpdated(this._processPlainText(a),
a),c(d)},_saveRichContent:function(d,c){var a=this;b.isPlainObject(c)&&(c="");this._isAjaxEnabled?this.options.saveContentWebUrl&&this.options.webMethodParams?(d={},d[this.options.webMethodDataParamName]=encodeURIComponent(c),c=b.extend(this.options.webMethodParams,d),this._currentState=this.widgetState.savingRichContent,CCL.CommonFunctions.safeAjaxPost({url:this.options.saveContentWebUrl,data:c,success:function(c){c&&(c.IsSuccessfull?(a._textUpdated(c.SafeHtml,c.Value,c.CustomData),CommonFunctions.isPlainText(c.SafeHtml)&&
a._inlineEditor.setNewText(c.Value)):a._handleError(c.ErrorText));a._addWatermark();a._currentState=a.widgetState.idle},error:function(c,b,d){a._handleAjaxError(c,b,d)},complete:function(){a._editor.hybridEditor("activateButtons")}})):a._editor.hybridEditor("activateButtons"):this.options.processContentWebUrl?CCL.CommonFunctions.safeAjaxPost({url:this.options.processContentWebUrl,data:c,dataType:"json"}).done(function(c){a._textUpdated(c.displayText,c.text);CommonFunctions.isPlainText(c.displayText)&&
a._inlineEditor.setNewText(c.text);a._addWatermark()}).complete(function(){a._editor.hybridEditor("activateButtons");a._editor.hybridEditor("closeDialog")}):(this._textUpdated(c,c),this._addWatermark(),a._editor.hybridEditor("activateButtons"))},_addWatermark:function(){if(this._isWatermarkUsed&&!this._isWatermarkApplied()&&!b.trim(this._textContainer.html())){var d=b("<span "+this.options.watermarkDataAttributeName+"='true'/>").text(this.options.textContainerWatermark);this.options.textContainerWatermarkCssClass&&
d.addClass(this.options.textContainerWatermarkCssClass);this._textContainer.prepend(d)}},_removeWatermark:function(){if(this._isWatermarkUsed){var b=this._textContainer.find("span["+this.options.watermarkDataAttributeName+"]");0<b.length&&b.remove()}},_isWatermarkApplied:function(){return this._isWatermarkUsed&&0<this._textContainer.find("span["+this.options.watermarkDataAttributeName+"]").length},_inlineEditorModeChanged:function(b){b.isEditMode||(this._addWatermark(),this._currentState=this.widgetState.idle);
this._trigger("inlinemodechanged",null,b)},_textUpdated:function(b,c,a){this._updateText(b,c);this._trigger("textupdated",null,{html:b,value:c,customData:a})},_updateText:function(b,c){this._textValueHidden.val(c);this._textContainer.html(b).toggleClass(this.options.plainTextContainerCssClass,CommonFunctions.isPlainText(b))},_processPlainText:function(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;").replace(/\r?\n/g,"<br />\n")},_handleAjaxError:function(b){this._trigger("ajaxerror",
null,{xhrObject:b})},_handleError:function(b){this._trigger("saveerror",null,{errorText:b})},value:function(){var b=this._textValueHidden.val(),c=this._textContainer.html();if(""===c||this._isWatermarkApplied()||CommonFunctions.isPlainText(c))b=this._processPlainText(b);return b},resetValue:function(){this._textUpdated("");this._inlineEditor.setNewText("");this._addWatermark()},setToolTip:function(b){this._inlineEditor.setToolTip(b);this._editLink.attr("title",b)},setEnable:function(b){this.options.enable=
b;this._editLink.toggle(b);this._textContainer.toggleClass("ccl-hybrideditoritem-text-container-hovered",b);this._textContainer.toggleClass("h-cursor-default",!b);b?(this._addWatermark(),this._textContainer.attr("title",this.options.editToolTipText)):(this._removeWatermark(),this._textContainer.attr("title",""))}})})(jQuery);
(function(b){var e=$(b.document);b.IframeClickEventHelper={registerDocumentClickBubblingOnTop:function(){var d="click touchstart";navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)&&(d="click");var c=b.parent,a=b.itslTop||b.top;e.on(d,function(){a!=b&&(CommonFunctions.makePostMessageCall(a,{messageName:"iframeClickBubble"}),c!=a&&CommonFunctions.makePostMessageCall(c,{messageName:"iframeClickBubble"}))});e.on("touchstart",function(){a!=b&&(CommonFunctions.makePostMessageCall(a,{messageName:"iframeTouchstartBubble"}),
c!=a&&CommonFunctions.makePostMessageCall(c,{messageName:"iframeTouchstartBubble"}))})},handleDocumentClickBubblingOnTop:function(){CommonFunctions.attachPostMessageEventListener($(b),"iframeClickBubble",function(b){e.trigger(CommonTriggers.clickInInnerFrame)});CommonFunctions.attachPostMessageEventListener($(b),"iframeTouchstartBubble",function(b){e.trigger(CommonTriggers.touchstartInInnerFrame)})}}})(window);
function IframeIterator(b){if(void 0===b.nodeType||void 0===b.nodeName)throw"Starting element must be a HTML Node.";var e=[b],d=b;return{hasNext:function(){return 0<e.length},next:function(){void 0!==d&&$(d).find("iframe").each(function(c,a){c=void 0;try{c=a.contentDocument}catch(f){return}null!==c&&e.push(c)});return d=e.pop()}}}
(function(b){b.IframeResizer={reportSetIframeDefaultHeight:function(){var e;(e=b.parent)&&b!==e&&CommonFunctions.makePostMessageCall(e,{messageName:"setIframeDefaultHeight"})},registerDefaultHeight:function(e,d){var c=$(b),a=$("#"+e.iframeClientId),f,g=CCL.CommonFunctions.calculateRightAndBottomOffset(a);var h=b[e.setIframeDefaultHeightFunctionName]=function(){var f=IframeResizer.getFixedIframeDefaultWidthAndHeight(c,a,g);e.useMinHeight?a.css("min-height",f.height+"px"):a.height(f.height);d&&d({width:f.width+
8,height:f.height+8},a)};h();c.resize(function(){f&&clearTimeout(f);f=setTimeout(h,200)});CommonFunctions.attachPostMessageEventListener(c,"setIframeDefaultHeight",function(a){h()})},getIframeDefaultWidthAndHeight:function(b,d,c){var a=CCL.CommonFunctions.isIosDevice(),f=a?screen.width:b.innerWidth();b=a?screen.height:b.innerHeight();d=d.offset();return{width:f-d.left-c.right,height:b-d.top-c.bottom}},getFixedIframeDefaultWidthAndHeight:function(b,d,c){b=IframeResizer.getIframeDefaultWidthAndHeight(b,
d,c);return{width:b.width-8,height:b.height-8}},registerExtensionIframeListener:function(e){var d=$("#"+e.IframeClientId);CommonFunctions.attachPostMessageEventListener($(b),[CommonWindowMessages.MessageNames.expandExtensionIframe,CommonWindowMessages.MessageNames.collapseExtensionIframe],function(c,a){var f=(c=c.messageName===CommonWindowMessages.MessageNames.expandExtensionIframe)?"0":"";d.css({position:c?"fixed":"",top:f,right:f,bottom:f,left:f});d.toggleClass(e.ExpandedIframeCssClass,c);IframeResizer.reportSetIframeDefaultHeight();
c&&CommonFunctions.makePostMessageCall(a,new CCL.CommonWindowMessages.GenericMessage(CommonWindowMessages.MessageNames.expandExtensionIframeDone))})}}})(window);function postWidthAndHeightToExtension(b,e){e.get(0)&&CommonFunctions.makePostMessageCall(e.get(0).contentWindow,new CommonWindowMessages.GenericMessageWithData(CommonWindowMessages.MessageNames.extensionContentOpened,{iframeWidth:b.width&&0<b.width?b.width:e.width(),iframeHeight:b.height&&0<b.height?b.height:e.height()}))}
function attachOnReadySendTitleToParent(){"complete"===document.readyState?sendDocumentTitleToParent():document.addEventListener("DOMContentLoaded",sendDocumentTitleToParent)}function sendDocumentTitleToParent(){window.self!==(window.itslTop||window.top)&&window.parent.postMessage(JSON.stringify({messageName:"setIFrameTitleMessage",iFrameTitle:document.title}),"*")}
function attachSetIFrameTitlePostMessageEventListener(b){window.addEventListener("message",function(e){if(e.data&&e.source){var d=document.getElementById(b);if(d&&e.source===d.contentWindow)try{var c=JSON.parse(e.data);c.messageName&&"setIFrameTitleMessage"===c.messageName&&setTitleToIFrame(c.iFrameTitle,d)}catch(a){}}},!1)}function setTitleToIFrame(b,e){e&&(b?e.setAttribute("title",b):e.removeAttribute("title"))}
function InlineFeedback(b){window[b]=this;var e=this;e.show=function(b){var c=e.controls;c.container.css("visibility","visible");0<b&&c.container.delay(1E3*b).fadeTo("slow",0,function(){$(this).css("visibility","hidden").css("opacity",1)})}}
(function(b){b.InlineReplyManager={sendButtonClick:function(b,d){var c=$(b),a=c.parent().prev();if(b=a.val())c.prop("disabled",!0),d({target:c,messageBody:CommonFunctions.replaceLineBreaksWithBrTags(CommonFunctions.htmlEncode(b)),sendMessageCompleteCallback:function(){c.prop("disabled",!1)},sendMessageSuccessCallback:function(){a.val("")}})}}})(window);
function ItslTextBox(b){function e(a){if((a.keyCode?a.keyCode:a.which?a.which:a.charCode)===CommonConstants.keyCodes.enter){if(h.onEnterAction)return h.onEnterAction(),a.preventDefault(),!1;$(this.form).submit();a.preventDefault();return!1}return!0}function d(c){var b=c.keyCode?c.keyCode:c.which?c.which:c.charCode;if("undefined"!==f.selectionStart){var d=0<f.selectionEnd-f.selectionStart;f.focus()}else d=!1;if(!d&&0<g.maxLength&&this.value.length>=g.maxLength){d=c.ctrlKey||c.metaKey;if(b>=CommonConstants.keyCodes.arrowLeft&&
b<=CommonConstants.keyCodes.arrowDown||b===CommonConstants.keyCodes.del||b===CommonConstants.keyCodes.backspace||d&&120===b||d&&97===b||d&&118===b||d&&99===b||d&&90===b)return c=a.val(),c.length>g.maxLength&&a.val(c.substr(0,g.maxLength)),!0;c.preventDefault();return!1}return!0}window[b]=this;var c=this,a=$("#"+b),f=a.get(0),g,h;c.initialize=function(){g=c.settings;h=c.functions;"maxLength"in f||a.bind("change keyup keydown input paste",d);g.submitOnEnter&&a.bind("change keyup keydown input paste",
e);if(c.settings.isAutogrow){var b=a.width();a.css({resize:"none",overflow:"hidden",width:b});a.autogrow({additionalHeight:c.settings.autogrowAdditionalHeight,fontWeight:c.settings.autogrowFontWeight})}};return c}
(function(b){b.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:.01,overlayColor:"#FFF",draggable:!0,okButton:"&nbsp;OK&nbsp;",cancelButton:"&nbsp;Cancel&nbsp;",dialogClass:null,promptInputMaxLength:0,focusTracker:void 0,alert:function(e,d,c){null==d&&(d="Alert");b.alerts._show(d,e,null,"alert",function(a){c&&c(a)})},confirm:function(e,d,c){null==d&&(d="Confirm");b.alerts._show(d,e,null,"confirm",function(a){c&&c(a)})},prompt:function(e,d,c,a){null==c&&(c="Prompt");
b.alerts._show(c,e,d,"prompt",function(c){a&&a(c)})},multiButtonConfirm:function(e,d,c,a){null==d&&(d="multiButtonConfirm");b.alerts._show(d,e,null,"multiButtonConfirm",function(c){a&&a(c)},c)},_show:function(e,d,c,a,f,g){b.alerts._hide();b.alerts._overlay("show");b("BODY").append('<div id="popup_container"><h1 id="popup_title"></h1><div id="popup_content"><div id="popup_message"></div></div></div>');b.alerts.dialogClass&&b("#popup_container").addClass(b.alerts.dialogClass);var h=b("#popup_container");
h.attr({role:"dialog","aria-labelledby":"popup_title","aria-describedby":"popup_content"});h.css({position:"fixed",zIndex:99999,padding:0,margin:0});b.alerts.focusTracker=new CCL.FocusTracker(h);b("#popup_title").text(e);b("#popup_content").addClass(a);b("#popup_message").text(d);b("#popup_message").html(b("#popup_message").text().replace(/\n/g,"<br />"));switch(a){case "alert":b("#popup_message").after('<div id="popup_panel"><input type="button" value="'+b.alerts.okButton+'" id="popup_ok" autofocus/></div>');
b("#popup_ok").click(function(){b.alerts._hide();f(!0)});b("#popup_ok").focus().keypress(function(a){13!=a.keyCode&&27!=a.keyCode||b("#popup_ok").trigger("click")});break;case "confirm":b("#popup_message").after('<div id="popup_panel"><input type="button" value="'+b.alerts.okButton+'" id="popup_ok" autofocus/> <input type="button" value="'+b.alerts.cancelButton+'" id="popup_cancel" /></div>');b("#popup_ok").click(function(){b.alerts._hide();f&&f(!0)});b("#popup_cancel").click(function(){b.alerts._hide();
f&&f(!1)});b("#popup_ok").focus();b("#popup_ok, #popup_cancel").keypress(function(a){27==a.keyCode&&b("#popup_cancel").trigger("click")});break;case "prompt":g=0<b.alerts.promptInputMaxLength?'maxlength="'+b.alerts.promptInputMaxLength+'"':"";b("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" '+g+" />").after('<div id="popup_panel"><input type="button" value="'+b.alerts.okButton+'" id="popup_ok" /> <input type="button" value="'+b.alerts.cancelButton+'" id="popup_cancel" /></div>');
b("#popup_prompt").width(b("#popup_message").width());b("#popup_ok").click(function(){var a=b("#popup_prompt").val();b.alerts._hide();f&&f(a)});b("#popup_cancel").click(function(){b.alerts._hide();f&&f(null)});b("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(a){27==a.keyCode&&b("#popup_cancel").trigger("click")});c&&b("#popup_prompt").val(c);b("#popup_prompt").focus().select();break;case "multiButtonConfirm":c="";for(e=0;e<g.length;e++)c+='<input type="button" ',c+=' value="'+g[e].text+
'" ',c+=' id="jqueryalertsbutton'+e+'" ',c+=' class="ccl-button '+(g[e].css?g[e].css:"ccl-button-color-grey")+'"',c+=' data-userid="'+g[e].customId+'" ',c+=" />\r\n";b("#popup_message").after('<div class="jquery-alerts-footer">'+c+"</div>");for(e=0;e<g.length;e++)b("#jqueryalertsbutton"+e).click(function(a){a=b(a.target);a={buttonIndex:parseInt(a.attr("id").replace("jqueryalertsbutton",""),10),customId:a.data("userid")};b.alerts._hide();f&&f(a)});b("#jqueryalertsbutton0").focus()}g=b("#popup_container").outerWidth()+
1;b("#popup_container").css({minWidth:g,maxWidth:g});b.alerts._reposition();b.alerts._maintainPosition(!0);if(b.alerts.draggable)try{b("#popup_container").draggable({handle:b("#popup_title")}),b("#popup_title").css({cursor:"move"})}catch(k){}b.alerts.focusTracker.startTrackFocus()},_hide:function(){b.alerts.focusTracker&&b.alerts.focusTracker.stopTrackFocus();b("#popup_container").remove();b.alerts._overlay("hide");b.alerts._maintainPosition(!1)},_overlay:function(e){switch(e){case "show":b.alerts._overlay("hide");
b("BODY").append('<div id="popup_overlay"></div>');b("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:b(document).height(),background:b.alerts.overlayColor,opacity:b.alerts.overlayOpacity});break;case "hide":b("#popup_overlay").remove()}},_reposition:function(){if(-1!=navigator.platform.indexOf("iPad"))if(90===window.orientation||-90===window.orientation){var e=screen.width;var d=screen.height}else e=screen.height,d=screen.width;else e=b(window).height(),
d=b(window).width();e=e/2-b("#popup_container").outerHeight()/2+b.alerts.verticalOffset;d=d/2-b("#popup_container").outerWidth()/2+b.alerts.horizontalOffset;0>e&&(e=0);0>d&&(d=0);b("#popup_container").css({top:e+"px",left:d+"px"});b("#popup_overlay").height(b(document).height())},_maintainPosition:function(e){if(b.alerts.repositionOnResize)switch(e){case !0:b(window).bind("resize",b.alerts._reposition);break;case !1:b(window).unbind("resize",b.alerts._reposition)}}};jAlert=function(e,d,c){b.alerts.alert(e,
d,c)};jConfirm=function(e,d,c){b.alerts.confirm(e,d,c)};jPrompt=function(e,d,c,a){b.alerts.prompt(e,d,c,a)};jMultiButtonConfirm=function(e,d,c,a){b.alerts.multiButtonConfirm(e,d,c,a)}})(jQuery);
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function(b){if(!b.support.cors&&b.ajaxTransport&&window.XDomainRequest){var e=/^https?:\/\//i,d=/^get|post$/i,c=new RegExp("^"+location.protocol,"i");b.ajaxTransport("* text html xml json",function(a,f,g){if(a.crossDomain&&a.async&&d.test(a.type)&&e.test(a.url)&&c.test(a.url)){var h=null;return{send:function(c,d){c="";var e=(f.dataType||"").toLowerCase();h=new XDomainRequest;/^\d+$/.test(f.timeout)&&(h.timeout=f.timeout);
h.ontimeout=function(){d(500,"timeout")};h.onload=function(){var a="Content-Length: "+h.responseText.length+"\r\nContent-Type: "+h.contentType,c=200,f="success",g={text:h.responseText};try{if("html"===e||/text\/html/i.test(h.contentType))g.html=h.responseText;else if("json"===e||"text"!==e&&/\/json/i.test(h.contentType))try{g.json=b.parseJSON(h.responseText)}catch(w){c=500,f="parseerror"}else if("xml"===e||"text"!==e&&/\/xml/i.test(h.contentType)){var k=new ActiveXObject("Microsoft.XMLDOM");k.async=
!1;try{k.loadXML(h.responseText)}catch(w){k=void 0}if(!k||!k.documentElement||k.getElementsByTagName("parsererror").length)throw c=500,f="parseerror","Invalid XML: "+h.responseText;g.xml=k}}catch(w){throw w;}finally{d(c,f,g,a)}};h.onprogress=function(){};h.onerror=function(){d(500,"error",{text:h.responseText})};f.data&&(c="string"===b.type(f.data)?f.data:b.param(f.data));h.open(a.type,a.url);h.send(c)},abort:function(){h&&h.abort()}}}})}});
function LabeledInput(b){function e(){return m.find("."+f.settings.itemClass)}function d(a,c){f.settings.throwEventInsteadAddingItemToInput?($(document).trigger(f.settings.onSelectEventName,c.item.metadata),f.settings.eventNamespace&&$(document).trigger(f.settings.onSelectEventName+":"+f.settings.eventNamespace,c.item.metadata)):f.pushLabel(c.item.label,c.item.metadata);h.val("");return!1}function c(){h.prop("placeholder",e().length?"":f.settings.watermark);a();f.settings.onLabelsChangedHandler&&
$.each(l,function(a,c){c()})}function a(){f.settings.watermark&&!h.val()&&0==e().length?(h.removeAttr("width"),h.attr("size",h.attr("placeholder").length),h.css("max-width",m.width()-40+"px")):(h.removeAttr("size"),h.attr("width","100"))}var f=this,g,h,k,l=[],m;window[b]=f;f.initialize=function(){f.settings.onLabelsChangedHandler&&l.push(f.settings.onLabelsChangedHandler);g=f.settings.removeButtonTooltipFormat;m=$("#"+f.settings.containerId);m.on(f.settings.clickOrTouch,".ccl-labeled-input-remove",
function(a){$(a.target).parent().remove();c()});h=$("#"+f.settings.inputId);k=h.parent();h.autocomplete({open:function(a,c){$(".ui-autocomplete").width(m.width())},focus:function(a,c){a.preventDefault()},position:{collision:"none flip",of:m},source:f.settings.autocompleteCallback,select:d,delay:f.settings.autocomplete.delay,minLength:f.settings.autocomplete.minLength,messages:{noResults:"",results:function(){return""}},create:function(){f.settings.renderItem&&($(this).data("ui-autocomplete")._renderItem=
f.settings.renderItem)}});h.keyup(function(){a()});h.keydown(function(a){a.which!==CommonConstants.keyCodes.backspace||f.hasText()||(a=e(),0<a.length&&(a.last().remove(),c()))});h.blur(function(){h.val("");a()});h.focus(function(){a()});f.settings.autocomplete.autocompleteMenuCssClass&&h.data("ui-autocomplete").menu.activeMenu.addClass(f.settings.autocomplete.autocompleteMenuCssClass);k.append(h.data("ui-autocomplete").menu.activeMenu.detach());m.on(f.settings.clickOrTouch,function(a){h.is(":focus")||
(a.preventDefault(),h.focus())});a()};f.pushLabel=function(a,b){var d=$("<span></span>"),e=$("<span>"+CCL.CommonFunctions.htmlEncode(a)+"</span>"),h=$('<a href="#" class="ccl-labeled-input-remove">\u00d7</a>');h.prop("title",g.replace("{0}",a));d.data("meta",b);e.addClass(f.settings.textClass);d.addClass(f.settings.itemClass);d.append(e).append(h);d.insertBefore(k);c()};f.getLabelsMetadata=function(){return $.makeArray(e().map(function(a,c){return $(c).data("meta")}))};f.mapLabelsField=function(a){return f.getLabelsMetadata().map(function(c){return c[a]})};
f.clear=function(){e().remove();h.val("");c()};f.hasText=function(){return""!==h.val().trim()};f.getText=function(){return h.val()};f.addLabelsChangedHandler=function(a){f.settings.onLabelsChangedHandler&&l.push(a)};f.focus=function(){h.focus()}}
function LearningObjectivesSelector(b,e,d,c,a,f){window[b]=this;var g=this;g.readLearningObjectivesUrl=a.readLearningObjectivesUrl;g.selectedIds=c;g.selectableCategory=a.selectableCategory;g.selectableObjective=a.selectableObjective;g.selectableSubject=a.selectableSubject;g.cutOffLoStructure=a.cutOffLoStructure;g.terms=d;g.language=a.language;g.updateContainerOnSelect=a.updateContainerOnSelect;e?(g.folderSelector=e,g.baseGetRequestData=e.getRequestData,g.editable=!0):g.editable=!1;g.placeHolderOnEmpty=
a.placeHolderOnEmpty;g.courseId=a.courseId;g.countryCode=a.countryCode;g.showTooltip=a.showTooltip;g.firstLoad=!0;g.cache={};g.cssClasses=f;g.filtersData={};""!=a.filtersData&&(g.filtersData=a.filtersData);g.defaultFilter=a.defaultFilter;g.filtersddl=$(".js-filter-ddl");g.GetCurrentFilter=function(){return 0<g.filtersddl.length?g.filtersddl.find(":selected").val():g.defaultFilter};g.folderSelector&&(g.folderSelector.dialogContainer.addClass(g.cssClasses.learningObjectivesSelector),g.folderSelector.showFeedbackOnEmpty=
0==g.filtersddl.length);g.selectedContainer=$("#"+b).find("."+g.cssClasses.selectedContainer);g.emptyContainer=$("#"+b).find("."+g.cssClasses.emptyContainer);g.addLink=$("#"+b).find("."+g.cssClasses.addLink);if(g.editable)g.selectedContainer.on("click","."+g.cssClasses.removeLink,function(){$(g).trigger(a.clientEvents.removeItem,$(this));g.removeSelectedIds([$(this).data("loId")]);return!1});g.openDialog=function(){g.folderSelector&&g.folderSelector.openDialog(g.filtersData[g.GetCurrentFilter()])};
g.updateSelectedItemsContainer=function(){g.updateContainerOnSelect&&(g.selectedContainer.empty(),g.emptyContainer.empty(),g.listIsEmpty()?g.toggleEmptyContentFeedback(!0):(g.setSelectedIds(g.selectedIds,!0),g.loadData(g.selectedIds,function(a){var c=[];$.each(a,function(a,f){g.renderSelectedItemHtml(f.id,f.title,f.description,f.type,f.options);c.push(f.id)});0===c.length&&g.toggleEmptyContentFeedback(!0)})),$(g).trigger(a.clientEvents.itemContainerUpdated))};g.createTooltip=function(a,c){var f=$("<span></span>");
f.text(a);var b=new ToolTip(null,f);b.title=$("<div/>").text(a).html();b.description=c;b.settings={showPopupTimeout:300,hidePopupTimeout:300,cssClasses:{tooltipPopup:"ccl-tooltip-popup",linkToTooltip:"ccl-tooltip-link",arrowUp:"ccl-tooltip-arrow-up",arrowDown:"ccl-tooltip-arrow-down",arrowContainer:"ccl-tooltip-arrow-container",tooltipTitle:"ccl-tooltip-popup-title",tooltipDescription:"ccl-tooltip-popup-description"}};b.initialize();return f};g.renderSelectedItemHtml=function(a,c,f,b,d){c=$("<div></div>").addClass(g.cssClasses.selectedItem).append($("<span></span>").addClass(g.cssClasses.selectedItemIcon).addClass(b)).append(g.showTooltip?
g.createTooltip(c,f):$("<span></span>").text(c));g.editable&&(a=$("<a></a>").data("loId",a).addClass(g.cssClasses.removeLink).attr("data-loId",a).attr("title",g.terms.deleteTooltip).attr("href","#").text("\u00d7"),void 0!==d&&a.data("options",d),c.append(a));g.selectedContainer.append(c)};g.getSelectedItemsSelector=function(){return String.format(".{0}",g.cssClasses.selectedItem)};g.listIsEmpty=function(){return 0==g.selectedIds.length};g.toggleEmptyContentFeedback=function(a){g.emptyContainer.toggle(a).text(a?
g.placeHolderOnEmpty:"")};g.showSuccessFeedback=function(){g.folderSelector.showSuccessFeedback()};g.showErrorFeedback=function(){g.folderSelector.showErrorFeedback()};g.showProgressFeedback=function(){g.folderSelector.showProgressFeedback()};g.addSelectedIds=function(c){var f={};$.each(g.selectedIds,function(a,c){f[c]=c});$.each(c,function(a,c){f[c]=c});g.selectedIds=[];$.each(f,function(a){g.selectedIds.push(a)});$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.removeSelectedIds=
function(c){var f={};$.each(g.selectedIds,function(a,c){f[c]=c});$.each(c,function(a,c){delete f[c]});g.selectedIds=[];$.each(f,function(a){g.selectedIds.push(a)});$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.clearSelectedIds=function(){g.selectedIds=[];$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.setSelectedIds=function(a,c){g.selectedIds=a;g.toggleFolderSelectById(g.selectedIds,c)};g.toggleFolderSelectById=function(a,c){g.folderSelector&&
($.each(a,function(a,f){g.folderSelector.controls.grid.toggleSelectById(f,c)}),c&&g.folderSelector.toggleSelectButtons(!1))};g.loadData=function(c,f){var b=[],d={};$.each(c,function(a,c){void 0===g.cache[c]?b.push(c):d[c]=g.cache[c]});0==b.length?f(d):$.ajax({type:"GET",url:g.readLearningObjectivesUrl,data:{ids:b.join(",")},dataType:"json",xhrFields:{withCredentials:!0}}).done(function(a){$.each(a.Items,function(a,c){a={id:c.Id,title:c.Title,description:c.Description,type:c.Type};g.cache[c.Id]=a;
d[c.Id]=a});f(d)}).fail(function(){$(g).trigger(a.clientEvents.error)})};g.changeFilter=function(a){g.folderSelector.reinitialize(!0,g.filtersData[a])};if(e){var h=!1;e.getRequestData=function(a,c,f,b){a=g.baseGetRequestData(a,c,f,b);a.SelectableCategory=g.selectableCategory;a.SelectableLearningObjective=g.selectableObjective;a.SelectableSubject=g.selectableSubject;a.cutOffLoStructure=g.cutOffLoStructure;g.language&&(a.lan=g.language);return a};$(e).on(a.folderSelectorEvents.select,function(c,f){c=
h?[f.selectedId]:f.nodeIds;$(g).trigger(a.clientEvents.addItems,[c.filter(function(a){return 0>g.selectedIds.indexOf(a)})]);g.addSelectedIds(c)});if(a.restrictInsertContext)$(e).on(a.folderSelectorEvents.gridRender,function(a,c,f){if(h=f.virtualItemCount>f.folders.length)c.toggleSelectAll(!0),c.toggleEnableAll(!1)});else $(e).on(a.folderSelectorEvents.gridRender,function(a,c,f){$.each(g.selectedIds,function(a,f){c.toggleSelectById(f,!0)})});if(g.filtersddl)g.filtersddl.on("change",function(){g.changeFilter($(this).val())})}g.updateSelectedItemsContainer();
return g}
function ListCollapser(b,e,d,c,a){var f=this;f.showCount=e;f.showCountJquerySelector=e-1;f.hidden=!0;f.listHolder=b;f.listChangesEvents=d;f.showLinkText=c;f.hideLinkText=a;f.getList=function(){return f.listHolder.children("ul")};f.getLength=function(){return f.getList().children("li").length};f.restructure=function(){var c=f.getLength(),b=$("#showLink",f.listHolder),d=$("#hideLink",f.listHolder),e=Math.min(f.showCount,c);f.getList().children("li:lt("+e+")").show();f.showCount<c?(void 0==b[0]?(b=$("<a>").attr("href",
"javascript:void(0);").attr("id","showLink").css("display","none").insertAfter(f.getList()),b.click(function(){f.hidden=!1;f.getList().children("li").show();d.show();b.hide()})):b.insertAfter(f.getList()),void 0==d[0]?(d=$("<a>").html(a).attr("href","javascript:void(0);").attr("id","hideLink").css("display","none").insertAfter(f.getList()),d.click(function(){f.hidden=!0;f.getList().children("li:gt("+f.showCountJquerySelector+")").hide();d.hide();b.show().html(f.showLinkText+" ("+f.getLength()+")")})):
d.insertAfter(f.getList()),f.hidden?(f.getList().children("li:gt("+f.showCountJquerySelector+")").hide(),d.hide(),b.show().html(f.showLinkText+" ("+c+")")):(b.hide(),d.show())):(b.hide(),d.hide())};f.init=function(){f.restructure();if(f.listChangesEvents)f.listHolder.on(f.listChangesEvents,f.restructure)}}
function MetadataTranslationsList(b){window[b]=this;var e=this,d;e.firstLoad=function(){d=e.controls.table.find("tbody");var c=e.controls.languageDataHidden.val();e.settings.metadataLanguages=c?JSON.parse(c):[];e.controls.addLanguageLink.on("click",function(){e.addLanguageLinkClick()});e.controls.languageInput.on("change",function(){e.controls.languageIdHidden.val(e.controls.languageInput.val())});e.updateAddButton();$.each(e.metadataColumns,function(a,c){if(c.IsMultiLine){var f=e.getInputForMetadataColumn(c),
b=f.attr("rows")*f.attr("cols")*2;f.keypress(function(a){f.val().length>b&&a.preventDefault()});f.on("paste",function(){setTimeout(function(){f.val($.trim(f.val().replace(/[\n\r]+/g,"")));f.val(f.val().substring(0,b))},100)})}})};e.getInputForMetadataColumn=function(c){return $("#"+e.settings.modalDialogClientId+"_"+c.Name)};e.addLanguageLinkClick=function(){e.fillLanguageInfo(null)};e.editLanguageLinkClick=function(c,a){e.fillLanguageInfo(a)};e.dialogLoaded=function(){e.controls.languageInput.is(":visible")?
e.controls.languageInput.focus():e.getInputForMetadataColumn(e.metadataColumns[0]).focus()};e.saveLanguageClick=function(){e.clearValidators();var c={},a=!0,f=parseInt(e.controls.languageIdHidden.val());0>f&&(e.showValidationMessage(e.controls.languageInput,e.settings.requiredValidationMessage),a=!1);c[e.settings.metadataLanguageIdDataField]=f;$.each(e.metadataColumns,function(f,b){f=$.trim(e.getInputForMetadataColumn(b).val());e.validateMetadataColumn(b,f)||(a=!1);c[b.DataField]=f});if(!a)return!1;
var b=e.findMetadataLanguageById(f);b?$.each(e.metadataColumns,function(a,f){b[f.DataField]=c[f.DataField]}):e.settings.metadataLanguages.push(c);e.saveLanguagesToHidden();e.fillTableRow(c);e.updateTable();e.updateAddButton();return!0};e.getTableRow=function(c){c=d.find("tr:has(td:first input[value='"+c+"']:hidden)");0==c.length&&(c=$("<tr></tr>").appendTo(d));return c};e.fillTableRow=function(c){var a=e.cssClasses,f=c[e.settings.metadataLanguageIdDataField],b=e.getTableRow(f);b.empty().append($("<td></td>").addClass(a.TableColumnLanguage).append($("<input />").attr("type",
"hidden").val(f)).append($("<a></a>").attr("href","javascript:void(0);").text(e.getLanguageTitleById(f)).on("click",function(){e.editLanguageLinkClick(this,f)})));$.each(e.metadataColumns,function(a,f){b.append($("<td></td>").addClass(f.CssClass).text(c[f.DataField]))});b.append($("<td></td>").addClass(a.TableColumnDelete).append($("<a></a>").addClass("ccl-iconlink").addClass(a.TableColumnDeleteImage).attr("href","javascript:void(0);").attr("title",e.settings.deleteRowTooltip).on("click",function(){e.removeLanguageClick(this,
f)}).append($("<img />").attr("src",e.settings.deleteImageUrl).attr("alt",e.settings.deleteRowTooltip).addClass(a.tableColumnDeleteImage))))};e.validateMetadataColumn=function(c,a){var f=!0;c.IsRequired&&0==a.length&&(f=!1,e.showValidationMessage(e.getInputForMetadataColumn(c),e.settings.requiredValidationMessage));return f};e.removeLanguageClick=function(c,a){var f=e.settings.metadataLanguages;$.each(f,function(c,b){return b[e.settings.metadataLanguageIdDataField]==a?(f.splice(c,1),e.saveLanguagesToHidden(),
!1):!0});$(c).parent().parent().remove();e.updateTable();e.updateAddButton()};e.saveLanguagesToHidden=function(){e.controls.languageDataHidden.val(JSON.stringify(e.settings.metadataLanguages))};e.findMetadataLanguageById=function(c){var a=null;$.each(e.settings.metadataLanguages,function(f,b){return b[e.settings.metadataLanguageIdDataField]==c?(a=b,!1):!0});return a};e.getAvailableLanguagesData=function(){return $.grep(e.settings.languages,function(c){return null==e.findMetadataLanguageById(c.Key)})};
e.disableSelectedLanguages=function(){var c=e.controls.languageInput;c.find("option").remove();$.each(e.getAvailableLanguagesData(),function(a,f){c.append($("<option></option>").val(f.Key).text(f.Value))})};e.getLanguageTitleById=function(c){for(index in e.settings.languages)if(e.settings.languages[index].Key==c)return e.settings.languages[index].Value;return""};e.showValidationMessage=function(c,a){$("<div></div>").text(a).addClass(e.cssClasses.ErrorMessage).appendTo(c.parent())};e.clearValidators=
function(){e.controls.modalDialogContainer.find("div."+e.cssClasses.ErrorMessage).remove()};e.fillLanguageInfo=function(c){var a=null;0<=c&&(a=e.findMetadataLanguageById(c));var f=!!a;e.clearValidators();window[e.settings.modalDialogName].setNewTitle(f?e.getLanguageTitleById(c):e.settings.addLanguageDialogTitle);e.controls.languageIdHidden.val(f?a[e.settings.metadataLanguageIdDataField]:-1);e.controls.languageInput.parent().toggle(!f);$.each(e.metadataColumns,function(c,b){e.getInputForMetadataColumn(b).val(f?
a[b.DataField]:"")});f||e.disableSelectedLanguages();window[e.settings.modalDialogName].open()};e.updateTable=function(){var c=e.cssClasses.TableRowAlternate;d.find("tr:even").removeClass(c);d.find("tr:odd").addClass(c);d.parent().toggle(0<d.find("tr:has(td)").length)};e.updateAddButton=function(){e.controls.addLanguageLink.toggle(e.settings.metadataLanguages.length<e.settings.languages.length-1)};return e}
function ObjectInstanceAdministrator(){return{cleanupObject:function(b,e,d){var c=Object.keys(d);$.each(c,function(a,c){void 0===e[c]?delete b[c]:e[c]!=d[c]&&(b[c]=e[c])})},cloneObject:function(b){return Object.create(b)}}}
function ObjectPropertiesInspector(){return{getObjectProperties:function(b){var e=Object.keys(b),d={};$.each(e,function(c,a){d[a]=b[a]});return d},isValuePropertyOfObject:function(b,e){var d=Object.keys(e),c=!1;$.each(d,function(a,f){e[f]===b&&(c=!0)});return c},getPropertiesDelta:function(b,e){var d=Object.keys(e),c=[];$.each(d,function(a,f){b[f]!==e[f]&&c.push({keyValue:f,beforeValue:b[f],afterValue:e[f]})});return c}}}
function ObjectStateValidators(){var b={},e={isUndefinedSafe:function(b,c){return b===c}};b.isNull=function(b){return null===b};b.isUndefined=function(b){return e.isUndefinedSafe(b)};b.isNullOrUndefined=function(d){return b.isUndefined(d)||b.isNull(d)};b.isFunction=function(b){return"function"===typeof b};b.isArray=function(b){return Array.isArray(b)};b.isString=function(b){return"string"===typeof b};b.isNumber=function(b){return"number"===typeof b&&!isNaN(b)};b.isBoolean=function(b){return"boolean"===
typeof b};b.isWhitespace=function(d){return b.isString(d)&&/^\s*$/.test(d)};b.isNullOrWhitespace=function(d){return b.isNullOrUndefined(d)||b.isWhitespace(d)};b.isFileError=function(b){return"undefined"!==typeof FileError&&b instanceof FileError?!0:!1};b.isDomError=function(b){return"undefined"!==typeof DOMError&&b instanceof DOMError?!0:!1};return b}var objectState=ObjectStateValidators();
function OkOrCancel(b){window[b]=this;var e=this,d,c,a,f;e.initialize=function(){d=e.settings;c=e.scripts;a=e.controls;f=a.okButton.val();d.attachInProgressEventManually||a.okButton.click(function(){var a=$(this).parents("form:first");if(a.length&&"undefined"!==typeof a[0].checkValidity?a[0].checkValidity():1)e.toggleInProgressState(!0,d.toggleCancel),CommonFunctions.safeExecuteFunction(c.okButtonClick)})};e.toggleInProgressState=function(c,b){c?(a.okButton.addClass(e.settings.inProgressCssClass),
a.okButton.attr("title",e.settings.inProgressTitle),a.okButton.attr("value","")):(a.okButton.removeAttr("title"),a.okButton.removeClass(e.settings.inProgressCssClass),a.okButton.attr("value",f));a.okButton.prop("disabled",c);b&&a.cancelButton.toggleHyperlink(!c)};return e}
function Pager(b){window[b]=this;var e=this,d,c;e.totalCount=0;e.pageSize=0;e.pageNumber=0;e.initialize=function(){d=e.settings.cssClasses;c=e.settings.terms};e.goToPage=function(a){e.customScripts.goToPage&&e.customScripts.goToPage({pageNumber:a});e.events&&$(document).trigger(e.events.onPageNumberChanged,[b,a])};e.changePageSize=function(a){e.customScripts.changePageSize&&e.customScripts.changePageSize({pageSize:a});e.events&&$(document).trigger(e.events.onPageSizeChanged,[b,a])};e.hide=function(){e.controls.pagerContainer.empty()};
e.getMinAvailablePageSize=function(){return e.settings.pageSizes&&0<e.settings.pageSizes.length?e.settings.pageSizes[0]:0};e.render=function(){var a=e.controls.pagerContainer,f=$("<ul></ul>").attr("class",d.pager),g=Math.ceil(e.totalCount/e.pageSize);a.empty();a.append(f);if(e.mode&e.settings.pagerMode.nextPrev&&0<g){if(1<e.pageNumber){var h=$("<li></li>").attr("class",d.previousNext);var k=e.pageNumber-1;var l=$("<a></a>").attr("href","#").attr("title",c.previous).click(function(){e.goToPage(k);
return!1}).append($("<span></span>").html("&laquo;").attr("class",d.prevArrow));h.append(l)}else h=$("<li></li>").attr("class",d.text).append($("<span></span>").html("&laquo;").attr("class",d.prevArrowDisabled));if(e.pageNumber<g){var m=e.pageNumber+1;l=$("<li></li>").attr("class",d.previousNext).append($("<a></a>").attr("href","#").attr("title",c.next).click(function(){e.goToPage(m);return!1}).append($("<span></span>").html("&raquo;").attr("class",d.nextArrow)))}else l=$("<li></li>").attr("class",
d.text).append($("<span></span>").html("&raquo;").attr("class",d.nextArrowDisabled));f.append(h);e.mode&e.settings.pagerMode.nextPrevBeforeNumericPages&&f.append(l)}if(e.mode&e.settings.pagerMode.numericPages)for(e.mode&e.settings.pagerMode.nextPrevBeforeNumericPages&&f.append($("<li>|</li>").attr("class",d.text)),h=1;h<=g;h++)if(e.pageNumber==h){var n=!1;f.append($("<li></li>").attr("class",d.selectedItem).append($("<span></span>").text(h)))}else e.pageNumber==h||1==h||h==g||Math.abs(e.pageNumber-
h)<=e.settings.pageLinksNearSelectedCount?f.append($("<li></li>").append($("<a>"+h+"</a>").attr("href","#").click({actualPageNumber:h},function(a){e.goToPage(a.data.actualPageNumber);return!1}))):n||(n=!0,f.append($("<li></li>").attr("class",d.text).append("<span>...</span>")));0==(e.mode&e.settings.pagerMode.nextPrevBeforeNumericPages)&&f.append(l);if(e.mode&e.settings.pagerMode.pageSize||e.mode&e.settings.pagerMode.pageSizeDropdown||e.mode&e.settings.pagerMode.pageSizeStaticLabel||e.mode&e.settings.pagerMode.pageInfo){f=
$("<span></span>").attr("class",d.pageSizeChooser);a.append(f);if(e.mode&e.settings.pagerMode.pageInfo){h=e.pageSize*e.pageNumber;h>e.totalCount&&(h=e.totalCount);a=1+e.pageSize*(e.pageNumber-1);if(0==e.pageNumber||0==e.totalCount)a=0;f.append($("<span></span>").text(c.pageInfoLabelTemplate.replace("{0}",a).replace("{1}",h).replace("{2}",e.totalCount)))}a=e.settings.pageSizes;if(e.mode&e.settings.pagerMode.pageSize)for(g=$("<ul></ul>"),f.append(g),g.append($("<li></li>").attr("class",d.pageSizeChooserLabel).text(c.pageSizeChooserLabel)),
h=0;h<a.length;h++)n=a[h]==e.pageSize?$("<li></li>").attr("class",d.selectedItem).text(a[h]):$("<li></li>").append($("<a></a>").attr("href","javascript:"+b+".changePageSize("+a[h]+");").text(a[h])),g.append(n);if(e.mode&e.settings.pagerMode.pageSizeDropdown){h=$("<select></select>");$(h).change(function(){window[b].changePageSize(this.options[this.selectedIndex].value)});f.append(h);for(g=0;g<a.length;g++)n=$("<option></option>").attr("value",a[g]).text(c.pageSizeItemPrefix+" "+a[g]),h.append(n);
h.find("option").each(function(){var a=$(this);if(a.val()==e.pageSize)return a.prop("selected",!0),!1})}e.mode&e.settings.pagerMode.pageSizeStaticLabel&&f.append($("<span/>").text(c.pageSizeItemPrefix+" "+e.pageSize).addClass(d.pageSizeStaticLabel))}};e.createIn=function(a){var c=$("<div></div>").prop("className",d.main);a.append(c);e.controls.pagerContainer=c;e.render()};return e}
(function e$jscomp$0(b,e,d){function a(g,k){if(!e[g]){if(!b[g]){var h="function"==typeof require&&require;if(!k&&h)return h(g,!0);if(f)return f(g,!0);k=Error("Cannot find module '"+g+"'");throw k.code="MODULE_NOT_FOUND",k;}k=e[g]={exports:{}};b[g][0].call(k.exports,function(f){var d=b[g][1][f];return a(d?d:f)},k,k.exports,e$jscomp$0,b,e,d)}return e[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)a(d[g]);return a})({1:[function(b,e,d){function c(c){c.fn.perfectScrollbar=
function(c){return this.each(function(){"object"===typeof c||"undefined"===typeof c?f.get(this)||a.initialize(this,c):"update"===c?a.update(this):"destroy"===c&&a.destroy(this)})}}var a=b("../main"),f=b("../plugin/instances");"function"===typeof define&&define.amd?define(["jquery"],c):(b=window.jQuery?window.jQuery:window.$,"undefined"!==typeof b&&c(b));e.exports=c},{"../main":7,"../plugin/instances":18}],2:[function(b,e,d){d.add=function(c,a){if(c.classList)c.classList.add(a);else{var f=c.className.split(" ");
0>f.indexOf(a)&&f.push(a);c.className=f.join(" ")}};d.remove=function(c,a){if(c.classList)c.classList.remove(a);else{var f=c.className.split(" ");a=f.indexOf(a);0<=a&&f.splice(a,1);c.className=f.join(" ")}};d.list=function(c){return c.classList?Array.prototype.slice.apply(c.classList):c.className.split(" ")}},{}],3:[function(b,e,d){var c={e:function(a,c){a=document.createElement(a);a.className=c;return a},appendTo:function(a,c){c.appendChild(a);return a},css:function(a,c,b){if("object"===typeof c){for(var f in c)b=
c[f],"number"===typeof b&&(b=b.toString()+"px"),a.style[f]=b;return a}if("undefined"===typeof b)return window.getComputedStyle(a)[c];f=b;"number"===typeof f&&(f=f.toString()+"px");a.style[c]=f;return a},matches:function(a,c){if("undefined"!==typeof a.matches)return a.matches(c);if("undefined"!==typeof a.matchesSelector)return a.matchesSelector(c);if("undefined"!==typeof a.webkitMatchesSelector)return a.webkitMatchesSelector(c);if("undefined"!==typeof a.mozMatchesSelector)return a.mozMatchesSelector(c);
if("undefined"!==typeof a.msMatchesSelector)return a.msMatchesSelector(c)},remove:function(a){"undefined"!==typeof a.remove?a.remove():a.parentNode&&a.parentNode.removeChild(a)},queryChildren:function(a,b){return Array.prototype.filter.call(a.childNodes,function(a){return c.matches(a,b)})}};e.exports=c},{}],4:[function(b,e,d){var c=function(a){this.element=a;this.events={}};c.prototype.bind=function(a,c){"undefined"===typeof this.events[a]&&(this.events[a]=[]);this.events[a].push(c);this.element.addEventListener(a,
c,!1)};c.prototype.unbind=function(a,c){var b="undefined"!==typeof c;this.events[a]=this.events[a].filter(function(f){if(b&&f!==c)return!0;this.element.removeEventListener(a,f,!1);return!1},this)};c.prototype.unbindAll=function(){for(var a in this.events)this.unbind(a)};b=function(){this.eventElements=[]};b.prototype.eventElement=function(a){var b=this.eventElements.filter(function(c){return c.element===a})[0];"undefined"===typeof b&&(b=new c(a),this.eventElements.push(b));return b};b.prototype.bind=
function(a,c,b){this.eventElement(a).bind(c,b)};b.prototype.unbind=function(a,c,b){this.eventElement(a).unbind(c,b)};b.prototype.unbindAll=function(){for(var a=0;a<this.eventElements.length;a++)this.eventElements[a].unbindAll()};b.prototype.once=function(a,c,b){var f=this.eventElement(a),d=function(a){f.unbind(c,d);b(a)};f.bind(c,d)};e.exports=b},{}],5:[function(b,e,d){e.exports=function(){function c(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return c()+
c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c()}}()},{}],6:[function(b,e,d){var c=b("./class"),a=b("./dom"),f=d.toInt=function(a){return parseInt(a,10)||0},g=d.clone=function(a){if(null===a)return null;if(a.constructor===Array)return a.map(g);if("object"===typeof a){var c={},b;for(b in a)c[b]=g(a[b]);return c}return a};d.extend=function(a,c){a=g(a);for(var b in c)a[b]=g(c[b]);return a};d.isEditable=function(c){return a.matches(c,"input,[contenteditable]")||a.matches(c,"select,[contenteditable]")||a.matches(c,
"textarea,[contenteditable]")||a.matches(c,"button,[contenteditable]")};d.removePsClasses=function(a){for(var b=c.list(a),f=0;f<b.length;f++){var d=b[f];0===d.indexOf("ps-")&&c.remove(a,d)}};d.outerWidth=function(c){return f(a.css(c,"width"))+f(a.css(c,"paddingLeft"))+f(a.css(c,"paddingRight"))+f(a.css(c,"borderLeftWidth"))+f(a.css(c,"borderRightWidth"))};d.startScrolling=function(a,b){c.add(a,"ps-in-scrolling");"undefined"!==typeof b?c.add(a,"ps-"+b):(c.add(a,"ps-x"),c.add(a,"ps-y"))};d.stopScrolling=
function(a,b){c.remove(a,"ps-in-scrolling");"undefined"!==typeof b?c.remove(a,"ps-"+b):(c.remove(a,"ps-x"),c.remove(a,"ps-y"))};d.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(b,e,d){d=b("./plugin/destroy");var c=b("./plugin/initialize");b=b("./plugin/update");e.exports={initialize:c,
update:b,destroy:d}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(b,e,d){e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(b,e,d){var c=b("../lib/helper"),a=b("../lib/dom"),
f=b("./instances");e.exports=function(b){var d=f.get(b);d&&(d.event.unbindAll(),a.remove(d.scrollbarX),a.remove(d.scrollbarY),a.remove(d.scrollbarXRail),a.remove(d.scrollbarYRail),c.removePsClasses(b),f.remove(b))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(b,e,d){function c(c,b){var f=function(a){a.stopPropagation()};b.settings.stopPropagationOnClick&&b.event.bind(b.scrollbarY,"click",f);b.event.bind(b.scrollbarYRail,"click",function(f){var d=a.toInt(b.scrollbarYHeight/2);
d=b.railYRatio*(f.pageY-window.pageYOffset-b.scrollbarYRail.getBoundingClientRect().top-d)/(b.railYRatio*(b.railYHeight-b.scrollbarYHeight));0>d?d=0:1<d&&(d=1);h(c,"top",(b.contentHeight-b.containerHeight)*d);g(c);f.stopPropagation()});b.settings.stopPropagationOnClick&&b.event.bind(b.scrollbarX,"click",f);b.event.bind(b.scrollbarXRail,"click",function(f){var d=a.toInt(b.scrollbarXWidth/2);d=b.railXRatio*(f.pageX-window.pageXOffset-b.scrollbarXRail.getBoundingClientRect().left-d)/(b.railXRatio*(b.railXWidth-
b.scrollbarXWidth));0>d?d=0:1<d&&(d=1);h(c,"left",(b.contentWidth-b.containerWidth)*d-b.negativeScrollAdjustment);g(c);f.stopPropagation()})}var a=b("../../lib/helper"),f=b("../instances"),g=b("../update-geometry"),h=b("../update-scroll");e.exports=function(a){var b=f.get(a);c(a,b)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(b,e,d){function c(a,c){var b=null,d=null,e=function(e){var g=b+(e.pageX-d)*c.railXRatio,h=Math.max(0,c.scrollbarXRail.getBoundingClientRect().left)+
c.railXRatio*(c.railXWidth-c.scrollbarXWidth);c.scrollbarXLeft=0>g?0:g>h?h:g;g=f.toInt(c.scrollbarXLeft*(c.contentWidth-c.containerWidth)/(c.containerWidth-c.railXRatio*c.scrollbarXWidth))-c.negativeScrollAdjustment;l(a,"left",g);k(a);e.stopPropagation();e.preventDefault()},h=function(){f.stopScrolling(a,"x");c.event.unbind(c.ownerDocument,"mousemove",e)};c.event.bind(c.scrollbarX,"mousedown",function(k){d=k.pageX;b=f.toInt(g.css(c.scrollbarX,"left"))*c.railXRatio;f.startScrolling(a,"x");c.event.bind(c.ownerDocument,
"mousemove",e);c.event.once(c.ownerDocument,"mouseup",h);k.stopPropagation();k.preventDefault()})}function a(a,c){var b=null,d=null,e=function(e){var g=b+(e.pageY-d)*c.railYRatio,h=Math.max(0,c.scrollbarYRail.getBoundingClientRect().top)+c.railYRatio*(c.railYHeight-c.scrollbarYHeight);c.scrollbarYTop=0>g?0:g>h?h:g;g=f.toInt(c.scrollbarYTop*(c.contentHeight-c.containerHeight)/(c.containerHeight-c.railYRatio*c.scrollbarYHeight));l(a,"top",g);k(a);e.stopPropagation();e.preventDefault()},h=function(){f.stopScrolling(a,
"y");c.event.unbind(c.ownerDocument,"mousemove",e)};c.event.bind(c.scrollbarY,"mousedown",function(k){d=k.pageY;b=f.toInt(g.css(c.scrollbarY,"top"))*c.railYRatio;f.startScrolling(a,"y");c.event.bind(c.ownerDocument,"mousemove",e);c.event.once(c.ownerDocument,"mouseup",h);k.stopPropagation();k.preventDefault()})}var f=b("../../lib/helper"),g=b("../../lib/dom"),h=b("../instances"),k=b("../update-geometry"),l=b("../update-scroll");e.exports=function(b){var f=h.get(b);c(b,f);a(b,f)}},{"../../lib/dom":3,
"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(b,e,d){function c(c,b){function d(a,f){var d=c.scrollTop;if(0===a){if(!b.scrollbarYActive)return!1;if(0===d&&0<f||d>=b.contentHeight-b.containerHeight&&0>f)return!b.settings.wheelPropagation}d=c.scrollLeft;if(0===f){if(!b.scrollbarXActive)return!1;if(0===d&&0>a||d>=b.contentWidth-b.containerWidth&&0<a)return!b.settings.wheelPropagation}return!0}var e=!1;b.event.bind(c,"mouseenter",function(){e=!0});
b.event.bind(c,"mouseleave",function(){e=!1});var g=!1;b.event.bind(b.ownerDocument,"keydown",function(m){if(!m.isDefaultPrevented||!m.isDefaultPrevented()){var l=f.matches(b.scrollbarX,":focus")||f.matches(b.scrollbarY,":focus");if(e||l){if(l=document.activeElement?document.activeElement:b.ownerDocument.activeElement){if("IFRAME"===l.tagName)l=l.contentDocument.activeElement;else for(;l.shadowRoot;)l=l.shadowRoot.activeElement;if(a.isEditable(l))return}var n=l=0;switch(m.which){case 37:l=-30;break;
case 38:n=30;break;case 39:l=30;break;case 40:n=-30;break;case 33:n=90;break;case 32:n=m.shiftKey?90:-90;break;case 34:n=-90;break;case 35:n=m.ctrlKey?-b.contentHeight:-b.containerHeight;break;case 36:n=m.ctrlKey?c.scrollTop:b.containerHeight;break;default:return}k(c,"top",c.scrollTop-n);k(c,"left",c.scrollLeft+l);h(c);(g=d(l,n))&&m.preventDefault()}}})}var a=b("../../lib/helper"),f=b("../../lib/dom"),g=b("../instances"),h=b("../update-geometry"),k=b("../update-scroll");e.exports=function(a){var b=
g.get(a);c(a,b)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(b,e,d){function c(a,c){function b(b,f){var d=a.scrollTop;if(0===b){if(!c.scrollbarYActive)return!1;if(0===d&&0<f||d>=c.contentHeight-c.containerHeight&&0>f)return!c.settings.wheelPropagation}d=a.scrollLeft;if(0===f){if(!c.scrollbarXActive)return!1;if(0===d&&0>b||d>=c.contentWidth-c.containerWidth&&0<b)return!c.settings.wheelPropagation}return!0}function d(c,b){var f=
a.querySelector("textarea:hover, .ps-child:hover");if(f){if("TEXTAREA"!==f.tagName&&!window.getComputedStyle(f).overflow.match(/(scroll|auto)/))return!1;var d=f.scrollHeight-f.clientHeight;if(0<d&&!(0===f.scrollTop&&0<b||f.scrollTop===d&&0>b))return!0;b=f.scrollLeft-f.clientWidth;if(0<b&&!(0===f.scrollLeft&&0>c||f.scrollLeft===b&&0<c))return!0}return!1}function e(e){var k=e.deltaX;var m=-1*e.deltaY;if("undefined"===typeof k||"undefined"===typeof m)k=-1*e.wheelDeltaX/6,m=e.wheelDeltaY/6;e.deltaMode&&
1===e.deltaMode&&(k*=10,m*=10);k!==k&&m!==m&&(k=0,m=e.wheelDelta);m=[k,m];k=m[0];m=m[1];!d(k,m)&&(h=!1,c.settings.useBothWheelAxes?c.scrollbarYActive&&!c.scrollbarXActive?(m?g(a,"top",a.scrollTop-m*c.settings.wheelSpeed):g(a,"top",a.scrollTop+k*c.settings.wheelSpeed),h=!0):c.scrollbarXActive&&!c.scrollbarYActive&&(k?g(a,"left",a.scrollLeft+k*c.settings.wheelSpeed):g(a,"left",a.scrollLeft-m*c.settings.wheelSpeed),h=!0):(g(a,"top",a.scrollTop-m*c.settings.wheelSpeed),g(a,"left",a.scrollLeft+k*c.settings.wheelSpeed)),
f(a),h=h||b(k,m))&&(e.stopPropagation(),e.preventDefault())}var h=!1;"undefined"!==typeof window.onwheel?c.event.bind(a,"wheel",e):"undefined"!==typeof window.onmousewheel&&c.event.bind(a,"mousewheel",e)}var a=b("../instances"),f=b("../update-geometry"),g=b("../update-scroll");e.exports=function(b){var f=a.get(b);c(b,f)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(b,e,d){function c(a,c){c.event.bind(a,"scroll",function(){f(a)})}var a=b("../instances"),f=b("../update-geometry");
e.exports=function(b){var f=a.get(b);c(b,f)}},{"../instances":18,"../update-geometry":19}],15:[function(b,e,d){function c(c,b){function d(){var a=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===a.toString().length?null:a.getRangeAt(0).commonAncestorContainer}function e(){l||(l=setInterval(function(){f.get(c)?(h(c,"top",c.scrollTop+v.top),h(c,"left",c.scrollLeft+v.left),g(c)):clearInterval(l)},50))}function k(){l&&(clearInterval(l),l=null);a.stopScrolling(c)}
var l=null,v={top:0,left:0},u=!1;b.event.bind(b.ownerDocument,"selectionchange",function(){c.contains(d())?u=!0:(u=!1,k())});b.event.bind(window,"mouseup",function(){u&&(u=!1,k())});b.event.bind(window,"mousemove",function(b){if(u){var f=b.pageX;b=b.pageY;var d=c.offsetLeft+c.offsetWidth,g=c.offsetTop,h=c.offsetTop+c.offsetHeight;f<c.offsetLeft+3?(v.left=-5,a.startScrolling(c,"x")):f>d-3?(v.left=5,a.startScrolling(c,"x")):v.left=0;b<g+3?(v.top=5>g+3-b?-5:-20,a.startScrolling(c,"y")):b>h-3?(v.top=
5>b-h+3?5:20,a.startScrolling(c,"y")):v.top=0;0===v.top&&0===v.left?k():e()}})}var a=b("../../lib/helper"),f=b("../instances"),g=b("../update-geometry"),h=b("../update-scroll");e.exports=function(a){var b=f.get(a);c(a,b)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(b,e,d){function c(a,c,b,d){var e;function k(c,b){h(a,"top",a.scrollTop-b);h(a,"left",a.scrollLeft-c);g(a)}function m(){D=!0}function l(){D=!1}function n(a){return a.targetTouches&&
1===a.targetTouches.length||a.pointerType&&"mouse"!==a.pointerType&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE?!0:!1}function r(a){if(n(a)){F=!0;var c=a.targetTouches?a.targetTouches[0]:a;C.pageX=c.pageX;C.pageY=c.pageY;z=(new Date).getTime();null!==G&&clearInterval(G);a.stopPropagation()}}function t(b){!F&&c.settings.swipePropagation&&r(b);if(!D&&F&&n(b)){var f=b.targetTouches?b.targetTouches[0]:b,d={pageX:f.pageX,pageY:f.pageY};f=d.pageX-C.pageX;var g=d.pageY-C.pageY;k(f,g);C=d;d=(new Date).getTime();
var h=d-z;0<h&&(e=f/h,E=g/h,z=d);a:{d=a.scrollTop;h=a.scrollLeft;var m=Math.abs(f),l=Math.abs(g);if(l>m){if(0>g&&d===c.contentHeight-c.containerHeight||0<g&&0===d){f=!c.settings.swipePropagation;break a}}else if(m>l&&(0>f&&h===c.contentWidth-c.containerWidth||0<f&&0===h)){f=!c.settings.swipePropagation;break a}f=!0}f&&(b.stopPropagation(),b.preventDefault())}}function y(){!D&&F&&(F=!1,clearInterval(G),G=setInterval(function(){f.get(a)?.01>Math.abs(e)&&.01>Math.abs(E)?clearInterval(G):(k(30*e,30*E),
e*=.8,E*=.8):clearInterval(G)},10))}var C={},z=0;var E=e=void 0;var G=null,D=!1,F=!1;b&&(c.event.bind(window,"touchstart",m),c.event.bind(window,"touchend",l),c.event.bind(a,"touchstart",r),c.event.bind(a,"touchmove",t),c.event.bind(a,"touchend",y));d&&(window.PointerEvent?(c.event.bind(window,"pointerdown",m),c.event.bind(window,"pointerup",l),c.event.bind(a,"pointerdown",r),c.event.bind(a,"pointermove",t),c.event.bind(a,"pointerup",y)):window.MSPointerEvent&&(c.event.bind(window,"MSPointerDown",
m),c.event.bind(window,"MSPointerUp",l),c.event.bind(a,"MSPointerDown",r),c.event.bind(a,"MSPointerMove",t),c.event.bind(a,"MSPointerUp",y)))}var a=b("../../lib/helper"),f=b("../instances"),g=b("../update-geometry"),h=b("../update-scroll");e.exports=function(b){if(a.env.supportsTouch||a.env.supportsIePointer){var d=f.get(b);c(b,d,a.env.supportsTouch,a.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(b,e,d){var c=b("../lib/helper"),
a=b("../lib/class"),f=b("./instances"),g=b("./update-geometry"),h={"click-rail":b("./handler/click-rail"),"drag-scrollbar":b("./handler/drag-scrollbar"),keyboard:b("./handler/keyboard"),wheel:b("./handler/mouse-wheel"),touch:b("./handler/touch"),selection:b("./handler/selection")},k=b("./handler/native-scroll");e.exports=function(b,d){d="object"===typeof d?d:{};a.add(b,"ps-container");var e=f.add(b);e.settings=c.extend(e.settings,d);a.add(b,"ps-theme-"+e.settings.theme);e.settings.handlers.forEach(function(a){h[a](b)});
k(b);g(b)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(b,e,d){function c(c){function b(){f.add(c,"ps-focus")}function d(){f.remove(c,"ps-focus")}this.settings=a.clone(g);this.contentHeight=this.contentWidth=this.containerHeight=this.containerWidth=null;this.isRtl="rtl"===
h.css(c,"direction");this.negativeScrollAdjustment=(this.isNegativeScroll=function(){var a=c.scrollLeft;c.scrollLeft=-1;var b=0>c.scrollLeft;c.scrollLeft=a;return b}())?c.scrollWidth-c.clientWidth:0;this.event=new k;this.ownerDocument=c.ownerDocument||document;this.scrollbarXRail=h.appendTo(h.e("div","ps-scrollbar-x-rail"),c);this.scrollbarX=h.appendTo(h.e("div","ps-scrollbar-x"),this.scrollbarXRail);this.scrollbarX.setAttribute("tabindex",0);this.event.bind(this.scrollbarX,"focus",b);this.event.bind(this.scrollbarX,
"blur",d);this.scrollbarXLeft=this.scrollbarXWidth=this.scrollbarXActive=null;this.scrollbarXBottom=a.toInt(h.css(this.scrollbarXRail,"bottom"));this.scrollbarXTop=(this.isScrollbarXUsingBottom=this.scrollbarXBottom===this.scrollbarXBottom)?null:a.toInt(h.css(this.scrollbarXRail,"top"));this.railBorderXWidth=a.toInt(h.css(this.scrollbarXRail,"borderLeftWidth"))+a.toInt(h.css(this.scrollbarXRail,"borderRightWidth"));h.css(this.scrollbarXRail,"display","block");this.railXMarginWidth=a.toInt(h.css(this.scrollbarXRail,
"marginLeft"))+a.toInt(h.css(this.scrollbarXRail,"marginRight"));h.css(this.scrollbarXRail,"display","");this.railXRatio=this.railXWidth=null;this.scrollbarYRail=h.appendTo(h.e("div","ps-scrollbar-y-rail"),c);this.scrollbarY=h.appendTo(h.e("div","ps-scrollbar-y"),this.scrollbarYRail);this.scrollbarY.setAttribute("tabindex",0);this.event.bind(this.scrollbarY,"focus",b);this.event.bind(this.scrollbarY,"blur",d);this.scrollbarYTop=this.scrollbarYHeight=this.scrollbarYActive=null;this.scrollbarYRight=
a.toInt(h.css(this.scrollbarYRail,"right"));this.scrollbarYLeft=(this.isScrollbarYUsingRight=this.scrollbarYRight===this.scrollbarYRight)?null:a.toInt(h.css(this.scrollbarYRail,"left"));this.scrollbarYOuterWidth=this.isRtl?a.outerWidth(this.scrollbarY):null;this.railBorderYWidth=a.toInt(h.css(this.scrollbarYRail,"borderTopWidth"))+a.toInt(h.css(this.scrollbarYRail,"borderBottomWidth"));h.css(this.scrollbarYRail,"display","block");this.railYMarginHeight=a.toInt(h.css(this.scrollbarYRail,"marginTop"))+
a.toInt(h.css(this.scrollbarYRail,"marginBottom"));h.css(this.scrollbarYRail,"display","");this.railYRatio=this.railYHeight=null}var a=b("../lib/helper"),f=b("../lib/class"),g=b("./default-setting"),h=b("../lib/dom"),k=b("../lib/event-manager"),l=b("../lib/guid"),m={};d.add=function(a){var b=l();a.setAttribute("data-ps-id",b);m[b]=new c(a);return m[b]};d.remove=function(a){delete m[a.getAttribute("data-ps-id")];a.removeAttribute("data-ps-id")};d.get=function(a){return m[a.getAttribute("data-ps-id")]}},
{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(b,e,d){function c(a,c){a.settings.minScrollbarLength&&(c=Math.max(c,a.settings.minScrollbarLength));a.settings.maxScrollbarLength&&(c=Math.min(c,a.settings.maxScrollbarLength));return c}function a(a,c){var b={width:c.railXWidth};b.left=c.isRtl?c.negativeScrollAdjustment+a.scrollLeft+c.containerWidth-c.contentWidth:a.scrollLeft;c.isScrollbarXUsingBottom?b.bottom=c.scrollbarXBottom-
a.scrollTop:b.top=c.scrollbarXTop+a.scrollTop;h.css(c.scrollbarXRail,b);b={top:a.scrollTop,height:c.railYHeight};c.isScrollbarYUsingRight?b.right=c.isRtl?c.contentWidth-(c.negativeScrollAdjustment+a.scrollLeft)-c.scrollbarYRight-c.scrollbarYOuterWidth:c.scrollbarYRight-a.scrollLeft:b.left=c.isRtl?c.negativeScrollAdjustment+a.scrollLeft+2*c.containerWidth-c.contentWidth-c.scrollbarYLeft-c.scrollbarYOuterWidth:c.scrollbarYLeft+a.scrollLeft;h.css(c.scrollbarYRail,b);h.css(c.scrollbarX,{left:c.scrollbarXLeft,
width:c.scrollbarXWidth-c.railBorderXWidth});h.css(c.scrollbarY,{top:c.scrollbarYTop,height:c.scrollbarYHeight-c.railBorderYWidth})}var f=b("../lib/helper"),g=b("../lib/class"),h=b("../lib/dom"),k=b("./instances"),l=b("./update-scroll");e.exports=function(b){var d=k.get(b);d.containerWidth=b.clientWidth;d.containerHeight=b.clientHeight;d.contentWidth=b.scrollWidth;d.contentHeight=b.scrollHeight;if(!b.contains(d.scrollbarXRail)){var e=h.queryChildren(b,".ps-scrollbar-x-rail");0<e.length&&e.forEach(function(a){h.remove(a)});
h.appendTo(d.scrollbarXRail,b)}b.contains(d.scrollbarYRail)||(e=h.queryChildren(b,".ps-scrollbar-y-rail"),0<e.length&&e.forEach(function(a){h.remove(a)}),h.appendTo(d.scrollbarYRail,b));!d.settings.suppressScrollX&&d.containerWidth+d.settings.scrollXMarginOffset<d.contentWidth?(d.scrollbarXActive=!0,d.railXWidth=d.containerWidth-d.railXMarginWidth,d.railXRatio=d.containerWidth/d.railXWidth,d.scrollbarXWidth=c(d,f.toInt(d.railXWidth*d.containerWidth/d.contentWidth)),d.scrollbarXLeft=f.toInt((d.negativeScrollAdjustment+
b.scrollLeft)*(d.railXWidth-d.scrollbarXWidth)/(d.contentWidth-d.containerWidth))):d.scrollbarXActive=!1;!d.settings.suppressScrollY&&d.containerHeight+d.settings.scrollYMarginOffset<d.contentHeight?(d.scrollbarYActive=!0,d.railYHeight=d.containerHeight-d.railYMarginHeight,d.railYRatio=d.containerHeight/d.railYHeight,d.scrollbarYHeight=c(d,f.toInt(d.railYHeight*d.containerHeight/d.contentHeight)),d.scrollbarYTop=f.toInt(b.scrollTop*(d.railYHeight-d.scrollbarYHeight)/(d.contentHeight-d.containerHeight))):
d.scrollbarYActive=!1;d.scrollbarXLeft>=d.railXWidth-d.scrollbarXWidth&&(d.scrollbarXLeft=d.railXWidth-d.scrollbarXWidth);d.scrollbarYTop>=d.railYHeight-d.scrollbarYHeight&&(d.scrollbarYTop=d.railYHeight-d.scrollbarYHeight);a(b,d);d.scrollbarXActive?g.add(b,"ps-active-x"):(g.remove(b,"ps-active-x"),d.scrollbarXWidth=0,d.scrollbarXLeft=0,l(b,"left",0));d.scrollbarYActive?g.add(b,"ps-active-y"):(g.remove(b,"ps-active-y"),d.scrollbarYHeight=0,d.scrollbarYTop=0,l(b,"top",0))}},{"../lib/class":2,"../lib/dom":3,
"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(b,e,d){var c=b("./instances"),a=document.createEvent("Event"),f=document.createEvent("Event"),g=document.createEvent("Event"),h=document.createEvent("Event"),k=document.createEvent("Event"),l=document.createEvent("Event"),m=document.createEvent("Event"),n=document.createEvent("Event"),q=document.createEvent("Event"),p=document.createEvent("Event"),v,u;a.initEvent("ps-scroll-up",!0,!0);f.initEvent("ps-scroll-down",!0,!0);g.initEvent("ps-scroll-left",
!0,!0);h.initEvent("ps-scroll-right",!0,!0);k.initEvent("ps-scroll-y",!0,!0);l.initEvent("ps-scroll-x",!0,!0);m.initEvent("ps-x-reach-start",!0,!0);n.initEvent("ps-x-reach-end",!0,!0);q.initEvent("ps-y-reach-start",!0,!0);p.initEvent("ps-y-reach-end",!0,!0);e.exports=function(b,d,e){if("undefined"===typeof b)throw"You must provide an element to the update-scroll function";if("undefined"===typeof d)throw"You must provide an axis to the update-scroll function";if("undefined"===typeof e)throw"You must provide a value to the update-scroll function";
"top"===d&&0>=e&&(b.scrollTop=e=0,b.dispatchEvent(q));"left"===d&&0>=e&&(b.scrollLeft=e=0,b.dispatchEvent(m));var w=c.get(b);"top"===d&&e>=w.contentHeight-w.containerHeight&&(e=w.contentHeight-w.containerHeight,1>=e-b.scrollTop?e=b.scrollTop:b.scrollTop=e,b.dispatchEvent(p));"left"===d&&e>=w.contentWidth-w.containerWidth&&(e=w.contentWidth-w.containerWidth,1>=e-b.scrollLeft?e=b.scrollLeft:b.scrollLeft=e,b.dispatchEvent(n));v||(v=b.scrollTop);u||(u=b.scrollLeft);"top"===d&&e<v&&b.dispatchEvent(a);
"top"===d&&e>v&&b.dispatchEvent(f);"left"===d&&e<u&&b.dispatchEvent(g);"left"===d&&e>u&&b.dispatchEvent(h);"top"===d&&(b.scrollTop=v=e,b.dispatchEvent(k));"left"===d&&(b.scrollLeft=u=e,b.dispatchEvent(l))}},{"./instances":18}],21:[function(b,e,d){var c=b("../lib/helper"),a=b("../lib/dom"),f=b("./instances"),g=b("./update-geometry"),h=b("./update-scroll");e.exports=function(b){var d=f.get(b);d&&(d.negativeScrollAdjustment=d.isNegativeScroll?b.scrollWidth-b.clientWidth:0,a.css(d.scrollbarXRail,"display",
"block"),a.css(d.scrollbarYRail,"display","block"),d.railXMarginWidth=c.toInt(a.css(d.scrollbarXRail,"marginLeft"))+c.toInt(a.css(d.scrollbarXRail,"marginRight")),d.railYMarginHeight=c.toInt(a.css(d.scrollbarYRail,"marginTop"))+c.toInt(a.css(d.scrollbarYRail,"marginBottom")),a.css(d.scrollbarXRail,"display","none"),a.css(d.scrollbarYRail,"display","none"),g(b),h(b,"top",b.scrollTop),h(b,"left",b.scrollLeft),a.css(d.scrollbarXRail,"display",""),a.css(d.scrollbarYRail,"display",""))}},{"../lib/dom":3,
"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]);
function PersonActivityLogger(b){function e(d){var c;if(c=b.trackIframeFocus){a:{for(c=new IframeIterator((window.itslTop||window.top).document);c.hasNext();)if(c.next().hasFocus()){c=!0;break a}c=!1}c=!1===c}c||(c={},b.antiForgery&&(c[b.antiForgery.headerName]=b.antiForgery.headerValue),CCL.CommonFunctions.safeAjaxPost({url:b.serviceUrl,data:d,headers:c}))}return{initialize:function(d,c){b.trackIframeFocus&&window.focus();setInterval(function(){e(c)},1E3*d);e(c)}}}
(function(b,e){function d(b,f,d,e){var h={};h[d.format]=d.url;b.jPlayer("setMedia",h);if(d.isVideo){f.css({"line-height":0});h=a(f);var k=c(f);e.jPlayer.flash.used||k.add(h).removeAttr("style");e.jPlayer.status.noFullWindow&&(e=$(b.jPlayer("option","cssSelectorAncestor")),e.find(".jp-screen-control").hide(),e.find(".jp-bar").css({right:"0"}));0<k.length?(d=d.width?d.width:f.width(),b.jPlayer("option","size",{width:d+"px",height:Math.round(d/16*9)+"px"}),f.css({position:"relative"})):g.commonSettings.isIpad?
0===f.find("canvas").length&&(b=$("<canvas>"),b.css({height:"auto"}),f.prepend(b),f.css({position:"relative","padding-top":"6.2%"})):h.css({position:"inherit"})}}function c(a){return a.find("object, embed")}function a(a){return a.find("video")}function f(a,c,b){$("#"+a).find(".jp-play").prop("title",c?b.pause:b.play)}var g=b.PlayerManager={commonSettings:e,addPlayer:function(b,e){$("#"+e.playerContainerId).on("click",function(a){a.stopPropagation()});var h=!1;return b.jPlayer({ready:function(a){d($(this),
b,e,a)},ended:function(a){d($(this),b,e,a)},error:function(a){if(a.jPlayer.error.type===$.jPlayer.error.URL)if(e.fallbackUrl&&!h){e.url=e.fallbackUrl;h=!0;var c=e.url,f=$("#"+e.playerContainerId).find(".jp-title > a");f.prop("href",c,c);f[0].setAttribute("onclick","javascript:window.open('"+c+"'); return false;");d($(this),b,e,a)}else a='<div class="'+e.cssClassFeedback+'">'+e.terms.contentNotAvailable+"</div>",$(this).closest(".jp-flat-video, .jp-flat-audio").html(a).removeClass()},swfPath:g.commonSettings.swfPath,
cssSelectorAncestor:"#"+e.playerContainerId,useStateClassSkin:!0,autoBlur:!1,smoothPlayBar:!0,remainingDuration:!0,keyEnabled:!0,keyBindings:{loop:null,muted:null,volumeUp:null,volumeDown:null},supplied:e.format,size:e.isVideo?{width:"100%",height:0<c(b).length?"100%":"auto",cssClass:e.cssClassSize?e.cssClassSize:g.commonSettings.defaultCssClassSize}:{},sizeFull:e.isVideo?{cssClass:"jp-flat-video-full"}:{},autohide:e.isVideo?{full:!1,restored:!1}:{},noFullWindow:{msie:/msie/,ipad:/ipad.*?os [0-4]\./,
iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/}}).on($.jPlayer.event.play,function(d){e.isVideo&&!d.jPlayer.flash.used&&c(b).add(a(b)).removeAttr("style");e.isVideo&&$(this).jPlayer("option","autohide",{full:!0,restored:!0});g.commonSettings.isIpad||a(b).css({position:"inherit"});f(e.playerContainerId,!0,e.terms);$(this).jPlayer("pauseOthers")}).on($.jPlayer.event.pause,
function(){e.isVideo&&$(this).jPlayer("option","autohide",{full:!1,restored:!1});f(e.playerContainerId,!1,e.terms)}).on($.jPlayer.event.resize,function(f){if(e.isVideo&&!f.jPlayer.flash.used){c(b).add(a(b)).removeAttr("style");b.css({position:f.jPlayer.options.fullScreen||f.jPlayer.options.fullWindow?"":"relative"});g.commonSettings.isIpad||a(b).css({position:"inherit"});f=f.jPlayer.options.fullScreen||f.jPlayer.options.fullWindow;var d=e.terms;$("#"+e.playerContainerId).find(".jp-full-screen").prop("title",
f?d.restoreScreen:d.fullScreen)}}).on($.jPlayer.event.click,function(a){e.isVideo&&(a.jPlayer.status.paused?$(this).jPlayer("play"):$(this).jPlayer("pause"))})}}})(window);
function ProgressBar(b){window[b]=this;var e=this,d=!0,c,a;e.initialize=function(){c=e.settings;a=e.controls;void 0!==c.showLabel&&(d=c.showLabel);a.bar.find(".ui-progressbar-value").remove();a.bar.progressbar({value:c.percent});d&&a.labelContainer.html(c.percent+"%")};e.setPercent=function(c){a.bar.progressbar("option",{value:c});d&&a.labelContainer.html(c+"%")};e.setToolTip=function(c){a.bar.attr("title",c)};return e}
(function(b){b.ProgressCircle=function(b,d,c){function a(a,c,b){var f=document.createElementNS("http://www.w3.org/2000/svg",a);f.attr=function(a,c){f.setAttributeNS(null,a,c);return f};c&&f.attr("class",c);b.appendChild(f);return f}function f(a){c?h.textContent=Math.round(a.done/a.total*100)+"%":(k.textContent=a.done,l.textContent="/"+a.total);if(0===a.done)e.attr("d"," ");else{a=a.done/a.total*Math.PI*2;var b=["M",50,5];a>Math.PI&&(b=b.concat(["A",45,45,0,0,1,50,95]));b=b.concat(["A",45,45,0,0,1,
50+45*Math.cos(a-Math.PI/2),50+45*Math.sin(a-Math.PI/2)]);e.attr("d",b.join(" "))}}c=c||!1;b=a("svg","itsl-progress-circle",b).attr("viewBox","0 0 100 100");a("path","itsl-progress-circle__outer",b).attr("d","M 50 5 A 45 45 0 1 1 49.999 5");var e=a("path","itsl-progress-circle__progress",b);if(c)var h=a("text","itsl-progress-circle__percent",b).attr("x",50).attr("y",50);else{var k=a("text","itsl-progress-circle__done",b).attr("x",25).attr("y",65);var l=a("text","itsl-progress-circle__total",b).attr("x",
50).attr("y",65)}f(d);return{update:f}}})(CCL||(CCL={}));
function QuotaBarInitializer(b,e,d,c,a){var f={},g={};f.safeBarWidth=b;f.warningBarWidth=e;f.unusedSpaceBarWidth=d;f.literals={};f.functionFinder=FunctionFinder();f.windowWidth={small:480,large:960};f.thresholdTextWidth={small:10,medium:15,large:20};f.positionerSelectors={leftBufferId:"#quota-left-buffer",warningThresholdTextId:"#quota-warning-threshold-text",middleBufferId:"#quota-middle-buffer",dangerThresholdTextId:"#quota-danger-threshold-text",rightBufferId:"#quota-right-buffer",safeBarId:"#quota-safe-bar",
warningBarId:"#quota-warning-bar",dangerBarId:"#quota-danger-bar",unusedSpaceBarId:"#quota-unused-space-bar"};f.literalsSelectors={warningThresholdTextId:"#quota-warning-threshold-text",dangerThresholdTextId:"#quota-danger-threshold-text",currentUsageTextId:"#quota-current-usage-text"};g.updateUsedSpace=function(a,c){f.unusedSpaceBarWidth=100-a;f.initAndRunPositioner();f.literals.currentUsageLiteral=c;f.literals.setLiteralsOnTextElements()};f.initialize=function(){f.initializeLiterals();f.initAndRunPositioner();
f.attachResizeEvent();void 0!==a.OnControlInitialization&&(a.OnControlInitialization=f.functionFinder.getFunctionByName(a.OnControlInitialization),a.OnControlInitialization(g))};f.initializeLiterals=function(){f.literals=QuotaBarLiterals(c,f.literalsSelectors);f.literals.setLiteralsOnTextElements()};f.attachResizeEvent=function(){$(window).resize(function(){f.initAndRunPositioner()})};f.initAndRunPositioner=function(){var a=f.calculateThresholdTextWidth();QuotaBarPositioner(f.positionerSelectors,
a).positionElements(f.safeBarWidth,f.warningBarWidth,f.unusedSpaceBarWidth)};f.calculateThresholdTextWidth=function(){var a=$(window).width();return a>=f.windowWidth.large?f.thresholdTextWidth.small:a<f.windowWidth.large&&a>=f.windowWidth.small?f.thresholdTextWidth.medium:a<f.windowWidth.small?f.thresholdTextWidth.large:f.thresholdTextWidth.small};f.initialize();return g}
function QuotaBarLiterals(b,e){contract.require(!objectState.isNullOrUndefined(b),"argument 'translations' is not defined");contract.require(!objectState.isNullOrUndefined(b.WarningThreshold),"argument 'translations.WarningThreshold' is not defined");contract.require(!objectState.isNullOrUndefined(b.DangerThreshold),"argument 'translations.DangerThreshold' is not defined");contract.require(!objectState.isNullOrUndefined(b.CurrentUsage),"argument 'translations.CurrentUsage' is not defined");contract.require(!objectState.isNullOrUndefined(e),
"argument 'selectors' is not defined");contract.require(!objectState.isNullOrUndefined(e.warningThresholdTextId),"argument 'selectors.warningThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(e.dangerThresholdTextId),"argument 'selectors.dangerThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(e.currentUsageTextId),"argument 'selectors.currentUsageTextId' is not defined");var d={};d.warningThresholdLiteral=b.WarningThreshold;d.dangerThresholdLiteral=
b.DangerThreshold;d.currentUsageLiteral=b.CurrentUsage;d.warningThresholdTextElement=$(e.warningThresholdTextId);d.dangerThresholdTextElement=$(e.dangerThresholdTextId);d.currentUsageTextElement=$(e.currentUsageTextId);d.setLiteralsOnTextElements=function(){d.warningThresholdTextElement.text(d.warningThresholdLiteral);d.dangerThresholdTextElement.text(d.dangerThresholdLiteral);d.currentUsageTextElement.text(d.currentUsageLiteral)};return d}
function QuotaBarPositioner(b,e){contract.require(!objectState.isNullOrUndefined(b),"argument 'selectors' is not defined");contract.require(!objectState.isNullOrUndefined(b.leftBufferId),"argument 'selectors.leftBufferId' is not defined");contract.require(!objectState.isNullOrUndefined(b.warningThresholdTextId),"argument 'selectors.warningThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(b.middleBufferId),"argument 'selectors.middleBufferId' is not defined");contract.require(!objectState.isNullOrUndefined(b.dangerThresholdTextId),
"argument 'selectors.dangerThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(b.rightBufferId),"argument 'selectors.rightBufferId' is not defined");contract.require(!objectState.isNullOrUndefined(b.safeBarId),"argument 'selectors.safeBarId' is not defined");contract.require(!objectState.isNullOrUndefined(b.warningBarId),"argument 'selectors.warningBarId' is not defined");contract.require(!objectState.isNullOrUndefined(b.dangerBarId),"argument 'selectors.dangerBarId' is not defined");
contract.require(!objectState.isNullOrUndefined(b.unusedSpaceBarId),"argument 'selectors.unusedSpaceBarId' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'thresholdTextWidth' is not defined");contract.require(50>=e,"argument 'thresholdTextWidth' can't be greater than 50");var d={},c={};d.leftBufferElement=$(b.leftBufferId);d.warningThresholdTextElement=$(b.warningThresholdTextId);d.middleBufferElement=$(b.middleBufferId);d.dangerThresholdTextElement=$(b.dangerThresholdTextId);
d.rightBufferElement=$(b.rightBufferId);d.safeBarElement=$(b.safeBarId);d.warningBarElement=$(b.warningBarId);d.dangerBarElement=$(b.dangerBarId);d.unusedSpaceBarElement=$(b.unusedSpaceBarId);c.widths={};c.widths.header={leftBuffer:null,warningThreshold:null,middleBuffer:null,dangerThreshold:null,rightBuffer:null};c.widths.bars={safe:null,warning:null,danger:null,unusedSpace:null};c.extraSpaceTakenByThresholdText=e/2;d.positionElements=function(a,b,d){contract.require(!objectState.isNullOrUndefined(a),
"argument 'safeBarWidth' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'warningBarWidth' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'unusedSpaceBarWidth' is not defined");contract.require(100>=a+b,"sum of 'safeBarWidth' and 'warningBarWidth' can't be greater than 100");contract.require(100>=d,"argument 'unusedSpaceBarWidth' can't be greater than 100");c.calculateWidthsOfHeaderElements(a,b);c.calculateWidthsOfBars(a,b,d);c.setWidthsOfHeaderElements();
c.setWidthsOfBars(d);c.determineWarningElementsVisibility(a,d);c.determineDangerElementsVisibility(a,b,d)};c.calculateWidthsOfHeaderElements=function(a,b){c.calculateLeftBufferWidth(a);c.widths.header.warningThreshold=e;c.calculateMiddleBufferWidth(a,b);c.widths.header.dangerThreshold=e;c.calculateRightBufferWidth()};c.calculateLeftBufferWidth=function(a){c.widths.header.leftBuffer=c.ensureBufferWidthIsInBounds(a-c.extraSpaceTakenByThresholdText)};c.calculateMiddleBufferWidth=function(a,b){b=a+b+
c.extraSpaceTakenByThresholdText;100<b&&(b=100);c.widths.header.middleBuffer=c.ensureBufferWidthIsInBounds(b-(a+c.extraSpaceTakenByThresholdText)-e)};c.ensureBufferWidthIsInBounds=function(a){a=c.ensureBufferWidthIsNotBiggerThanMaxWidth(a);return c.ensureBufferWidthIsNotNegative(a)};c.ensureBufferWidthIsNotBiggerThanMaxWidth=function(a){var c=100-2*e;return c<a?c:a};c.ensureBufferWidthIsNotNegative=function(a){return 0>a?0:a};c.calculateRightBufferWidth=function(){c.widths.header.rightBuffer=c.ensureBufferWidthIsNotNegative(100-
c.widths.header.leftBuffer-c.widths.header.warningThreshold-c.widths.header.middleBuffer-c.widths.header.dangerThreshold)};c.calculateWidthsOfBars=function(a,b,d){c.widths.bars.safe=a;c.widths.bars.warning=b;c.widths.bars.danger=100-a-b;c.widths.bars.unusedSpace=d};c.setWidthsOfHeaderElements=function(){d.leftBufferElement.width(c.convertToPercentageString(c.widths.header.leftBuffer));d.warningThresholdTextElement.width(c.convertToPercentageString(c.widths.header.warningThreshold));d.middleBufferElement.width(c.convertToPercentageString(c.widths.header.middleBuffer));
d.dangerThresholdTextElement.width(c.convertToPercentageString(c.widths.header.dangerThreshold));d.rightBufferElement.width(c.convertToPercentageString(c.widths.header.rightBuffer))};c.setWidthsOfBars=function(a){d.safeBarElement.width(c.convertToPercentageString(c.widths.bars.safe));d.warningBarElement.width(c.convertToPercentageString(c.widths.bars.warning));d.dangerBarElement.width(c.convertToPercentageString(c.widths.bars.danger));d.unusedSpaceBarElement.width(c.convertToPercentageString(a))};
c.convertToPercentageString=function(a){return a+"%"};c.determineWarningElementsVisibility=function(a,c){100-c<=a?(d.warningThresholdTextElement.hide(),d.warningBarElement.hide()):(d.warningThresholdTextElement.show(),d.warningBarElement.show())};c.determineDangerElementsVisibility=function(a,c,b){100-b<=a+c?(d.dangerThresholdTextElement.hide(),d.dangerBarElement.hide()):(d.dangerThresholdTextElement.show(),d.dangerBarElement.show())};return d}
function CclResponsiveGrid(b){function e(){p=!1;g.trigger(CclResponsiveGrid.LoadingCompletedEventName)}function d(a){var c=l.scrollTop(),b=l.scrollLeft(),f=g.offset();f.frameTop=0;f.frameLeft=0;if(m){var d=$('iframe[name="mainmenu"]',l[0].document).offset();f.frameTop=d.top;f.frameLeft=d.left}d=f.top+f.frameTop+g.outerHeight()-h.outerHeight();c>=f.top+f.frameTop&&c<d?(h.hasClass(n)||(k.height(h.height()).show(),h.css("width",h.width()).addClass(n)),a?h.css("top",c-f.frameTop):h.css("left",f.left-
b)):h.hasClass(n)&&(k.hide(),h.removeClass(n).css("top","").css("left","").css("width",""))}function c(){h.hasClass(n)&&(h.removeClass(n).css("width",""),k.height(h.height()),h.css("width",h.width()).addClass(n))}function a(a,c){c&&(a+="[value='"+c+"']");return g.find(a)}window[b]=this;var f=this;f.name=b;f.gridClientID=null;f.pageSize=null;f.pageNumber=null;f.pagerInstanceName=null;f.cclGridConstants=null;f.pageNumberHiddenClientID=null;f.pageSizeHiddenClientID=null;f.preferenceCategoryName=null;
f.selectingHiddenClientID=null;f.sortingHiddenClientID=null;f.filteringHiddenClientID=null;f.selectColumn=null;f.selectedRow=null;f.ajaxSettings=null;f.totalCount=0;f.freezeToolbar=!1;f.scrollToControlOnPagination=!1;f.filteringPreference=null;f.sortingProperty=null;f.isIos=!1;f.isReorderModeAvailable=!1;f.orderProperty=null;f.reorderTogglerClientId=null;f.isReorderModeOn=!1;f.isReorderModeHandlerAttached=!1;var g,h,k,l=$(window),m=!1,n,q=0,p=!1;f.initialize=function(){g=$("#"+f.gridClientID);h=g.find("."+
f.cclGridConstants.cssClasses.toolbar);f.rowCheckBoxesSelector="."+f.cclGridConstants.cssClasses.gridRow+" ."+f.cclGridConstants.cssClasses.selectColumn+" input[type=checkbox]";f.headerRowCheckBoxesSelector="."+f.cclGridConstants.cssClasses.headerGridRow+" ."+f.cclGridConstants.cssClasses.selectColumn+" input[type=checkbox]";f.pageSizeHidden=document.getElementById(f.pageSizeHiddenClientID);f.pageNumberHidden=document.getElementById(f.pageNumberHiddenClientID);f.sortingHidden=document.getElementById(f.sortingHiddenClientID);
f.filteringHidden=document.getElementById(f.filteringHiddenClientID);f.selectingHidden=document.getElementById(f.selectingHiddenClientID);f.restoreState();f.attachEvents();f.ajaxSettings.useAjaxMode&&f.ajaxSettings.dataSourceWebMethodUrl&&!f.ajaxSettings.delayedInitialization&&f.refresh();if(f.freezeToolbar&&h.length){n=f.cclGridConstants.cssClasses.toolbarFreeze;k=$('<div style="display:none;"/>').attr("class",h.attr("class")).insertAfter(h);if(f.isIos&&(m=(window.itslTop||window.top)!=window)){l=
$(window.itslTop||window.top);var a=function(){d(!0)};l.on("scroll",a);$(window).on("unload",function(){l.off("scroll",a)})}var b=new CCL.CallbackDebouncer(d);$(window).scroll(function(){b.invokeCallback(void 0,100)}).resize(function(){c()})}};f.useAjaxMode=function(){return f.ajaxSettings&&f.ajaxSettings.useAjaxMode};f.goToPage=function(a){f.clearSelection();f.pageNumber=a;f.refresh();f.scrollAfterPagination()};f.sort=function(a){f.sortingProperty!=a&&(f.sortingProperty=a,f.goToPage(1))};f.filter=
function(a){f.filteringPreference!=a&&(f.filteringPreference=a,f.goToPage(1))};f.changePageSize=function(a){f.pageSize=a;f.goToPage(1)};f.restoreState=function(){null!=f.pageSizeHidden&&(f.pageSize=parseInt(f.pageSizeHidden.value,10));null!=f.pageNumberHidden&&(f.pageNumber=parseInt(f.pageNumberHidden.value,10));null!=f.sortingHidden&&(f.sortingProperty=f.sortingHidden.value);null!=f.filteringHidden&&(f.filteringPreference=f.filteringHidden.value)};f.saveState=function(){null!=f.pageSizeHidden&&(f.pageSizeHidden.value=
f.pageSize);null!=f.pageNumberHidden&&(f.pageNumberHidden.value=f.pageNumber);null!=f.sortingHidden&&(f.sortingHidden.value=f.sortingProperty);null!=f.filteringHidden&&(f.filteringHidden.value=f.filteringPreference)};f._addRemoveSelectedValue=function(a,c){c?CCL.CommonFunctions.addIdToHidden($(f.selectingHidden),a):CCL.CommonFunctions.removeIdFromHidden($(f.selectingHidden),a)};f.toggleSelect=function(a){f._applySelectedRowClass(a.parentNode.parentNode,a.checked);f.updateHeaderRowCheckBoxSelection()};
f.updateHeaderRowCheckBoxSelection=function(){var c=!0;a(f.rowCheckBoxesSelector).each(function(a,b){c&&!b.checked&&(c=!1);f._addRemoveSelectedValue(b.value,b.checked)});a(f.headerRowCheckBoxesSelector).prop("checked",c)};f.getSelectedValues=function(){return null!=f.selectingHidden&&0<f.selectingHidden.value.length?f.selectingHidden.value.slice(0,f.selectingHidden.value.length-1).split(","):[]};f.getAllValues=function(){var a=[];f.getRows().each(function(){a.push($(this).data(f.cclGridConstants.dataAttributes.id))});
return a};f.replaceKeyValue=function(c,b){a(f.rowCheckBoxesSelector,c).each(function(a,d){d.value=b;d.checked&&(f._addRemoveSelectedValue(c,!1),f._addRemoveSelectedValue(b,!0))});var d=f.cclGridConstants.cssClasses.gridRow+"-";g.find("."+d+c+":first").removeClass(d+c).addClass(d+b)};f.isHeaderExist=function(){return g.find("."+f.cclGridConstants.cssClasses.headerGridRow).length};f.getRows=function(){return g.find("."+f.cclGridConstants.cssClasses.gridRow)};f.getSelectedRows=function(){return g.find("."+
f.cclGridConstants.cssClasses.selectedRow)};f.getRowById=function(a){return g.find("."+f.cclGridConstants.cssClasses.gridRow+"[data-"+f.cclGridConstants.dataAttributes.id+"="+a+"]:first")};f.deleteRowById=function(a,c){f.getRowById(a).remove();c&&eval(c)};f.getRowsContainer=function(){return g.find("."+f.cclGridConstants.cssClasses.gridRowsContainer+":first")};f.getRows=function(){return f.getRowsContainer().find("."+f.cclGridConstants.cssClasses.gridRow)};f.getRowsCount=function(){return f.getRows().length};
f.toggleRowStatus=function(a,c){return f.getRowById(a).toggleClass(f.cclGridConstants.cssClasses.inactiveRow,!c)};f.getGridElement=function(){return g};f.getToolbarElement=function(){return h};f.disableToolbarItem=function(a){a=f.getToolbarElement().find(a);0<a.length&&$(a.parent("li")).addClass("disabled")};f.getFeedback=function(){return window[f.feedbackInstanceName]};f.clearSelection=function(){null!=f.selectingHidden&&(f.selectingHidden.value="")};f._applySelectedRowClass=function(a,c){c?(c=
f.cclGridConstants.cssClasses.selectedRow,a.className=a.className.replace(c,"").replace(/^\s+|\s+$/,""),a.className=(a.className+" "+c).replace(/^\s+|\s+$/,"")):a.className=a.className.replace(f.cclGridConstants.cssClasses.selectedRow,"").replace(/^\s+|\s+$/,"")};f.toggleSelectAll=function(c){a(f.rowCheckBoxesSelector).each(function(a,b){b.checked=c;f._addRemoveSelectedValue(b.value,c);f._applySelectedRowClass(b.parentNode.parentNode,c)});a(f.headerRowCheckBoxesSelector).prop("checked",c)};f.toggleDisableAll=
function(c){a(f.rowCheckBoxesSelector).each(function(a,b){b.disabled=c});a(f.headerRowCheckBoxesSelector).prop("disabled",c)};f.addGridMessage=function(a){f.removeGridMessage();f.removeEmptyText();var c=f.getRowsContainer();a=$("<div></div>").addClass(f.cclGridConstants.cssClasses.gridText).html(a);c.before(a)};f.addGridLoadingMessage=function(){f.addGridMessage(f.cclGridConstants.terms.ajaxLoadingText)};f.removeGridMessage=function(){g.find("."+f.cclGridConstants.cssClasses.gridText+":first").remove()};
f.refresh=function(a){a="undefined"!==typeof a?a:{};f.saveState();f.updateFreezeState();if(f.ajaxSettings.useAjaxMode){f.addGridLoadingMessage();if(f.ajaxSettings.useChunkLoading&&0<f.ajaxSettings.chunkSize){q=0;var c=f.getRowsContainer();c.empty();c.css("display","none");return f.refreshChunks(a)}p=!0;a=$.extend(a,{pageNumber:f.pageNumber,pageSize:f.pageSize,sort:f.sortingProperty,filter:f.filteringPreference},this._getParams());return CCL.CommonFunctions.safeAjaxPost({url:f.ajaxSettings.dataSourceWebMethodUrl,
data:a,dataType:"json",success:function(a){f.removeGridMessage();f.render(a);f.updateFreezeState();e()},error:function(){f.addGridMessage(f.cclGridConstants.terms.ajaxErrorText);e()}})}f.postbackFunction()};f.refreshChunks=function(a){a="undefined"!==typeof a?a:{};0===q&&(p=!0);var c=$.extend(a,{pageNumber:f.pageNumber,pageSize:f.pageSize,sort:f.sortingProperty,filter:f.filteringPreference,chunkNumber:q,chunkSize:f.ajaxSettings.chunkSize},this._getParams());return $.when(CCL.CommonFunctions.safeAjaxPost({url:f.ajaxSettings.dataSourceWebMethodUrl,
data:c,dataType:"json"})).done(function(c){"undefined"!==typeof c.noChunks?(c.noChunks?(f.removeGridMessage(),f.render(c,!0),f.updateFreezeState(),e()):(q++,f.render(c,!0),f.refreshChunks(a)),f.getRowsContainer().css("display","")):(f.removeGridMessage(),f.addGridMessage(f.cclGridConstants.terms.ajaxErrorText))}).fail(function(){f.removeGridMessage();f.addGridMessage(f.cclGridConstants.terms.ajaxErrorText);e()})};f.isLoadingInProgress=function(){return p};f.scrollAfterPagination=function(){!0===f.scrollToControlOnPagination?
$(window).scrollTop($("#"+f.gridClientID).offset().top):$(window).scrollTop(0)};f._getParams=function(){var a={};$.each(f.ajaxSettings.dataSourceWebMethodParams,function(c,b){a[c]=b});return a};f.getRowPrimaryKeyValue=function(a){return f.getCurrentRow(a).find("."+f.cclGridConstants.cssClasses.rowDetailsColumn+" ."+f.cclGridConstants.cssClasses.primaryKey).val()};f.getRowPrimaryKeyValueByIndex=function(a){return f.getRowsContainer().find("."+f.cclGridConstants.cssClasses.gridRow+":eq("+a+") ").find("."+
f.cclGridConstants.cssClasses.rowDetailsColumn+" ."+f.cclGridConstants.cssClasses.primaryKey).val()};f.getRowPrimaryKeyValueByRow=function(a){return a.find("."+f.cclGridConstants.cssClasses.rowDetailsColumn+" ."+f.cclGridConstants.cssClasses.primaryKey).val()};f.getRowIndex=function(a){return f.getCurrentRow(a).find("."+f.cclGridConstants.cssClasses.rowDetailsColumn+" ."+f.cclGridConstants.cssClasses.rowIndex).val()};f.getCurrentRow=function(a){return $(a).parents("."+f.cclGridConstants.cssClasses.gridRow)};
f.setMode=function(a){f.getRowsContainer().attr("class",f.cclGridConstants.cssClasses.gridRowsContainer+" "+a)};f.render=function(a,c){c="undefined"!==typeof c?c:!1;f.totalCount=c?f.totalCount+a.virtualCount:a.virtualCount;f.reInitializePager(f.pageNumber,f.pageSize,f.totalCount);var b=f.getRowsContainer();c?b.append(a.gridData):b.html(a.gridData);f.isReorderModeAvailable&&$("#"+f.reorderTogglerClientId).parent("li").removeClass(f.cclGridConstants.cssClasses.selectedItem);0<f.orderProperty.length&&
(f.isReorderModeAvailable=0<=f.sortingProperty.indexOf(f.orderProperty)&&1<f.totalCount,f.attachReorderModeHandler(),0<f.reorderTogglerClientId.length&&f.toggleReorderTogglerElement($("#"+f.reorderTogglerClientId),f.isReorderModeAvailable),"Auto"==f.reorderModeAjaxSettings.reorderMode&&f.toggleReorderMode());g.trigger("datachanged")};f.addNewRow=function(){return CCL.CommonFunctions.safeAjaxPost({url:f.addNewSettings.webMethodUrl,data:f.addNewSettings.params||"{}",dataType:"json"}).done(function(a){f.render(a,
!0);f.updateFreezeState();0<f.getRowsCount()&&f.getEmptyTextContainer().hide()}).fail(function(){f.addGridMessage(f.cclGridConstants.terms.ajaxErrorText)})};f.attachEvents=function(){g.on("click",f.headerRowCheckBoxesSelector,function(){f.toggleSelectAll($(this).prop("checked"))});g.on("click",f.rowCheckBoxesSelector,function(){f.toggleSelect(this)});g.on("change","."+f.cclGridConstants.cssClasses.sorting+" > select",function(){var a=$(this).val();f.sort(a)});if(f.freezeToolbar&&f.isIos)g.on("hybrideditoriteminlinemodechanged",
function(a,c){c.isEditMode||d(!0)});f.isReorderModeAvailable&&f.attachReorderModeHandler()};f.reInitializePager=function(a,c,b){var d=window[f.pagerInstanceName];d&&(d.pageNumber=a,d.pageSize=c,d.totalCount=b,d.render(),f.hidePagerWhenTotalCountLessMinPageSize?d.controls.pagerContainer.toggle(0<b&&f.totalCount>d.getMinAvailablePageSize()):d.controls.pagerContainer.toggle(0<b))};f.updateFreezeState=function(a){f.freezeToolbar&&h.length&&(d(a),c())};f.removeEmptyText=function(){f.getEmptyTextContainer().remove()};
f.getEmptyTextContainer=function(){return f.getRowsContainer().children("."+f.cclGridConstants.cssClasses.emptyGridText)};f.getRowOrderPropertyValue=function(a){return a.find("."+f.cclGridConstants.cssClasses.rowDetailsColumn+" ."+f.cclGridConstants.cssClasses.orderValue).val()};f.setRowOrderPropertyValue=function(a,c){return a.find("."+f.cclGridConstants.cssClasses.rowDetailsColumn+" ."+f.cclGridConstants.cssClasses.orderValue).val(c)};f.setRowIndexPropertyValue=function(a,c){return a.find("."+f.cclGridConstants.cssClasses.rowDetailsColumn+
" ."+f.cclGridConstants.cssClasses.rowIndex).val(c)};f.attachReorderModeHandler=function(){!f.isReorderModeHandlerAttached&&f.isReorderModeAvailable&&($("."+f.cclGridConstants.cssClasses.reorderModeSelector).sortable({axis:"y",scroll:!0,scrollSensitivity:50,scrollSpeed:10,handle:"."+f.cclGridConstants.cssClasses.reorderModeDragHandler,cursor:"move",items:"> ."+f.cclGridConstants.cssClasses.reorderMode}),g.find("."+f.cclGridConstants.cssClasses.reorderModeSelector).on("sortstart",function(a,c){c.item.hasClass(f.cclGridConstants.cssClasses.reorderMode)&&
c.item.data(f.cclGridConstants.dataAttributes.startPosition,c.item.index())}),g.find("."+f.cclGridConstants.cssClasses.reorderModeSelector).on("sortstop",function(a,c){if(c.item.hasClass(f.cclGridConstants.cssClasses.reorderMode)){var b=f.isHeaderExist()?1:0;a=c.item.data(f.cclGridConstants.dataAttributes.startPosition)-b;b=c.item.index()-b;var d=f.getRowsCount();if(a!=b){c=f.getRowPrimaryKeyValueByRow(c.item);var e=b>a?b==d-1?f.getRowPrimaryKeyValueByIndex(b-1):f.getRowPrimaryKeyValueByIndex(b+1):
f.getRowPrimaryKeyValueByIndex(b+1);f.useAjaxMode()?f.callReorderModeUpdateMethod(c,e,a,b,b==d-1):"undefined"!==typeof f.reorderModeAjaxSettings.reorderModeCallbackClientFunction&&f.reorderModeAjaxSettings.reorderModeCallbackClientFunction(null)}}}),f.isReorderModeHandlerAttached=!0)};f.toggleReorderMode=function(){f.isReorderModeOn="Auto"==f.reorderModeAjaxSettings.reorderMode?!0:!f.isReorderModeOn;$("#"+f.reorderTogglerClientId).parent("li").toggleClass(f.cclGridConstants.cssClasses.selectedItem,
f.isReorderModeOn);f.getRowsContainer().find("."+f.cclGridConstants.cssClasses.gridRow).toggleClass(f.cclGridConstants.cssClasses.reorderMode,f.isReorderModeOn);g.find("."+f.cclGridConstants.cssClasses.reorderModeColumnSelector+" div > img").toggleClass(f.cclGridConstants.cssClasses.hidden,!f.isReorderModeOn)};f._getReorderParamsStr=function(){var a={};$.each(f.reorderModeAjaxSettings.reorderModeWebMethodParams,function(c,b){a[c]=encodeURIComponent(b)});return a};f.callReorderModeUpdateMethod=function(a,
c,b,d,e){a={sourceId:a,targetId:c,oldIndex:b,newIndex:d,insertAfterTargetItem:e};$.extend(a,f._getReorderParamsStr());return CCL.CommonFunctions.safeAjaxPost({url:f.reorderModeAjaxSettings.reorderModeWebMethodUrl,data:a,dataType:"json",success:function(a){"undefined"!==typeof f.reorderModeAjaxSettings.reorderModeCallbackClientFunction&&f.reorderModeAjaxSettings.reorderModeCallbackClientFunction(a)},error:function(a,c,b){$("."+f.cclGridConstants.cssClasses.reorderModeSelector).sortable("cancel")}})};
f.toggleReorderTogglerElement=function(a,c){var b=a.attr("id"),f=a.html(),d=a.attr("class");c?(a.parent("li").removeClass("disabled"),a.replaceWith('<a href="#" id="'+b+'" class="'+d+'" onclick="javascript:'+this.name+'.toggleReorderMode();">'+f+"</a>")):(a.parent("li").addClass("disabled"),a.replaceWith('<span id="'+b+'" class="'+d+'">'+f+"</span>"))}}CclResponsiveGrid.LoadingCompletedEventName="ResponsiveGrid:LoadingCompleted";
function RubricAssessmentCriteriaList(b){function e(a,c,b,f){var d=0<c?"log"+c:a;V[d]&&delete V[d];document.getElementById(f).remove();b=b||0===Object.keys(V).length;$(document).trigger(A.deleteLearningObjectiveEvent,{learningObjectiveId:a,learningObjectiveGroupId:c,reloadPage:b})}function d(a,b,f){S(a,b,f,!1);c();a.toggleSelectAll(!1)}function c(){A.searchSharedCriteriaBox&&window[A.searchSharedCriteriaBox]&&window[A.searchSharedCriteriaBox].refresh()}function a(a,c){return window[V[0<c?"log"+c:
a]]}function f(a,c){n(a);p(a,c);v(a);u(a)}function g(a,c,b,f){b=a.getRowById(b);var d=b.find("."+B.row+":first").find("a."+B.criteriaWeight).text(),e=$(c);e.find("a."+B.undoLink).click(function(){k(a,e,d?d:0,f)});e.find("button."+B.undoCloseImage).click(function(){e.remove()});b.replaceWith(e)}function h(a,c,b,d){var e=0===m(a);b=$(b).appendTo(a);e&&0<m(a)&&(a.children("."+B.gridEmptyText).remove(),$(document).trigger(A.emptyStateChangedEvent,{isAnyEmpty:l(),loUpdate:{id:c,isEmpty:!1}}));f(b,d);D()}
function k(a,c,b,d){var e=c.children("input:first").val();CCL.CommonFunctions.safeAjaxPost({url:A.webMethods.restoreCriteria,dataType:"html",data:{courseId:A.courseId,learningObjectiveId:d,criteriaJson:e,showCriteriaWeights:A.showCriteriaWeights,criteriaWeightToRestore:b}}).done(function(e){e=$(e);var g=e.find("."+B.row+":first");c.replaceWith(e);e.find("a."+B.criteriaWeight).text(b);g=g.next().val();G(d,g,b);f(e,!1);e.scrollMinimal();e=a.getRowsContainer();1===m(e)&&(e.children("."+B.gridEmptyText).remove(),
$(document).trigger(A.emptyStateChangedEvent,{isAnyEmpty:l(),loUpdate:{id:d,isEmpty:!1}}))}).fail(J)}function l(){return 0<$("div."+B.criteriaContainer).filter(function(){return 0===m(this)}).length}function m(a){return $("."+B.row,a).length}function n(a){a=a.find("."+B.criteriaItem);$.each(a,function(a,c){if(q(c))return!0;a={submitOnEnter:!0,multiline:!0,autoResize:!0,editFieldCssClass:B.inlineEditor,maxLength:A.criteriaItemDescriptionMaxLength};new ClientInlineEditor($(c),void 0,$(c).parent().find("input").last(),
a,C,M,void 0)})}function q(a){return 0<$(a).closest(CommonFunctions.formatString(".{0},.{1}",B.officialCriteria,B.criteriaOfObsoleteLearningObjective)).length}function p(a,c){a=a.find("."+B.criteriaTitle);$.each(a,function(a,b){if(q(b))return!0;a=new ClientInlineEditor(b,void 0,void 0,{submitOnEnter:!0,editFieldDisplayInline:!0,editFieldAutoWidth:!1,editFieldCssClass:B.criteriaTitle,maxLength:64},w,void 0,{isTitle:!0});c&&a.switchToEditMode().select()})}function v(a){a=a.find("."+B.criteriaDescription);
$.each(a,function(a,c){if(q(c))return!0;a={submitOnEnter:!0,multiline:!0,autoResize:!0,editFieldCssClass:B.inlineEditor,maxLength:A.criteriaItemDescriptionMaxLength};new ClientInlineEditor(c,void 0,$(c).parent().find("input").last(),a,w,M,{isTitle:!1})})}function u(a){a=a.find("."+B.criteriaWeight);$.each(a,function(a,c){new ClientInlineEditor(c,void 0,void 0,{submitOnEnter:!0,editFieldDisplayInline:!0,editFieldAutoWidth:!1,editFieldCssClass:B.criteriaWeight,maxLength:3},r,t,void 0)})}function w(c,
b){var f=c.source.parents("ul").next().val();c.actualText=$.trim(c.actualText);c.userData.isTitle&&!c.actualText.length?(c.isUpdateSuccess=!1,b(c)):CCL.CommonFunctions.safeAjax({type:"PUT",url:A.webMethods.updateCriteria,dataType:"json",data:{courseId:A.courseId,criteriaId:f,text:c.actualText,isTitle:c.userData.isTitle}}).done(function(b){c.isUpdateSuccess=!0;var d=c.source.parents("ul");H(d);b&&(z(b.learningObjectiveId,d,b.criteriaId),a(b.learningObjectiveId,b.learningObjectiveGroupId).replaceKeyValue(f,
b.criteriaId))}).fail(function(a,b,f){c.isUpdateSuccess=!1;J(a,b,f)}).always(function(){b(c)})}function r(a,c){var b=parseInt(a.source.parents("."+B.criteriaContainer).siblings("input[type=hidden]").val()),f=a.source.parents("ul").next().val(),d=a.source.parents("ul"),e=!$.trim(a.actualText).length||!/^[1-9][0-9]?$|^100$/.test(a.actualText);d.find("."+B.criteriaWeightValidationMessage).toggle(e);e?(a.stopOnEdit=!0,a.isUpdateSuccess=!1):(P&&(e=parseInt(a.actualText),y(e,d),G(b,f,e)),a.isUpdateSuccess=
!0);c(a)}function t(a){a.isEditMode||a.source.parents("ul").find("."+B.criteriaWeightValidationMessage).hide()}function y(a,c){c=c.find("."+B.criteriaItemWeight);var b=A.achivementLevelOrderDirection===Z.lowestToHighest?1:c.length;$.each(c,function(c,f){f.innerHTML=b*a;A.achivementLevelOrderDirection===Z.lowestToHighest?b++:b--})}function C(c,b){var f=c.source.parents("li");f=O(f.find("input[type=hidden]").val());var d=f.key;f=f.value;c.actualText=$.trim(c.actualText);CCL.CommonFunctions.safeAjax({type:"PUT",
url:A.webMethods.updateCriteriaItem,dataType:"json",data:{courseId:A.courseId,criteriaId:d,levelId:f,text:c.actualText}}).done(function(b){c.isUpdateSuccess=!0;var f=c.source.parents("ul");H(f);b&&(z(b.learningObjectiveId,f,b.criteriaId),a(b.learningObjectiveId,b.learningObjectiveGroupId).replaceKeyValue(d,b.criteriaId))}).fail(function(a,b,f){c.isUpdateSuccess=!1;J(a,b,f)}).always(function(){b(c)})}function z(a,c,b){E(a,c,b);c.next().val(b);a=c.find("li."+B.column+" > input[type=hidden]");$.each(a,
function(a,c){a=$(c);c=O(a.val());c.key=b.toString();a.val(JSON.stringify(c))})}function E(a,c,b){if(P){var f=c.next().val();c=parseInt(c.find("."+B.criteriaWeight+":first").text());P&&P[a]&&delete P[a][f];G(a,b,c)}}function G(a,c,b){P&&0<b&&(P[a]||(P[a]={}),P[a][c]=b,D())}function D(){$(document).trigger(A.criteriaWeightsChangedEvent,{data:P,loCriteriaWeights:F()})}function F(){var a={};$("."+B.criteriaContainer).each(function(){var c=$(this),b=parseInt(c.siblings("input[type=hidden]").val());a[b]=
0;$("a."+B.criteriaWeight,c).each(function(){var c=$(this),f=c.siblings("input."+B.criteriaWeight);a[b]+=parseInt(f.length?f.val():c.text())})});return a}function M(a){var c=a.source;a.isEditMode||c.parent().find("input").last().val()?c.removeClass(B.criteriaItemEmptyState):(c.addClass(B.criteriaItemEmptyState),c.text(A.watermark))}function R(a,c){$.each(c,function(c,b){c=a.getRowById(b).find("."+B.row+":first");c.find("img."+B.shareLoadingIcon).show();c.find("img."+B.shareIcon).hide()})}function S(a,
c,b,f){$.each(b,function(b,d){b=a.getRowById(d).find("."+B.row+":first");var e=b.find("img."+B.shareIcon);void 0!=c[d]&&(e.attr("title",f?c[d]:""),e.toggle(f),b.find("img."+B.reshareIcon).hide());b.find("img."+B.shareLoadingIcon).hide()})}function H(a){a.find("img."+B.reshareIcon).toggle(a.find("img."+B.shareIcon).is(":visible"))}function J(a,c){a.status>=CCL.CommonConstants.httpStatusCodes.badRequest&&alert(!0===c&&a.statusText.length?a.statusText:Q.settings.terms.errorOccured)}function O(a){return JSON.parse(a||
"{}")}function L(){var a=$.find("img."+B.shareLoadingIcon+":visible");$.each(a,function(a,c){c.hide()})}window[b]=this;var Q=this,A,X,B,Z,P={},V,aa;Q.initialize=function(){A=Q.settings;X=Q.controls;B=A.cssClasses;O(X.updatedCriteriaDecriptionsHidden.val());Z=A.achievementLevelOrder;V=O(A.grids);aa=O(A.officialCriteriaGrids);A.criteriaWeightsData&&(P=JSON.parse(A.criteriaWeightsData));f(X.container,!1);if(A.isIosDevice)$("input."+B.addButton).on("touchend",function(){$(this).click()});$(function(){$(document).on(Q.settings.events.addSharedCriteriaJsEvent,
function(a,c){$.each(c.Criteria,function(a,c){var b=$($(window[V[a]].getGridElement()).parent().parent()).find("input:hidden:last").val();a=window[V[a]].getRowsContainer();h(a,b,c,!1)});c.IsThereMismatchBetweenLevelsCount&&A.levelsMismatchWarningClientId&&$("#"+A.levelsMismatchWarningClientId).show()})})};Q.deleteLearningObjective=function(a,c,b,f,d){A.webMethods.deleteLearningObjective?CCL.CommonFunctions.safeAjax({type:"DELETE",url:A.webMethods.deleteLearningObjective,dataType:"json",data:{courseId:A.courseId,
topicId:f,learningObjectiveId:a}}).done(function(){e(a,c,b,d)}).fail(function(a){J(a,!0)}):e(a,c,b,d)};Q.addCriteria=function(c,b){CCL.CommonFunctions.safeAjaxPost({url:A.webMethods.addCriteria,dataType:"html",data:{courseId:A.courseId,learningObjectiveId:c,learningObjectiveGroupId:b,showCriteriaWeights:A.showCriteriaWeights}}).done(function(f){var d=a(c,b).getRowsContainer();h(d,c,f,!0)}).fail(J)};Q.shareSelectedCriterias=function(b,f,d){var e=a(b,f),g=e.getSelectedValues();1>g.length?alert(A.terms.noSelectionForSharing):
(R(e,g),CCL.CommonFunctions.safeAjaxPost({url:A.webMethods.shareCriteria,dataType:"json",data:{courseId:A.courseId,hierarchyId:d,criteriaIdsJson:JSON.stringify(g)}}).done(function(a){S(e,a,g,!0);c();e.toggleSelectAll(!1)}).fail(function(a){J(a,!0)}).always(function(){L()}))};Q.stopSharingSelectedCriterias=function(c,b){var f=a(c,b),e=f.getSelectedValues();1>e.length?alert(A.terms.noSelectionForSharing):(R(f,e),CCL.CommonFunctions.safeAjax({type:"DELETE",url:A.webMethods.stopSharingCriteria,dataType:"json",
data:{courseId:A.courseId,criteriaIdsJson:JSON.stringify(e)}}).done(function(a){d(f,a,e)}).fail(J).always(function(){L()}))};Q.removeSelectedCriterias=function(c,b){var f=a(c,b),e=f.getSelectedValues();e.length?(CCL.CommonFunctions.safeAjax({type:"DELETE",url:A.webMethods.deleteCriteria,dataType:"html",data:{courseId:A.courseId,criteriaIdsJson:JSON.stringify(e)}}).done(function(a){a=O(a);d(f,a.criteriaToUnshare,e);$.each(a.criterias,function(a,b){g(f,b,a,c);P&&P[c]&&delete P[c][a]});D();a=f.getRowsContainer();
if(0===m(a)){var b=f.getGridElement().find("."+B.criteriaEmptyGridText);0<b.length&&a.append(b.html());a=!1;(b=window[aa[c]])?(b=b.getRowsContainer(),0===m(b)&&(a=!0)):a=!0;a&&$(document).trigger(A.emptyStateChangedEvent,{isAnyEmpty:!0,loUpdate:{id:c,isEmpty:!0}})}}).fail(J),f.toggleSelectAll(!1)):alert(A.terms.noSelectionForRemoval)}}
function SafeConsoleLogger(){var b={},e={noop:function(){}};e.safeLogger={assert:e.noop,count:e.noop,dir:e.noop,error:e.noop,group:e.noop,groupEnd:e.noop,info:e.noop,log:e.noop,time:e.noop,timeEnd:e.noop,trace:e.noop,warn:e.noop};e.initialize=function(){objectState.isNullOrUndefined(window.console)||(e.safeLogger=window.console)};b.assert=function(b){e.safeLogger.assert(b)};b.count=function(b){e.safeLogger.count(b)};b.dir=function(b){e.safeLogger.dir(b)};b.error=function(b){e.safeLogger.error(b)};
b.group=function(b){e.safeLogger.group(b)};b.groupEnd=function(b){e.safeLogger.groupEnd(b)};b.info=function(b){e.safeLogger.info(b)};b.log=function(b){e.safeLogger.log(b)};b.time=function(b){e.safeLogger.time(b)};b.timeEnd=function(b){e.safeLogger.timeEnd(b)};b.trace=function(b){e.safeLogger.trace(b)};b.warn=function(b){e.safeLogger.warn(b)};e.initialize();return b}var safeConsoleLogger=SafeConsoleLogger();
$.widget("itslccl.searchTextBox",$.itslccl.extendedTextBox,{options:{searchInput:void 0,container:void 0,searchLink:void 0,fakeInput:void 0,searchKeyStorage:void 0,textSearchEvent:void 0,usePostBack:!1,clearByEsc:!1,postBackReference:void 0},_create:function(){this._super();var b=this,e=this.options.searchInput,d=this.options.searchLink,c=this.options.fakeInput;e.keydown(function(a){return a.which!==CommonConstants.keyCodes.enter||a.shiftKey?!0:(b._doSearch(),!1)});e.keyup(function(a){b.options.clearByEsc&&
a.which===CommonConstants.keyCodes.escape&&b._clearSearchBox();return!0});d&&d.click(function(a){a.preventDefault();b._doSearch()});c&&c.focus(function(){e.focus()})},_clearSearchBox:function(){this.options.searchInput.val("");this.options.searchInput.focus()},_doSearch:function(){this.options.searchInput.focus();var b=this._isWatermarkMode?"":$.trim(this.options.searchInput.val());this.options.usePostBack?(this._saveSearchTextToHiddenField(),eval(this.options.postBackReference)):this.options.container.trigger(this.options.textSearchEvent,
b)},_saveSearchTextToHiddenField:function(b){!this.options.usePostBack&&b?this.options.searchKeyStorage.val($.trim(b)):this.options.searchKeyStorage.val($.trim(this.options.searchInput.val()))}});
function SearchTextBox(b,e){window[b]=this;var d=this;e&&SearchTextBox.instances.push(this);d.initialize=function(){d.controls={searchInput:$("#"+d.controlIds.searchInputId),container:$("#"+d.controlIds.containerId),searchLink:$("#"+d.controlIds.searchLinkId),fakeInput:$("#"+d.controlIds.fakeInputId),searchKeyStorage:$("#"+d.controlIds.searchKeyStorageId)};var c=d.controls.searchInput;e&&c.hasClass(d.settings.focusRequiredCssClass)&&c.focus();c.searchTextBox({searchInput:d.controls.searchInput,container:d.controls.container,
searchLink:d.controls.searchLink,fakeInput:d.controls.fakeInput,searchKeyStorage:d.controls.searchKeyStorage,watermarkText:d.settings.watermarkText,watermarkCssClass:d.settings.watermarkCssClass,textSearchEvent:d.settings.textSearchEvent,clearByEsc:d.settings.clearByEsc,usePostBack:d.settings.usePostBack,postBackReference:d.settings.postBackReference,focusRequiredCssClass:d.settings.focusRequiredCssClass})};d.clearSearch=function(){d.controls.searchInput.val("")};d.autocompleteopen=function(c,a){var b=
d.controls.searchInput.autocomplete("widget");if(1<$(".ui-menu-item",b).length){var e=d.controls.searchInput.autocomplete("option","select");d.controls.searchInput.autocomplete({select:function(a,c){if(-1!==c.item.id)e(a,c);else{var f=[];$(".ui-menu-item:not(.ccl-searchtextbox-select-all)",b).each(function(){f.push($(this).data("ui-autocomplete-item"))});d.controls.searchInput.trigger("autocompleteselectall",{items:f});d.controls.searchInput.autocomplete("close")}}});c=$("<li></li>").data("ui-autocomplete-item",
{id:-1,value:""}).attr("class","ui-menu-item ccl-searchtextbox-select-all").appendTo(b);$("<a></a>").attr("href","#").text(d.settings.selectAllText).appendTo(c)}}}SearchTextBox.instances=[];SearchTextBox.initialize=function(){for(var b=0,e=this.instances.length;b<e;b+=1)this.instances[b].initialize()};
function StarsSelector(b){window[b]=this;var e=this,d,c;e.initialize=function(){function a(a){a=isNaN(a)?0:a;e.settings.activeIconCss&&e.settings.inactiveIconCss?(c.filter(":lt("+a+")").find("i").removeClass().addClass(e.settings.activeIconCss),c.filter(":eq("+a+"), :gt("+a+")").find("i").removeClass().addClass(e.settings.inactiveIconCss)):e.settings.activeIconUrl&&e.settings.inactiveIconUrl&&(c.filter(":lt("+a+")").find("img").prop("src",e.settings.activeIconUrl),c.filter(":eq("+a+"), :gt("+a+")").find("img").prop("src",
e.settings.inactiveIconUrl))}d=e.controls.ratingHidden;c=e.controls.starsContainer.find("a");c.click(function(b){b=c.index(this)+1;d.val()!=b&&(d.val(b).change(),a(b));return!1}).mouseover(function(b){a(c.index(this)+1)}).mouseout(function(c){a(parseInt(d.val()))});$(document).on(e.settings.showRateEventName,function(c,b){d.val()!=b&&(d.val(b),a(b))});$(document).on(e.settings.rateSuccessEventName,function(a,b){a=c.filter(":lt("+b+")");for(b=0;2>b;b++)a.fadeTo("normal",.5).fadeTo("normal",1)})};return e}
function Switch(b,e){var d={};d.state=b;d.settings=e;d.button=document.querySelector("#"+d.settings.containerId+" button");d.changeCallback=function(){};this.setChangeCallback=function(c){d.changeCallback=c};d.button.addEventListener("click",function(){d.state=!d.state;!0===d.state?(d.button.classList.add(d.settings.onCssClass),d.button.classList.remove(d.settings.offCssClass)):(d.button.classList.add(d.settings.offCssClass),d.button.classList.remove(d.settings.onCssClass));d.changeCallback(d.state)});
return this}function MakeTableHighlightable(b){function e(b){var c="mouseenter"==b.type;$("tr > :nth-child("+($(this).index()+1)+")",$(b.delegateTarget)).toggleClass("ccl-table-highlight",c);$(this).parent().toggleClass("ccl-table-highlight",c)}b.delegate("td","mouseenter mouseleave",e);b.delegate("tbody th","mouseenter mouseleave",e)}
(function(b,e){var d=b.TextBoxAutoCompleteManager={commonSettings:e,makeTextBoxAutocomplete:function(c,a,f,g){function h(a,c){a=a.split(" ");var b=c.split(" "),f=-1,d=!0,e=!1;$.each(a,function(a,c){e=!1;$.each(b,function(a,b){if(e=0==b.indexOf(c))return f=a,!1});-1<f&&(b.splice(f,1),f=-1);d=e&&d});return d}function k(){u.autocomplete("widget").is(":visible")?u.autocomplete("close"):($(".ui-autocomplete-input ui-autocomplete-loading").autocomplete("close"),u.autocomplete("option","minLength",0),u.autocomplete("search",
""));u.focus()}function l(){var a=u.get(0);c.isIos?a.setSelectionRange(0,a.value.length):a.select()}function m(a,b){var f=!1;$.each(a,function(a,d){a=c.caseSensitiveSearch?b:b.toLowerCase();if((c.caseSensitiveSearch?d.value:d.value.toLowerCase())===a)return f=!0,!1});return f}function n(){c.allowCustomText||(m(c.values,u.val())?c.defaultText=u.val():(c.defaultText?u.val(c.defaultText):u.val(""),q(!1)));a&&a();c.isAutoPostBack&&u.closest("form").submit()}function q(a){c.useHighlight&&w.toggleClass(d.commonSettings.cssClasses.highlight,
a)}function p(a){var b=c.caseSensitiveSearch?$(this).val():$(this).val().toUpperCase(),f=u.data("ui-autocomplete");f.widget().children(".ui-menu-item").each(function(){var a=$(this).data("ui-autocomplete-item");if((c.caseSensitiveSearch?a.value:a.value.toUpperCase())===b)return f.selectedItem=a,!1});f.selectedItem&&f._trigger("select",a,{item:f.selectedItem})}var v=!0,u=$("#"+c.textboxId),w=u.parent(),r=$("#"+c.hiddenSelectedValueId),t=b[c.textboxId]=u;c.isDropDown&&(c.minLength=0);u.autocomplete({autoFocus:!0,
source:function(a,b){b($.map(c.values,function(b){var f=c.caseSensitiveSearch?a.term:a.term.toLowerCase(),g=c.caseSensitiveSearch?b.value:b.value.toLowerCase();switch(c.filterType){case d.commonSettings.filterType.wordStartsWith:return h(f,g)?b:e;default:return 0<=g.indexOf(f)?b:e}}))},delay:c.delay,minLength:c.minLength,change:function(a,b){c.defaultText!==u.val()&&n()},close:function(a,c){f&&f();v=!0},select:function(a,c){t.selectValue(c.item);n()},open:function(a,b){c.zIndex&&u.autocomplete("widget").css("z-index",
c.zIndex);v=!1},create:function(a,b){u.data("autocompleteItemId",c.defaultValue)},messages:{noResults:c.terms.noResults,results:function(a){return 1==a?c.terms.oneResult:c.terms.resultsTemplate.replace("{0}",a.toString())}}});u.keyup(function(){q(!!u.val()&&!m(c.values,u.val()))}).keydown(function(a){a.which===CommonConstants.keyCodes.enter&&(v||a.preventDefault(),c.defaultText!==u.val()&&(a.preventDefault(),n()),u.autocomplete("close"))}).click(l).on("autocompletesearchcomplete",function(a,c){});
t.selectValue=function(a){q(!1);u.val(a.value);u.data("autocompleteItemId",a.id);$(".ui-autocomplete-input ui-autocomplete-loading").autocomplete("close");r.val()!==a.id&&(r.val(a.id),g&&g(a))};t.getValue=function(){return u.data("autocompleteItemId")};c.isDropDown&&($("#"+c.buttonId).click(k).click(l),u.click(k),u.blur(p))}}})(window);
(function(b){var e={},d=!1,c=b.TextEditorManager={commonSettings:void 0,addStartupFunction:function(a,c){e[a]=c},textEditorSetup:function(){function a(a,c,b){if(a=a.getButton(c))b=$("#"+a.domId).removeClass().addClass(b).removeAttr("title"),a=b.find("span").removeClass(),b.append(document.createTextNode(a.text())),a.text("")}function f(){CommonFunctions.makePostMessageCallRecursivelyToTopmostFrame(b.parent,new CCL.CommonWindowMessages.GenericMessage(CommonWindowMessages.MessageNames.collapseExtensionIframe))}
function g(a,c,b){var f=a.getSelection(),d=f.getRanges(),e=CKEDITOR.plugins.link.getSelectedLink(a);e&&d[0].selectNodeContents(e);if(1===d.length){e=d[0];var g=new CKEDITOR.dom.text(c,a.document);e.collapsed?(e.insertNode(g),e.selectNodeContents(g)):(a=a.widgets.focused)&&"image"==a.name&&(a.parts.link&&a.setData("link",null),"center"===a.data.align&&(a.data.link={linkText:c,type:"itslearningTreeLink"},Object.assign(a.data.link,b),a.shiftState({widget:a,element:a.element,oldData:a.oldData,newData:a.data})));
style=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,attributes:b});style.applyToRange(e);f.selectRanges(d)}}d||(d=!0,b.CKEDITOR&&(CKEDITOR.on("dialogDefinition",function(b){b=b.data.definition;var f=b.onLoad,d=b.onShow;b.onLoad=function(){a(this,"ok",c.commonSettings.cssClasses.ok);a(this,"cancel",c.commonSettings.cssClasses.cancel);if(f)return f.apply(this,arguments)};b.onShow=function(){if(!CKEDITOR.env.iOS||!/OS 1[0-2]_/.test(navigator.userAgent)){var a=this.getElement();a&&a.$&&(a=
a.$.querySelector("table"))&&a.scrollIntoView()}if(d)return d.apply(this,arguments)}}),CKEDITOR.on("instanceReady",function(a){var c=e[a.editor.name];c&&c();a.editor.on("fileUploadRequest",function(a){a.data.fileLoader.xhr.setRequestHeader(TextEditorManager.commonSettings.antiForgeryHeader.name,TextEditorManager.commonSettings.antiForgeryHeader.value)})}),CommonFunctions.attachPostMessageEventListener($(b),CommonWindowMessages.MessageNames.textEditorInteraction,function(a,c){switch(a.interactionType){case CommonWindowMessages.TextEditorInteractionType.CloseDialog:a.needExpandAndCollapseExtensionIframe&&
f();CloseDialog();return;case CommonWindowMessages.TextEditorInteractionType.InsertHtml:InsertHtml(a.htmlContent,a.editorInstanceId,a.isEmbeddedImage);break;case CommonWindowMessages.TextEditorInteractionType.InsertLinkToFile:c={href:a.linkUrl,target:"_blank"};g(CKEDITOR.dialog.getCurrent()._.editor,a.linkName,c);break;case CommonWindowMessages.TextEditorInteractionType.UpdateItslPluginsList:editorInstance=a.editorInstanceId&&""!=a.editorInstanceId?CKEDITOR.instances[a.editorInstanceId]:CKEDITOR.dialog.getCurrent()._.editor;
editorInstance.plugins.itslpluginlist&&editorInstance.plugins.itslpluginlist.update(editorInstance,a.pluginId);break;case CommonWindowMessages.TextEditorInteractionType.InsertImageToSlideshow:null!=(a.editorInstanceId&&0<a.editorInstanceId.length?CKEDITOR.instances[a.editorInstanceId]:CKEDITOR.dialog.getCurrent()._.editor)&&(a.closeDialogAfterPerformingOperation&&(CloseDialog(),a.closeDialogAfterPerformingOperation=!1),CKEDITOR.dialog.getCurrent().insertImageToSlideshow(a.extendedData));break;case CommonWindowMessages.TextEditorInteractionType.InsertTextLink:c=
{href:a.linkUrl,target:a.linkTarget,"data-cke-saved-href":""};a.linkAdditionalAttributes&&Object.assign(c,a.linkAdditionalAttributes);g(CKEDITOR.dialog.getCurrent()._.editor,a.linkText,c);a.needExpandAndCollapseExtensionIframe&&f();break;case CommonWindowMessages.TextEditorInteractionType.ScaleDialog:a.needExpandAndCollapseExtensionIframe&&CommonFunctions.makePostMessageCallRecursivelyToTopmostFrame(b.parent,new CCL.CommonWindowMessages.GenericMessage(CommonWindowMessages.MessageNames.expandExtensionIframe));
var d=CKEDITOR.document.getWindow().getViewPaneSize();c=CKEDITOR.dialog.getCurrent();var e=c.getSize(),h=d.width;d=d.height;var k=e.width,p=e.height;e.width>h&&(k=h-(e.width-c._.contentSize.width),c.parts.contents.setStyle("width",CKEDITOR.tools.cssLength(k)),c.parts.contents.getFirst().setStyle("width","100%"),TextEditorManager.getIframeFromDialog(c).contents().find("section.main").width(CKEDITOR.tools.cssLength(k)));e.height>d&&(p=d-(e.height-c._.contentSize.height));k==e.width&&p==e.height||c.resize(k,
p);h=c.getPosition();(e.height>d||0>h.y)&&c.move(h.x,0)}a.closeDialogAfterPerformingOperation&&CloseDialog()}),CommonFunctions.attachPostMessageEventListener($(b),CommonWindowMessages.MessageNames.expandExtensionIframeDone,function(){setTimeout(function(){var a=CKEDITOR.document.getWindow().getViewPaneSize(),c=CKEDITOR.dialog.getCurrent(),b=c.getSize();c.move((a.width-b.width)/2,0,!0)},100)})))},getIframeFromDialog:function(a){return $("#"+a._.contents.iframe.undefined.domId)},refreshCustomOpenPopupButtonPosition:function(a,
c){""===a.val()?c.html(unescape(c.attr("data-temp-html"))).removeClass("ccl-ck-link-right-bottom").addClass("ccl-ck-link-center"):c.html("").removeClass("ccl-ck-link-center").addClass("ccl-ck-link-right-bottom")}};c.getOnContentLoadFunctionForIframeDialog=function(a){return function(){var f=CKEDITOR.dialog.getCurrent();if(f){f=c.getIframeFromDialog(f).attr({webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:"true",allow:"microphone *; camera *"});a&&a(f);try{f.contents().keydown(function(a){a.which===
CommonConstants.keyCodes.escape&&b.CloseDialog()}),f[0].focus()}catch(g){}}}};c.setupIframePlugin=function(a,b){var f=$.extend({addToolBarButton:!0,dialogName:void 0,dialogSrcReplacementFunction:void 0,beforeInitComplete:void 0,dialogContentLoad:void 0,emptyIframeOnClose:!1,useBuiltInCloseButton:!1},b);return{requires:["iframedialog"],init:function(b){var d=b.config[a],e=d.DialogWidth,g=d.DialogHeight,h=f.dialogName,q=0,p=c.getOnContentLoadFunctionForIframeDialog(function(a){d.IsEditorDialogTransparent&&
d.IframeCssClass&&a.addClass(d.IframeCssClass);f.dialogContentLoad&&f.dialogContentLoad(b,d,a)});b.addCommand(d.Id,{startDisabled:d.Disabled,exec:function(a){var c=h+q++,k=f.dialogSrcReplacementFunction?f.dialogSrcReplacementFunction(b,d,a):d.DialogSrc;k&&(CKEDITOR.dialog.addIframe(c,"",k,e,g,p,{onShow:function(){var a=CKEDITOR.dialog.getCurrent(),c=a.parts;!1===f.useBuiltInCloseButton&&c.close.hide();c.footer.hide();c.title.hide();d.IsEditorDialogTransparent&&a._.element.addClass("hiddenDialog");
CKEDITOR.env.ie&&a._.element.addClass("noScrollbars");a=TextEditorManager.getIframeFromDialog(a).parents("div.cke_dialog_page_contents");a.css({width:d.DialogWidth});d.DialogClass&&a.parents("table.cke_dialog_contents").addClass(d.DialogClass)},onHide:function(){f.emptyIframeOnClose&&TextEditorManager.getIframeFromDialog(CKEDITOR.dialog.getCurrent()).attr("src","")}}),a.openDialog(c))}});if(f.addToolBarButton){var v={label:d.Text,command:d.Id};"string"===typeof f.icon&&(v.icon=f.icon);b.ui.addButton(d.Id,
v)}f.beforeInitComplete&&f.beforeInitComplete(b,d)}}};c.setupContentForIframe=function(){$(b.document).keydown(function(a){a.which===CommonConstants.keyCodes.escape&&CommonFunctions.makePostMessageCall(b.parent,new CommonWindowMessages.TextEditorCloseDialogMessage)});b.focus()};c.setupPopupSettings=function(a){var f=$("#"+a.popupSettings.linkToEditId),d=$("#"+a.popupSettings.hiddenInputId);""===d.val()&&f.html(a.popupSettings.text);f.attr("data-temp-html",escape(a.popupSettings.text)).click(function(a){a.preventDefault();
b.open(f.prop("href"),"_blank")});c.refreshCustomOpenPopupButtonPosition(d,f)};c.getExtensionIdFromIdString=function(a){var c=a.indexOf(":",0);if(0>c)return null;var b=a.indexOf(":",c+1);return 0>b?null:a.substring(c+1,b)}})(window);
function InsertHtml(b,e,d){var c=e&&0<e.length?CKEDITOR.instances[e]:CKEDITOR.dialog.getCurrent()._.editor;null!=c&&(d&&(d=c.getSelection().getSelectedElement())&&(d=d.getAscendant("img",!0),d=d.getAttribute("src"),b=b.replace("src='data:'","src='"+d+"'")),"WebkitAppearance"in document.documentElement.style?c.config.mask&&IsEditorEmpty(c.name,c.config.mask)?(SetHtml(b,e),checkForMaskAndDelete(c.name)):c.insertHtml(b):(CKEDITOR.env.gecko&&c.config.mask&&checkForMaskAndDelete(c.name),c.insertHtml(b)))}
function CloseDialog(){window.CKEDITOR.env.webkit&&closeRecorderIfExists();CKEDITOR.dialog.getCurrent().hide()}function SetHtml(b,e,d){e&&0<e.length?CKEDITOR.instances[e].setData(b,function(){d||SetTextEditorFocus(e)}):CKEDITOR.dialog.getCurrent()._.editor.setData(b,function(){d||this.focus()})}
function GetTextEditorContent(b){return window.CKEDITOR?b&&0<b.length?CKEDITOR.instances[b].getData():CKEDITOR.dialog.getCurrent()?CKEDITOR.dialog.getCurrent()._.editor.getData():null:(b=$("div[data-ck-id="+b+"] > input[type=hidden]"),1===b.length?b.val():null)}function SetTextEditorFocus(b){CKEDITOR.instances[b].focus()}function RemoveEditorInstance(b){if(CKEDITOR.instances[b]){var e=CKEDITOR.instances[b].editable();e.hasFocus&&(e.blur(),e.hasFocus=!1);CKEDITOR.instances[b].destroy()}}
function IsEditorEmpty(b,e){if(b=CKEDITOR.instances[b]){b=b.getData().replace("\n","");var d=CommonFunctions.htmlEncode(b),c=CommonFunctions.htmlEncode(e);return""==b||e&&d===c||"<p>&nbsp;</p>"==b||"<div>&nbsp;</div>"==b||"<p>&#160;</p>"==b||"<p></p>"==b||"<p>"+c+"</p>"==b?!0:!1}}function IsEditorContainsMask(b,e){if(b=CKEDITOR.instances[b])return-1<b.getData().indexOf(e)}
function isTextEditorDirty(b){var e;if(b&&0<b.length&&(e=CKEDITOR.instances[b]))return e.checkDirty();if(CKEDITOR.dialog.getCurrent())return CKEDITOR.dialog.getCurrent()._.editor.checkDirty()}function isAnyTextEditorDirty(){if(window.CKEDITOR)for(var b in CKEDITOR.instances)if(!0===CKEDITOR.instances[b].checkDirty())return!0;return!1}
function resetEditorIsDirty(b){if(b&&0<b.length)return CKEDITOR.instances[b].resetDirty();if(CKEDITOR.dialog.getCurrent())return CKEDITOR.dialog.getCurrent()._.editor.resetDirty()}function resetAllTextEditorsIsDirty(){if(window.CKEDITOR)for(var b in CKEDITOR.instances)CKEDITOR.instances[b].resetDirty();return!1}function setTextEditorTextColor(b,e){b=CKEDITOR.instances[b];e=new CKEDITOR.style(CKEDITOR.config.colorButton_foreStyle,{color:e});b.applyStyle(e)}
function setTextEditorTextSize(b,e){b=CKEDITOR.instances[b];e=new CKEDITOR.style(CKEDITOR.config.fontSize_style,{size:e});b.applyStyle(e)}
var focusListener=function(b){var e=b.editor.config.mask,d=!1;IsEditorEmpty(b.editor.name,e)?(toggleWatermark(!1,b.editor),d=!0):IsEditorContainsMask(b.editor.name,e)&&(e=b.editor.getData().replace(e,""),b.editor.document.getBody().setHtml(e),d=!0);d&&(b.editor.mayBeDirty=!0,resetEditorIsDirty(b.editor.name))},blurListener=function(b){IsEditorEmpty(b.editor.name)&&b.editor.config.mask&&0<b.editor.config.mask.length&&(toggleWatermark(!0,b.editor),resetEditorIsDirty(b.editor.name))},modeListener=function(b){IsEditorEmpty(b.editor.name,
b.editor.config.mask)&&toggleWatermark("source"!=b.editor.mode,b.editor)};function toggleWatermark(b,e){if("wysiwyg"==e.mode){var d=e.document.getBody();b?(d.setHtml(e.config.mask),d.addClass("watermarked")):(d.setHtml(""),d.removeClass("watermarked"))}else b||e.setData("")}
function cleanOnFocusEvent(b,e,d){var c=CKEDITOR.instances[e];if(c){c.config.mask=b;if(d||IsEditorEmpty(c.name,c.config.mask))c.focusManager.hasFocus||setTimeout(function(){toggleWatermark(!0,c);c.mayBeDirty=!1;resetEditorIsDirty(c.name)},50);c.on("focus",focusListener);c.on("blur",blurListener);c.on("mode",modeListener);window.CKEDITOR.env.ie&&AttachListenersToInsertEvents(e)}}
function closeRecorderIfExists(){var b=TextEditorManager.getIframeFromDialog(CKEDITOR.dialog.getCurrent()),e;try{var d=b.contents();(e=d.find("object"))&&e.hide()}catch(c){}}function checkForMaskAndDelete(b){var e=null;b&&0<b.length?e=CKEDITOR.instances[b]:CKEDITOR.dialog.getCurrent()&&(e=CKEDITOR.dialog.getCurrent()._.editor);null!=e&&e.config.mask&&IsEditorEmpty(e.name,e.config.mask)&&e.document.getBody().setHtml("")}
function AttachListenersToInsertEvents(b){if(b&&0<b.length){var e=CKEDITOR.instances[b];e.on("insertText",function(d){checkForMaskAndDelete(b)});e.on("insertElement",function(d){checkForMaskAndDelete(b)});e.on("insertHtml",function(d){checkForMaskAndDelete(b)})}}
function TextEditorToolbar(b){function e(a){a.parent("ul").children("li").removeClass("active");a.addClass("active")}window[b]=this;var d=this,c,a,f;d.initialize=function(){a=d.controls.container.find("."+d.settings.fontColorSectionClass).find("li");f=d.controls.container.find("."+d.settings.fontSizeSectionClass).find("li");CKEDITOR.on("instanceReady",function(){c=CKEDITOR.instances[d.settings.editorId];c.on("selectionChange",function(){d.updateToolbarState()});a.find("a").click(function(){var a=
$(this).parent("li"),c=a.find("input:hidden:first").val();SetTextEditorFocus(d.settings.editorId);setTextEditorTextColor(d.settings.editorId,c);e(a);return!1});f.find("a").click(function(){var a=$(this).parent("li"),c=a.find("input:hidden:first").val();SetTextEditorFocus(d.settings.editorId);setTextEditorTextSize(d.settings.editorId,c);e(a);return!1});d.updateToolbarState()})};d.insertImage=function(a){InsertHtml('<img src="'+a+'" alt="" />',d.settings.editorId)};d.updateToolbarState=function(){var b=
c.getSelection();if(b){var e;if(b=$(b.getStartElement().$)){var k=b.prop("style").color;k||(e=b.parents('span[style*="color:"]:first'))&&e.prop("style")&&(k=e.prop("style").color);e=k;(k=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))?(e=[],e.push("#"),e.push(("0"+parseInt(k[1],10).toString(16)).slice(-2)),e.push(("0"+parseInt(k[2],10).toString(16)).slice(-2)),e.push(("0"+parseInt(k[3],10).toString(16)).slice(-2)),k=e.join("")):k=e;k=k.toLowerCase();e=b.prop("style").fontSize;e||(b=b.parents('span[style*="font-size:"]:first'))&&
b.prop("style")&&(e=b.prop("style").fontSize)}k||(k="#000000");e||(e=d.settings.defaultFontSizeStyle);a.removeClass("active");a.filter(":has(input[value='"+k+"']:hidden)").addClass("active");f.removeClass("active");e&&f.filter(":has(input[value='"+e+"']:hidden)").addClass("active")}}}
function TextEditorToolbarExtenderDialog(b){window[b]=this;var e=this;e.initialize=function(){e.controls.targetlink.on("click",function(b){b.preventDefault();e.show();return!1});e.controls.closelink.on("click",function(b){b.preventDefault();e.hide();return!1});e.controls.container.appendTo("body").on("click",function(b){b.preventDefault();return!1});e.controls.container.find("ul li a").on("click",function(b){e.hide();return!0});$(document).click(function(b){var c=e.controls.container;return 2>b.button&&
!c.is(":hidden")?(e.hide(),!1):!0})};e.show=function(){var b=e.controls.targetlink.offset();e.controls.container.css({top:b.top+e.controls.targetlink.height()+"px",left:b.left+"px"}).show()};e.hide=function(){e.controls.container.hide()};return e}
function TimeSlotPicker(b){function e(){g.val(a.val())}window[b]=this;var d=this,c,a,f,g,h;d.initialize=function(){c=$("#"+d.settings.clientIds.timeSlotPickerPanel);a=$("#"+d.settings.clientIds.timeSlotDropDown);f=$("#"+d.settings.clientIds.availableTimeSlotsHidden);g=$("#"+d.settings.clientIds.selectedTimeSlotIdHidden);a.change(function(){e()});if(CommonFunctions.isEdge())a.on("keydown",function(a){a.which!==CommonConstants.keyCodes.del&&a.which!==CommonConstants.keyCodes.backspace||a.preventDefault()});
var b=f.val();b&&(h=JSON.parse(b));d.toggle(!0)};d.toggle=function(a){c.toggle(a&&!!h)};d.updateFilteredTimeForDate=function(c,b){if(d.getAvailableTimeSlotsForDateFunction)if(c={date:c,dateFilterId:b},d.getAvailableTimeSlotsForDateFunction(c),h=c.availableTimeSlots,f.val(h?JSON.stringify(h):""),h&&0<h.length){a.empty();if(h&&h.length)for(c=0;c<h.length;c++)a.append("<option value='"+h[c].TimeSlotId+"'>"+h[c].Description+"</option>");d.toggle(!0);e()}else d.resetTimes()};d.resetTimes=function(){a.empty();
h=void 0;f.val(h?JSON.stringify(h):"");e();d.toggle(!1)};d.getSelectedTimeSlot=function(){if(h)for(var a=0;a<h.length;a++){var c=h[a];if(c.TimeSlotId===g.val())return c}};d.getSelectedTimeSlotId=function(){return g.val()};d.setSelectedTimeSlot=function(c){a.val(c);g.val(c)};d.getSelectedTimeSlotText=function(){return-1<a[0].selectedIndex?a[0].options[a[0].selectedIndex].text:""};return d}
function Toast(b,e,d,c,a,f){var g={controls:{},collapseAnimationDurationInMs:1500,scrollFrictionTimer:null,scrollFrictionStopTimeInMs:1200,minimalBottomMargin:20,isCollapsedHiddenField:null,initialize:function(){g.configureToastrPlugin();g.setuUpButtons();g.isCollapsedHiddenField=$("#"+f);"true"===g.isCollapsedHiddenField.val()&&setInterval(g.collapse(),100);g.attachPositionHandlersForMobileIos()},attachPositionHandlersForMobileIos:function(){if(browserSniffer.isMobileIos()){window.document.addEventListener("touchmove",
function(a){g.moveForMobileIosHandler()},!1);window.addEventListener("orientationchange",function(){g.moveForMobileIosHandler()});var a=g.calculateDefaultBottomMargin();g.setBottomMargin(a)}},configureToastrPlugin:function(){toastr.options=g.getToastrPluginOptions();toastr.success(b,e,d)},getToastrPluginOptions:function(){return{closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,toastClass:"ccl-toast",positionClass:"ccl-toast position-bottom-right",preventDuplicates:!0,onclick:null,showDuration:"0",
hideDuration:"1000",timeOut:"0",extendedTimeOut:"0",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut",tapToDismiss:!1,containerId:a}},setuUpButtons:function(){g.controls.toastContainer=$("#"+a);g.controls.messageContainer=$(".ccl-toast.ccl-default-toast");g.controls.collapseButton=g.createButton("toggle-toast-button collapse");g.controls.collapseButtonContainer=g.createCollapseButtonContainer(g.controls.collapseButton);g.controls.expandButton=g.createButton("toggle-toast-button expand");
g.controls.collapsedStateIcon=g.createCollapsedStateIcon();g.controls.expandButtonContainer=g.createExpandButtonContainer();g.setUpExpandButton();g.setUpCollapseButton()},createCollapsedStateIcon:function(){return $("<img/>",{src:c,style:"background-color: white;"})},createButton:function(a){return $("<button/>",{"class":a})},createExpandButtonContainer:function(){return $("<div />",{"class":"expand-button-container"}).append(g.controls.expandButton).append($("<br />")).append(g.controls.collapsedStateIcon)},
createCollapseButtonContainer:function(a){return $("<div />",{"class":"collapse-button-container"}).append(a)},setUpExpandButton:function(){g.controls.toastContainer.prepend(g.controls.expandButtonContainer);g.controls.expandButtonContainer.hide();g.controls.expandButton.click(function(){g.isCollapsedHiddenField.val("false");g.controls.messageContainer.css("margin-left","0");g.controls.expandButtonContainer.hide();g.controls.collapseButton.show();g.controls.toastContainer.animate({right:"+="+g.controls.toastContainer.css("right").replace("-",
"")},g.collapseAnimationDurationInMs)})},setUpCollapseButton:function(){g.controls.toastContainer.prepend(g.controls.collapseButtonContainer);g.controls.collapseButton.click(function(){g.onCollapseButtonClick()})},onCollapseButtonClick:function(){g.isCollapsedHiddenField.val("true");g.controls.collapseButton.unbind("click");g.controls.toastContainer.animate({right:"-="+g.controls.toastContainer.css("width")},g.collapseAnimationDurationInMs,function(){g.collapse();g.controls.collapseButton.click(function(){g.onCollapseButtonClick()})})},
collapse:function(){g.controls.toastContainer.css("right","-"+g.controls.toastContainer.width()+"px");g.controls.collapseButton.hide();g.controls.expandButtonContainer.show();g.controls.messageContainer.css("margin-left",g.controls.expandButtonContainer.width())},getScreenHeight:function(){return g.isMobileLandscape()?screen.width:screen.height},isMobileLandscape:function(){return 90===Math.abs(window.orientation)?!0:!1},calculateDefaultBottomMargin:function(){return $(parent.document).height()-g.getScreenHeight()+
$("#"+a).height()},setBottomMargin:function(c){$("#"+a).css("margin-bottom",c)},calculateBottomMarginForMobileIos:function(){var a=g.calculateDefaultBottomMargin()-$(parent.document).scrollTop();return 0>=$(parent.document).scrollTop()?g.calculateDefaultBottomMargin():a<g.minimalBottomMargin?g.minimalBottomMargin:a},moveForMobileIosHandler:function(){null!==g.scrollFrictionTimer&&clearTimeout(g.scrollFrictionTimer);g.scrollFrictionTimer=setTimeout(function(){var a=g.calculateBottomMarginForMobileIos();
g.setBottomMargin(a)},g.scrollFrictionStopTimeInMs)}};g.initialize();return{}}
(function(b){b(["jquery"],function(b){return function(){function d(a,c){a||(a=f());h=b("#"+a.containerId);if(h.length)return h;c&&(h=b("<div/>").attr("id",a.containerId).addClass(a.positionClass).attr("aria-live","polite").attr("role","alert"),h.appendTo(b(a.target)));return h}function c(a,c,f){f=f&&f.force?f.force:!1;return a&&(f||0===b(":focus",a).length)?(a[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){e(a)}}),!0):!1}function a(a){function c(a){if(!b(":focus",z).length||
a)return clearTimeout(F.intervalId),z[r.hideMethod]({duration:r.hideDuration,easing:r.hideEasing,complete:function(){e(z);if(r.onHidden&&"hidden"!==M.state)r.onHidden();M.state="hidden";M.endTime=new Date;k&&k(M)}})}function g(){if(0<r.timeOut||0<r.extendedTimeOut)C=setTimeout(c,r.extendedTimeOut),F.maxHideTime=parseFloat(r.extendedTimeOut),F.hideEta=(new Date).getTime()+F.maxHideTime}function m(){clearTimeout(C);F.hideEta=0;z.stop(!0,!0)[r.showMethod]({duration:r.showDuration,easing:r.showEasing})}
function q(){var a=(F.hideEta-(new Date).getTime())/F.maxHideTime*100;G.width(a+"%")}var r=f(),t=a.iconClass||r.iconClass;"undefined"!==typeof a.optionsOverride&&(r=b.extend(r,a.optionsOverride),t=a.optionsOverride.iconClass||t);a:{if(r.preventDuplicates)if(a.message===n){var y=!0;break a}else n=a.message;y=!1}if(!y){l++;h=d(r,!0);var C=null,z=b("<div/>");y=b("<div/>");var E=b("<div/>"),G=b("<div/>"),D=b(r.closeHtml),F={intervalId:null,hideEta:null,maxHideTime:null},M={toastId:l,state:"visible",startTime:new Date,
options:r,map:a};a.iconClass&&z.addClass(r.toastClass).addClass(t);a.title&&(y.append(a.title).addClass(r.titleClass),z.append(y));a.message&&(E.append(a.message).addClass(r.messageClass),z.append(E));r.closeButton&&(D.addClass("toast-close-button").attr("role","button"),z.prepend(D));r.progressBar&&(G.addClass("toast-progress"),z.prepend(G));r.newestOnTop?h.prepend(z):h.append(z);z.hide();z[r.showMethod]({duration:r.showDuration,easing:r.showEasing,complete:r.onShown});0<r.timeOut&&(C=setTimeout(c,
r.timeOut),F.maxHideTime=parseFloat(r.timeOut),F.hideEta=(new Date).getTime()+F.maxHideTime,r.progressBar&&(F.intervalId=setInterval(q,10)));(function(){z.hover(m,g);!r.onclick&&r.tapToDismiss&&z.click(c);r.closeButton&&D&&D.click(function(a){a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble&&!0!==a.cancelBubble&&(a.cancelBubble=!0);c(!0)});r.onclick&&z.click(function(){r.onclick();c()})})();k&&k(M);r.debug&&console&&console.log(M);return z}}function f(){return b.extend({},{tapToDismiss:!0,
toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1E3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1E3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5E3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:'<button type="button">&times;</button>',
newestOnTop:!0,preventDuplicates:!1,progressBar:!1},m.options)}function e(a){h||(h=d());a.is(":visible")||(a.remove(),0===h.children().length&&(h.remove(),n=void 0))}var h,k,l=0,m={clear:function(a,e){var g=f();h||d(g);if(!c(a,g,e))for(a=h.children(),e=a.length-1;0<=e;e--)c(b(a[e]),g)},remove:function(a){var c=f();h||d(c);a&&0===b(":focus",a).length?e(a):h.children().length&&h.remove()},error:function(c,b,d){return a({type:"error",iconClass:f().iconClasses.error,message:c,optionsOverride:d,title:b})},
getContainer:d,info:function(c,b,d){return a({type:"info",iconClass:f().iconClasses.info,message:c,optionsOverride:d,title:b})},options:{},subscribe:function(a){k=a},success:function(c,b,d){return a({type:"success",iconClass:f().iconClasses.success,message:c,optionsOverride:d,title:b})},version:"2.1.1",warning:function(c,b,d){return a({type:"warning",iconClass:f().iconClasses.warning,message:c,optionsOverride:d,title:b})}},n;return m}()})})("function"===typeof define&&define.amd?define:function(b,
e){"undefined"!==typeof module&&module.exports?module.exports=e(require("jquery")):window.toastr=e(window.jQuery)});
function Toggle(b){function e(){0<k.length&&"INPUT"==k[0].tagName&&"checkbox"==k.attr("type")&&(m.bind("mousedown",function(){return!1}),n.bind("mousedown",function(){return!1}),"true"===q&&(l.bind(h.options.clientClickEventName,c),k.bind("change",d),k.on("keydown",function(a){13===a.which&&c()})))}function d(){g()?a():f();k.trigger(h.options.clientStateChangedEventName,[{toggleInstanceId:b}]);l.focus()}function c(){k.is(":disabled")||(k.prop("checked",!g()),d())}function a(){l.removeClass(p.toggleOff).addClass(p.toggleOn);
n.removeClass(p.checkedLabel).addClass(p.uncheckedLabel);m.removeClass(p.uncheckedLabel).addClass(p.checkedLabel);k.prop("checked",!0)}function f(){l.removeClass(p.toggleOn).addClass(p.toggleOff);m.removeClass(p.checkedLabel).addClass(p.uncheckedLabel);n.removeClass(p.uncheckedLabel).addClass(p.checkedLabel);k.prop("checked",!1)}function g(){return k.prop("checked")}window[b]=this;var h=this,k,l,m,n,q,p;h.initialize=function(){k=h.controls.checkbox;l=h.controls.toggleBox;m=h.controls.labelOn;m.attr("title");
n=h.controls.labelOff;n.attr("title");q=h.options.enabled;p=h.options.cssClassess;e()};h.revertState=function(){g()?f():a()};h.clone=function(a,c){c=new Toggle(c);c.controls={checkbox:a.find(h.controls.checkbox.selector),toggleBox:a.find(h.controls.toggleBox.selector),labelOn:a.find(h.controls.labelOn.selector),labelOff:a.find(h.controls.labelOff.selector)};c.options=h.options;c.initialize()};h.toggleOnOff=function(c){c?a():f()};h.isChecked=function(){return g()}}
function ToolTip(b,e){function d(a,b,f,d){X=a;!b&&f&&(clearTimeout(O),O=setTimeout(function(){clearTimeout(J);d&&k();c(X)},m.settings.showPopupTimeout))}function c(a){E=z.scrollLeft();G=z.scrollTop();n.offset();f();$(document).trigger("hideTooltips");R=q.outerHeight(!0);S=q.outerWidth(!0);p||(p=h(),p.insertAfter(q));M=p.outerHeight(!0);H=p.outerWidth(!0);u=M+1;w=z.width()+E;r=z.height()+G;n.height();if(0>=a.pageX&&0>=a.pageY){var c=$(a.target),b=c.offset();a.pageX=b.left+c.outerWidth()/2;a.pageY=
b.top+c.outerHeight()/2}y=a.pageX?a.pageX:a.originalEvent.touches[0].pageX;C=a.pageY?a.pageY:a.originalEvent.touches[0].pageY;Q=C-G>R+u;L=r-C>R+u;A=Q&&!L;v||(v=$("<div></div>").appendTo(p));v.attr("class",A?D.arrowDown:D.arrowUp);q.show();p.show();v.show();a=S/2;q.css({top:A?C-R-u:C+u,left:y-a<E?E:y+a>w?w-S:y-a});F=q.offset();t=F.left+q.outerWidth();a=A?F.top+R-1:F.top+1-M;c=t-H;c=y>c?c:y-H/2;y<F.left+H/2&&(c=F.left);p.css({top:a,left:c})}function a(){q&&p&&(q.hide(),p.hide())}function f(){q||(q=
g(),B?q.appendTo($("#"+B)):q.appendTo("form"))}function g(){var c=$("<div></div>").addClass(D.tooltipPopup).hover(function(){clearTimeout(J)},function(){J=setTimeout(function(){a()},m.settings.hidePopupTimeout)});m.autoWidth&&$(c).addClass(D.tooltipAutoWidth);$("<div></div>").addClass(D.tooltipPath).appendTo(c).html(m.path);$("<div></div>").addClass(D.tooltipTitle).appendTo(c).html(m.title);$("<div></div>").addClass(D.tooltipDescription).appendTo(c).html(m.description);return c}function h(){return $("<div></div>").addClass(D.arrowContainer).hover(function(){clearTimeout(J)},
function(){J=setTimeout(function(){a()},m.settings.hidePopupTimeout)})}function k(){if(m.dataSource){var a=n.data(m.settings.attributes.idDataKey),c=m.dataSource[a];c?l(c.title,c.description,c.path):(l("",""),m.loadDataClientFunction&&m.loadDataClientFunction(a).done(function(){(c=m.dataSource[a])&&l(c.title,c.description,c.path)}))}else l(n.data(m.settings.attributes.titleDataKey),n.data(m.settings.attributes.descriptionDataKey))}function l(a,c,b){m.title=a;m.description=c;m.path=b;if(q)if(q.find("."+
D.tooltipTitle).html(m.title?m.title:""),q.find("."+D.tooltipDescription).html(m.title||m.description?m.description:m.settings.missingDataText),b&&0!==b.length){a=q.find("."+D.tooltipPath).html("");c=Math.round(100/b.length)+"%";for(var f=b.length-1;0<=f;f--)$("<div></div>").html(b[f]).css("max-width",c).appendTo(a);a.show()}else q.find("."+D.tooltipPath).hide()}window[b]=this;var m=this,n=e,q,p,v,u,w,r,t,y,C,z=$(window),E,G,D,F,M,R,S,H,J,O,L,Q,A,X,B;m.initialize=function(){m.dataSource&&(m.title=
m.dataSource[m.dataKey].title,m.description=m.dataSource[m.dataKey].description,m.autoWidth=m.dataSource[m.dataKey].autoWidth);D=m.settings.cssClasses;B=m.settings.toolTipContainerId;$(document).bind("hideTooltips",function(){a()});n.is("a")||n.addClass(D.linkToTooltip);var b=!!document.ontouchstart;n.hover(function(a){d(a,b,!0,!1)},function(){b||(clearTimeout(O),J=setTimeout(function(){a()},m.settings.hidePopupTimeout))}).mousemove(function(a){d(a,b,q&&q.is(":visible"),!1)}).on("ensureTooltipExists",
function(){f()}).on("click",function(b){clearTimeout(J);clearTimeout(O);q&&q.is(":visible")?a():c(b)})};m.initializeUnobtrusive=function(){D=m.settings.cssClasses;B=m.settings.toolTipContainerId;$(document).on("hideTooltips",function(){a()}).on("mouseenter","["+m.settings.attributes.id+"],["+m.settings.attributes.title+"], ["+m.settings.attributes.description+"]",function(b){n=$(this);var e=!!document.ontouchstart;n.data("tooltip_initialized")||(n.is("a")||n.addClass(D.linkToTooltip),n.mousemove(function(a){d(a,
e,q&&q.is(":visible"),!0)}).on("mouseleave",function(){clearTimeout(O);J=setTimeout(function(){clearTimeout(J);a()},m.settings.hidePopupTimeout)}).on("ensureTooltipExists",function(){f()}).on("click",function(b){clearTimeout(J);clearTimeout(O);q&&q.is(":visible")?a():(k(),c(b))}),n.data("tooltip_initialized",!0));d(b,e,!0,!0)});f()};return m}
function TwoControlsSynchronizationObject(b){var e={},d={};d.callback=b;e.onFirstControlInitialized=function(c){d.control1=c;"undefined"!=typeof d.control2&&d.callback(d.control1,d.control2)};e.onSecondControlInitialized=function(c){d.control2=c;"undefined"!=typeof d.control1&&d.callback(d.control1,d.control2)};return e}UploaderSenderOptionsConstants={fileRepoData:"fileRepoData"};
function TrackXiti(b,e,d,c,a,f,g,h,k){xt_multc="&x1="+b+"&x2="+e+"&x3="+d+"&x4="+c;window.xtparam=null!=window.xtparam?window.xtparam+xt_multc:xt_multc;xtidc=xt_at=a;xt_ac=e;window.xtparam=null!=window.xtparam?window.xtparam+("&ac="+xt_ac+"&at="+xt_at):"&ac="+xt_ac+"&at="+xt_at;xtnv=document;xtsd=k;xtsite=f;xtn2=g;xtpage=h;xtdi=""}
(function(b){b.fn.autogrow=function(e){this.filter("textarea").each(function(){var d=this,c=b(d),a=c.height(),f,g=14;e&&e.hasOwnProperty("additionalHeight")&&(g=e.additionalHeight);var h=b("<div></div>").css({position:"absolute",top:-1E4,left:-1E4,fontSize:c.css("fontSize"),fontFamily:c.css("fontFamily"),fontWeight:e&&e.hasOwnProperty("fontWeight")?e.fontWeight:c.css("fontWeight"),padding:c.css("padding"),border:c.css("border"),resize:"none"}).appendTo(document.body),k=function(){var b=c.css("word-wrap");
h.css({width:c.width(),lineHeight:c.css("lineHeight"),"word-wrap":b?b:"break-word"});b=(e&&e.whiteSpaceMatters?d.value:d.value.trim()).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(a){for(var c="",b=0;b<a.length-1;b++)c+="&nbsp;";return c+" "});h.html(b&&0<b.length?b:c.prop("placeholder"));c.css("height",Math.max(h.height()+g,a))};c.bind("change keyup keydown input paste",k);b(window).resize(function(){f&&
clearTimeout(f);f=setTimeout(function(){k.apply(d)},200)});k.apply(d)});return self}})(jQuery);
jQuery.cookie=function(b,e,d){if(1<arguments.length&&"[object Object]"!==String(e)){d=jQuery.extend({},d);if(null===e||void 0===e)d.expires=-1;if("number"===typeof d.expires){var c=d.expires,a=d.expires=new Date;a.setDate(a.getDate()+c)}e=String(e);return document.cookie=[encodeURIComponent(b),"=",d.raw?e:encodeURIComponent(e),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=e||{};a=d.raw?function(a){return a}:
decodeURIComponent;return(c=(new RegExp("(?:^|; )"+encodeURIComponent(b)+"=([^;]*)")).exec(document.cookie))?a(c[1]):null};
(function(){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};self.linkify={};(function(e){function d(a,c){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},f=Object.create(a.prototype),d;for(d in b)f[d]=
b[d];f.constructor=c;c.prototype=f;return c}function c(a){a=a||{};this.defaultProtocol=a.defaultProtocol||m.defaultProtocol;this.events=a.events||m.events;this.format=a.format||m.format;this.formatHref=a.formatHref||m.formatHref;this.nl2br=a.nl2br||m.nl2br;this.tagName=a.tagName||m.tagName;this.target=a.target||m.target;this.validate=a.validate||m.validate;this.ignoreTags=[];this.attributes=a.attributes||a.linkAttributes||m.attributes;this.className=a.className||a.linkClass||m.className;a=a.ignoreTags||
m.ignoreTags;for(var c=0;c<a.length;c++)this.ignoreTags.push(a[c].toUpperCase())}function a(a){return a}function f(){return function(a){this.j=[];this.T=a||null}}function g(a,c,b,f){for(var d=0,e=a.length,g=[],h=void 0;d<e&&(h=c.next(a[d]));)c=h,d++;if(d>=e)return[];for(;d<e-1;)h=new p(f),g.push(h),c.on(a[d],h),c=h,d++;h=new p(b);g.push(h);c.on(a[e-1],h);return g}function h(){return function(a){a&&(this.v=a)}}function k(a){a=a?{v:a}:{};return d(u,h(),a)}function l(a){return a instanceof w||a instanceof
L}var m={defaultProtocol:"http",events:null,format:a,formatHref:a,nl2br:!1,tagName:"a",target:function(a,c){return"url"===c?"_blank":null},validate:!0,ignoreTags:[],attributes:null,className:"linkified"};c.prototype={resolve:function(a){var c=a.toHref(this.defaultProtocol);return{formatted:this.get("format",a.toString(),a),formattedHref:this.get("formatHref",c,a),tagName:this.get("tagName",c,a),className:this.get("className",c,a),target:this.get("target",c,a),events:this.getObject("events",c,a),attributes:this.getObject("attributes",
c,a)}},check:function(a){return this.get("validate",a.toString(),a)},get:function(a,c,f){var d=this[a];if(!d)return d;switch("undefined"===typeof d?"undefined":b(d)){case "function":return d(c,f.type);case "object":return a=d[f.type]||m[a],"function"===typeof a?a(c,f.type):a}return d},getObject:function(a,c,b){a=this[a];return"function"===typeof a?a(c,b.type):a}};var n=Object.freeze({defaults:m,Options:c,contains:function(a,c){for(var b=0;b<a.length;b++)if(a[b]===c)return!0;return!1}}),q=f();q.prototype=
{defaultTransition:!1,on:function(a,c){if(a instanceof Array){for(var b=0;b<a.length;b++)this.j.push([a[b],c]);return this}this.j.push([a,c]);return this},next:function(a){for(var c=0;c<this.j.length;c++){var b=this.j[c],f=b[1];if(this.test(a,b[0]))return f}return this.defaultTransition},accepts:function(){return!!this.T},test:function(a,c){return a===c},emit:function(){return this.T}};var p=d(q,f(),{test:function(a,c){return a===c||c instanceof RegExp&&c.test(a)}}),v=d(q,f(),{jump:function(a){var c=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,b=this.next(new a(""));b===this.defaultTransition?(b=new this.constructor(c),this.on(a,b)):c&&(b.T=c);return b},test:function(a,c){return a instanceof c}}),u=h();u.prototype={toString:function(){return this.v+""}};var w=k(),r=k("@"),t=k(":"),y=k("."),C=k(),z=k(),E=k("\n"),G=k(),D=k("+"),F=k("#"),M=k(),R=k("mailto:"),S=k("?"),H=k("/"),J=k("_"),O=k(),L=k(),Q=k(),A=k("{"),X=k("["),B=k("<"),Z=k("("),P=k("}"),V=k("]"),aa=k(">"),ka=k(")"),Aa=k("&"),
ib=Object.freeze({Base:u,DOMAIN:w,AT:r,COLON:t,DOT:y,PUNCTUATION:C,LOCALHOST:z,NL:E,NUM:G,PLUS:D,POUND:F,QUERY:S,PROTOCOL:M,MAILTO:R,SLASH:H,UNDERSCORE:J,SYM:O,TLD:L,WS:Q,OPENBRACE:A,OPENBRACKET:X,OPENANGLEBRACKET:B,OPENPAREN:Z,CLOSEBRACE:P,CLOSEBRACKET:V,CLOSEANGLEBRACKET:aa,CLOSEPAREN:ka,AMPERSAND:Aa}),Ta="aaa aarp abb abbott abogado ac academy accenture accountant accountants aco active actor ad adac ads adult ae aeg aero af afl ag agency ai aig airforce airtel al alibaba alipay allfinanz alsace am amica amsterdam an analytics android ao apartments app apple aq aquarelle ar aramco archi army arpa arte as asia associates at attorney au auction audi audio author auto autos avianca aw ax axa az azure ba baidu band bank bar barcelona barclaycard barclays bargains bauhaus bayern bb bbc bbva bcg bcn bd be beats beer bentley berlin best bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday bloomberg blue bm bms bmw bn bnl bnpparibas bo boats boehringer bom bond boo book boots bosch bostik bot boutique br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call camera camp cancerresearch canon capetown capital car caravan cards care career careers cars cartier casa cash casino cat catering cba cbn cc cd ceb center ceo cern cf cfa cfd cg ch chanel channel chase chat cheap chloe christmas chrome church ci cipriani circle cisco citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com commbank community company compare computer comsec condos construction consulting contact contractors cooking cool coop corsica country coupon coupons courses cr credit creditcard creditunion cricket crown crs cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance date dating datsun day dclk de dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev diamonds diet digital direct directory discount dj dk dm dnp do docs dog doha domains download drive dubai durban dvag dz earth eat ec edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er erni es esq estate et eu eurovision eus events everbank exchange expert exposed express fage fail fairwinds faith family fan fans farm fashion fast feedback ferrero fi film final finance financial firestone firmdale fish fishing fit fitness fj fk flickr flights florist flowers flsmidth fly fm fo foo football ford forex forsale forum foundation fox fr fresenius frl frogans frontier fund furniture futbol fyi ga gal gallery gallup game garden gb gbiz gd gdn ge gea gent genting gf gg ggee gh gi gift gifts gives giving gl glass gle global globo gm gmail gmbh gmo gmx gn gold goldpoint golf goo goog google gop got gov gp gq gr grainger graphics gratis green gripe group gs gt gu gucci guge guide guitars guru gw gy hamburg hangout haus hdfcbank health healthcare help helsinki here hermes hiphop hitachi hiv hk hm hn hockey holdings holiday homedepot homes honda horse host hosting hoteles hotmail house how hr hsbc ht hu hyundai ibm icbc ice icu id ie ifm iinet il im immo immobilien in industries infiniti info ing ink institute insurance insure int international investments io ipiranga iq ir irish is iselect ist istanbul it itau iwc jaguar java jcb je jetzt jewelry jlc jll jm jmp jo jobs joburg jot joy jp jpmorgan jprs juegos kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kitchen kiwi km kn koeln komatsu kp kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster land landrover lanxess lasalle lat latrobe law lawyer lb lc lds lease leclerc legal lexus lgbt li liaison lidl life lifeinsurance lifestyle lighting like limited limo lincoln linde link live living lixil lk loan loans local locus lol london lotte lotto love lr ls lt ltd ltda lu lupin luxe luxury lv ly ma madrid maif maison makeup man management mango market marketing markets marriott mba mc md me med media meet melbourne meme memorial men menu meo mg mh miami microsoft mil mini mk ml mm mma mn mo mobi mobily moda moe moi mom monash money montblanc mormon mortgage moscow motorcycles mov movie movistar mp mq mr ms mt mtn mtpc mtr mu museum mutuelle mv mw mx my mz na nadex nagoya name natura navy nc ne nec net netbank network neustar new news nexus nf ng ngo nhk ni nico nikon ninja nissan nl no nokia norton nowruz np nr nra nrw ntt nu nyc nz obi office okinawa om omega one ong onl online ooo oracle orange org organic origins osaka otsuka ovh pa page pamperedchef panerai paris pars partners parts party passagens pe pet pf pg ph pharmacy philips photo photography photos physio piaget pics pictet pictures pid pin ping pink pizza pk pl place play playstation plumbing plus pm pn pohl poker porn post pr praxi press pro prod productions prof promo properties property protection ps pt pub pw pwc py qa qpon quebec quest racing re read realtor realty recipes red redstone redumbrella rehab reise reisen reit ren rent rentals repair report republican rest restaurant review reviews rexroth rich ricoh rio rip ro rocher rocks rodeo room rs rsvp ru ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsung sandvik sandvikcoromant sanofi sap sapo sarl sas saxo sb sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scor scot sd se seat security seek select sener services seven sew sex sexy sfr sg sh sharp shell shia shiksha shoes show shriram si singles site sj sk ski skin sky skype sl sm smile sn sncf so soccer social softbank software sohu solar solutions song sony soy space spiegel spot spreadbetting sr srl st stada star starhub statefarm statoil stc stcgroup stockholm storage store studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiss sx sy sydney symantec systems sz tab taipei taobao tatamotors tatar tattoo tax taxi tc tci td team tech technology tel telecity telefonica temasek tennis tf tg th thd theater theatre tickets tienda tiffany tips tires tirol tj tk tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tp tr trade trading training travel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubs ug uk unicom university uno uol us uy uz va vacations vana vc ve vegas ventures verisign versicherung vet vg vi viajes video viking villas vin vip virgin vision vista vistaprint viva vlaanderen vn vodka volkswagen vote voting voto voyage vu vuelos wales walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weir wf whoswho wien wiki williamhill win windows wine wme wolterskluwer work works world ws wtc wtf xbox xerox xin xperia xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama youtube yt za zara zero zip zm zone zuerich zw".split(" "),
Ia="0123456789".split(""),Ba="0123456789abcdefghijklmnopqrstuvwxyz".split(""),Ua=" \f\r\t\x0B\u00a0\u1680\u180e".split(""),W=[],K=function(a){return new p(a)},Y=K(),Ja=K(G),la=K(w),oa=K(),Ka=K(Q);Y.on("@",K(r)).on(".",K(y)).on("+",K(D)).on("#",K(F)).on("?",K(S)).on("/",K(H)).on("_",K(J)).on(":",K(t)).on("{",K(A)).on("[",K(X)).on("<",K(B)).on("(",K(Z)).on("}",K(P)).on("]",K(V)).on(">",K(aa)).on(")",K(ka)).on("&",K(Aa)).on([",",";","!",'"',"'"],K(C));Y.on("\n",K(E)).on(Ua,Ka);Ka.on(Ua,Ka);for(var La=
0;La<Ta.length;La++){var jb=g(Ta[La],Y,L,w);W.push.apply(W,jb)}var Va=g("file",Y,w,w),Wa=g("ftp",Y,w,w),Xa=g("http",Y,w,w),kb=g("mailto",Y,w,w);W.push.apply(W,Va);W.push.apply(W,Wa);W.push.apply(W,Xa);var lb=Va.pop(),mb=Wa.pop(),nb=Xa.pop(),ob=kb.pop(),Ca=K(w),Da=K(M),pb=K(R);mb.on("s",Ca).on(":",Da);nb.on("s",Ca).on(":",Da);W.push(Ca);lb.on(":",Da);Ca.on(":",Da);ob.on(":",pb);var qb=g("localhost",Y,z,w);W.push.apply(W,qb);Y.on(Ia,Ja);Ja.on("-",oa).on(Ia,Ja).on(Ba,la);la.on("-",oa).on(Ba,la);for(var Ma=
0;Ma<W.length;Ma++)W[Ma].on("-",oa).on(Ba,la);oa.on("-",oa).on(Ia,la).on(Ba,la);Y.defaultTransition=K(O);var Ya=function(a){for(var c=a.replace(/[A-Z]/g,function(a){return a.toLowerCase()}),b=a.length,f=[],d=0;d<b;){for(var e=Y,g=null,h=0,k=null,m=-1;d<b&&(g=e.next(c[d]));)e=g,e.accepts()?(m=0,k=e):0<=m&&m++,h++,d++;0>m||(d-=m,h-=m,e=k.emit(),f.push(new e(a.substr(d-h,h))))}return f},rb=Object.freeze({State:p,TOKENS:ib,run:Ya,start:Y}),da=h();da.prototype={type:"token",isLink:!1,toString:function(){for(var a=
[],c=0;c<this.v.length;c++)a.push(this.v[c].toString());return a.join("")},toHref:function(){return this.toString()},toObject:function(){return{type:this.type,value:this.toString(),href:this.toHref(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"http")}}};var Za=d(da,h(),{type:"email",isLink:!0}),Na=d(da,h(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),Oa=d(da,h(),{type:"text"}),$a=d(da,h(),{type:"nl"}),ba=d(da,h(),{type:"url",isLink:!0,toHref:function(){for(var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:"http",c=!1,b=!1,f=this.v,d=[],e=0;f[e]instanceof M;)c=!0,d.push(f[e].toString().toLowerCase()),e++;for(;f[e]instanceof H;)b=!0,d.push(f[e].toString()),e++;for(;l(f[e]);)d.push(f[e].toString().toLowerCase()),e++;for(;e<f.length;e++)d.push(f[e].toString());d=d.join("");c||b||(d=a+"://"+d);return d},hasProtocol:function(){return this.v[0]instanceof M}}),sb=Object.freeze({Base:da,MAILTOEMAIL:Za,EMAIL:Na,NL:$a,TEXT:Oa,URL:ba}),I=function(a){return new v(a)},
Ea=I(),ab=I(),bb=I(),Pa=I(),cb=I(),ca=I(),Fa=I(),pa=I(ba),db=I(),eb=I(ba),N=I(ba),qa=I(),ra=I(),sa=I(),ta=I(),ua=I(),ea=I(ba),fa=I(ba),ha=I(ba),ia=I(ba),va=I(),wa=I(),xa=I(),ya=I(),ma=I(),Qa=I(),Ga=I(Na),fb=I(),tb=I(Na),ja=I(Za),Ra=I(),na=I(),Ha=I(),gb=I(),ub=I($a);Ea.on(E,ub).on(M,ab).on(R,bb).on(H,Pa);ab.on(H,Pa);Pa.on(H,cb);Ea.on(L,ca).on(w,ca).on(z,pa).on(G,ca);cb.on(L,N).on(w,N).on(G,N).on(z,N);ca.on(y,Fa);ma.on(y,Qa);Fa.on(L,pa).on(w,ca).on(G,ca).on(z,ca);Qa.on(L,Ga).on(w,ma).on(G,ma).on(z,
ma);pa.on(y,Fa);Ga.on(y,Qa);pa.on(t,db).on(H,N);db.on(G,eb);eb.on(H,N);Ga.on(t,fb);fb.on(G,tb);var T=[w,r,z,G,D,F,M,H,L,J,O,Aa],U=[t,y,S,C,P,V,aa,ka,A,X,B,Z];N.on(A,ra).on(X,sa).on(B,ta).on(Z,ua);qa.on(A,ra).on(X,sa).on(B,ta).on(Z,ua);ra.on(P,N);sa.on(V,N);ta.on(aa,N);ua.on(ka,N);ea.on(P,N);fa.on(V,N);ha.on(aa,N);ia.on(ka,N);va.on(P,N);wa.on(V,N);xa.on(aa,N);ya.on(ka,N);ra.on(T,ea);sa.on(T,fa);ta.on(T,ha);ua.on(T,ia);ra.on(U,va);sa.on(U,wa);ta.on(U,xa);ua.on(U,ya);ea.on(T,ea);fa.on(T,fa);ha.on(T,
ha);ia.on(T,ia);ea.on(U,ea);fa.on(U,fa);ha.on(U,ha);ia.on(U,ia);va.on(T,ea);wa.on(T,fa);xa.on(T,ha);ya.on(T,ia);va.on(U,va);wa.on(U,wa);xa.on(U,xa);ya.on(U,ya);N.on(T,N);qa.on(T,N);N.on(U,qa);qa.on(U,qa);bb.on(L,ja).on(w,ja).on(G,ja).on(z,ja);ja.on(T,ja).on(U,Ra);Ra.on(T,ja).on(U,Ra);var za=[w,G,D,F,S,J,O,Aa,L];ca.on(za,na).on(r,Ha);pa.on(za,na).on(r,Ha);Fa.on(za,na);na.on(za,na).on(r,Ha).on(y,gb);gb.on(za,na);Ha.on(L,ma).on(w,ma).on(z,Ga);var hb=function(a){for(var c=a.length,b=0,f=[],d=[];b<c;){for(var e=
Ea,g=null,h=null,k=0,m=null,l=-1;b<c&&!(g=e.next(a[b]));)d.push(a[b++]);for(;b<c&&(h=g||e.next(a[b]));)g=null,e=h,e.accepts()?(l=0,m=e):0<=l&&l++,b++,k++;if(0>l)for(k=b-k;k<b;k++)d.push(a[k]);else 0<d.length&&(f.push(new Oa(d)),d=[]),b-=l,k-=l,e=m.emit(),f.push(new e(a.slice(b-k,b)))}0<d.length&&f.push(new Oa(d));return f},vb=Object.freeze({State:v,TOKENS:sb,run:hb,start:Ea});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var Sa=function(a){return hb(Ya(a))};
e.find=function(a){for(var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,b=Sa(a),f=[],d=0;d<b.length;d++){var e=b[d];!e.isLink||c&&e.type!==c||f.push(e.toObject())}return f};e.inherits=d;e.options=n;e.parser=vb;e.scanner=rb;e.test=function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,b=Sa(a);return 1===b.length&&b[0].isLink&&(!c||b[0].type===c)};e.tokenize=Sa})(self.linkify)})();"use strict";
(function(b,e){e=function(b){function c(a){this.named=a}function a(a,c){this.delegate=a;this.entityParser=c;this.input=this.state=null;this.tagColumn=this.tagLine=this.column=this.line=this.index=-1;this.reset()}function f(c,b){this.token=null;this.startLine=1;this.startColumn=0;this.options=b||{};this.tokenizer=new a(this,c)}var d={nbsp:"\u00a0"},e=/^#[xX]([A-Fa-f0-9]+)$/,k=/^#([0-9]+)$/,l=/^([A-Za-z0-9]+)$/;c.prototype.parse=function(a){if(a){var c=a.match(e);if(c)return"&#x"+c[1]+";";if(c=a.match(k))return"&#"+
c[1]+";";if(c=a.match(l))return this.named[c[1]]||"&"+c[1]+";"}};var m=/[\t\n\f ]/,n=/[A-Za-z]/,q=/\r\n?/g;a.prototype={reset:function(){this.state="beforeData";this.input="";this.index=0;this.line=1;this.column=0;this.tagColumn=this.tagLine=-1;this.delegate.reset()},tokenize:function(a){this.reset();this.tokenizePart(a);this.tokenizeEOF()},tokenizePart:function(a){for(this.input+=a.replace(q,"\n");this.index<this.input.length;)this.states[this.state].call(this)},tokenizeEOF:function(){this.flushData()},
flushData:function(){"data"===this.state&&(this.delegate.finishData(),this.state="beforeData")},peek:function(){return this.input.charAt(this.index)},consume:function(){var a=this.peek();this.index++;"\n"===a?(this.line++,this.column=0):this.column++;return a},consumeCharRef:function(){var a=this.input.indexOf(";",this.index);if(-1!==a){var c=this.input.slice(this.index,a);if(a=this.entityParser.parse(c)){for(c=c.length;c;)this.consume(),c--;this.consume();return a}}},markTagStart:function(){this.tagLine=
this.line;this.tagColumn=this.column;this.delegate.tagOpen&&this.delegate.tagOpen()},states:{beforeData:function(){"<"===this.peek()?(this.state="tagOpen",this.markTagStart(),this.consume()):(this.state="data",this.delegate.beginData())},data:function(){var a=this.peek();"<"===a?(this.delegate.finishData(),this.state="tagOpen",this.markTagStart(),this.consume()):"&"===a?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(a))},tagOpen:function(){var a=
this.consume();"!"===a?this.state="markupDeclaration":"/"===a?this.state="endTagOpen":n.test(a)&&(this.state="tagName",this.delegate.beginStartTag(),this.delegate.appendToTagName(a.toLowerCase()))},markupDeclaration:function(){"-"===this.consume()&&"-"===this.input.charAt(this.index)&&(this.consume(),this.state="commentStart",this.delegate.beginComment())},commentStart:function(){var a=this.consume();"-"===a?this.state="commentStartDash":">"===a?(this.delegate.finishComment(),this.state="beforeData"):
(this.delegate.appendToCommentData(a),this.state="comment")},commentStartDash:function(){var a=this.consume();"-"===a?this.state="commentEnd":">"===a?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("-"),this.state="comment")},comment:function(){var a=this.consume();"-"===a?this.state="commentEndDash":this.delegate.appendToCommentData(a)},commentEndDash:function(){var a=this.consume();"-"===a?this.state="commentEnd":(this.delegate.appendToCommentData("-"+
a),this.state="comment")},commentEnd:function(){var a=this.consume();">"===a?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("--"+a),this.state="comment")},tagName:function(){var a=this.consume();m.test(a)?this.state="beforeAttributeName":"/"===a?this.state="selfClosingStartTag":">"===a?(this.delegate.finishTag(),this.state="beforeData"):this.delegate.appendToTagName(a)},beforeAttributeName:function(){var a=this.peek();m.test(a)?this.consume():"/"===a?(this.state=
"selfClosingStartTag",this.consume()):">"===a?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeName",this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(a))},attributeName:function(){var a=this.peek();m.test(a)?(this.state="afterAttributeName",this.consume()):"/"===a?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===a?(this.state="beforeAttributeValue",
this.consume()):">"===a?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeName(a))},afterAttributeName:function(){var a=this.peek();m.test(a)?this.consume():"/"===a?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===a?(this.consume(),this.state="beforeAttributeValue"):">"===a?(this.delegate.beginAttributeValue(!1),
this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="attributeName",this.delegate.beginAttribute(),this.delegate.appendToAttributeName(a))},beforeAttributeValue:function(){var a=this.peek();m.test(a)?this.consume():'"'===a?(this.state="attributeValueDoubleQuoted",this.delegate.beginAttributeValue(!0),this.consume()):"'"===a?(this.state="attributeValueSingleQuoted",
this.delegate.beginAttributeValue(!0),this.consume()):">"===a?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeValueUnquoted",this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(a))},attributeValueDoubleQuoted:function(){var a=this.consume();'"'===a?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===a?this.delegate.appendToAttributeValue(this.consumeCharRef('"')||
"&"):this.delegate.appendToAttributeValue(a)},attributeValueSingleQuoted:function(){var a=this.consume();"'"===a?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===a?this.delegate.appendToAttributeValue(this.consumeCharRef("'")||"&"):this.delegate.appendToAttributeValue(a)},attributeValueUnquoted:function(){var a=this.peek();m.test(a)?(this.delegate.finishAttributeValue(),this.consume(),this.state="beforeAttributeName"):"&"===a?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef(">")||
"&")):">"===a?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeValue(a))},afterAttributeValueQuoted:function(){var a=this.peek();m.test(a)?(this.consume(),this.state="beforeAttributeName"):"/"===a?(this.consume(),this.state="selfClosingStartTag"):">"===a?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},selfClosingStartTag:function(){">"===this.peek()?
(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},endTagOpen:function(){var a=this.consume();n.test(a)&&(this.state="tagName",this.delegate.beginEndTag(),this.delegate.appendToTagName(a.toLowerCase()))}}};f.prototype={tokenize:function(a){this.tokens=[];this.tokenizer.tokenize(a);return this.tokens},tokenizePart:function(a){this.tokens=[];this.tokenizer.tokenizePart(a);return this.tokens},tokenizeEOF:function(){this.tokens=
[];this.tokenizer.tokenizeEOF();return this.tokens[0]},reset:function(){this.token=null;this.startLine=1;this.startColumn=0},addLocInfo:function(){this.options.loc&&(this.token.loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}});this.startLine=this.tokenizer.line;this.startColumn=this.tokenizer.column},beginData:function(){this.token={type:"Chars",chars:""};this.tokens.push(this.token)},appendToData:function(a){this.token.chars+=a},
finishData:function(){this.addLocInfo()},beginComment:function(){this.token={type:"Comment",chars:""};this.tokens.push(this.token)},appendToCommentData:function(a){this.token.chars+=a},finishComment:function(){this.addLocInfo()},beginStartTag:function(){this.token={type:"StartTag",tagName:"",attributes:[],selfClosing:!1};this.tokens.push(this.token)},beginEndTag:function(){this.token={type:"EndTag",tagName:""};this.tokens.push(this.token)},finishTag:function(){this.addLocInfo()},markTagAsSelfClosing:function(){this.token.selfClosing=
!0},appendToTagName:function(a){this.token.tagName+=a},beginAttribute:function(){this._currentAttribute=["","",null];this.token.attributes.push(this._currentAttribute)},appendToAttributeName:function(a){this._currentAttribute[0]+=a},beginAttributeValue:function(a){this._currentAttribute[2]=a},appendToAttributeValue:function(a){this._currentAttribute[1]=this._currentAttribute[1]||"";this._currentAttribute[1]+=a},finishAttributeValue:function(){}};var p={HTML5NamedCharRefs:d,EntityParser:c,EventedTokenizer:a,
Tokenizer:f,tokenize:function(a,b){return(new f(new c(d),b)).tokenize(a)}},v=b.options,u=v.Options;return function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=p.tokenize(a),d=[],e=[],g;c=new u(c);for(g=0;g<f.length;g++){var h=f[g];if("StartTag"===h.type){if(d.push(h),h=h.tagName.toUpperCase(),"A"===h||v.contains(c.ignoreTags,h)){for(var k=d.length,m=f,l=++g,n=d,q=1;l<m.length&&0<q;){var w=m[l];"StartTag"===w.type&&w.tagName.toUpperCase()===h?q++:"EndTag"===w.type&&w.tagName.toUpperCase()===
h&&q--;n.push(w);l++}g+=d.length-k-1}}else if("Chars"!==h.type)d.push(h);else{k=c;h=b.tokenize(h.chars);m=[];for(l=0;l<h.length;l++)if(n=h[l],"nl"===n.type&&k.nl2br)m.push({type:"StartTag",tagName:"br",attributes:[],selfClosing:!0});else if(n.isLink&&k.check(n)){var H=k.resolve(n);n=H.formatted;q=H.tagName;w=H.className;var J=H.target,O=H.attributes;H=[["href",H.formattedHref]];w&&H.push(["class",w]);J&&H.push(["target",J]);for(var L in O)H.push([L,O[L]]);m.push({type:"StartTag",tagName:q,attributes:H,
selfClosing:!1});m.push({type:"Chars",chars:n});m.push({type:"EndTag",tagName:q})}else m.push({type:"Chars",chars:n.toString()});d.push.apply(d,m)}}for(g=0;g<d.length;g++)switch(f=d[g],f.type){case "StartTag":c="<"+f.tagName;if(0<f.attributes.length){f=f.attributes;L=[];for(k=0;k<f.length;k++)h=f[k],L.push(h[0]+'="'+h[1].replace(/"/g,"&quot;")+'"');c+=" "+L.join(" ")}c+=">";e.push(c);break;case "EndTag":e.push("</"+f.tagName+">");break;case "Chars":e.push(f.chars);break;case "Comment":e.push("\x3c!--"+
f.chars+"--\x3e")}return e.join("")}}(e);b.linkifyHtml=e})(window,linkify);
(function(b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).SmartBanner=b()})(function(){return function a(e,d,c){function f(h,l){if(!d[h]){if(!e[h]){var k="function"==typeof require&&require;if(!l&&k)return k(h,!0);if(g)return g(h,!0);k=Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k;}k=d[h]=
{exports:{}};e[h][0].call(k.exports,function(a){var c=e[h][1][a];return f(c?c:a)},k,k.exports,a,e,d,c)}return d[h].exports}for(var g="function"==typeof require&&require,h=0;h<c.length;h++)f(c[h]);return f}({1:[function(e,d,c){var a=e("xtend/mutable"),f=e("component-query"),g=e("get-doc"),h=e("cookie-cutter"),k=e("ua-parser-js"),l=(navigator.language||navigator.userLanguage||navigator.browserLanguage).slice(-2)||"us",m=g&&g.documentElement,n={ios:{appMeta:"apple-itunes-app",iconRels:["apple-touch-icon-precomposed",
"apple-touch-icon"],getStoreLink:function(){return"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id"+this.appId}},android:{appMeta:"google-play-app",iconRels:["android-touch-icon","apple-touch-icon-precomposed","apple-touch-icon"],getStoreLink:function(){return"http://play.google.com/store/apps/details?id="+this.appId}},windows:{appMeta:"msApplication-ID",iconRels:["windows-touch-icon","apple-touch-icon-precomposed","apple-touch-icon"],getStoreLink:function(){return"http://www.windowsphone.com/s?appid="+
this.appId}}};e=function(c){var f=k(navigator.userAgent);this.options=a({},{daysHidden:15,daysReminder:90,appStoreLanguage:l,button:"OPEN",store:{ios:"On the App Store",android:"In Google Play",windows:"In the Windows Store"},price:{ios:"FREE",android:"FREE",windows:"FREE"},theme:"",icon:"",force:""},c||{});this.options.force?this.type=this.options.force:"Windows Phone"===f.os.name||"Windows Mobile"===f.os.name?this.type="windows":"iOS"===f.os.name?this.type="ios":"Android"===f.os.name&&(this.type=
"android");c=!this.type;f="ios"===this.type&&"Mobile Safari"===f.browser.name&&6<=parseInt(f.os.version);var d=navigator.standalone,e=h.get("smartbanner-closed"),g=h.get("smartbanner-installed");c||f||d||e||g||(a(this,n[this.type]),this.parseAppId()&&(this.create(),this.show()))};e.prototype={constructor:e,create:function(){var a=this.getStoreLink(),c=this.options.price[this.type]+" - "+this.options.store[this.type];if(this.options.icon)var d=this.options.icon;else for(var e=0;e<this.iconRels.length;e++){var h=
f('link[rel="'+this.iconRels[e]+'"]');if(h){d=h.getAttribute("href");break}}var k=g.createElement("div");k.className="smartbanner smartbanner-"+(this.options.theme||this.type);k.innerHTML='<div class="smartbanner-container"><a href="javascript:void(0);" class="smartbanner-close">&times;</a><span class="smartbanner-icon" style="background-image: url('+d+')"></span><div class="smartbanner-info"><div class="smartbanner-title">'+this.options.title+"</div><div>"+this.options.author+"</div><span>"+c+'</span></div><a href="'+
a+'" class="smartbanner-button"><span class="smartbanner-button-text">'+this.options.button+"</span></a></div>";g.body?g.body.appendChild(k):g&&g.addEventListener("DOMContentLoaded",function(){g.body.appendChild(k)});f(".smartbanner-button",k).addEventListener("click",this.install.bind(this),!1);f(".smartbanner-close",k).addEventListener("click",this.close.bind(this),!1)},hide:function(){m.classList.remove("smartbanner-show")},show:function(){m.classList.add("smartbanner-show")},close:function(){this.hide();
h.set("smartbanner-closed","true",{path:"/",expires:new Date(Number(new Date)+864E5*this.options.daysHidden)})},install:function(){this.hide();h.set("smartbanner-installed","true",{path:"/",expires:new Date(Number(new Date)+864E5*this.options.daysReminder)})},parseAppId:function(){var a=f('meta[name="'+this.appMeta+'"]');if(a)return this.appId="windows"===this.type?a.getAttribute("content"):/app-id=([^\s,]+)/.exec(a.getAttribute("content"))[1]}};d.exports=e},{"component-query":2,"cookie-cutter":3,
"get-doc":4,"ua-parser-js":6,"xtend/mutable":7}],2:[function(e,d,c){function a(a,c){return c.querySelector(a)}c=d.exports=function(c,d){d=d||document;return a(c,d)};c.all=function(a,c){c=c||document;return c.querySelectorAll(a)};c.engine=function(f){if(!f.one)throw Error(".one callback required");if(!f.all)throw Error(".all callback required");a=f.one;c.all=f.all;return c}},{}],3:[function(e,d,c){c=d.exports=function(a){a||(a={});"string"===typeof a&&(a={cookie:a});void 0===a.cookie&&(a.cookie="");
return{get:function(c){for(var f=a.cookie.split(/;\s*/),d=0;d<f.length;d++){var e=f[d].split("=");if(unescape(e[0])===c)return unescape(e[1])}},set:function(c,d,e){e||(e={});c=escape(c)+"="+escape(d);e.expires&&(c+="; expires="+e.expires);e.path&&(c+="; path="+escape(e.path));return a.cookie=c}}};"undefined"!==typeof document&&(e=c(document),c.get=e.get,c.set=e.set)},{}],4:[function(e,d,c){e=e("has-dom");d.exports=e()?document:null},{"has-dom":5}],5:[function(e,d,c){d.exports=function(){return"undefined"!==
typeof window&&"undefined"!==typeof document&&"function"===typeof document.createElement}},{}],6:[function(e,d,c){(function(a,f){var e={extend:function(a,c){var f={},d;for(d in a)f[d]=c[d]&&0===c[d].length%2?c[d].concat(a[d]):a[d];return f},has:function(a,c){return"string"===typeof a?-1!==c.toLowerCase().indexOf(a.toLowerCase()):!1},lowerize:function(a){return a.toLowerCase()},major:function(a){return"string"===typeof a?a.split(".")[0]:f},trim:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
"")}},h=function(){for(var a,c=0,d,e,g,h,k,m,l=arguments;c<l.length&&!k;){var n=l[c],p=l[c+1];if("undefined"===typeof a)for(g in a={},p)p.hasOwnProperty(g)&&(h=p[g],"object"===typeof h?a[h[0]]=f:a[h]=f);for(d=e=0;d<n.length&&!k;)if(k=n[d++].exec(this.getUA()))for(g=0;g<p.length;g++)m=k[++e],h=p[g],"object"===typeof h&&0<h.length?2==h.length?a[h[0]]="function"==typeof h[1]?h[1].call(this,m):h[1]:3==h.length?a[h[0]]="function"!==typeof h[1]||h[1].exec&&h[1].test?m?m.replace(h[1],h[2]):f:m?h[1].call(this,
m,h[2]):f:4==h.length&&(a[h[0]]=m?h[3].call(this,m.replace(h[1],h[2])):f):a[h]=m?m:f;c+=2}return a},k=function(a,c){for(var d in c)if("object"===typeof c[d]&&0<c[d].length)for(var g=0;g<c[d].length;g++){if(e.has(c[d][g],a))return"?"===d?f:d}else if(e.has(c[d],a))return"?"===d?f:d;return a},l={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2E3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},m={browser:[[/(opera\smini)\/([\w\.-]+)/i,
/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],["name","version"],[/(OPiOS)[\/\s]+([\w\.]+)/i],[["name","Opera Mini"],"version"],[/\s(opr)\/([\w\.]+)/i],[["name","Opera"],"version"],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],
["name","version"],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[["name","IE"],"version"],[/(edge)\/((\d+)?[\w\.]+)/i],["name","version"],[/(yabrowser)\/([\w\.]+)/i],[["name","Yandex"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],["name","version"],[/(MicroMessenger)\/([\w\.]+)/i],[["name","WeChat"],"version"],[/(qqbrowser)[\/\s]?([\w\.]+)/i],["name","version"],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,
/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[["name","UCBrowser"],"version"],[/(dolfin)\/([\w\.]+)/i],[["name","Dolphin"],"version"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[["name","Chrome"],"version"],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],["version",["name","Android Browser"]],[/FBAV\/([\w\.]+);/i],["version",["name","Facebook"]],[/fxios\/([\w\.-]+)/i],["version",["name","Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],
["version",["name","Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",k,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],"version"],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,
/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",e.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],
[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",e.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",e.lowerize]]],device:[[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[["vendor",e.trim],["model",e.trim],["type","smarttv"]],[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],["model",
"vendor",["type","tablet"]],[/applecoremedia\/[\w\.]+ \((ipad)/],["model",["vendor","Apple"],["type","tablet"]],[/(apple\s{0,1}tv)/i],[["model","Apple TV"],["vendor","Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],["vendor","model",["type","tablet"]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],
[["model",k,{"Fire Phone":["SD","KF"]}],["vendor","Amazon"],["type","mobile"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],["model","vendor",["type","mobile"]],[/\((ip[honed|\s\w*]+);/i],["model",["vendor","Apple"],["type","mobile"]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],["vendor","model",["type","mobile"]],[/\(bb10;\s(\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],
[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],["model",["vendor","Asus"],["type","tablet"]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[["vendor","Sony"],["model","Xperia Tablet"],["type","tablet"]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[["vendor","Sony"],["model","Xperia Phone"],["type","mobile"]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],["vendor","model",["type","console"]],[/android.+;\s(shield)\sbuild/i],["model",["vendor","Nvidia"],
["type","console"]],[/(playstation\s[34portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/(sprint\s(\w+))/i],[["vendor",k,{HTC:"APA",Sprint:"Sprint"}],["model",k,{"Evo Shift 4G":"7373KT"}],["type","mobile"]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],["vendor","model",["type","tablet"]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],["vendor",["model",/_/g," "],["type","mobile"]],[/(nexus\s9)/i],
["model",["vendor","HTC"],["type","tablet"]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],["model",["vendor","Microsoft"],["type","console"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],["model",["vendor","Motorola"],["type","mobile"]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],["model",["vendor","Motorola"],["type","tablet"]],
[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[["vendor","Samsung"],"model",["type","tablet"]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[["vendor","Samsung"],"model",["type","mobile"]],[/hbbtv.+maple;(\d+)/i],[["model",/^/,"SmartTV"],["vendor","Samsung"],["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/sie-(\w+)*/i],["model",["vendor",
"Siemens"],["type","mobile"]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[["vendor","Nokia"],"model",["type","mobile"]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],["model",["vendor","Acer"],["type","tablet"]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[["vendor","LG"],"model",["type","tablet"]],[/(lg) netcast\.tv/i],["vendor","model",["type","smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],["model",["vendor","LG"],["type","mobile"]],[/android.+(ideatab[a-z0-9\-\s]+)/i],
["model",["vendor","Lenovo"],["type","tablet"]],[/linux;.+((jolla));/i],["vendor","model",["type","mobile"]],[/((pebble))app\/[\d\.]+\s/i],["vendor","model",["type","wearable"]],[/android.+;\s(glass)\s\d/i],["model",["vendor","Google"],["type","wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/\s(tablet)[;\/]/i,/\s(mobile)[;\/]/i],
[["type",e.lowerize],"vendor","model"]],engine:[[/windows.+\sedge\/([\w\.]+)/i],["version",["name","EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name","version"],[/rv:([\w\.]+).*(gecko)/i],["version","name"]],os:[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],
["name",["version",k,l]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",k,l]],[/\((bb)(10);/i],[["name","BlackBerry"],"version"],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],"version"],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name",
"Firefox OS"],"version"],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.]+\d)*/i],[["name","Solaris"],"version"],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],
["name","version"],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[["name","iOS"],["version",/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],["version",/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],["name","version"]]},n=function(c,f){if(!(this instanceof n))return(new n(c,f)).getResult();var d=
c||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),g=f?e.extend(m,f):m;this.getBrowser=function(){var a=h.apply(this,g.browser);a.major=e.major(a.version);return a};this.getCPU=function(){return h.apply(this,g.cpu)};this.getDevice=function(){return h.apply(this,g.device)};this.getEngine=function(){return h.apply(this,g.engine)};this.getOS=function(){return h.apply(this,g.os)};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),
device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return d};this.setUA=function(a){d=a;return this};return this};n.VERSION="0.7.11";n.BROWSER={NAME:"name",MAJOR:"major",VERSION:"version"};n.CPU={ARCHITECTURE:"architecture"};n.DEVICE={MODEL:"model",VENDOR:"vendor",TYPE:"type",CONSOLE:"console",MOBILE:"mobile",SMARTTV:"smarttv",TABLET:"tablet",WEARABLE:"wearable",EMBEDDED:"embedded"};n.ENGINE={NAME:"name",VERSION:"version"};n.OS={NAME:"name",VERSION:"version"};"undefined"!==typeof c?
("undefined"!==typeof d&&d.exports&&(c=d.exports=n),c.UAParser=n):a.UAParser=n;var q=a.jQuery||a.Zepto;if("undefined"!==typeof q){var p=new n;q.ua=p.getResult();q.ua.get=function(){return p.getUA()};q.ua.set=function(a){p.setUA(a);a=p.getResult();for(var c in a)q.ua[c]=a[c]}}})("object"===typeof window?window:this)},{}],7:[function(e,d,c){d.exports=function(c){for(var f=1;f<arguments.length;f++){var d=arguments[f],e;for(e in d)a.call(d,e)&&(c[e]=d[e])}return c};var a=Object.prototype.hasOwnProperty},
{}]},{},[1])(1)});var __extends=this&&this.__extends||function(b,e){function d(){this.constructor=b}for(var c in e)e.hasOwnProperty(c)&&(b[c]=e[c]);b.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)};(function(b){(function(b){b.getDefaults=function(){return{defaultProtocol:"https",validate:{url:function(b){return!b.endsWith(".zip")}}}}})(b.LinkifyOptionsProvider||(b.LinkifyOptionsProvider={}))})(CCL||(CCL={}));
(function(b){(function(b){b[b.Left=0]="Left";b[b.Right=1]="Right"})(b.ActionMenuHorizontalPosition||(b.ActionMenuHorizontalPosition={}));(function(b){b[b.Click=0]="Click";b[b.ContextMenu=1]="ContextMenu"})(b.ActionMenuOpeningMode||(b.ActionMenuOpeningMode={}));(function(b){b[b.BelowTargetElement=0]="BelowTargetElement";b[b.AboveTargetElement=1]="AboveTargetElement"})(b.AlternativeChoiceOpenDirection||(b.AlternativeChoiceOpenDirection={}));(function(b){b[b.Retry=0]="Retry";b[b.Dismiss=1]="Dismiss"})(b.ErrorFeedbackMode||
(b.ErrorFeedbackMode={}));(function(b){b[b.Information=0]="Information";b[b.Error=1]="Error";b[b.Warning=2]="Warning";b[b.Tip=3]="Tip";b[b.Functionality=4]="Functionality";b[b.RedError=5]="RedError"})(b.FeedbackType||(b.FeedbackType={}));(function(b){b[b.None=0]="None";b[b.NewTab=1]="NewTab";b[b.NewPopup=2]="NewPopup";b[b.Modal=3]="Modal";b[b.SameFrame=4]="SameFrame";b[b.Custom=5]="Custom"})(b.PreviewType||(b.PreviewType={}));(function(b){b[b.Statically=0]="Statically";b[b.AjaxStatic=1]="AjaxStatic"})(b.OverlayLoadMode||
(b.OverlayLoadMode={}))})(CCL||(CCL={}));
(function(b){var e=function(){function c(){}c.library="library";return c}();b.TreeLinkContext=e;e=function(){return function(){}}();b.TreeLinkParameters=e;var d=function(){function c(){this.sourceFrames=[];this.isCustomHandlerRegistered=this.isCustomHandlerPreventedAtBottom=this.isCustomNavigationHandlerEnabled=!1;c.instance=this;window.self!==window.parent&&b.CommonFunctions.makePostMessageCallRecursivelyToTopmostFrame(window.parent,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.askIfCustomTreeLinkNavigationRequired));this.attachNavigationPreventHandlers();
this.attachMessagesProxyHandlers()}c.subscribeOnTreeLinkClick=function(a){var b=c.instance;null!=b&&b.isCustomNavigationHandlerEnabled&&b.subscribeOnTreeLinkClick(a)};c.registerCustomHandler=function(a){var b=c.instance;b&&b.registerCustomHandler(a)};c.removeCustomHandler=function(){var a=c.instance;a&&a.removeCustomHandler()};c.prototype.removeCustomHandler=function(){this.isCustomNavigationHandlerEnabled=!1;this.navigationCallback=void 0;window.self!==window.parent&&b.CommonFunctions.makePostMessageCallRecursivelyToTopmostFrame(window.parent,
new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.customTreeLinkNavigationRemoved))};c.prototype.registerCustomHandler=function(a){this.isCustomHandlerRegistered||(this.answerAboutCustomNavigationRequired(),this.registerCustomTreeLinkClickHandler(),this.isCustomHandlerRegistered=!0);this.navigationCallback=a;this.isCustomNavigationHandlerEnabled=!0;window.self!==window.parent&&b.CommonFunctions.makePostMessageCallRecursivelyToTopmostFrame(window.parent,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.customTreeLinkNavigationSetUp))};
c.prototype.attachNavigationPreventHandlers=function(){var a=this;b.CommonFunctions.attachPostMessageEventListener($(window),b.CommonWindowMessages.MessageNames.customTreeLinkNavigationSetUp,function(){a.isCustomHandlerPreventedAtBottom||(a.isCustomHandlerPreventedAtBottom=!0)});b.CommonFunctions.attachPostMessageEventListener($(window),b.CommonWindowMessages.MessageNames.customTreeLinkNavigationRemoved,function(){a.isCustomHandlerPreventedAtBottom&&(a.isCustomHandlerPreventedAtBottom=!1)})};c.prototype.attachMessagesProxyHandlers=
function(){var a=this;b.CommonFunctions.attachPostMessageEventListener($(window),b.CommonWindowMessages.MessageNames.askIfCustomTreeLinkNavigationRequired,function(c,b){window.self!==b.self&&b&&0>a.sourceFrames.indexOf(b)&&a.sourceFrames.push(b)});b.CommonFunctions.attachPostMessageEventListener($(window),b.CommonWindowMessages.MessageNames.customTreeLinkNavigationIsRequired,function(){a.isCustomNavigationHandlerEnabled||(a.isCustomNavigationHandlerEnabled=!0,a.subscribeOnTreeLinkClick($(document)),
a.sourceFrames.forEach(function(a){b.CommonFunctions.makePostMessageCall(a,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.customTreeLinkNavigationIsRequired))}))})};c.prototype.subscribeOnTreeLinkClick=function(a){a=a.find("a[data-link-id]");a.length&&(a.off("click"),a.click(function(a){a.preventDefault();a=$(a.currentTarget);a={linkId:String(a.data("link-id")),sourceId:Number(a.data("link-source-id")||0),context:String(a.data("link-context")),target:String(a.attr("target").toLowerCase())};
b.CommonFunctions.makePostMessageCallRecursivelyToTopmostFrame(window.parent,new b.CommonWindowMessages.GenericMessageWithData(b.CommonWindowMessages.MessageNames.customTreeLinkNavigationEvent,a))}))};c.prototype.internalTreeLinkNavigationHandler=function(a){this.isCustomNavigationHandlerEnabled&&this.navigationCallback&&!this.isCustomHandlerPreventedAtBottom&&this.navigationCallback(a.extendedData)};c.prototype.answerAboutCustomNavigationRequired=function(){var a=this;b.CommonFunctions.attachPostMessageEventListener($(window),
b.CommonWindowMessages.MessageNames.askIfCustomTreeLinkNavigationRequired,function(c,d){a.isCustomNavigationHandlerEnabled&&b.CommonFunctions.makePostMessageCall(d,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.customTreeLinkNavigationIsRequired))});this.sourceFrames&&0<this.sourceFrames.length&&this.sourceFrames.forEach(function(a){b.CommonFunctions.makePostMessageCall(a,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.customTreeLinkNavigationIsRequired))})};
c.prototype.registerCustomTreeLinkClickHandler=function(){var a=this;b.CommonFunctions.attachPostMessageEventListener($(window),b.CommonWindowMessages.MessageNames.customTreeLinkNavigationEvent,function(c){c&&c.extendedData&&a.internalTreeLinkNavigationHandler(c)})};return c}();b.CustomTreeLinkNavigationManager=d;$(function(){new d})})(CCL||(CCL={}));
(function(b){var e=function(){function d(c){var a=this;this.settings=c;b.CommonFunctions.isMobileDevice()||window[d.clientInstanceName]||(window[d.clientInstanceName]=this,this.settings=c,this.$tooltipContent=$("#"+this.settings.TooltipContentId),this.tooltip=new b.CustomTooltip("customTooltip",{contentContainer:this.$tooltipContent,zIndex:this.settings.ZIndex},this.settings.CssClasses),this.$tooltipContent.show(),$(function(){$("body").on("mouseover",b.CommonFunctions.getDataSelector(a.settings.DataAttributes.Content),
function(c){c=$(c.currentTarget);if(!d.isTooltipOnTargetDisabled(c)){var b=c.attr(a.settings.DataAttributes.Content);if(0!==b.length){var f=c.attr(a.settings.DataAttributes.PositionSettings);f=f?JSON.parse(f):{My:"center bottom",At:"center top-10",Arrow:"top"};a.openTooltipFunction(c,b,f,a.settings.Timeout)}}});$("body").on("mouseleave",b.CommonFunctions.getDataSelector(a.settings.DataAttributes.Content),function(){a.closeTooltipFunction(a.settings.Timeout)})}))}d.prototype.closeTooltipFunction=function(c){var a=
this;clearTimeout(this.closeTimeout);clearTimeout(this.openTimeout);this.closeTimeout=setTimeout(function(){return a.tooltip.closeTooltip()},c)};d.prototype.openTooltipFunction=function(c,a,b,d){var f=this;clearTimeout(this.closeTimeout);clearTimeout(this.openTimeout);this.openTimeout=setTimeout(function(){f.tooltip.isTooltipOpened()||(f.$tooltipContent.empty(),f.$tooltipContent.html(a));f.tooltip.openTooltip(c,b)},d)};d.enableTooltipOnTarget=function(c,a){b.CommonFunctions.isMobileDevice()||(a?c.removeAttr(d.getInstance().settings.DataAttributes.Disabled):
d.isTooltipOnTargetDisabled(c)||(this.closeTooltip(),c.attr(d.getInstance().settings.DataAttributes.Disabled,"")))};d.closeTooltip=function(){b.CommonFunctions.isMobileDevice()||d.getInstance().tooltip.closeTooltip()};d.setTooltipContentOnTarget=function(c,a){b.CommonFunctions.isMobileDevice()||c.attr(d.getInstance().settings.DataAttributes.Content,a)};d.getInstance=function(){return window[d.clientInstanceName]};d.isTooltipOnTargetDisabled=function(c){return void 0!==c.attr(d.getInstance().settings.DataAttributes.Disabled)};
d.clientInstanceName="UnobtrusiveCustomTooltipManager";return d}();b.UnobtrusiveCustomTooltipManager=e})(CCL||(CCL={}));
(function(b){var e=function(){function d(){this.datePickerDiv=$("#ui-datepicker-div");this.initDatePickerOpeningObserverForFocus();this.initKeyboardNavigation();this.initChangeMonthLinksClickWrapping()}d.createAdapterIfNeed=function(){d.currentAdapter||(d.currentAdapter=new d)};d.setCurrentDatePicker=function(c){this.createAdapterIfNeed();d.currentAdapter&&(d.currentAdapter.currentDatePicker=c)};d.prototype.initDatePickerOpeningObserverForFocus=function(){var c=this,a=new b.CallbackDebouncer(function(){c.isDebouncedFocusLockedOnTarget&&
c.datePickerDiv.is(":visible")&&(c.patchChangeMonthLinks(),(c.getDefaultDateLink()||c.getCloseButton()).focus());c.isDebouncedFocusLockedOnTarget=!1});(new MutationObserver(function(b){0<b.length&&(a.invokeCallback(void 0,100),c.isDebouncedFocusLockedOnTarget=!0)})).observe(this.datePickerDiv.get(0),{attributes:!0,attributeFilter:["style"]})};d.prototype.initKeyboardNavigation=function(){var c=this;this.datePickerDiv.on("keydown",function(a){var f=$(a.target);switch(a.which){case b.CommonConstants.keyCodes.tab:a.preventDefault();
(a.shiftKey?f.hasClass("ui-datepicker-close")?c.getCurrentButton()[0]||c.getPreviousMonthButton():f.hasClass("ui-datepicker-current")?c.getPreviousMonthButton():f.hasClass("ui-datepicker-prev")?c.getNextMonthButton():f.hasClass("ui-datepicker-next")?c.getDefaultDateLink()||c.getCloseButton():c.getCloseButton():f.hasClass("ui-datepicker-close")?c.getDefaultDateLink()||c.getNextMonthButton():f.hasClass("ui-datepicker-current")?c.getCloseButton():f.hasClass("ui-datepicker-prev")?c.getCurrentButton()[0]||
c.getCloseButton():f.hasClass("ui-datepicker-next")?c.getPreviousMonthButton():c.getNextMonthButton()).focus();break;case b.CommonConstants.keyCodes.escape:a.stopPropagation();c.currentDatePicker.closePicker();break;case b.CommonConstants.keyCodes.backspace:case b.CommonConstants.keyCodes.del:a.preventDefault();c.currentDatePicker.clearDateAndTime(!1);c.currentDatePicker.closePicker();break;case b.CommonConstants.keyCodes.arrowLeft:a.preventDefault();c.previousDay(f.closest("td"));break;case b.CommonConstants.keyCodes.arrowRight:a.preventDefault(),
c.nextDay(f.closest("td"))}})};d.prototype.initChangeMonthLinksClickWrapping=function(){var c=this,a=$(document);a.on("click",".ui-datepicker-next",function(){setTimeout(function(){c.patchChangeMonthLinks();c.getNextMonthButton().focus()})});a.on("click",".ui-datepicker-prev",function(){setTimeout(function(){c.patchChangeMonthLinks();c.getPreviousMonthButton().focus()})});a.on("click",".ui-datepicker-current",function(){setTimeout(function(){c.patchChangeMonthLinks();c.getCurrentButton().focus()})})};
d.prototype.patchChangeMonthLinks=function(){this.datePickerDiv.find(".ui-datepicker-next, .ui-datepicker-prev").prop("href","javascript:void(0);").attr("role","button")};d.prototype.nextDay=function(c){this.stepDay(c,function(a){return a.next()})||this.stepRow(c,function(a){return a.next()},function(a){return a.first()})||this.stepMonth(this.getNextMonthButton(),function(a){return a.first()})};d.prototype.previousDay=function(c){this.stepDay(c,function(a){return a.prev()})||this.stepRow(c,function(a){return a.prev()},
function(a){return a.last()})||this.stepMonth(this.getPreviousMonthButton(),function(a){return a.last()})};d.prototype.stepDay=function(c,a){do{c=a(c);var b=this.getDateLinks(c)}while(0<c.length&&0===b.length);b.focus();return 0<b.length};d.prototype.stepRow=function(c,a,b){c=c.closest("tr");do{c=a(c);var f=this.getDateLinks(c)}while(0<c.length&&0===f.length);b(f).focus();return 0<f.length};d.prototype.stepMonth=function(c,a){var b=this;c.click();setTimeout(function(){b.isDebouncedFocusLockedOnTarget=
!1;a(b.getDateLinks(b.datePickerDiv)).focus()})};d.prototype.getDefaultDateLink=function(){return this.datePickerDiv.find("a.ui-state-active")[0]||this.datePickerDiv.find(".ui-datepicker-today a")[0]||this.datePickerDiv.find("a.ui-state-default")[0]};d.prototype.getCloseButton=function(){return this.datePickerDiv.find(".ui-datepicker-close")};d.prototype.getNextMonthButton=function(){return this.datePickerDiv.find(".ui-datepicker-next")};d.prototype.getPreviousMonthButton=function(){return this.datePickerDiv.find(".ui-datepicker-prev")};
d.prototype.getCurrentButton=function(){return this.datePickerDiv.find(".ui-datepicker-current")};d.prototype.getDateLinks=function(c){return c.find("a.ui-state-default")};return d}();b.DatePickerAccessibilityAdapter=e})(CCL||(CCL={}));
(function(b){var e=function(){function d(c,a){var f=this;this.clientInstanceName=c;this.settings=a;this.yOffset=0;this.maskId="alternativeChoiceMask";this.dialogMargin=this.triangleSize=10;window[c]=this;$(function(){f.$dialog=$("#"+f.settings.DialogId);f.$triangle=f.$dialog.find("."+f.settings.Css.Triangle);var a=f.$dialog.find("."+f.settings.Css.Column);f.$firstColumn=a.first();f.$secondColumn=a.eq(1);a=f.$dialog.find("."+f.settings.Css.MobileHeaderLink);f.$firstColumnTitleLink=a.first();f.$secondColumnTitleLink=
a.eq(1);f.$firstColumnTitleLink.click(function(){return f.toggleMobileColumnVisibility(!0)});f.$secondColumnTitleLink.click(function(){return f.toggleMobileColumnVisibility(!1)});f.$closeButton=f.$dialog.find("."+f.settings.Css.CloseButton);f.$mobileCancelButton=f.$dialog.find("."+f.settings.Css.CancelButton);f.$closeButton.click(function(){return f.closeDialog()});f.$mobileCancelButton.click(function(){return f.closeDialog()});if(b.CommonFunctions.isIe())f.$dialog.on("click","a",function(){return setTimeout(function(){return f.closeDialog()},
100)});f.$dialog.get(0).addEventListener("blur",function(a){a=b.CommonFunctions.isIe()?$(document.activeElement):$(a.relatedTarget);f.isOpened&&0===a.closest(f.$dialog).length&&f.closeDialog()},!0);var c=new b.CallbackDebouncer(function(){f.isOpened&&f.updatePositionAgainstTriggerElementOnResize()});$(window).resize(function(){c.invokeCallback(void 0,100)});a=new b.WindowResizeHandler;$(a).on(b.WindowResizeHandler.mediaChangedEventName,function(a,c){f.isOpened&&(f.toggleMobileDesktopView(c),f.updatePositionAgainstTriggerElementOnResize())})})}
Object.defineProperty(d.prototype,"triggerElementCenterX",{get:function(){return this.$triggerElement?this.$triggerElement.offset().left+this.$triggerElement.outerWidth()/2:0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"triggerElementCenterY",{get:function(){return this.$triggerElement?this.$triggerElement.offset().top+this.$triggerElement.outerHeight()/2:0},enumerable:!0,configurable:!0});d.prototype.isDialogOpened=function(){return this.isOpened};d.prototype.openDialog=function(c,
a){void 0===a&&(a=0);this.$triggerElement=c;this.openDialogWithOffsetAt(this.triggerElementCenterX,this.triggerElementCenterY,a)};d.prototype.openDialogAt=function(c,a){this.$triggerElement=null;this.openDialogWithOffsetAt(c,a,0)};d.prototype.closeDialog=function(){this.isOpened=!1;this.$dialog.toggle(!1);$("#"+this.maskId).remove();this.removeFocus();b.AlternativeChoiceManager.setOpenedDialogClientInstanceName("");return!1};d.prototype.getFirstColumn=function(){return this.$firstColumn};d.prototype.getSecondColumn=
function(){return this.$secondColumn};d.prototype.getMask=function(){return $("#"+this.maskId)};d.prototype.toggleMobileColumnVisibility=function(c){this.$firstColumnTitleLink.toggleClass(this.settings.Css.MobileHeaderLinkActive,c);this.$secondColumnTitleLink.toggleClass(this.settings.Css.MobileHeaderLinkActive,!c);this.$firstColumn.toggle(c);this.$secondColumn.toggle(!c)};d.prototype.updatePosition=function(c,a){if(this.isOpened&&c&&a){if(b.CommonFunctions.isPhoneScreenSize()){$("#"+this.maskId).remove();
var f=parseInt(this.$dialog.css("z-index"),10);$(b.CommonFunctions.formatString("<div id='{0}' class='{1}'></div>",this.maskId,this.settings.Css.Mask)).css({opacity:"0.5",filter:"alpha(opacity=0)","z-index":f-1}).appendTo("body")}var d=c-this.$dialog.outerWidth()/2;d+this.$dialog.outerWidth()>$(window).width()?d=$(window).width()-this.$dialog.outerWidth()-this.dialogMargin:0>d&&(d=this.dialogMargin);this.settings.OpenDirection===b.AlternativeChoiceOpenDirection.AboveTargetElement?(f=a-this.triangleSize+
this.yOffset-this.$dialog.outerHeight(),0>f?(f=a+this.triangleSize-this.yOffset,this.setOpenDirection(!1)):this.setOpenDirection(!0)):(f=a+this.triangleSize+this.yOffset,this.setOpenDirection(!1));this.$triangle.css({left:c-d-this.triangleSize});this.$dialog.css({top:f,left:d})}};d.prototype.updatePositionAgainstTriggerElementOnResize=function(){this.updatePosition(this.triggerElementCenterX,this.triggerElementCenterY)};d.prototype.openDialogWithOffsetAt=function(c,a,f){void 0===f&&(f=0);this.yOffset=
f;this.isOpened=!0;this.$dialog.toggle(!0);this.toggleMobileDesktopView(b.CommonFunctions.isPhoneScreenSize());c&&a&&this.updatePosition(c,a);c=$(window).scrollTop();this.$activeElement=this.$closeButton;this.setFocus();c>this.$closeButton.offset().top&&this.$closeButton.get(0).scrollIntoView();b.AlternativeChoiceManager.setOpenedDialogClientInstanceName(this.clientInstanceName)};d.prototype.setOpenDirection=function(c){this.$dialog.toggleClass(this.settings.Css.AboveTargetElement,c).toggleClass(this.settings.Css.BelowTargetElement,
!c)};d.prototype.toggleMobileDesktopView=function(c){c?this.toggleMobileColumnVisibility(!0):(this.$firstColumn.toggle(!0),this.$secondColumn.toggle(!0))};d.prototype.setFocus=function(){this.$activeElement&&(this.$lastActiveElement=$(document.activeElement),this.$activeElement.focus())};d.prototype.removeFocus=function(){this.$lastActiveElement&&this.$lastActiveElement.focus()};d.prototype.updateOffsetAccordingToContainerHeight=function(c){var a=this.$dialog.offset().top;c=c.height()-this.$dialog.height()-
a;0>c&&(this.yOffset=a+c,this.$dialog.css("top",this.yOffset))};return d}();b.AlternativeChoice=e})(CCL||(CCL={}));
(function(b){var e=function(){function b(){}b.setOpenedDialogClientInstanceName=function(c){c&&0!==c.length?(b.openedDialogClientInstanceName&&b.openedDialogClientInstanceName!==c&&b.closeOpenedDialog(),b.openedDialogClientInstanceName=c):b.openedDialogClientInstanceName=void 0};b.closeOpenedDialog=function(){var c=window[b.openedDialogClientInstanceName];c&&c.closeDialog()};return b}();b.AlternativeChoiceManager=e})(CCL||(CCL={}));
(function(b){var e;(function(c){var a=function(){function a(){}a.backspace=8;a.tab=9;a.enter=13;a.escape=27;a.space=32;a.end=35;a.home=36;a.arrowLeft=37;a.arrowUp=38;a.arrowRight=39;a.arrowDown=40;a.del=46;a.key0=48;a.key9=57;a.keyA=65;a.keyZ=90;a.numpad0=96;a.numpad9=105;a.decimalPoint=110;a.comma=188;a.period=190;a.f5=116;return a}();c.keyCodes=a;a=function(){function a(){}a.mobile=568;a.iPadPortraitMode=768;a.iPadLandscapeMode=1024;return a}();c.mediaScreenSizes=a;a=function(){function a(){}a.ok=
200;a.badRequest=400;a.unauthorized=401;a.forbidden=403;a.notFound=404;a.methodNotAllowed=405;a.internalServerError=500;return a}();c.httpStatusCodes=a;c.onePixelTransparentImageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCB1jYAAAAAIAAc/INeUAAAAASUVORK5CYII="})(e=b.CommonConstants||(b.CommonConstants={}));(function(c){function a(a){for(var c=[],b=1;b<arguments.length;b++)c[b-1]=arguments[b];var f=Array.prototype.slice.call(c,
0);return a.replace(r,function(a,c){return c in f?f[c]:a})}function b(){return/(iPod|iPhone|iPad)/i.test(navigator.userAgent)}function d(){return/(Android)/i.test(navigator.userAgent)}function h(){return-1!==navigator.userAgent.indexOf("Chrome")}function k(a,c){a.postMessage(JSON.stringify(c),"*")}function l(a,c){k(a,c);a!==a.top&&l(a.parent,c)}function m(){return c.checkScreenSize(e.mediaScreenSizes.mobile,!1)}function n(){return c.checkScreenSize(e.mediaScreenSizes.iPadPortraitMode+1,!0)}function q(a,
c){a=parseInt(a.css(c));return isNaN(a)?0:a}function p(a,c,b,f){void 0===f&&(f=null);$.alerts.okButton=b;jAlert(a,c,f)}function v(a,c,b){c=b+c.height();var f=a.offset().top;return f+a.height()<=c&&f>=b}function u(a){a=$.extend({},a,{contentType:"application/json",data:JSON.stringify(void 0!==a.data&&null!==a.data?a.data:{})});return $.ajax(a)}function w(a){a=$.extend({},a,{type:"POST"});return u(a)}var r=/\{(\d+)\}/g,t=/\r?\n/g,y=/<br\s*\/?>/g,C=/<p>\s*<\/p>/g,z=/\r/g,E=/\n/g,G=/\r\n/g;c.base64Encode=
function(a){var c="",b,f=0;a=a.replace(G,"\n");var d="";for(b=0;b<a.length;b++){var e=a.charCodeAt(b);128>e?d+=String.fromCharCode(e):(127<e&&2048>e?d+=String.fromCharCode(e>>6|192):(d+=String.fromCharCode(e>>12|224),d+=String.fromCharCode(e>>6&63|128)),d+=String.fromCharCode(e&63|128))}for(a=d;f<a.length;){var g=a.charCodeAt(f++);d=a.charCodeAt(f++);b=a.charCodeAt(f++);e=g>>2;g=(g&3)<<4|d>>4;var h=(d&15)<<2|b>>6;var k=b&63;isNaN(d)?h=k=64:isNaN(b)&&(k=64);c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)}return c};c.formatString=a;c.replaceLineBreaksWithBrTags=function(a){return a.replace(t,"<br />")};c.replaceLineBreaksWithPTags=function(a){return a?"<p>"+a.replace(t,"</p><p>").replace(C,"<p>&nbsp;</p>")+"</p>":a};c.replaceBrTagsWithPTags=function(a){return a?"<p>"+
a.replace(y,"</p><p>").replace(C,"<p>&nbsp;</p>")+"</p>":a};c.replaceBrTagsWithLineBreaks=function(a){return a.replace(y,"\n")};c.encodeLineBreaks=function(a){a=a.replace(z,"&#13;");return a=a.replace(E,"&#10;")};c.decodeLineBreaks=function(a){a=a.replace("&#13;","\r");return a=a.replace("&#10;","\n")};c.htmlEncode=function(a){return void 0===a?"":$("<div/>").text(a).html()};c.htmlDecode=function(a){return void 0===a?"":$("<div/>").html(a).text()};c.getIdsFromHidden=function(a,c){void 0===c&&(c=",");
if(!a.length)return[];a=a.val().split(c);a.splice($.inArray("",a),1);return a};c.addIdToHidden=function(a,c,b){void 0===b&&(b=",");0<a.length&&c&&(a=a.get(0),0<=a.value.split(b).indexOf(c)||(0<a.value.length&&-1===a.value.indexOf(b,a.value.length-b.length)&&(a.value+=b),a.value+=c+b))};c.removeIdFromHidden=function(a,c,b){void 0===b&&(b=",");if(0<a.length&&c&&(a=a.get(0))&&a.value){for(var f=a.value.split(b),d="",e=0;e<f.length;e++)c!==f[e]&&0<f[e].length&&(d+=f[e]+b);a.value=d}};c.setQueryStringParameter=
function(a,c,b){if(b="string"===typeof b?b:b.toString()){if(-1<a.indexOf(c+"="))return a.replace(new RegExp(c+"=[^&]*(&|$)"),c+"="+encodeURIComponent(b)+"&");-1===a.indexOf("?")&&(a+="?");return a.slice(0,a.indexOf("?")+1)+c+"="+encodeURIComponent(b)+"&"+a.slice(a.indexOf("?")+1)}return-1<a.indexOf(c+"=")?a.replace(new RegExp(c+"=[^&]*(&|$)"),""):a};c.isIosDevice=b;c.isIphone=function(){return/iPhone/i.test(navigator.userAgent)};c.isAndroidDevice=d;c.isMobileDevice=function(){return b()||d()};c.isMobileSizedDevice=
function(){return 768>window.innerWidth};c.isChrome=h;c.isIe=function(){return-1!==navigator.userAgent.indexOf("MSIE")||/rv:11.0/i.test(navigator.userAgent)};c.isEdge=function(){return-1!==navigator.userAgent.indexOf("Edge")};c.isFirefox=function(){return-1!==navigator.userAgent.indexOf("Firefox")};c.isSafari=function(){return!h()&&-1!==navigator.userAgent.indexOf("Safari")};c.getIosVersion=function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(void 0===a||null===a)return Number.NaN;
a=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)];return parseFloat(a.join("."))};c.iPhoneVersion=function(){var a=window.screen.height,c=window.screen.width;return 320===c&&480===a?"4":375===c&&667===a?"6":414===c&&736===a?"6+":320===c&&568===a?"5":480>=a?"2-3":"none"};c.makePostMessageCall=k;c.makePostMessageCallRecursivelyToTopmostFrame=l;c.makePostMessageCallWithData=function(a,c,b){a.postMessage(JSON.stringify($.extend(c,b)),"*")};c.attachPostMessageEventListener=function(a,c,b){a.on("message",
function(a){var f,d=a.originalEvent.source;try{a.originalEvent.data&&(f=JSON.parse(a.originalEvent.data))&&f.messageName&&("string"===typeof c?f.messageName===c:-1!=c.indexOf(f.messageName))&&b(f,d)}catch(J){}})};c.checkScreenSize=function(c,b){return window.matchMedia&&window.matchMedia(a("({0}-width: {1}px)",b?"min":"max",c)).matches};c.isPhoneScreenSize=m;c.isDesktopScreenSize=n;c.isTabletScreenSize=function(){return!n()&&!m()};c.executeScripts=function(a){if(null!==a){var c=[],b=a.match(/<script[^>]*?>/g);
if(null!==b){var f=0,d,e=a.toLowerCase();for(d=0;d<b.length;d++){var g=a.indexOf(b[d],f)+b[d].length;f=e.indexOf("\x3c/script>",g);g=a.substring(g,f);c.push(g)}for(d=0;d<c.length;d++)(new Function(c[d]))()}}};c.safeParseCssValue=q;c.calculateRightAndBottomOffset=function(a){var c=0,b=0;a.parentsUntil("html").each(function(a,f){a=$(f);c+=q(a,"padding-right")+q(a,"margin-right")+q(a,"border-right-width");b+=q(a,"padding-bottom")+q(a,"margin-bottom")+q(a,"border-bottom-width")});return{right:c,bottom:b}};
c.getHtmlDocumentHeight=function(a){var c=0,b=function(a){for(var f=0;f<a.length;f++){var d=a[f];d.scrollHeight&&d.clientHeight&&(c=Math.max(d.scrollHeight,d.clientHeight,c));d.childNodes.length&&b(d.childNodes)}};b(a.documentElement.childNodes);return c};c.alertAjaxError=function(a,b,f){a.status>=e.httpStatusCodes.badRequest&&a.responseText&&alert(c.htmlDecode(a.responseText))};c.jAlertAjaxError=function(a,b,f,d){p(c.htmlDecode(a),c.htmlDecode(b),f,d?function(){window.location=window.location}:null)};
c.jAjaxAlert=p;c.jAjaxConfirm=function(a,c,b,f,d){$.alerts.okButton=b;$.alerts.cancelButton=f;jConfirm(a,c,d)};c.jAjaxPrompt=function(a,c,b,f,d,e){$.alerts.okButton=f;$.alerts.cancelButton=d;jPrompt(a,b,c,e)};c.jAjaxMultiButtonConfirm=function(a,c,b,f){jMultiButtonConfirm(a,c,b,f)};c.printAndCloseCurrentPage=function(){function a(){b--;setTimeout(function(){0===c||0===b?(window.print(),window.close()):a()},1E3)}var c=$("iframe").length,b=c+1;$("iframe").load(function(){c--});a()};c.safeParseJson=
function(a){try{return JSON.parse(a)}catch(F){return!1}};c.isOnScreen=function(a,c,f,d){void 0===c&&(c=1);void 0===f&&(f=1);void 0===d&&(d=null);var e=a.outerHeight(),g=a.outerWidth();if(!g||!e)return!1;var h=d?$(d):b()?$(window.parent):$(window),k=h.scrollTop();d=h.scrollLeft();var m=d+h.width();h=k+h.height();a=a.offset();var l=a.left+g,n=a.top+e;if(m<a.left||d>l||h<a.top||k>n)return!1;k=Math.min(1,(n-k)/e);e=Math.min(1,(h-a.top)/e);return Math.min(1,(l-d)/g)*Math.min(1,(m-a.left)/g)>=c&&k*e>=f};
c.measureKpi=function(a,c,b,f){void 0===f&&(f=null);try{return w({url:a,data:{measureSection:c,measurement:b,measureContext:f}})}catch(S){}};c.measureKpiSync=function(a,c,b,f,d){void 0===f&&(f=null);void 0===d&&(d=200);try{return w({url:a,timeout:d,async:!1,data:{measureSection:c,measurement:b,measureContext:f}})}catch(H){}};c.kpiAjax=function(a,b,f){b||(b={});if(f&&!b.crossDomain){var d=b.beforeSend;b.beforeSend=function(a,c){d&&d(a,c);$.each(f,function(c,b){a.setRequestHeader("X-Kpi-"+c,b)})}}if(f&&
b.crossDomain){var e="";$.each(f,function(a,b){e+=c.formatString("&{0}{1}={2}","X-Kpi-",a,b)});e=e.substring(1);a+=-1<a.indexOf("?")?"&":"?";a+=e}return $.ajax(a,b)};c.getDataSelector=function(a,b){5<a.length&&"data-"===a.substring(0,5)&&(a=a.substring(5));return null!=b?c.formatString("[{0}{1}={2}]","data-",a,b):c.formatString("[{0}{1}]","data-",a)};c.isElementFullyShownInContainer=function(a,c){return v(a,c,c.offset().top)};c.isElementFullyShownInWindow=function(a){var c=$(window);return v(a,c,
c.scrollTop())};c.preventInputIncorrectCharacters=function(a,c){-1!==$.inArray(a.which,c)||a.which===e.keyCodes.keyA&&(a.ctrlKey||a.metaKey)||a.which>=e.keyCodes.end&&a.which<=e.keyCodes.arrowDown||(a.shiftKey||a.which<e.keyCodes.key0||a.which>e.keyCodes.key9)&&(a.which<e.keyCodes.numpad0||a.which>e.keyCodes.numpad9)&&a.preventDefault()};c.handleNavigationToAnchorsInUserInputInsideIframesResizedByTheirParents=function(a){c.isIe()||document.addEventListener("click",function(c){var b,f;(b=c.target.closest(a+
' a[href^="#"]:not([href="#"])'))&&(f=document.getElementById(b.getAttribute("href").slice(1)))&&(f.scrollIntoView(),c.preventDefault())})};c.safeAjax=u;c.safeAjaxPost=w;c.getAntiForgeryAjaxHeader=function(a){var c={};a&&a.headerName&&a.headerValue&&(c[a.headerName]=a.headerValue);return c};c.preventSubmitOnEnter=function(a){a.on("keypress",function(a){return a.which===e.keyCodes.enter?(a.preventDefault(),!1):!0})};c.checkAndAddRole=function(a,c,b,f){c=$("#"+c);a&&c.length&&!c.is(":checked")&&f.push(b)};
c.safeExecuteFunction=function(a){if(a)try{return a()}catch(F){}return!0}})(b.CommonFunctions||(b.CommonFunctions={}));(function(c){function a(a){return 621355968E9+1E4*a.getTime()}function b(a){return new Date(1970,0,1,0,0,0,(a-621355968E9)/1E4)}function d(a,c){a=b(a+6E8*c);return new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0)}c.convertToTicks=a;c.convertTicksStringToDate=function(a,c){a=parseInt(a);return d(a,c)};c.convertTicksToDateExact=b;c.convertUtcTicksToLocalClientDate=function(a){return new Date((a-
621355968E9)/1E4)};c.convertLocalProfileDateToEndOfDayUtcTicks=function(c,b){c=new Date(Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59));return a(c)+-6E8*b};c.convertUtcTicksToLocalProfileDate=d;c.getItslNow=function(a){var c=new Date,b=6E4*c.getTimezoneOffset();return new Date(c.getTime()+b+1E3*a)}})(b.DateFunctions||(b.DateFunctions={}));(function(c){var a=function(){function a(){}a.maskNavigationBar="maskNavigationBar";a.unmaskNavigationBar="unmaskNavigationBar";a.registerExtraNavBar=
"registerExtraNavBar";a.unregisterExtraNavBar="unregisterExtraNavBar";a.collapseContentAreaFrame="collapseContentAreaFrame";a.expandContentAreaFrame="expandContentAreaFrame";a.contentAreaFrameHasCollapsed="contentAreaFrameHasCollapsed";a.contentAreaFrameHasExpanded="contentAreaFrameHasExpanded";a.collapseExtensionIframe="collapseExtensionIframe";a.expandExtensionIframe="expandExtensionIframe";a.expandExtensionIframeDone="expandExtensionIframeDone";a.collapseLeftMenu="collapseLeftMenu";a.extensionContentSaved=
"extensionContentSaved";a.unreadNotificationCounterChanged="unreadNotificationCounterChanged";a.extensionContentChanged="extensionContentChanged";a.extensionAssignmentAnswerOpened="extensionAssignmentAnswerOpened";a.textEditorInteraction="textEditorInteraction";a.extensionCancelActionPerformed="extensionCancelActionPerformed";a.extensionContentViewed="extensionContentViewed";a.extensionContentOpened="extensionContentOpened";a.nestedCssModalDialogExpanded="nestedCssModalDialogExpanded";a.nestedCssModalDialogCollapsed=
"nestedCssModalDialogCollapsed";a.studentWasAssessed="studentWasAssessed";a.submitIframe="submitIframe";a.closeCssModalDialog="closeCssModalDialog";a.editEmbededContent="editEmbededContent";a.extensionPrintContentFrame="extensionPrintContentFrame";a.getEmbeddedContentData="getEmbeddedContentData";a.getEmbeddedContentSize="getEmbeddedContentSize";a.openPersonProfileCard="openPersonProfileCard";a.changePrintFeatureVisibility="changePrintFeatureVisibility";a.hideSettings="hideSettings";a.showSettings=
"showSettings";a.toggleBreadcrumbs="toggleBreadcrumbs";a.suspendUpdateBreadCrumbsAndNavigation="suspendUpdateBreadCrumbsAndNavigation";a.suspendExpandCollaplseContentAreaFrame="suspendExpandCollaplseContentAreaFrame";a.extensionSettingsChanged="extensionSettingsChanged";a.showBottomNavigationBar="showBottomNavigationBar";a.hideBottomNavigationBar="hideBottomNavigationBar";a.iframeAutoHeight="iframeAutoHeight";a.reloadParentIframe="reloadParentIframe";a.assignmentShowManageRubric="showManageRubricDialog";
a.extensionOnboarding="extensionOnboarding";a.extensionReadyForTelemetryRequests="extensionReadyForTelemetryRequests";a.initialiseTelemetryCampaign="initialiseTelemetryCampaign";a.extensionTelemetryResultAnswer="extensionTelemetryResultAnswer";a.extensionTelemetryResultComment="extensionTelemetryResultComment";a.unreadMessagesCounterChanged="unreadMessagesCounterChanged";a.enableFullScreen="enableFullScreen";a.disableFullScreen="disableFullScreen";a.extensionTitleUpdated="extensionTitleUpdated";a.elementAddedToYourCollection=
"elementAddedToYourCollection";a.fullScreenDialogOpening="fullScreenDialogOpening";a.fullScreenDialogCollapseTitle="fullScreenDialogCollapseTitle";a.backToPreviousPage="backToPreviousPage";a.mediaRecorderContentSaved="mediaRecorderContentSaved";a.mediaRecorderClosed="mediaRecorderClosed";a.cloudFilePermissionError="cloudFilePermissionError";a.setIFrameTitle="setIFrameTitle";a.openGroupChat="openGroupChat";a.adminConsentTenant="adminConsentTenant";a.oAuthSuccessful="oAuthSuccessful";a.askExtensionParentFrameWhetherTopFrameExists=
"askExtensionParentFrameWhetherTopFrameExists";a.replyToExtensionFrameWhenTopFrameExists="replyToExtensionFrameWhenTopFrameExists";a.scrollToTop="scrollToTop";a.askIfCustomTreeLinkNavigationRequired="askIfCustomTreeLinkNavigationRequired";a.customTreeLinkNavigationIsRequired="customTreeLinkNavigationIsRequired";a.customTreeLinkNavigationEvent="customTreeLinkNavigationEvent";a.customTreeLinkNavigationSetUp="customTreeLinkNavigationSetUp";a.customTreeLinkNavigationRemoved="customTreeLinkNavigationRemoved";
a.googleClassroomImportStarted="googleClassroomImportStarted";a.refreshTreeMenuRootFolder="refreshTreeMenuRootFolder";a.edgeImmersiveReaderReadable="edgeImmersiveReaderReadable";a.iframeIsLoaded="iframeIsLoaded";a.popupIsLoaded="popupIsLoaded";return a}();c.MessageNames=a;var b=function(){return function(a){this.messageName=a}}();c.GenericMessage=b;var d=function(a){function c(c,b){a.call(this,c);this.extendedData=b}__extends(c,a);return c}(b);c.GenericMessageWithData=d;d=function(c){function b(b,
f,d){void 0===f&&(f=!1);void 0===d&&(d="");c.call(this,a.textEditorInteraction);this.interactionType=b;this.closeDialogAfterPerformingOperation=f;this.editorInstanceId=d}__extends(b,c);return b}(b);c.TextEditorBaseInteractionMessage=d;var e=function(a){function c(c,b,f,d){void 0===f&&(f=!1);void 0===d&&(d="");a.call(this,c,f,d);this.extendedData=b}__extends(c,a);return c}(d);c.TextEditorBaseInteractionWithDataMessage=e;var k=function(a){function c(){a.call(this,l.CloseDialog,!0)}__extends(c,a);return c}(d);
c.TextEditorCloseDialogMessage=k;k=function(a){function c(c,b,f,d){void 0===b&&(b=!1);void 0===f&&(f="");void 0===d&&(d=!1);a.call(this,l.InsertHtml,b);this.htmlContent=c;this.editorInstanceId=f;this.isEmbeddedImage=d}__extends(c,a);return c}(d);c.TextEditorInsertHtmlMessage=k;k=function(a){function c(c,b,f){void 0===f&&(f=!1);a.call(this,l.InsertLinkToFile,f);this.linkUrl=c;this.linkName=b}__extends(c,a);return c}(d);c.TextEditorInsertLinkToFileMessage=k;k=function(a){function c(c){a.call(this,l.UpdateItslPluginsList,
!0);this.pluginId=c}__extends(c,a);return c}(d);c.TextEditorUpdateItslPluginListMessage=k;k=function(a){function c(c){a.call(this,l.SendImageSettingsToImagePropertiesDialog,c)}__extends(c,a);return c}(e);c.TextEditorSendImageSettingsMessage=k;e=function(a){function c(c){a.call(this,l.InsertImageToSlideshow,c,!0)}__extends(c,a);return c}(e);c.TextEditorInsertImageToSlideshow=e;e=function(a){function c(c,b,f,d,e){void 0===e&&(e=!1);a.call(this,l.InsertTextLink,e);this.linkUrl=c;this.linkText=b;this.linkTarget=
f;this.linkAdditionalAttributes=d}__extends(c,a);return c}(d);c.TextEditorInsertTextLink=e;d=function(a){function c(){a.call(this,l.ScaleDialog,!0)}__extends(c,a);return c}(d);c.TextEditorScaleDialog=d;b=function(a){function c(c){a.call(this,c)}__extends(c,a);return c}(b);c.EmbedContentBaseMessage=b;d=function(c){function b(){c.call(this,a.getEmbeddedContentData)}__extends(b,c);return b}(b);c.EmbeddedContentDataMessage=d;b=function(c){function b(){c.call(this,a.getEmbeddedContentSize)}__extends(b,
c);return b}(b);c.EmbeddedContentSizeMessage=b;(function(a){a[a.CloseDialog=0]="CloseDialog";a[a.InsertHtml=1]="InsertHtml";a[a.InsertLinkToFile=2]="InsertLinkToFile";a[a.UpdateItslPluginsList=3]="UpdateItslPluginsList";a[a.SendImageSettingsToImagePropertiesDialog=4]="SendImageSettingsToImagePropertiesDialog";a[a.InsertImageToSlideshow=5]="InsertImageToSlideshow";a[a.InsertTextLink=6]="InsertTextLink";a[a.ScaleDialog=7]="ScaleDialog"})(c.TextEditorInteractionType||(c.TextEditorInteractionType={}));
var l=c.TextEditorInteractionType})(b.CommonWindowMessages||(b.CommonWindowMessages={}));(function(c){c.clickInInnerFrame="clickInInnerFrame";c.touchstartInInnerFrame="touchstartInInnerFrame"})(b.CommonTriggers||(b.CommonTriggers={}));var d=function(){function c(a){var c=this;this.trackFocusHandler=function(a){if(a.keyCode===$.ui.keyCode.TAB&&!a.isDefaultPrevented()){var b=c.$container.find(":tabbable"),f=b.filter(":first"),d=b.filter(":last");a.target!==d[0]&&a.target!==c.$container||a.shiftKey?
a.target!==f[0]&&a.target!==c.$container||!a.shiftKey||(setTimeout(function(){d.trigger("focus")},100),a.preventDefault()):(setTimeout(function(){f.trigger("focus")},100),a.preventDefault())}};this.$container=a}c.prototype.startTrackFocus=function(){this.isFocusTracked()||this.$container.keydown(this.trackFocusHandler)};c.prototype.stopTrackFocus=function(){this.isFocusTracked()&&this.$container.off("keydown",this.trackFocusHandler)};c.prototype.isFocusTracked=function(){var a=this;if(!this.$container.data("events"))return!1;
var c=this.$container.data("events").keydown;if(!c)return!1;var b=!1;$.each(c,function(c,f){if(f.handler===a.trackFocusHandler)return b=!0,!1});return b};return c}();b.FocusTracker=d;d=function(){return function(c,a,b){void 0===b&&(b="");this.text=c;this.css=a;this.customId=b}}();b.ConfirmButtonMetaData=d;d=function(){return function(){}}();b.MultiButtonConfirmResult=d})(CCL||(CCL={}));
(function(b){var e=function(){function d(c){var a=this;this.settings=c;this.autoResizeIframe=function(){var c=b.CommonFunctions.calculateRightAndBottomOffset(a.extensionIframe);c=IframeResizer.getFixedIframeDefaultWidthAndHeight($(window),a.extensionIframe,c);b.CommonFunctions.isMobileDevice()&&(c.height<d.iframeMobileMinSize&&(c.height=d.iframeMobileMinSize),a.settings.resizeIframeWidth&&c.width<d.iframeMobileMinSize&&(c.width=d.iframeMobileMinSize));a.settings.resizeIframeWidth&&a.extensionIframe.width(c.width);
a.extensionIframe.height(c.height);b.CommonFunctions.isIosDevice()&&(a.settings.resizeIframeWidth&&a.extensionContent.width(c.width),a.extensionContent.height(c.height))};this.extensionIframe=$("#"+this.settings.extensionIframeId);this.extensionContent=$("#"+this.settings.extensionContentId)}d.prototype.init=function(){var c=this;b.CommonFunctions.attachPostMessageEventListener($(window),b.CommonWindowMessages.MessageNames.iframeAutoHeight,function(a){if(!0===a.extendedData.enabled)$(window).on("resize",
c.autoResizeIframe);else $(window).off("resize",c.autoResizeIframe);b.CommonFunctions.isIosDevice()&&c.iosScrollFix(a.extendedData.enabled)})};d.prototype.iosScrollFix=function(c){this.autoResizeIframe();this.settings.iosScrollFixClass&&this.extensionContent.toggleClass(this.settings.iosScrollFixClass,c)};d.iframeMobileMinSize=200;return d}();b.AutoIframeResizer=e})(CCL||(CCL={}));
(function(b){var e=function(){function d(c,a,b,d,e){this.initByCustumSettingsOrDefault(c,a,b,d,e)}d.prototype.initByCustumSettingsOrDefault=function(c,a,f,d,e){this.HorizontalPosition=c?c:b.ActionMenuHorizontalPosition.Left;this.OpeningMode=a?a:b.ActionMenuOpeningMode.Click;this.MenuZIndex=f?f:1;this.AutoCloseWindowResize=d?d:!0;this.OpenUnderBoundContainer=e?e:!1};return d}();b.ActionMenuSettings=e})(CCL||(CCL={}));
(function(b){var e=function(){function b(c){this.timeoutId=0;this.throttledCallback=c}b.prototype.invokeCallback=function(c,a){var b=this;0===this.timeoutId&&(this.timeoutId=setTimeout(function(){b.timeoutId=0;b.throttledCallback(c)},a))};return b}();b.CallbackThrottler=e})(CCL||(CCL={}));
(function(b){var e=function(){function d(c){var a=this;this.$container=$("#"+c.Controls.Container);this.$selectionList=$("#"+c.Controls.SelectionList);this.$switcher=$("#"+c.Controls.Switcher);this.$values=$("#"+c.Controls.ValuesHidden);this.$checkboxes=this.$selectionList.find("input:checkbox");this.$selectAll=this.$selectionList.find("input:checkbox[value='"+d.commonSettings.SelectAllValue+"']");this.intitalValues=this.$values.val();this.autoPostback=c.AutoPostback;$(document).on(b.CommonFunctions.isIosDevice()?
"touchend":"click",function(c){a.showHideSelectionList(c)});this.$checkboxes.change(function(c){a.onCheckBoxChanged(c)});this.$container.on("keydown ",function(c){a.checkKeyPress(c)})}d.prototype.onCheckBoxChanged=function(c){var a=this;c=$(c.target);var b=c.prop("checked");c=c.val();c===d.commonSettings.SelectAllValue?(c=b,this.$checkboxes.each(function(c,f){$(f).val()!==d.commonSettings.SelectAllValue&&($(f).prop("checked",b),a.addRemoveSelectedValue($(f).val(),b))})):(this.addRemoveSelectedValue(c,
b),c=this.isAllChecked(),this.$selectAll.prop("checked",c));this.$container.toggleClass(d.commonSettings.CssClasses.FilterApplied,!c)};d.prototype.addRemoveSelectedValue=function(c,a){a?b.CommonFunctions.addIdToHidden(this.$values,c):b.CommonFunctions.removeIdFromHidden(this.$values,c)};d.prototype.ajustListPosition=function(){var c=this.$switcher.position().left;this.$selectionList.css({left:(0>c?0:c+5)+"px",top:this.$switcher.position().top+this.$switcher.outerHeight()+"px"})};d.prototype.showHideSelectionList=
function(c){c.target===this.$switcher[0]||1===this.$switcher.find(c.target).length?this.$selectionList.is(":visible")?this.hideSelectionList():this.showSelectionList():c.target!==this.$selectionList[0]&&1!==this.$selectionList.find(c.target).length&&this.$selectionList.is(":visible")&&this.hideSelectionList()};d.prototype.showSelectionList=function(){this.$switcher[0].setAttribute("aria-expanded","true");this.ajustListPosition();this.$selectionList.show();this.setInitialFocus()};d.prototype.hideSelectionList=
function(){this.$selectionList.hide();this.intitalValues!==this.$values.val()&&(this.autoPostback?this.raisePostback():(this.$container.trigger(d.commonSettings.SelectionChangedEventName,[this.getSelectedValues()]),this.intitalValues=this.$values.val()));this.$switcher[0].removeAttribute("aria-expanded");this.$switcher.focus()};d.prototype.isAllChecked=function(){var c=0===this.$selectAll.length||this.$selectAll.is(":checked");return this.$selectionList.find("input:checked").length===this.$checkboxes.length-
(c?0:1)};d.prototype.getSelectedValues=function(){return this.$values.val().split(d.commonSettings.Separator)};d.prototype.raisePostback=function(){alert("raisePostback is not defined (method should be overridden).")};d.prototype.setInitialFocus=function(){this.intitalValues?this.$selectionList.find(":checkbox:checked").first().focus():this.$selectionList.find(":checkbox").first().focus()};d.prototype.checkKeyPress=function(c){switch(c.which||c.keyCode){case b.CommonConstants.keyCodes.escape:case b.CommonConstants.keyCodes.del:case b.CommonConstants.keyCodes.backspace:c.preventDefault(),
this.hideSelectionList()}};return d}();b.CheckBoxSelector=e})(CCL||(CCL={}));
(function(b){var e=function(){function c(a){var c=this;this.settings=a;this.dialogResultDeferred=null;this.isInMobileMode=!1;this.maskNavigationBarMessage=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.maskNavigationBar);this.unmaskNavigationBarMessage=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.unmaskNavigationBar);this.expandContentIframeMessage=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.expandContentAreaFrame);this.shrinkContentIframeMessage=
new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.collapseContentAreaFrame);this.isDialogVisible=function(){return null!==c.dialogResultDeferred};this.enterMobileModeIfNeeded=function(){window.matchMedia("only screen and (max-width: 568px)").matches&&c.enterMobileMode()};this.leaveMobileModeIfNeeded=function(){c.isInMobileMode&&c.leaveMobileMode()};this.enterMobileMode=function(){b.CommonFunctions.makePostMessageCall(window.parent,c.expandContentIframeMessage);IframeResizer.reportSetIframeDefaultHeight();
c.isInMobileMode=!0};this.leaveMobileMode=function(){b.CommonFunctions.makePostMessageCall(window.parent,c.shrinkContentIframeMessage);IframeResizer.reportSetIframeDefaultHeight();c.isInMobileMode=!1};window[a.ConfirmDialogId]=this;this.$confirmDialog=$("#"+a.ConfirmDialogId);this.attachClickHandlers(a);this.cleanupEnvironmentOnUnload()}c.prototype.attachClickHandlers=function(a){var c=this;if(a.ConfirmButtonId)$("#"+a.ConfirmButtonId).on("click",function(){return c.onButtonClick(d.Confirm)});if(a.CancelButtonId)$("#"+
a.CancelButtonId).on("click",function(){return c.onButtonClick(d.Cancel)});if(a.AlternativeButtonId)$("#"+a.AlternativeButtonId).on("click",function(){return c.onButtonClick(d.Alternative)})};c.prototype.cleanupEnvironmentOnUnload=function(){var a=this;$(window).on("unload",function(){a.isDialogVisible()&&(b.CommonFunctions.makePostMessageCall(window.parent,a.unmaskNavigationBarMessage),a.leaveMobileModeIfNeeded())})};c.prototype.onButtonClick=function(a){if(!this.isDialogVisible())return!1;this.leaveMobileModeIfNeeded();
b.CommonFunctions.makePostMessageCall(window.parent,this.unmaskNavigationBarMessage);this.$confirmDialog.hide();this.markDialogAsClosed();this.dialogResultDeferred.resolve(a);this.dialogResultDeferred=null;return!1};c.prototype.show=function(){this.dialogResultDeferred=$.Deferred();b.CommonFunctions.makePostMessageCall(window.parent,this.maskNavigationBarMessage);this.enterMobileModeIfNeeded();this.markDialogAsOpen();this.$confirmDialog.show();return this.dialogResultDeferred.promise()};c.prototype.showMessage=
function(a,c){this.$confirmDialog.find(".ccl-confirm-dialog-header-and-content > h2")[0].innerHTML=a;this.$confirmDialog.find(".ccl-confirm-dialog-header-and-content > p")[0].innerHTML=c;return this.show()};c.prototype.markDialogAsClosed=function(){$("html").removeClass("ccl-confirm-dialog-open")};c.prototype.markDialogAsOpen=function(){$("html").addClass("ccl-confirm-dialog-open")};return c}();b.ConfirmDialog=e;(function(c){c[c.Confirm=0]="Confirm";c[c.Cancel=1]="Cancel";c[c.Alternative=2]="Alternative"})(b.ConfirmDialogResult||
(b.ConfirmDialogResult={}));var d=b.ConfirmDialogResult})(CCL||(CCL={}));
(function(b){var e=function(){function b(c,a,b){this.privateIsVisible=this.privateIsEnabled=!0;this.privateValue=c;this.privateId=a;"function"===typeof b&&(this.privateCallback=b)}Object.defineProperty(b.prototype,"Id",{get:function(){return this.privateId},set:function(c){this.privateId=c},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"Value",{get:function(){return this.privateValue},set:function(c){this.contentSpan&&this.contentSpan.html(c);this.privateValue=c},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"title",{get:function(){return this.privateValue},set:function(c){this.content&&this.content[0]&&(this.content[0].title=c);this.privateTitle=c},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"callback",{get:function(){return this.privateCallback},set:function(c){this.privateCallback=c},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isEnabled",{get:function(){return this.privateIsEnabled},set:function(c){this.content&&
(c?(this.content.removeAttr("disabled"),this.content.removeClass("ccl-actionmenu-dialog-content-item-disabled")):(this.content.attr("disabled","true"),this.content.addClass("ccl-actionmenu-dialog-content-item-disabled")));this.privateIsEnabled=c},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isVisible",{get:function(){return this.privateIsVisible},set:function(c){this.content&&(c?this.content.toggle(!0):this.content.toggle(!1));this.privateIsVisible=c},enumerable:!0,configurable:!0});
b.prototype.init=function(c){var a=this;if(this.isInit)throw Error("Menu item is already initialized");this.isInit=!0;this.itemClickCallback=c;this.contentSpan=this.createContentSpan();this.content=this.createContent(this.contentSpan);this.isVisible=this.privateIsVisible;this.isEnabled=this.privateIsEnabled;this.content.on("mouseup",function(c){a.isEnabled&&a.waitForClick&&0===c.button&&(a.waitForClick=!1,a.itemClickHandler(c))});this.content.on("mousedown",function(c){a.isEnabled&&0===c.button&&
(a.waitForClick=!0)});this.content.on("touchend",function(c){a.isEnabled&&a.waitForClick&&(a.waitForClick=!1,a.itemClickHandler(c))});this.content.on("touchstart",function(){a.isEnabled&&(a.waitForClick=!0)});this.content.on("touchmove",function(){a.waitForClick=!1});this.content.on("keyup",function(c){a.isEnabled&&a.waitForClick&&(a.waitForClick=!1,13===(c.keyCode?c.keyCode:c.which)&&a.itemClickHandler(c))});this.content.on("keydown",function(c){c=c.keyCode?c.keyCode:c.which;a.waitForClick=a.isEnabled&&
13===c?!0:!1})};b.prototype.itemClickHandler=function(c){c.preventDefault();this.itemClickCallback&&"function"===typeof this.itemClickCallback&&this.itemClickCallback(this,c);this.privateCallback&&"function"===typeof this.privateCallback&&this.privateCallback(this,c)};b.prototype.createContentSpan=function(){var c=$("<div/>",{"class":"ccl-actionmenu-dialog-content-item-block"});c.html(this.Value);return c};b.prototype.createContent=function(c){var a=$("<li/>",{"class":"ccl-actionmenu-dialog-content-item"});
a.append(c);a.attr("tabindex",0);this.privateTitle&&a[0]&&(a[0].title=this.privateTitle);return a};b.prototype.dispose=function(){this.content&&(this.content.off(),this.content.remove());this.content=this.contentSpan=this.waitForClick=this.privateIsVisible=this.privateIsEnabled=this.itemClickCallback=this.privateCallback=this.privateId=this.privateTitle=this.privateValue=this.isInit=void 0};return b}();b.ActionMenuItem=e})(CCL||(CCL={}));
(function(b){var e=function(){function d(c,a,b,d){this.options=this.convertSettings(b);this.items=[];if(a)for(b=0;b<a.length;b++)this.items.push(this.checkMenuItem(a[b]));this.callback=d;"string"===typeof c?this.boundContainer=$("#"+c):c instanceof HTMLElement?this.boundContainer=$(c):c instanceof jQuery&&(this.boundContainer=c);if(!this.boundContainer||!this.boundContainer.get(0))throw Error("Object for binding action menu events not found");this.init()}Object.defineProperty(d.prototype,"isOpen",
{get:function(){return this.privateIsOpen},enumerable:!0,configurable:!0});d.prototype.on=function(c,a){this.eventHandlers||(this.eventHandlers=[]);this.eventHandlers[c]||(this.eventHandlers[c]=[]);this.eventHandlers[c].push(a)};d.prototype.off=function(c,a){if(c=this.eventHandlers&&this.eventHandlers[c])for(var b=0;b<c.length;b++)c[b]===a&&c.splice(b--,1)};d.prototype.addItems=function(c){for(var a=0;a<c.length;a++)this.addItem(c[a])};d.prototype.addItem=function(c){var a=this;c=this.checkMenuItem(c);
c.init(function(c,b){a.onItemClick(c,b)});this.itemsContainer.append(c.content);this.items.push(c);this.trigger("itemAdded",c)};d.prototype.addItemBefore=function(c,a){var b=this;c=this.checkMenuItem(c);c.init(function(a,c){b.onItemClick(a,c)});c.content.insertBefore(a.content);this.items.push(c);this.trigger("itemAdded",c)};d.prototype.addItemAfter=function(c,a){var b=this;c=this.checkMenuItem(c);c.init(function(a,c){b.onItemClick(a,c)});c.content.insertAfter(a.content);this.items.push(c);this.trigger("itemAdded",
c)};d.prototype.getItems=function(){return this.items};d.prototype.getItemById=function(c){for(var a=0;a<this.items.length;a++)if(this.items[a].Id===c)return this.items[a];return null};d.prototype.getItemByValue=function(c){for(var a=0;a<this.items.length;a++)if(this.items[a].Value===c)return this.items[a];return null};d.prototype.removeItem=function(c){if(c){var a=this.items.indexOf(c);0<=a&&this.items.splice(a,1);c.dispose()}};d.prototype.closeIfNotFocus=function(){0===this.menuContainer.find(":focus").length&&
this.close()};d.prototype.close=function(){this.privateIsOpen&&(this.privateIsOpen=!1,this.clearCloseTimeout(),this.menuContainer.toggle(!1),this.trigger("closed"))};d.prototype.dispose=function(){for(var c=0;c<this.items.length;c++)this.items[c]&&"function"===typeof this.items[c].dispose&&this.items[c].dispose();this.boundContainer&&this.boundContainer.off();this.menuContainer&&(this.menuContainer.off(),this.menuContainer.remove());this.boundContainer=this.menuContainer=this.itemsContainer=this.closeByFocusOutWithTimeoutId=
this.clickWaitTimerId=this.waitForClick=this.privateIsOpen=this.eventHandlers=this.options=this.items=void 0};d.prototype.convertSettings=function(c){return c?c.initByCustumSettingsOrDefault&&"function"===typeof c.initByCustumSettingsOrDefault?c:new b.ActionMenuSettings(c.HorizontalPosition,c.OpeningMode,c.MenuZIndex,c.AutoCloseWindowResize,c.OpenUnderBoundContainer):new b.ActionMenuSettings};d.prototype.checkMenuItem=function(c){return c.init&&"function"===typeof c.init?c:new b.ActionMenuItem(c.Value,
c.Id,c.callback)};d.prototype.onItemClick=function(c,a){this.callback&&"function"===typeof this.callback&&this.callback(c,a);this.trigger("itemClick",c,a);this.close()};d.prototype.init=function(){var c=this;this.itemsContainer=this.createItemsContainer();this.menuContainer=this.createMenuContainer();this.menuContainer.append(this.itemsContainer);if(0<this.items.length)for(var a=0;a<this.items.length;a++)this.items[a].init(function(a,b){c.onItemClick(a,b)}),this.itemsContainer.append(this.items[a].content);
this.options.OpenUnderBoundContainer?this.menuContainer.insertAfter(this.boundContainer):this.menuContainer.appendTo(document.body);this.registerBoundContainerClickHandler();this.menuContainer.on("focusin",function(){c.clearCloseTimeout()});this.menuContainer.on("focusout",function(){c.closeByFocusOutWithTimeoutId=setTimeout(function(){c.closeIfNotFocus()},300)});if(this.options.AutoCloseWindowResize)$(window).on("resize",function(){c.close()})};d.prototype.registerBoundContainerClickHandler=function(){var c=
this;this.boundContainer.on("remove",function(){c.dispose()});switch(this.options.OpeningMode){case b.ActionMenuOpeningMode.Click:this.boundContainer.on("mouseup",function(a){c.waitForClick&&0===a.button&&(c.waitForClick=!1,c.boundContainerClick(a))});this.boundContainer.on("touchend",function(a){c.waitForClick&&(c.waitForClick=!1,c.boundContainerClick(a))});this.boundContainer.on("mousedown",function(a){0===a.button&&(c.waitForClick=!0)});this.boundContainer.on("touchstart",function(){c.waitForClick=
!0});this.boundContainer.on("touchmove",function(){c.waitForClick=!1});this.boundContainer.on("keyup",function(a){c.waitForClick&&(c.waitForClick=!1,a.which===b.CommonConstants.keyCodes.enter&&c.boundContainerClick(a))});this.boundContainer.on("keydown",function(a){c.waitForClick=a.which===b.CommonConstants.keyCodes.enter?!0:!1});break;case b.ActionMenuOpeningMode.ContextMenu:this.boundContainer.on("mouseup",function(){c.clearWaitTimeout()}),this.boundContainer.on("touchend",function(){c.clearWaitTimeout()}),
this.boundContainer.on("touchmove",function(){c.clearWaitTimeout()}),this.boundContainer.on("mousedown",function(a){c.clickWaitTimerId||(c.clickWaitTimerId=setTimeout(function(){c.boundContainerClick(a)},1300))}),this.boundContainer.on("touchstart",function(a){c.clickWaitTimerId||(c.clickWaitTimerId=setTimeout(function(){c.boundContainerClick(a)},1300))}),this.boundContainer.on("contextmenu",function(a){c.clearWaitTimeout();c.boundContainerClick(a)})}};d.prototype.boundContainerClick=function(c){c.preventDefault();
this.clearWaitTimeout();this.open();this.setMenuPosition(c);this.menuContainer.focus()};d.prototype.setMenuPosition=function(c){var a={x:0,y:0};if(this.options.OpenUnderBoundContainer||"contextmenu"!==c.type&&"mouseup"!==c.type&&"mousedown"!==c.type){c=this.boundContainer.offset();c=this.options.OpenUnderBoundContainer?this.boundContainer.position():c;var f=this.boundContainer.outerHeight(!1);this.boundContainer.outerWidth(!1);a.x=c.left;this.options.HorizontalPosition===b.ActionMenuHorizontalPosition.Left&&
(a.x+=this.boundContainer.outerWidth(!1));a.y=c.top+f}else a=this.getClickPosition(c);c=this.menuContainer[0];f=c.offsetWidth;switch(this.options.HorizontalPosition){case b.ActionMenuHorizontalPosition.Right:c.style.left=a.x+"px";break;default:c.style.left=a.x-f+"px"}c.style.top=a.y+"px";this.checkMenuPosition(a)};d.prototype.getClickPosition=function(c){var a=0,b=0;if(c.pageX||c.pageY)a=c.pageX,b=c.pageY;else if(c.clientX||c.clientY)a=c.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,
b=c.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{x:a,y:b}};d.prototype.checkMenuPosition=function(c){var a=this.menuContainer.position(),f=this.menuContainer[0],d=this.menuContainer.offsetParent(),e=d.height();d=d.width();0===e&&(e=$(document).height());f.style.maxHeight=e+"px";var k=this.menuContainer[0],l=k.offsetWidth;k=k.offsetHeight;0>e-(a.top+k)&&(c=c.y-Math.abs(a.top-e+k),0>c&&(c=0),f.style.top=c+"px");switch(this.options.HorizontalPosition){case b.ActionMenuHorizontalPosition.Right:a.left+
l>d&&(a=d-l,0>a&&(a=0),f.style.left=a+"px");break;case b.ActionMenuHorizontalPosition.Left:0>a.left&&(f.style.left="0px")}};d.prototype.createItemsContainer=function(){return $("<ul/>",{"class":"ccl-actionmenu-dialog-content"})};d.prototype.createMenuContainer=function(){var c=$("<div/>",{"class":"ccl-actionmenu-dialog"});c.toggle(!1);c.css("z-index",0<=this.options.MenuZIndex?this.options.MenuZIndex:1);c.attr("tabindex",0);return c};d.prototype.open=function(){this.privateIsOpen&&this.close();this.privateIsOpen=
!0;this.clearCloseTimeout();this.menuContainer.toggle(!0);this.trigger("opened")};d.prototype.clearCloseTimeout=function(){this.closeByFocusOutWithTimeoutId&&(clearTimeout(this.closeByFocusOutWithTimeoutId),this.closeByFocusOutWithTimeoutId=void 0)};d.prototype.clearWaitTimeout=function(){this.clickWaitTimerId&&(clearTimeout(this.clickWaitTimerId),this.clickWaitTimerId=void 0)};d.prototype.trigger=function(c){for(var a=1;a<arguments.length;a++);if(this.eventHandlers&&this.eventHandlers[c]){a=this.eventHandlers[c];
for(var b=0;b<a.length;b++)a[b].apply(this,[].slice.call(arguments,1))}};return d}();b.ActionMenu=e})(CCL||(CCL={}));
(function(b){var e=function(){function b(){}b.Clearfix="h-clf";b.ErrorFeedback={Container:"ccl-error-feedback",Message:"ccl-error-feedback-message",RetryButton:"ccl-error-feedback-retry",SecondButton:"ccl-error-feedback-secondary",CancelButton:"ccl-error-feedback-cancel",IsVisible:"ccl-error-feedback-is-visible",CloseButton:"ccl-error-feedback-close",DismissButton:"ccl-error-feedback-dismiss",RetryButtonContainer:"ccl-error-feedback-retry-container",SecondButtonContainer:"ccl-error-feedback-secondary-container",
CancelButtonContainer:"ccl-error-feedback-cancel-container",CloseButtonContainer:"ccl-error-feedback-close-container",DismissButtonContainer:"ccl-error-feedback-dismiss-container"};b.InformationFeedback={Container:"ccl-info-feedback",Message:"ccl-info-feedback-message",CloseButton:"ccl-info-feedback-closebutton",ExtraButton:"ccl-info-feedback-extrabutton",DismissButton:"ccl-info-feedback-dismissbutton",IsVisible:"ccl-info-feedback-is-visible",ButtonContainer:"ccl-info-feedback-buttons",CloseButtonContainer:"ccl-info-feedback-close-container",
ExtraButtonContainer:"ccl-info-feedback-extra-container",DismissButtonContainer:"ccl-info-feedback-dismiss-container"};b.FullScreenViewer={Opened:"ccl-full-screen-viewer-opened",ContentElement:"ccl-full-screen-viewer-content-element",HeaderOnly:"ccl-full-screen-viewer--header-only"};b.FullScreenDialog={Opened:"ccl-full-screen-dialog-opened",Header:"ccl-fullscreen-header"};b.CssModal={Content:"ccl-cssmodal-modal-content"};b.Grid={FocusedRow:"focused-row"};b.ModernCheckbox={Checkbox:"ccl-checkbox",
SmallCheckbox:"ccl-checkbox-small",Input:"ccl-checkbox-input",CustomCheck:"ccl-checkbox-custom-check",CustomCheckWrapper:"ccl-checkbox-custom-check-wrapper",Label:"ccl-checkbox-label",TooltipContent:"ccl-checkbox-tooltip"};b.Buttons={Red:"ccl-button-color-red"};return b}();b.CommonCssClasses=e})(CCL||(CCL={}));
(function(b){var e=function(){function d(){}d.prototype.setReadableIframe=function(c){var a=(window.itslTop||window.top).document.querySelector("meta[name='"+d.edgeImmersiveReaderMetaTagName+"']");a?a.setAttribute("content",c):(a=document.createElement("meta"),a.name=d.edgeImmersiveReaderMetaTagName,a.content=c,(window.itslTop||window.top).document.querySelector("head").appendChild(a))};d.prototype.removeEdgeReadableMetaTag=function(){var c=(window.itslTop||window.top).document.querySelector("meta[name='"+
d.edgeImmersiveReaderMetaTagName+"']");c&&c.remove()};d.prototype.makePageEdgeReadable=function(c){var a=this;this.setReadableIframe(c);window.addEventListener("beforeunload",function(){return a.removeEdgeReadableMetaTag()})};d.prototype.makePageEdgeReadableViaPostMessages=function(){var c=this;this.createEdgeReadablePostMessage({isPageEdgeReadable:!0});window.addEventListener("beforeunload",function(){return c.createEdgeReadablePostMessage({isPageEdgeReadable:!1})})};d.prototype.handleEdgeReadablePostMessage=
function(c){var a=this;b.CommonFunctions.attachPostMessageEventListener($(window),b.CommonWindowMessages.MessageNames.edgeImmersiveReaderReadable,function(b){b.extendedData.isPageEdgeReadable?a.makePageEdgeReadable(c):a.removeEdgeReadableMetaTag()})};d.prototype.createEdgeReadablePostMessage=function(c){b.CommonFunctions.makePostMessageCall(window.parent,new b.CommonWindowMessages.GenericMessageWithData(b.CommonWindowMessages.MessageNames.edgeImmersiveReaderReadable,{isPageEdgeReadable:c.isPageEdgeReadable}))};
d.edgeImmersiveReaderMetaTagName="EDGE_READABLE_FRAME";return d}();b.EdgeImmersiveReaderHelper=e})(CCL||(CCL={}));
(function(b){var e=function(){function c(){}c.ShowFeedbackMessage="ShowErrorFeedbackMessage";c.HideFeedbackMessage="HideErrorFeedbackMessage";return c}();b.ErrorFeedbackEvent=e;var d=function(){function c(a,c){var f=this;this.settings=c;this.mode=c.Mode;this.$feedback=a;this.$retryButtonContainer=this.$feedback.find("."+b.CommonCssClasses.ErrorFeedback.RetryButtonContainer);this.$secondButtonContainer=this.$feedback.find("."+b.CommonCssClasses.ErrorFeedback.SecondButtonContainer);this.$cancelButtonContainer=
this.$feedback.find("."+b.CommonCssClasses.ErrorFeedback.CancelButtonContainer);this.$closeButtonContainer=this.$feedback.find("."+b.CommonCssClasses.ErrorFeedback.CloseButtonContainer);this.$dismissButtonContainer=this.$feedback.find("."+b.CommonCssClasses.ErrorFeedback.DismissButtonContainer);a=$("#"+c.MainContainerClientId);a.on(e.ShowFeedbackMessage,function(a,c,d,e,g,q,p,v){a.stopPropagation();f.showFeedbackMessage(c,d,e,g,q,p,v);b.FeedbackAccessibility.focusOnFeedbackAction(f.$feedback)});a.on(e.HideFeedbackMessage,
function(a,c){a.stopPropagation();f.hideFeedbackMessage(c)});b.FeedbackAccessibility.makeAccessible(this.$feedback);$(document).on("keyup",function(a){a.which===b.CommonConstants.keyCodes.escape&&f.hideFeedbackMessage()})}c.showFeedback=function(a,c,b,d){void 0===d&&(d=!1);a.trigger(e.ShowFeedbackMessage,[c,b,null,null,d])};c.showDismissFeedback=function(a,c,d,h){a.trigger(e.ShowFeedbackMessage,[c,d,null,null,!1,b.ErrorFeedbackMode.Dismiss,h])};c.showFeedbackWithSecondButton=function(a,c,b,d,k,l){void 0===
l&&(l=!1);a.trigger(e.ShowFeedbackMessage,[c,b,d,k,l])};c.hideFeedback=function(a,c){void 0===c&&(c=!0);a.trigger(e.HideFeedbackMessage,c)};c.prototype.enableButton=function(a,c,b,d,e){void 0===d&&(d=null);void 0===e&&(e=!1);var f=a.find("."+c);if(!f.length&&(f=$("<button/>",{type:"button","class":c}),a.append(f),e?f.html(b):f.text(b),d))f.on("click",d);return f};c.prototype.removeAllButtons=function(a){a.find("button").remove()};c.prototype.showFeedbackMessage=function(a,c,d,e,k,l,m){var f=this;
this.$feedback.find("."+this.settings.CssClasses.MessageText).html(a);l&&(this.mode=l);this.removeAllButtons(this.$feedback);this.mode===b.ErrorFeedbackMode.Retry?c&&this.enableButton(this.$retryButtonContainer,this.settings.CssClasses.RetryButton,this.settings.RetryButtonText,c):this.mode===b.ErrorFeedbackMode.Dismiss&&(a=function(){return f.hideDismissFeedback(c,!0)},m&&(a=m),b.CommonFunctions.isMobileDevice()?this.enableButton(this.$dismissButtonContainer,this.settings.CssClasses.DismissButton,
this.settings.DismissButtonText,a):this.enableButton(this.$closeButtonContainer,this.settings.CssClasses.CloseButton,this.settings.CloseButtonInnerHtml,a,!0).attr("aria-label",this.settings.CloseButtonTitle));d&&e&&this.enableButton(this.$secondButtonContainer,this.settings.CssClasses.SecondButton,d,e);k&&this.enableButton(this.$cancelButtonContainer,this.settings.CssClasses.CancelButton,this.settings.CancelButtonText,function(){return f.hideFeedbackMessage(!0)});$("body").addClass(b.CommonCssClasses.ErrorFeedback.IsVisible);
this.$feedback.stop(!0,!0).show()};c.prototype.hideDismissFeedback=function(a,c){void 0===c&&(c=!0);this.hideFeedbackMessage(c).then(function(){a&&a()})};c.prototype.hideFeedbackMessage=function(a){void 0===a&&(a=!0);var c=$.Deferred();$("body").removeClass(b.CommonCssClasses.ErrorFeedback.IsVisible);a?this.$feedback.stop(!0,!0).fadeOut(500,function(){c.resolve()}):(this.$feedback.hide(),c.resolve());return c.promise()};return c}();b.ErrorFeedback=d})(CCL||(CCL={}));
(function(b){var e=function(){function b(){}b.prototype.enable=function(){-1===b.instances.indexOf(this)&&b.instances.push(this)};b.prototype.disable=function(){var c=b.instances.indexOf(this);-1<c&&b.instances.splice(c,1)};b.allowDialogWithId=function(c){b.isAllowed(c)||b.allowDialogIds.push(c)};b.isDialogAllowed=function(c){var a={isAllowed:!0,deniedByInstances:[]};b.isAllowed(c)||b.instances.forEach(function(c){a.isAllowed=!1;a.deniedByInstances.push(c);!a.confirmationMessage&&c.confirmationMessage&&
0<c.confirmationMessage.length&&(a.confirmationMessage=c.confirmationMessage)});return a};b.isAllowed=function(c){return-1<b.allowDialogIds.indexOf(c)};b.instances=[];b.allowDialogIds=[];return b}();b.DialogWhiteList=e})(CCL||(CCL={}));
(function(b){var e=function(){return function(b){var c=this;this.readMetadata=function(a){a=$(a).parents("["+c.options.metadataAttrName+"]").first().attr(c.options.metadataAttrName);return JSON.parse(a)};this.readExtendedMetadata=function(a){return $(a).parents("["+c.options.metadataAttrName+"]").first().data(c.options.extendedMetadataAttrName)};this.options=b;this.options.legacyFileList.settings=this.options.settings;this.options.legacyFileList.controls={title:""};var a=b.container.find("["+b.metadataAttrName+
"]");a.each(function(a,c){a=JSON.parse($(c).attr(b.metadataAttrName));a=b.extendedMetadatas[a.id];$(c).data(b.extendedMetadataAttrName,a)});b.callbacks&&b.callbacks.init&&b.callbacks.init(a);a.find(b.fileItemSelector).click(function(a){var f=c.readMetadata(a.currentTarget);a=c.readExtendedMetadata(a.currentTarget);b.callbacks&&b.callbacks.itemClick&&b.callbacks.itemClick(f,a,c.options.legacyFileList);return!1});a.find(b.downloadSelector).click(function(a){if(a.currentTarget instanceof HTMLAnchorElement&&
a.currentTarget.href)return!0;if(c.options.callbacks&&c.options.callbacks.downloadClick){var b=c.readMetadata(a.currentTarget);a=c.readExtendedMetadata(a.currentTarget);return c.options.callbacks.downloadClick(b,a,c.options.legacyFileList)}return!0})}}();b.FileListMvc=e})(CCL||(CCL={}));
(function(b){var e=function(){function d(c){var a=this;this.onEscape=function(c){c.which===b.CommonConstants.keyCodes.escape&&a.closeDialog()};this.closeTooltip=function(c){return setTimeout(function(){return a.toolTip.closeTooltip()},c)};this.openTooltip=function(c,b,d){setTimeout(function(){a.toolTip.isTooltipOpened()||a.$tooltipContentLabel.html(b);a.toolTip.openTooltip(c,a.tooltipPositionSettings)},d)};this.settings=c;window[d.clientInstanceName]=this;$(function(){a.$body=$("body");a.$bodyWrapper=
$("."+a.settings.Css.BodyWrapper);a.$dialog=$("#"+a.settings.Controls.Dialog);a.$closeButton=a.$dialog.find("."+a.settings.Css.CloseButton);a.$errorLabel=$("#"+a.settings.Controls.ErrorLabel);a.$tooltipContentLabel=$("#"+a.settings.Controls.TooltipContentLabel);a.$contentContainer=$("#"+a.settings.Controls.ContentContainer);a.$loadingIndicator=$("#"+a.settings.Controls.LoadingIndicator);a.focusTracker=new b.FocusTracker(a.$dialog);a.$closeButton.click(function(){a.closeDialog()});a.initTooltip();
a.settings.Terms.CloseTooltip&&a.toggleToolTip(a.$closeButton,a.settings.Terms.CloseTooltip,!0);b.CommonFunctions.attachPostMessageEventListener($(window),b.CommonWindowMessages.MessageNames.fullScreenDialogCollapseTitle,function(){a.$dialog.toggleClass(a.settings.Css.NoHeader)}.bind(a));a.notifyPlayPlanDialog()})}d.getInstance=function(){return window[d.clientInstanceName]};d.openDialog=function(c){d.getInstance().openDialog(c)};d.prototype.isOpened=function(){return this.$dialog.is(":visible")};
d.prototype.closeDialogWithoutConfirm=function(){$(this).trigger(d.onCloseEvent);this.$contentContainer.empty();this.toggleDialog(!1)};d.prototype.closeDialog=function(){var c=this,a=$.Deferred(),b=new CustomEvent(d.onCloseCancelableEvent,{bubbles:!0,cancelable:!0,detail:a});this.$dialog.get(0).dispatchEvent(b)?this.closeDialogWithoutConfirm():a.done(function(){c.closeDialogWithoutConfirm()})};d.prototype.openDialog=function(c){c=this.updateContent(c);this.toggleDialog(!0);return c};d.prototype.openDialogWithContent=
function(c){this.updateContentWithHtmlString(c);this.toggleDialog(!0)};d.prototype.updateContent=function(c){var a=this,b=$.Deferred();if(!c)return console.error("Url to load not set"),b.reject("Url to load not set"),b.promise();this.$contentContainer.empty();this.$loadingIndicator.show();$.get(c).done(function(c){a.$contentContainer.html(c);b.resolve(a)}).fail(function(a){b.reject(a)}).always(function(){a.$loadingIndicator.hide()});return b.promise()};d.prototype.updateContentWithHtmlString=function(c){this.$contentContainer.empty();
this.$contentContainer.html(c)};d.prototype.notifyPlayPlanDialog=function(){var c=window.parent;c&&window!==c&&b.CommonFunctions.makePostMessageCall(c,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.fullScreenDialogOpening))};d.prototype.toggleDialog=function(c){var a=this;this.toggleEscapeHandler(c);this.adjustDialogPositionOnIosDevice(c);this.$body.toggleClass(b.CommonCssClasses.FullScreenDialog.Opened,c);this.$dialog.toggle(c);c?(this.expandContentAreaFrame(),this.$startLink=
$(":focus"),this.$closeButton.focus(),this.focusTracker.startTrackFocus(),$(document).on("cssmodal:show",function(){return a.toggleEscapeHandler(!1)}).on("cssmodal:hide",function(){return a.toggleEscapeHandler(!0)})):(this.collapseContentAreaFrame(),this.focusTracker.stopTrackFocus(),this.$startLink.focus())};d.prototype.expandContentAreaFrame=function(){this.settings.IsOpenedInExtension?b.CommonFunctions.makePostMessageCall(window,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.enableFullScreen)):
(this.suspendUpdateBreadCrumbsAndNavigation(!0),b.CommonFunctions.makePostMessageCall(window.top,{messageName:b.CommonWindowMessages.MessageNames.expandContentAreaFrame}),this.suspendExpandCollaplseContentAreaFrame(!0))};d.prototype.collapseContentAreaFrame=function(){this.settings.IsOpenedInExtension?b.CommonFunctions.makePostMessageCall(window,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.disableFullScreen)):(this.suspendUpdateBreadCrumbsAndNavigation(!1),this.suspendExpandCollaplseContentAreaFrame(!1),
b.CommonFunctions.makePostMessageCall(window.top,{messageName:b.CommonWindowMessages.MessageNames.collapseContentAreaFrame}))};d.prototype.suspendUpdateBreadCrumbsAndNavigation=function(c){b.CommonFunctions.makePostMessageCall(window.top,new b.CommonWindowMessages.GenericMessageWithData(b.CommonWindowMessages.MessageNames.suspendUpdateBreadCrumbsAndNavigation,{suspend:c}))};d.prototype.suspendExpandCollaplseContentAreaFrame=function(c){b.CommonFunctions.makePostMessageCall(window.top,new b.CommonWindowMessages.GenericMessageWithData(b.CommonWindowMessages.MessageNames.suspendExpandCollaplseContentAreaFrame,
{suspend:c}))};d.prototype.toggleEscapeHandler=function(c){if(c)this.$body.on("keyup",this.onEscape);else this.$body.off("keyup",this.onEscape)};d.prototype.adjustDialogPositionOnIosDevice=function(c){if(b.CommonFunctions.isIosDevice()&&!this.settings.IsOpenedInExtension){var a=$(window.itslTop||window.top).height()-this.$closeButton.height();this.$bodyWrapper.css("overflow",c?"hidden":"");this.$bodyWrapper.height(c?a.toString():"auto")}};d.prototype.showErrorMessage=function(c){this.$errorLabel.text(c);
this.$errorLabel.show()};d.prototype.initTooltip=function(){this.tooltipPositionSettings={My:"right+23 top",At:"center bottom+10",Arrow:"bottom"};this.$toolTipContainer=this.$dialog.find("."+this.settings.Css.ToolTipContentConatiner);this.toolTip=new b.CustomTooltip("fullScreenDialogToolTip",{contentContainer:this.$toolTipContainer,zIndex:10},this.settings.Css.CustomTooltipCssClasses);this.$toolTipContainer.show()};d.prototype.toggleToolTip=function(c,a,f){var d=this;if(!b.CommonFunctions.isMobileDevice())if(f)c.on("mouseover",
function(){return d.openTooltip(c,a,0)}).on("mouseleave",function(){return d.closeTooltip(0)});else this.closeTooltip(0),c.off("mouseover mouseleave")};d.clientInstanceName="fullScreenDialogClientInstanceName";d.onCloseEvent="fullScreenDialog:close";d.onCloseCancelableEvent="fullScreenDialog:cancelableClose";return d}();b.FullScreenDialog=e})(CCL||(CCL={}));
(function(b){var e=function(){function d(){var c=this;this.contentDimensions={width:0,height:0};this.reportContentDimensionsIfChanged();var a=new b.CallbackDebouncer(function(){return c.reportContentDimensions(c.calculateDocumentDimensions())});$(window).on("resize",function(){a.invokeCallback(void 0,250)});$(document).on("cssmodal:show",function(){c.reportContentDimensions(d.defaultDimensions)})}d.prototype.calculateDocumentDimensions=function(){var c=$(document.body),a=$(document.documentElement),
b=d.calculateSelectorsDimensions();return{width:Math.max(c.outerWidth(),a.outerWidth(),b.width,$(document).width()),height:Math.max(c.outerHeight(),a.outerHeight(),b.height)}};d.calculateSelectorsDimensions=function(){var c=0,a=0;this.selectorsToListenHeight.forEach(function(b){$(b+":not(:hidden)").each(function(b,f){b=$(f);f=b.offset();var d=f.top+b.outerHeight(!0);d>c&&(c=d);b=f.left+b.outerWidth(!0);b>a&&(a=b)})});return{width:a,height:c}};d.addSelectorToListenHeight=function(c){this.selectorsToListenHeight.push(c);
return this};d.prototype.reportContentDimensions=function(c){b.CommonFunctions.makePostMessageCall(window.parent,new b.CommonWindowMessages.GenericMessageWithData(b.CommonWindowMessages.MessageNames.extensionContentOpened,{iframeWidth:c.width,iframeHeight:c.height}))};d.prototype.reportContentDimensionsIfChanged=function(){var c=this.calculateDocumentDimensions();if(this.contentDimensions.height!==c.height||this.contentDimensions.width!==c.width)this.contentDimensions=c,this.reportContentDimensions(this.contentDimensions)};
d.prototype.setUpMutationObserver=function(){var c=this;(new MutationObserver(function(a){0<a.length&&(new b.CallbackDebouncer(function(){return c.reportContentDimensionsIfChanged()})).invokeCallback(void 0,100)})).observe(document.body,{childList:!0,attributes:!0,attributeFilter:["style","src","height","width","class"],characterData:!0,subtree:!0})};d.prototype.setUpTimerObserver=function(){var c=this;this.reportContentDimensionsIfChanged();this.onContentHeightChangeTimer&&clearTimeout(this.onContentHeightChangeTimer);
this.onContentHeightChangeTimer=setTimeout(function(){return c.setUpTimerObserver()},200)};d.prototype.setUpChangeObservation=function(){"MutationObserver"in window?this.setUpMutationObserver():this.setUpTimerObserver()};d.setUpIframeContentHeightReporter=function(){(new d).setUpChangeObservation()};d.attachExtensionContentOpenedListenerForIframe=function(c,a){void 0===a&&(a=!1);$(function(){var f=!1;b.CommonFunctions.attachPostMessageEventListener($(window),b.CommonWindowMessages.MessageNames.extensionContentOpened,
function(e){var g=$("#"+c);e=e.extendedData;var k=b.CommonFunctions.calculateRightAndBottomOffset(g);k=IframeResizer.getFixedIframeDefaultWidthAndHeight($(window),g,k);g.height(e.iframeHeight===d.defaultDimensions.height?k.height:Math.max(e.iframeHeight,k.height));a&&void 0!==e.iframeWidth&&g.width(e.iframeWidth===d.defaultDimensions.width?k.width:Math.max(e.iframeWidth,k.width));f||(g.attr("scrolling","no"),f=!0)})})};d.defaultDimensions={width:-1,height:-1};d.selectorsToListenHeight=[];return d}();
b.IframeContentHeightReporter=e})(CCL||(CCL={}));
(function(b){var e=function(){function c(){}c.ShowFeedbackMessage="ShowInformationFeedbackMessage";c.HideFeedbackMessage="HideInformationFeedbackMessage";return c}();b.InformationFeedbackEvent=e;var d=function(){function c(a,c){var f=this;this.settings=c;this.$feedback=a;this.$closeButtonContainer=this.$feedback.find("."+this.settings.CssClasses.CloseButtonContainer);this.$buttonsContainer=this.$feedback.find("."+this.settings.CssClasses.ButtonsContainer);this.$extraButtonContainer=this.$feedback.find("."+
b.CommonCssClasses.InformationFeedback.ExtraButtonContainer);this.$dismissButtonContainer=this.$feedback.find("."+b.CommonCssClasses.InformationFeedback.DismissButtonContainer);this.$buttonsContainer.hide();a=$("#"+c.MainContainerClientId);a.on(e.ShowFeedbackMessage,function(a,c,d,e,g){a.stopPropagation();f.showFeedbackMessage(c,d,e,g);b.FeedbackAccessibility.focusOnFeedbackAction(f.$feedback)});a.on(e.HideFeedbackMessage,function(a,c){a.stopPropagation();f.hideFeedbackMessage(c)});b.FeedbackAccessibility.makeAccessible(this.$feedback);
$(document).on("keyup",function(a){a.which===b.CommonConstants.keyCodes.escape&&f.hideFeedbackMessage()})}c.prototype.enableButton=function(a,c,b,d,e){void 0===d&&(d=null);void 0===e&&(e=!1);var f=a.find("."+c);if(!f.length&&(f=$("<button/>",{type:"button","class":c}),a.append(f),e?f.html(b):f.text(b),d))f.on("click",d);return f};c.prototype.removeAllButtons=function(a){a.find("button").remove()};c.prototype.showFeedbackMessage=function(a,c,d,e){var f=this;clearTimeout(this.hidingAnimation);this.$feedback.find("."+
this.settings.CssClasses.MessageText).html(a);this.removeAllButtons(this.$feedback);a=!1;if(c&&d){var g=this.enableButton(this.$extraButtonContainer,this.settings.CssClasses.ExtraButton,c);g.on("click",function(){clearTimeout(f.hidingAnimation);g.attr("disabled","disabled");d(g)});g.removeAttr("disabled");a=!0}this.settings.HideDismissButton||a?this.enableButton(this.$closeButtonContainer,this.settings.CssClasses.CloseButton,this.settings.CloseButtonInnerHtml,function(){f.hideFeedbackMessage()},!0).attr("aria-label",
this.settings.CloseButtonTitle):this.enableButton(this.$dismissButtonContainer,this.settings.CssClasses.DismissButton,this.settings.DismissButtonText,function(){f.hideFeedbackMessage()});this.$buttonsContainer.toggle(a||!this.settings.HideDismissButton);$("body").addClass(b.CommonCssClasses.InformationFeedback.IsVisible);this.$feedback.stop(!0,!0).show();e||(this.hidingAnimation=setTimeout(function(){return f.hideFeedbackMessage()},15E3))};c.prototype.hideFeedbackMessage=function(a){void 0===a&&(a=
!0);clearTimeout(this.hidingAnimation);$("body").removeClass(b.CommonCssClasses.InformationFeedback.IsVisible);this.$feedback.stop(!0,!0);a?this.$feedback.fadeOut():this.$feedback.hide();this.settings.OnSeenCallback&&(new Function(this.settings.OnSeenCallback))()};c.showFeedback=function(a,c,b){void 0===b&&(b={});a.trigger(e.ShowFeedbackMessage,[c,b.extraButtonName,b.extraButtonCallback,b.disableAutomaticHiding])};c.showFeedbackWithextraButton=function(a,c,b,d){a.trigger(e.ShowFeedbackMessage,[c,
b,d,!1])};c.hideFeedback=function(a,c){void 0===c&&(c=!0);a.trigger(e.HideFeedbackMessage,c)};return c}();b.InformationFeedback=d})(CCL||(CCL={}));
(function(b){var e=function(){function d(c){var a=this;this.settings=c;c=this.settings.ContentSelector+" "+b.CommonFunctions.getDataSelector(d.dataAttributes.visibilityToggler);this.visibleTextLengthCalculator=new b.VisibleTextLengthCalculator(this.settings.NumberOfCharactersToShow,this.settings.NumberOfLineBreaks,b.CommonFunctions.isEdge());$(document).on("click",c,function(c){var f=$(c.currentTarget);a.setVisibilityTogglerState(f,!f.data(d.dataAttributes.textIsExpanded));f=f.parent();f.find("."+
d.commonSettings.CssClasses.VisibleText).toggleClass(d.commonSettings.CssClasses.ShowEllipsis);f=f.find("."+d.commonSettings.CssClasses.HiddenText).toggle();b.CommonFunctions.isFirefox()&&"block"===f.css("display")&&f.css("display","inline");c.preventDefault()});this.settings.RunScanningDocumentAfterInitialization&&this.scanDocumentAndAppend()}d.prototype.scanDocumentAndAppend=function(){var c=this;$(this.settings.ContentSelector+":not("+b.CommonFunctions.getDataSelector(d.dataAttributes.processedIndicator)+
")").each(function(a,b){return c.scanItemAndAppend($(b))})};d.prototype.scanItemAndAppend=function(c){var a=$.trim(c.html());if(this.visibleTextLengthCalculator.shouldCalculateRealLength(c[0])){var b=this.visibleTextLengthCalculator.calculateRealLength(c[0]);if(0!==b&&b<a.length){var e=a.substr(0,b);a=a.substr(b);c.empty().attr("data-"+d.dataAttributes.processedIndicator,"").append($("<span>").addClass(d.commonSettings.CssClasses.VisibleText).addClass(d.commonSettings.CssClasses.ShowEllipsis).html(e)).append($("<span>").addClass(d.commonSettings.CssClasses.HiddenText).html(a).hide()).append(this.setVisibilityTogglerState($("<button>").addClass(d.commonSettings.CssClasses.VisibilityToggler).attr((h=
{},h["data-"+d.dataAttributes.visibilityToggler]="",h["aria-controls"]=c.closest(this.settings.ContentSelector).prop("id")||null,h))))}}var h};d.prototype.setVisibilityTogglerState=function(c,a){void 0===a&&(a=!1);return c.text(a?this.settings.Resources.ShowLess:this.settings.Resources.ShowMore).attr("aria-expanded",""+a).data(d.dataAttributes.textIsExpanded,a)};d.dataAttributes={processedIndicator:"inline-text-expander-processed",textIsExpanded:"inlinetextexpander-expanded",visibilityToggler:"inlinetextexpander-visibility-toggler"};
return d}();b.InlineTextExpander=e})(CCL||(CCL={}));
(function(b){var e=function(){function b(){this.skipUrls=[]}b.prototype.getFirstLink=function(c){c=this.parseFirstLink(this.getTextWithoutSkippedUrls(this.getEmbedCodeWithoutStyles(c)));return""===c?"":b.ensureUrlScheme(c)};b.prototype.getDomain=function(c){var a=document.createElement("a");a.href=c;return a.hostname};b.prototype.skipUrl=function(c){this.skipUrls.push(c)};b.prototype.removeFromSkipUrl=function(c){c=this.skipUrls.indexOf(c);-1<c&&this.skipUrls.splice(c,1)};b.prototype.isEmail=function(c){for(var a=
c.length-1;0<=a&&!c.charAt(a).match(b.lettersRegex);)a--;return null!==c.substr(0,a+1).match(b.emailRegex)};b.ensureUrlScheme=function(c){b.urlWithFirstAtSignRegex.test(c)&&(c=c.substr(c.indexOf("@")+1));return b.schemeDefinedUrlRegex.test(c)?c:b.protocolRelativeUrlRegex.test(c)?"http:"+c:"http://"+c};b.prototype.getEmbedCodeWithoutStyles=function(c){return c.replace(b.stylesRegex,"")};b.prototype.getTextWithoutSkippedUrls=function(c){var a=this;return this.skipUrls.reduce(function(c,d){var f=a.parseFirstLink(c);
return b.ensureUrlScheme(f)===d?c.replace(f," "):c},c)};b.prototype.getDataAttribute=function(c){var a=null;c.match(b.dataAttributesRegex)&&(a=c.replace(b.dataAttributesRegex,b.dataAttributesTemplate));return a};b.prototype.parseFirstLink=function(c){for(var a=this.getDataAttribute(c),f=c.match(b.urlRegex);""!==c&&null!==f&&(this.isEmail(f[0])||0===f[0].trim().indexOf("@"));)c=c.replace(f[0]," ").trim(),f=c.match(b.urlRegex);return null===f?"":a?f[0]+(-1<f[0].indexOf("?")?"&":"?")+a:f[0]};b.wholeUrlRegex=
/^(https?:\/\/)?((((?!-))(xn--)?[a-z0-9-_@]{0,61}[a-z0-9]{1,1}\.)*(xn--)?([a-z0-9\-@]{1,61}|[a-z0-9-]{1,30}\.[a-z]{2,})\.)([a-zZ-Z0-9\.\-\/\\_%,!:\+@=]{2,})(\?([^#\s>"]*))?(#(\S*))?$/i;b.urlRegex=/(https?:\/\/)?((((?!-))(xn--)?[a-z0-9-_@]{0,61}[a-z0-9]{1,1}\.)*(xn--)?([a-z0-9\-@]{1,61}|[a-z0-9-]{1,30}\.[a-z]{2,})\.)([a-zZ-Z0-9\.\-\/\\_%,!:\+@=]{2,})(\?([^#"'\s>"]*))?(#([^"'\s]*))?/i;b.emailRegex=/(mailto:([^\?]*))?([a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$)/i;b.schemeDefinedUrlRegex=/^(https?:\/\/)/i;
b.protocolRelativeUrlRegex=/^(\/\/)/;b.urlWithFirstAtSignRegex=/^((https?:)?\/\/)?@/i;b.lettersRegex=/^[a-z]$/i;b.stylesRegex=/(style\s*=\s*)(?:(?:[^>']([^>"]*))|(?:[^>"]([^>']*)))/ig;b.dataAttributesRegex=/(<div.+?data-nrk-id="([\d]+)".+)|(<div.+?data-sample-id="([\d]+)".+)/i;b.dataAttributesTemplate="data-id=$2$4";return b}();b.LinkParser=e})(CCL||(CCL={}));
(function(b){(function(e){e.BuildCheckbox=function(c,a,f,d){void 0===f&&(f=!0);void 0===d&&(d=!1);if(!c.parent().hasClass(b.CommonCssClasses.ModernCheckbox.Checkbox)){c.addClass(b.CommonCssClasses.ModernCheckbox.Input);c.attr("aria-label",a);var e=b.CommonCssClasses.ModernCheckbox.Checkbox;f&&(e+=" "+b.CommonCssClasses.ModernCheckbox.SmallCheckbox);c=c.wrap('<label class="'+e+'"></label>').parent();f=$("<span>").addClass(b.CommonCssClasses.ModernCheckbox.CustomCheckWrapper);f.append($("<span>").addClass(b.CommonCssClasses.ModernCheckbox.CustomCheck));
c.append(f);a=$("<span>").addClass(b.CommonCssClasses.ModernCheckbox.Label).text(a);a.toggle(!d);c.append(a);return c}};var d=function(){function c(a){this.$container=a.closest("label."+b.CommonCssClasses.ModernCheckbox.Checkbox)}c.prototype.setToolTipHtml=function(a){this.$container&&b.UnobtrusiveCustomTooltipManager.setTooltipContentOnTarget(this.$container,a&&a.length?'<span class="'+b.CommonCssClasses.ModernCheckbox.TooltipContent+'">'+a+"</span>":"")};c.prototype.enableToolTip=function(a){this.$container&&
b.UnobtrusiveCustomTooltipManager.enableTooltipOnTarget(this.$container,a)};return c}();e.CustomTooltipForCheckbox=d})(b.ModernCheckbox||(b.ModernCheckbox={}))})(CCL||(CCL={}));
(function(b){var e=function(){return function(b,c){var a=this;this.clientId=b;this.settings=c;var f=document.getElementById(this.clientId);b=f.querySelector("."+this.settings.CssClasses.MobileMenuButton);var d=f.querySelector("."+this.settings.CssClasses.Content);b.addEventListener("click",function(){if(!a.mobileMenuContent){a.mobileMenuContent=d.cloneNode(!0);var c=a.settings.ClientIds.MobileContentAppendTarget?document.getElementById(a.settings.ClientIds.MobileContentAppendTarget):f.parentElement;
a.mobileMenuContent.classList.remove(a.settings.CssClasses.IsNotMobile);a.mobileMenuContent.classList.add(a.settings.CssClasses.IsMobile);c.appendChild(a.mobileMenuContent)}a.mobileMenuContent.style.display=a.mobileMenuContent.style.display&&"none"!==a.mobileMenuContent.style.display?"none":"block"});window.addEventListener("resize",function(){d.style.cssText=""})}}();b.ModernPageTabs=e})(CCL||(CCL={}));
(function(b){var e=function(){function b(c,a){var b=this;this.settings=a;this.percentageKeys=[];window[c]=this;this.settings=a;this.cssClasses=a.cssClasses;this.controls=a.controls;this.dataAttributes=a.dataAttributes;this.assessmentStatuses=a.assessmentStatuses;this.assessmentsData=JSON.parse(this.controls.updatedCriteriaAssessmentsHidden.val());this.descriptionsData=JSON.parse(this.controls.updatedCriteriaDecriptionsHidden.val());this.createCommentsInlineEdit(this.controls.container);this.toggleAssessmentCallback(!0);
this.assessmentStatusesData=JSON.parse(this.controls.activeAssessmentStatusesHidden.val());this.overriddenAssessmentsData=JSON.parse(this.controls.overriddenCriteriaAssessmentsHidden.val());this.assessmentStatusesByCriteriaData=JSON.parse(this.controls.assessmentStatusesByCriteriaHidden.val());this.possibleMasteredLearningObjectivesData=JSON.parse(this.controls.possibleMasteredLearningObjectivesHidden.val());this.grids=JSON.parse(a.grids);a.assessmentUpdaterSettings.connectAssessmentCriteriaToScale&&
(a.assessmentUpdaterSettings.assessmentPercentage&&($.each(a.assessmentUpdaterSettings.assessmentPercentage,function(a){b.percentageKeys.push(a)}),this.percentageKeys.sort(function(a,c){return a-c})),this.assessmentChangedWarningLabel=$("#"+a.assessmentUpdaterSettings.assessmentChangedWarningLabelClientId));if(a.showOverride&&this.controls.changeReportStatusControl)this.controls.changeReportStatusControl.on(this.settings.events.saveOverridingsEvent,function(){b.saveOverridings()})}b.prototype.update=
function(c,a){var b=this;this.possibleMasteredLearningObjectivesData=JSON.parse(a);$.each(c,function(a,c){0!==c.RubricCriteriaItemId&&(b.updateAssessment(c.LearningObjectiveId,c.LearningObjectiveGroupId,c.RubricCriteriaItemId,c.AssessedAchievementLevelId),b.updateDescription(c.LearningObjectiveId,c.LearningObjectiveGroupId,c.RubricCriteriaItemId,c.Comment));0===c.RubricCriteriaItemId&&(a=b.getAssessmentStatusTypeByStartsAt(c.PercentScore),b.updateStatus(c.LearningObjectiveId,c.LearningObjectiveGroupId,
a,0,c.Comment))})};b.prototype.toReadOnlyMode=function(){this.controls.container.removeClass(this.cssClasses.assessMode);this.controls.container.addClass(this.cssClasses.readOnlyMode);this.toggleAssessmentCallback(!1);this.toggleAssessmentControls(!1)};b.prototype.toAssessMode=function(){this.controls.container.addClass(this.cssClasses.assessMode);this.controls.container.removeClass(this.cssClasses.readOnlyMode);this.toggleAssessmentCallback(!0);this.toggleAssessmentControls(!0)};b.prototype.get=
function(){var c=this,a=[];$.each(this.assessmentsData,function(b,d){var f=c.descriptionsData[b];a.push({AssessedAchievementLevelId:d,RubricCriteriaItemId:b,Comment:null!=f?f:null})});$.each(this.overriddenAssessmentsData,function(b,d){b=c.getStartsAtByAssessmentStatusType(d.Status);a.push({LearningObjectiveId:d.LearningObjectiveId,LearningObjectiveGroupId:d.LearningObjectiveGroupId,Override:!0,PercentScore:b})});return a};b.prototype.clear=function(){var c=this;this.controls.container.find("li."+
this.cssClasses.criteriaDescriptionRow).each(function(a,b){c.setDescriptionValue($(b),"")});this.descriptionsData={};this.controls.updatedCriteriaDecriptionsHidden.val(JSON.stringify(this.descriptionsData));this.controls.container.find("div."+this.cssClasses.overrideStatusBoxContainer).each(function(a,b){a=$(b).attr(c.dataAttributes.learningObjectiveId);var f=$(b).attr(c.dataAttributes.learningObjectiveGroupId);c.setStatusOverridings(a,f,"",0,"",$(b))});this.overriddenAssessmentsData={};var a=this.controls.container.find("div > span."+
this.cssClasses.statusBox);this.updateStatusTextAndCss(a,this.settings.assessmentStatusTypeNotAssessed);this.controls.container.find("ul li."+this.cssClasses.column).each(function(a,b){$(b).hasClass(c.cssClasses.selectedBox)&&c.assess($(b),!0)});this.assessmentsData={}};b.prototype.saveStatusOverridings=function(c,a,b,d){this.settings.showOverride&&(b=b.toString(),d=d.toString(),c=0<c.length?parseInt(c):0,this.saveOverridingsCommon(b,d,c,0,"",a.controls.container.parents("div."+this.cssClasses.overrideStatusBoxContainer).first()))};
b.prototype.toggleAssessmentControls=function(c){var a=this;this.controls.container.find("li."+this.cssClasses.criteriaDescriptionRow).each(function(b,d){b=$(d);b.children("a."+a.cssClasses.criteriaLevelDescription).toggle(c);b.children("span."+a.cssClasses.criteriaLevelDescription).remove();c?b.show():(d=b.children("input").val())?b.append($("<span/>").prop("class",a.cssClasses.criteriaLevelDescription).text(d)):b.hide()});this.controls.container.find("."+this.cssClasses.outcomeRow).toggle(c)};b.prototype.toggleAssessmentCallback=
function(c){var a=this;$("ul li."+this.cssClasses.column,this.controls.container).each(function(b,d){b=$(d);b.off("click.assess");if(c)b.on("click.assess","",d,function(c){c=$(c.data);a.assess(c)})})};b.prototype.updateAssessment=function(c,a,b,d){0===c&&0===a||0===b||0===d||(c=this.getRowsContainer(c,a).find("ul li."+this.cssClasses.column+"["+this.dataAttributes.itemId+'="'+d+'"]['+this.dataAttributes.criteriaId+'="'+b+'"]'),this.assess(c,!0))};b.prototype.assess=function(c,a){void 0===a&&(a=!1);
var b=c.parent(),d=c.hasClass(this.cssClasses.selectedBox);this.removeSelection(b);var e=this.getListItemData(c),k=e.key;e=e.value;d?(this.assessmentsData[k]=this.settings.rubricAssessmentCustomNull,this.hideComment(b)):(this.selectItem(c),this.assessmentsData[k]=e,this.showComment(b));this.controls.updatedCriteriaAssessmentsHidden.val(JSON.stringify(this.assessmentsData)).trigger("change");this.settings.showOverride&&(c=b.parents("."+this.cssClasses.criteriaContainer),b=c.find("div."+this.cssClasses.overrideStatusBoxContainer).attr(this.dataAttributes.learningObjectiveId),
d=c.find("div."+this.cssClasses.overrideStatusBoxContainer).attr(this.dataAttributes.learningObjectiveGroupId),this.updateAssessmentStatus(c.find("ul."+this.cssClasses.row),b,d));a||(a=this.getPercentScoreByCriteriaAndWeight(),this.changeAssessmentOrScoreByPercentage(a))};b.prototype.changeAssessmentOrScoreByPercentage=function(c){this.settings.assessmentUpdaterSettings.connectAssessmentCriteriaToScale&&(this.settings.assessmentUpdaterSettings.useScore&&this.settings.callbacks.scoreSetValueFunction?
this.settings.callbacks.scoreSetValueFunction(this.calculateScoreByPercent(c)):this.settings.assessmentUpdaterSettings.useAssessment&&this.settings.callbacks.assessmentSetValueFunction&&this.settings.callbacks.assessmentSetValueFunction(this.calculateAssessmentGradeByPercent(c)),this.assessmentChangedWarningLabel.show())};b.prototype.calculateScoreByPercent=function(c){if(-1!==c){var a=Math.pow(10,2);c=(Math.round(this.settings.assessmentUpdaterSettings.maxScore*c/100*a)/a).toString();"."!==this.settings.assessmentUpdaterSettings.numberDecimalSeparator&&
0<c.indexOf(".")&&(c=c.replace(".",this.settings.assessmentUpdaterSettings.numberDecimalSeparator));return c}return""};b.prototype.calculateAssessmentGradeByPercent=function(c){var a=this.percentageKeys.filter(function(a){return c>=a});return this.settings.assessmentUpdaterSettings.assessmentPercentage[a[a.length-1]]};b.prototype.updateStatus=function(c,a,b,d,e){if(0!==c||0!==a){null==b&&(b=0);null==d&&(d=0);null==e&&(e="");var f=this.getRowsContainer(c,a).closest("."+this.cssClasses.criteriaContainer).find("div."+
this.cssClasses.overrideStatusBoxContainer);this.setStatusOverridings(c,a,b,d,e,f)}};b.prototype.getRowsContainer=function(c,a){c=this.getLearningObjectiveClientId(c,a);return window[this.grids[c]].getRowsContainer()};b.prototype.updateDescription=function(c,a,b,d){0===c&&0===a||0===b||null==d||""===d||(c=this.getRowsContainer(c,a).find("."+this.cssClasses.gridRow+"["+this.dataAttributes.id+'="'+b+'"]'),this.setDescription(b,d,c))};b.prototype.saveOverridings=function(){if(this.settings.showOverride){var c=
this.controls.learningObjectiveIdHidden.val(),a=this.controls.learningObjectiveGroupIdHidden.val(),b=$("."+this.cssClasses.overrideStatusDropdown+" option:selected").val();b=0<b.length?parseInt(b):0;var d=parseInt(this.settings.useMastery?$("."+this.cssClasses.overrideMasteryDropdown+" option:selected").val():0),e=$("."+this.cssClasses.overrideStatusComment).val().substring(0,this.settings.maximumCommentLength);this.saveOverridingsCommon(c,a,b,d,e,$("a[rel="+c+"]").parent())}};b.prototype.getLearningObjectiveClientId=
function(c,a){return 0<a?"log"+a:c};b.prototype.saveOverridingsCommon=function(c,a,b,d,e,k){if(0<b){var f=this.getLearningObjectiveClientId(c,a);this.overriddenAssessmentsData[f]={LearningObjectiveId:c,LearningObjectiveGroupId:a,Status:b,MasteryOption:d,Comment:e};this.settings.controls.overriddenCriteriaAssessmentsHidden.val(JSON.stringify(this.overriddenAssessmentsData));var g=k.find("> span."+this.cssClasses.statusBox);a=k.siblings("."+this.cssClasses.overrideMasterText).find("span."+this.cssClasses.masteredBoxHolder);
c=a.find("> span");a=a.find("> img");var h=k.siblings("."+this.cssClasses.overrideComment);k=h.find("."+this.cssClasses.overrideCommentText);h=h.find("."+this.cssClasses.overrideCommentLabel);this.updateStatusTextAndCss(g,b);this.updateCommentText(k,h,e);this.settings.useMastery&&(this.possibleMasteredLearningObjectivesData[f].BreaksRecurrence&&d!==this.settings.learningObjectiveOverrideMasteryOption.mastered?this.updateMasteryTextAndCss(c,a,!1):(e=this.possibleMasteredLearningObjectivesData[f].AffectsByLevel,
g=this.possibleMasteredLearningObjectivesData[f].AffectsByResettingMastery,f=this.possibleMasteredLearningObjectivesData[f].MasteredWithoutOverride,d===this.settings.learningObjectiveOverrideMasteryOption.mastered?this.updateMasteryTextAndCss(c,a,!0):g&&(e?(b=this.getStartsAtByAssessmentStatusType(b),this.updateMasteryTextAndCss(c,a,b>=this.settings.masteryStartsAt)):this.updateMasteryTextAndCss(c,a,f))))}};b.prototype.setStatusOverridings=function(c,a,b,d,e,k){if(this.settings.showOverride){var f=
k.attr(this.dataAttributes.statusDropdownId);window[f].selectItem(b);this.saveOverridingsCommon(c,a,b,d,e,k)}};b.prototype.setDescription=function(c,a,b){b=b.find("li."+this.cssClasses.criteriaDescriptionRow);this.setDescriptionValue(b,a);this.descriptionsData[c]=a;this.controls.updatedCriteriaDecriptionsHidden.val(JSON.stringify(this.descriptionsData))};b.prototype.setDescriptionValue=function(c,a){""===a?c.find("a").text(this.settings.terms.watermark).addClass(this.cssClasses.criteriaItemEmptyState):
c.find("a").text(a);c.find("input").val(a);c.find("textarea").val(a)};b.prototype.hideComment=function(c){c.find("li."+this.cssClasses.criteriaDescriptionRow).hide()};b.prototype.showComment=function(c){c.find("li."+this.cssClasses.criteriaDescriptionRow).show()};b.prototype.removeSelection=function(c){c.children("li."+this.cssClasses.selectedBox).removeClass(this.cssClasses.selectedBox);c.find("li span."+this.cssClasses.star).removeClass(this.cssClasses.starOn).addClass(this.cssClasses.starOff)};
b.prototype.selectItem=function(c){c.addClass(this.cssClasses.selectedBox);c.find("span."+this.cssClasses.star).removeClass(this.cssClasses.starOff).addClass(this.cssClasses.starOn)};b.prototype.getListItemData=function(c){c=c.find("input[type=hidden]").val();return JSON.parse(c||"{}")};b.prototype.updateAssessmentStatus=function(c,a,b){var f=this,d=this.getLearningObjectiveClientId(a,b);if(this.settings.showOverride){var e=0,l=c.length;c.each(function(a,c){c=$(c);a=c.find("li."+f.cssClasses.column);
c=c.find("li."+f.cssClasses.selectedBox);var b=a.index(c)+1;f.settings.achivementLevelOrderDirection===f.settings.achievementLevelOrder.lowestToHighest&&(b=$(a.get().reverse()).index(c)+1);1<=b?e+=f.getPercentScoreByAchievementLevelId(b,a.length):l--});var m=e/l;c=c.parents("."+this.cssClasses.criteriaContainer);var n=c.find("div."+this.cssClasses.overrideStatusBoxContainer+"> span."+this.cssClasses.statusBox),q=c.find("span."+this.cssClasses.masteredBoxHolder);c=q.find("> span");q=q.find("> img");
1<=m?this.assessmentStatusesData.forEach(function(c,e){e=(e=e+1<f.assessmentStatusesData.length?f.assessmentStatusesData[e+1]:null)?e.startsAt:f.settings.maximumPercentageValue;m>=c.startsAt&&m<e&&(f.setAssessmentStatusByCriteria(c.type,a,b),null==f.overriddenAssessmentsData[d]&&f.updateStatusTextAndCss(n,c.type))}):(this.setAssessmentStatusByCriteria(this.settings.assessmentStatusTypeNotAssessed,a,b),null==this.overriddenAssessmentsData[d]&&this.updateStatusTextAndCss(n,this.settings.assessmentStatusTypeNotAssessed));
if(this.settings.useMastery&&(null==this.overriddenAssessmentsData[d]||!this.overriddenAssessmentsData[d].MasteryOption))if(this.possibleMasteredLearningObjectivesData[d].BreaksRecurrence)this.updateMasteryTextAndCss(c,q,!1);else{var p=this.possibleMasteredLearningObjectivesData[d],v=p.AffectsByLevel;p.AffectsByResettingMastery&&v&&(p=this.overriddenAssessmentsData[d],p=null==p?m:this.getStartsAtByAssessmentStatusType(p.Status),this.updateMasteryTextAndCss(c,q,p>=this.settings.masteryStartsAt))}}};
b.prototype.setAssessmentStatusByCriteria=function(c,a,b){a=this.getLearningObjectiveClientId(a,b);this.assessmentStatusesByCriteriaData[a]=this.assessmentStatuses[c].Title;this.controls.assessmentStatusesByCriteriaHidden.val(JSON.stringify(this.assessmentStatusesByCriteriaData))};b.prototype.updateMasteryTextAndCss=function(c,a,b){c.text(this.getMasteryText(b));c.removeClass(this.cssClasses.noPrint);c.addClass(this.settings.useMastery&&b?"":this.cssClasses.noPrint);a.prop("src",this.getMasteryImage(b));
a.removeClass(this.cssClasses.noPrint);a.addClass(this.settings.useMastery&&b?"":this.cssClasses.noPrint)};b.prototype.getMasteryText=function(c){return this.settings.useMastery&&c?this.settings.terms.mastered:this.settings.terms.notMastered};b.prototype.getMasteryImage=function(c){return this.settings.useMastery&&c?this.settings.imgUrls.masteredIcon:this.settings.imgUrls.notMasteredIcon};b.prototype.getPercentScoreByAchievementLevelId=function(c,a){return 100*(a-c+1)/a};b.prototype.updateStatusTextAndCss=
function(c,a){$.each(this.assessmentStatuses,function(a,b){c.removeClass(b.CssClass)});c.addClass(this.assessmentStatuses[a].CssClass);c.text(this.assessmentStatuses[a].Title)};b.prototype.updateCommentText=function(c,a,b){a.parent().toggle(""!==b);c.text(b)};b.prototype.getPercentScoreByCriteriaAndWeight=function(){var c=this,a=0,b=0,d=[];$("."+this.cssClasses.selectedBox).each(function(a,c){a=JSON.parse($(c).find("input[type=hidden]").val()||"{}");d[a.key]=a.value});$.each(this.settings.achievementLevelsPoints,
function(f,e){if(d[f]&&0!==d[f]){var g=d[f],h=0;$.each(e,function(a,c){c>h&&(h=c)});a+=c.settings.achievementLevelsPoints[f][g];b+=h}});return 0<b?a/b*100:-1};b.prototype.getStartsAtByAssessmentStatusType=function(c){for(var a=0,b=0;b<this.assessmentStatusesData.length;b++){var d=this.assessmentStatusesData[b];if(d.type===c){a=d.startsAt;break}}return a};b.prototype.getAssessmentStatusTypeByStartsAt=function(c){for(var a=this,b="",d=Object.keys(this.assessmentStatusesData).map(function(c){return a.assessmentStatusesData[c]}).reverse(),
e=0;e<d.length;e++){var k=d[e];if(c>=k.startsAt){b=k.type;break}}return b};b.prototype.createCommentsInlineEdit=function(c){var a=this;c.find("."+this.cssClasses.criteriaLevelDescription).each(function(c,b){c={submitOnEnter:!0,multiline:!0,autoResize:!0,editFieldCssClass:a.cssClasses.inlineEditor,maxLength:1024};new ClientInlineEditor($(b),void 0,$(b).parent().find("input").last(),c,function(c,b){return a.onEditCriteriaDescription(c,b)},function(c){return a.onChangeInlineEditModeFunction(c)},void 0)})};
b.prototype.onEditCriteriaDescription=function(c,a){var b=this.getCriteriaId(c.source);this.descriptionsData[b]=c.actualText;this.controls.updatedCriteriaDecriptionsHidden.val(JSON.stringify(this.descriptionsData));c.isUpdateSuccess=!0;a(c)};b.prototype.onChangeInlineEditModeFunction=function(c){var a=c.source;c.isEditMode||a.parent().find("input").last().val()?a.removeClass(this.cssClasses.criteriaItemEmptyState):(a.addClass(this.cssClasses.criteriaItemEmptyState),a.text(this.settings.terms.watermark))};
b.prototype.getCriteriaId=function(c){return c.parents("ul").next().val()};return b}();b.RubricAssessment=e})(CCL||(CCL={}));
(function(b){var e=function(){function b(){}b.createTagItInput=function(c,a){var b=this,d={readOnly:a.isReadonly,placeholderText:a.placeholderText,allowSpaces:!0,tagLimit:a.tagitLimit,preprocessTag:function(c){a.preprocessTag&&(c=a.preprocessTag(c));return c.replace('"',"")}};a.beforeTagAdded&&(d.beforeTagAdded=a.beforeTagAdded);a.afterTagAdded&&(d.afterTagAdded=a.afterTagAdded);a.beforeTagRemoved&&(d.beforeTagRemoved=a.beforeTagRemoved);a.afterTagRemoved&&(d.afterTagRemoved=a.afterTagRemoved);d=
c.tagit(d);d.find("input").on("focus",function(){c.addClass(b.focusCssClass)});d.find("input").on("blur",function(){c.removeClass(b.focusCssClass)})};b.focusCssClass="tagit-focus";return b}();b.TagItInput=e})(CCL||(CCL={}));
(function(b){var e=function(){function b(c,a,b){void 0===b&&(b=!1);this.maxLength=c;this.maxLineBreaks=a;this.isEdge=b;this.anchorTagName="A";this.breakLineTagName="BR"}b.prototype.shouldCalculateRealLength=function(c){return c.getElementsByTagName(this.breakLineTagName).length>=this.maxLineBreaks||c.innerHTML.trim().length>this.maxLength};b.prototype.calculateRealLength=function(c){for(var a=this.maxLength,b=0,d=0,e,k=0;e=c.childNodes[d];){var l=e.length||e.outerHTML.length;if(b+l>a){e.nodeType===
Node.ELEMENT_NODE&&(l=this.isEdge?l+1:l,a=e.tagName===this.anchorTagName?b+l:b);break}if(e.nodeType===Node.ELEMENT_NODE&&e.tagName===this.breakLineTagName&&(k++,k===this.maxLineBreaks)){a=b;break}b+=l;d++}return a};return b}();b.VisibleTextLengthCalculator=e})(CCL||(CCL={}));
(function(b){var e=function(){function b(c,a){this.cssClasses=c;this.dataAttributes=a}b.prototype.toggleTextError=function(c,a,b){c=c.find("."+this.cssClasses.EditorTextarea);c.find("[data-"+this.dataAttributes.TextValidationErrorMessage+"]").text(b?a:"").toggle(b);c.toggleClass(this.cssClasses.TextIsValid,!b)};b.prototype.getErrorAppendTarget=function(){return $("<span data-"+this.dataAttributes.TextValidationErrorMessage+">").hide()};return b}();b.ModernInput=e})(CCL||(CCL={}));
(function(b){var e=function(){function d(c,a){window[c]=this;this._settings=a;this._container=$("#"+this._settings.Container);this.initialize()}d.prototype.activateItem=function(c){var a=this._container.find("."+this._settings.ButtonCssClass);c=this._container.find("."+this._settings.ButtonCssClass+"[data-"+this._settings.KeyDataName+'= "'+c+'"]');a.removeClass(this._settings.ActiveCssClass);c.addClass(this._settings.ActiveCssClass)};d.prototype.toggleEnableSwitcher=function(c){this._container.find("."+
this._settings.ButtonCssClass).toggleClass(this._settings.DisabledCssClass,!c)};d.prototype.initialize=function(){var c=this,a=$("#"+this._settings.Container).find("."+this._settings.ButtonCssClass);a.each(function(f,d){var e=$(d);e.click(function(){if(e.hasClass(c._settings.DisabledCssClass))return!1;var f=e.data(c._settings.KeyDataName).toString(),d;$.each(c._settings.ItemSettings,function(a,c){return f===c.Key?(d=c,!1):!0});b.CommonFunctions.makePostMessageCall(window,new b.CommonWindowMessages.GenericMessageWithData(b.MultipleSwitcher.onClickEventName,
d));a.removeClass(c._settings.ActiveCssClass);e.addClass(c._settings.ActiveCssClass);return!1})})};d.onClickEventName="MultipleSwitcher:onclick";return d}();b.MultipleSwitcher=e})(CCL||(CCL={}));
(function(b){var e=function(){function b(c,a){this.settings=c;this.controls=a}b.prototype.validate=function(c,a){c=$("#"+this.controls.id).val();if(""!==c){var b=this.settings.delimiter;"."===b&&(b="\\.");(new RegExp("^\\d+("+b+"\\d+)?$")).test(c)?(c=c.replace(b,"."),parseFloat(c)>this.settings.maxValue&&(a.IsValid=!1)):a.IsValid=!1}};return b}();b.FloatNumberValidator=e})(CCL||(CCL={}));
(function(b){var e=function(){function d(){}d.makeAccessible=function(c){$(c).attr("role","alert")};d.focusOnFeedbackAction=function(c){var a=$(c).find(":input:visible:focusable").first();0<a.length&&(b.CommonFunctions.isIe()&&$(c).focus(),setTimeout(function(){return a.focus()},200))};return d}();b.FeedbackAccessibility=e})(CCL||(CCL={}));
(function(b){var e=function(){function c(a){var c=this;this.settings=a;this.onCloseClick=function(){c.close();return!1};this.onKeyDown=function(a){a.keyCode===b.CommonConstants.keyCodes.escape&&c.close()};window[a.FullScreenViewerId]=this;this.viewer=$("#"+a.FullScreenViewerId);this.icon=$("#"+a.IconId);this.title=$("#"+a.TitleId);this.content=$("#"+a.ContentId);this.contentContainer=$("#"+a.ContentContainerId);this.loader=new d(a);this.attachCloseHandlers();$(window).on("beforeunload",function(){c.viewer.is(":visible")&&
c.close()})}c.prototype.open=function(a){this.icon.attr("src",a.iconUrl);this.title.text(a.title);this.viewer.show();this.contentElement=a.contentElement;this.hideScrollbar();this.loadContent(a);b.CommonFunctions.makePostMessageCall(window,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.enableFullScreen))};c.prototype.attachCloseHandlers=function(){$("#"+this.settings.CloseButtonId).on("click",this.onCloseClick);$(document).keydown(this.onKeyDown)};c.prototype.close=
function(){null!=this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null);this.viewer.hide();this.restoreScrollbar();this.contentElement=null;b.CommonFunctions.makePostMessageCall(window,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.disableFullScreen))};c.prototype.hideScrollbar=function(){$("body").addClass(b.CommonCssClasses.FullScreenViewer.Opened);this.contentElement&&this.contentElement.addClass(b.CommonCssClasses.FullScreenViewer.ContentElement)};
c.prototype.restoreScrollbar=function(){$("body").removeClass(b.CommonCssClasses.FullScreenViewer.Opened);this.contentElement&&this.contentElement.removeClass(b.CommonCssClasses.FullScreenViewer.ContentElement)};c.prototype.loadContent=function(a){a.contentElement?this.enableHeaderOnlyMode():a.contentUrl?this.loadContentFromUrl(a.contentUrl):this.loader.showError()};c.prototype.enableHeaderOnlyMode=function(){this.viewer.addClass(b.CommonCssClasses.FullScreenViewer.HeaderOnly)};c.prototype.loadContentFromUrl=
function(a){var c=this;this.viewer.removeClass(b.CommonCssClasses.FullScreenViewer.HeaderOnly);this.contentContainer.hide();this.loader.showLoader();this.currentRequest=$.get(a).done(function(a){c.loader.hide();c.contentContainer.html(a);c.contentContainer.show();c.currentRequest=null}).fail(function(){c.loader.showError();c.currentRequest=null})};return c}();b.FullScreenViewer=e;var d=function(){function c(a){this.settings=a;this.container=$("#"+a.LoaderId);this.loadingWheel=this.container.find("> .ccl-ajaxloadingwheel");
this.status=this.container.find("> .ccl-full-screen-viewer-content-loader-status")}c.prototype.showLoader=function(){var a=this;this.container.show();this.loadingWheel.show();this.status.css("visibility","hidden");this.status.text(this.settings.LoadingInProgressText);clearTimeout(this.timer);this.timer=setTimeout(function(){a.status.css("visibility","visible")},3E3)};c.prototype.showError=function(){this.container.show();this.loadingWheel.hide();this.status.text(this.settings.LoadingErrorText);this.status.css("visibility",
"visible");clearTimeout(this.timer)};c.prototype.hide=function(){this.container.hide();this.loadingWheel.hide();this.status.css("visibility","hidden");clearTimeout(this.timer)};return c}()})(CCL||(CCL={}));
(function(b){var e=function(){function b(){}b.setMaxLength=function(c,a){var b=this;c.attr("maxlength",a);c.on("input change",function(){return b.ensureTextIsShorterThanMaxLength(c,a)})};b.ensureTextIsShorterThanMaxLength=function(c,a){var b=c.val();a=b.replace(/(\r\n|\n|\r)/g,"  ").length-a;0<a&&(b=b.slice(0,-a),c.val(b))};return b}();b.TextAreaExtensions=e})(CCL||(CCL={}));
(function(b){var e=function(){function d(c){this.settings=c;this.numberOfTries=0;c&&this.pingInTimeout(c.intervalInSeconds)}d.prototype.pingInTimeout=function(c){var a=this;setTimeout(function(){a.ping()},1E3*c)};d.prototype.ping=function(){var c=this;this.settings&&this.settings.webMethodUrl&&$.ajax({type:"POST",data:this.settings.postData,url:this.settings.webMethodUrl,contentType:"application/json; charset=utf-8",headers:b.CommonFunctions.getAntiForgeryAjaxHeader(this.settings)}).done(function(a,
b){if(b&&(a=b.hasOwnProperty("d")?b.d:b,a.ErrorCode&&0>a.ErrorCode&&a.StopPolling&&!0===a.StopPolling))return;c.numberOfTries=0;c.pingInTimeout(c.settings.intervalInSeconds)}).fail(function(a){a.status===b.CommonConstants.httpStatusCodes.unauthorized?$(document).trigger(d.unauthorisedEventName):(c.numberOfTries++,c.numberOfTries<c.settings.maxNumberOfTries&&c.pingInTimeout(c.settings.errorTimeoutInSeconds*c.numberOfTries))})};d.unauthorisedEventName="keepalive:unauthorised";return d}();b.KeepAlive=
e})(CCL||(CCL={}));
(function(b){var e=function(){function b(c){this.ogpImageMaxWidthForCompactView=150;this.ogpImageMaxHeight=200;this.ogpImageMaxHeightForCompactView=350;this.settings=c}b.prototype.loadImage=function(c,a,b,d){var f=this;a&&b&&c&&d||(c=$("#"+this.settings.PlaceholderId),a=c.find("."+this.settings.CssClasses.EmbedOgpContainer),b=a.find("."+this.settings.CssClasses.EmbedOgpImagePreview),d=b.find("img"));if(0!==d.length){d.removeAttr("width height");var e=new Image;$(e).one("load",function(){var c=e.width,
g=e.height,h=g>f.ogpImageMaxHeight?c*f.ogpImageMaxHeight/g:c,k=Math.min(g,f.ogpImageMaxHeight);f.settings.IgnoreImageDimensions&&h<k||h<=f.ogpImageMaxWidthForCompactView?(c=f.calculateSize(c,g,f.ogpImageMaxWidthForCompactView,f.ogpImageMaxHeightForCompactView),g=c.height+"px",b.css({width:c.width+"px",height:g,position:"absolute"}).addClass(f.settings.CssClasses.AlignVertically),a.find("."+f.settings.CssClasses.EmbedOgpTextContainer).css("margin-left",c.width+10+"px"),a.css({position:"relative","min-height":g})):
(b.css({height:"auto","max-height":f.ogpImageMaxHeight+"px"}),d.css({"max-height":f.ogpImageMaxHeight+"px"}));d.addClass(f.settings.CssClasses.EmbedOgpImage)});var g=function(){d.on("load",function(){e.src=d.prop("src")})};d.attr("src")?$("<img/>").on("load",function(){e.src=d.prop("src")}).on("error",function(){g()}).attr("src",d.attr("src")):g()}};b.prototype.calculateSize=function(c,a,b,d){if(c<=b&&a<=d)return{width:c,height:a};c*=d;a*=b;var f=Math.max(c,a);return{width:Math.max(1,Math.min(b,Math.floor(c*
b/f))),height:Math.max(1,Math.min(d,Math.floor(a*d/f)))}};return b}();b.OgpImageLoader=e})(CCL||(CCL={}));
(function(b){var e=function(){function c(){}c.auto=0;c.centerBottom=1;c.centerCenter=2;c.rightBottom=3;c.rightCenter=4;c.bottomLeft=5;c.leftTop=6;return c}(),d=function(){function c(a,c){var b=this;this.blockHighlightZone=this.closedThroughX=this.gotItClicked=!1;this.resizeHandler=function(){b.isOpen&&b.$mask&&b.isMobileView()&&(b.removeMask(),$(b.onboardingDialog.mainContainer).fadeTo(500,0,function(){b.closeContainer()}),$(window).off("resize",b.resizeHandler))};this.clickOutsideHandler=function(a){0===
$(a.target).closest("."+b.settings.DialogCssClass).length&&b.closeDialog(!1,!1)};this.$container=a;this.settings=c;window[this.settings.DialogClientId]=this;this.antiForgeryAjaxHeaders=this.initAntiForgeryAjaxHeaders(this.settings.AntiForgeryHeaderName,this.settings.AntiForgeryHeaderValue);this.addGotItClickHandler(a.find("."+c.CloseButtonCssClass));this.onboardingDialog=new ContextDialog("#"+this.$container[0].id,{footerContent:this.settings.FooterClientId,closeWithOutsideClick:!1,allowAccessToParentWindow:!1,
showArrow:this.settings.ShowArrow,cssClass:this.settings.DialogCssClass,zIndex:this.settings.ZIndex,closeCssClass:this.settings.CloseLinkCssClass,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0});this.onboardingDialog.toggleCloseLink(this.settings.ShowCloseLink);this.onboardingDialog.hideHeader();this.closeContainer=this.onboardingDialog.closeDialog;this.onboardingDialog.setCloseFunction(function(){b.closeDialog(!1)});this.onboardingDialog.setCloseLinkFunction(function(){b.closeDialog(!0)});
this.onboardingDialog.onEscape=function(){};this.settings.StartOpened&&this.openDialog()}c.prototype.initAntiForgeryAjaxHeaders=function(a,c){return a&&c?(b={},b[a]=c,b):{};var b};c.prototype.openDialog=function(a){var c=this;void 0===a&&(a=null);if(this.settings.AllowMobileView||!this.isMobileView())if(this._closeCallback=a,!this.isOpen){var d=$(this.settings.TargetSelector);if(d[0]){this.isOpen=!0;this.settings.ShowMask&&(this.createMask(),$(window).on("resize",this.resizeHandler));if(this.settings.CloseAfterClickOutside)$(document).on("click "+
b.CommonTriggers.clickInInnerFrame,this.clickOutsideHandler);this.closedThroughX=this.gotItClicked=!1;this.settings.PutAfterElementInDomSelector&&(a=$(this.settings.PutAfterElementInDomSelector),a[0]&&$(a[0]).after(this.onboardingDialog.mainContainer));this.onboardingDialog.openDialogAt(0,0);$(this.onboardingDialog.mainContainer).removeAttr("style").css("opacity",0).css("display","block").css("z-index",this.settings.ZIndex).css("max-width",this.settings.MaxWidth);this.settings.Alignment===e.centerBottom?
($(this.onboardingDialog.mainContainer).addClass("bottom"),this.positionMainContainer(d,"center top+15","center bottom","fit"),this.positionArrowContainer(d,"center top","center top")):this.settings.Alignment===e.rightCenter?($(this.onboardingDialog.mainContainer).addClass("right"),this.positionMainContainer(d,"left+15 top","right top")):this.settings.Alignment===e.centerCenter?this.positionMainContainer(d,"center center","center center"):this.settings.Alignment===e.rightBottom?($(this.onboardingDialog.mainContainer).addClass("bottom"),
this.positionMainContainer(d,"right top+15","right bottom","fit",function(a){$(c.onboardingDialog.mainContainer).css("top",a.top).css("left","auto").css("right",0)}),this.positionArrowContainer(d,"center top","center top")):this.settings.Alignment===e.bottomLeft?($(this.onboardingDialog.mainContainer).addClass("bottom"),this.positionMainContainer(d,"left top+20","left bottom"),this.positionArrowContainer($(this.onboardingDialog.mainContainer),"center","center")):this.settings.Alignment===e.leftTop&&
($(this.onboardingDialog.mainContainer).addClass("left"),this.positionMainContainer(d,"right-15 top","left top"));$(this.onboardingDialog.mainContainer).fadeTo(500,1);this.settings.ScrollIntoViewOnShow&&$(this.onboardingDialog.mainContainer).get(0).scrollIntoView(!1);if(this.settings.RepositionArrowOnResize){var h=new b.CallbackThrottler(function(){c.positionArrowContainer(d,"center top","center top")});this.repositionArrowCallback=function(){h.invokeCallback(null,100)};$(window).resize(this.repositionArrowCallback)}this.settings.ExtraGotItSelector&&
this.addGotItClickHandler($(this.settings.ExtraGotItSelector));$("body").keyup(this,this.onKeyup)}}};c.prototype.positionMainContainer=function(a,c,b,d,e){void 0===d&&(d="none");void 0===e&&(e=null);$(this.onboardingDialog.mainContainer).position({of:a,my:c,at:b,collision:d,using:e})};c.prototype.positionArrowContainer=function(a,c,d){(b.CommonFunctions.isIosDevice()||b.CommonFunctions.isSafari())&&$(this.onboardingDialog.arrowContainer).css("left","1px");$(this.onboardingDialog.arrowContainer).position({of:a,
my:c,at:d,collision:"none"})};c.prototype.closeDialog=function(a,c){var f=this;void 0===a&&(a=!1);void 0===c&&(c=!0);$(window).off("resize",this.resizeHandler);this.settings.CloseAfterClickOutside&&$(document).off("click "+b.CommonTriggers.clickInInnerFrame,this.clickOutsideHandler);this.isOpen&&(this.isOpen=!1,a&&(this.closedThroughX=!0),this.settings.RegisterOnboardingCompletion&&c&&this.registerOnboardingCompletion(),this.settings.RepositionArrowOnResize&&$(window).off("resize",this.repositionArrowCallback),
$("body").off("keyup",this.onKeyup),$(this.onboardingDialog.mainContainer).fadeTo(500,0,function(){f.closeContainer()}),this.removeMask(),this._closeCallback&&this._closeCallback(a))};c.prototype.registerOnboardingCompletion=function(){var a=this.settings.OnboardingServiceUrl;a=a.replace("{featureId}",this.settings.OnboardingFeatureId.toString());b.CommonFunctions.safeAjax({url:a,type:"PUT",headers:this.antiForgeryAjaxHeaders})};c.prototype.onKeyup=function(a){if(a.data.isOpen)switch(a.which){case b.CommonConstants.keyCodes.escape:a.stopImmediatePropagation(),
a.data.closeDialog()}};c.prototype.addGotItClickHandler=function(a){var c=this;a.on("click",function(){c.gotItClicked=!0;c.closeDialog()})};c.prototype.createMask=function(){this.settings.HighlightInMaskSelector&&($(this.settings.HighlightInMaskSelector).css("z-index",this.settings.ZIndex),!0===this.blockHighlightZone?($(this.settings.HighlightInMaskSelector).css("pointer-events","none"),$(this.settings.HighlightInMaskSelector).addClass("ccl-onboarding-highlight-in-mask__clean-border")):$(this.settings.HighlightInMaskSelector).addClass("ccl-onboarding-highlight-in-mask"));
var a=$("body");this.settings.AppendMaskToSelector&&(a=$(this.settings.AppendMaskToSelector),a.css("overflow-y","hidden"));this.$mask=$("<div></div>").appendTo(a).addClass("ccl-onboarding-dialog-mask").css({opacity:"0",filter:"alpha(opacity=0)","z-index":this.settings.ZIndex-1});this.settings.AllowMobileView&&this.$mask.addClass("ccl-onboarding-dialog-mobile");this.$mask.fadeTo(400,1);a.addClass("il-has-onboarding-mask");window.itslTop&&window!==window.itslTop&&(b.CommonFunctions.makePostMessageCall(window.itslTop,
new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.registerExtraNavBar)),b.CommonFunctions.makePostMessageCall(window.itslTop,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.maskNavigationBar)))};c.prototype.removeMask=function(){var a=this;this.$mask&&(this.settings.HighlightInMaskSelector&&($(this.settings.HighlightInMaskSelector).removeClass("ccl-onboarding-highlight-in-mask"),$(this.settings.HighlightInMaskSelector).css("z-index","")),!0===
this.blockHighlightZone&&($(".ccl-onboarding-highlight-in-mask__clean-border").css("pointer-events",""),$(this.settings.HighlightInMaskSelector).removeClass("ccl-onboarding-highlight-in-mask__clean-border")),this.settings.AppendMaskToSelector&&$(this.settings.AppendMaskToSelector).css("overflow-y",""),this.$mask.fadeTo(400,0,function(){a.$mask.parent().removeClass("il-has-onboarding-mask");a.$mask.remove();a.$mask=null}),window.itslTop&&window!==window.itslTop&&(b.CommonFunctions.makePostMessageCall(window.itslTop,
new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.unregisterExtraNavBar)),b.CommonFunctions.makePostMessageCall(window.itslTop,new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.unmaskNavigationBar))))};c.prototype.isMobileView=function(){return!b.CommonFunctions.checkScreenSize(b.CommonConstants.mediaScreenSizes.iPadPortraitMode,!0)};return c}();b.OnboardingDialog=d})(CCL||(CCL={}));
(function(b){(function(e){(function(d){var c=function(){function a(a,c,b,e){var f=this;this.handleFeatureState=function(a){if(a.type===d.MessageType.ReceiveFeatureState&&a.featureId===f.featureId)!0===a.IsCompleted?f.completedHandler():f.notCompletedHandler();else throw Error("Can't handle onboarding post message. Check correctness featureId and MessageType");};this.completedHandler=b;this.notCompletedHandler=e;this.listenPostMessageFrom=$(window);this.featureId=a;this.nextFeatureId=c;this.attachMessageHandlers()}
a.prototype.attachMessageHandlers=function(){b.CommonFunctions.attachPostMessageEventListener(this.listenPostMessageFrom,b.CommonWindowMessages.MessageNames.extensionOnboarding,this.handleFeatureState)};a.prototype.next=function(){var a=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.extensionOnboarding);b.CommonFunctions.makePostMessageCallWithData(window.parent,a,{featureId:this.nextFeatureId,type:d.MessageType.TriggerOnboardingFeature})};a.prototype.complete=function(a){void 0===
a&&(a=null);var c=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.extensionOnboarding),f={type:d.MessageType.CompleteFeature,features:[]};f.features.push(this.featureId);a&&Array.prototype.push.apply(f.features,a);b.CommonFunctions.makePostMessageCallWithData(window.parent,c,f)};a.prototype.start=function(){var a=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.extensionOnboarding);b.CommonFunctions.makePostMessageCallWithData(window.parent,
a,{featureId:this.featureId,type:d.MessageType.RequestFeatureState})};a.prototype.overlay=function(a){a={type:a?d.MessageType.ShowOverlay:d.MessageType.HideOverlay};var c=new b.CommonWindowMessages.GenericMessage(b.CommonWindowMessages.MessageNames.extensionOnboarding);b.CommonFunctions.makePostMessageCallWithData(window.parent,c,a)};return a}();d.OnboardingPostMessageController=c})(e.Extensions||(e.Extensions={}))})(b.Onboarding||(b.Onboarding={}))})(CCL||(CCL={}));
(function(b){b=b.Onboarding||(b.Onboarding={});b=b.Extensions||(b.Extensions={});b=b.MessageType||(b.MessageType={});b[b.RequestFeatureState=0]="RequestFeatureState";b[b.ReceiveFeatureState=1]="ReceiveFeatureState";b[b.TriggerOnboardingFeature=2]="TriggerOnboardingFeature";b[b.CompleteFeature=3]="CompleteFeature";b[b.ShowOverlay=4]="ShowOverlay";b[b.HideOverlay=5]="HideOverlay"})(CCL||(CCL={}));
(function(b){b=b.Onboarding||(b.Onboarding={});b=b.Extensions||(b.Extensions={});b=b.OnboardingFeatures||(b.OnboardingFeatures={});b[b.AddElementToLibraryFromCourse=23]="AddElementToLibraryFromCourse";b[b.AssignmentEdit=27]="AssignmentEdit";b[b.AssignmentLearningToolOptions=28]="AssignmentLearningToolOptions";b[b.AssignmentReminders=29]="AssignmentReminders";b[b.AssignmentAddNote=34]="AssignmentAddNote";b[b.AssignmentGetStarted=35]="AssignmentGetStarted";b[b.AssignmentAnnotateAnswerFiles=36]="AssignmentAnnotateAnswerFiles"})(CCL||
(CCL={}));(function(b){var e={},d=function(){function c(a,c){void 0===c&&(c="");this._elem=$("#"+a);this._eventsPrefix=c;e[a]=this}c.GetInstanceForElement=function(a){return e[a]};c.prototype.Trigger=function(a){for(var c=[],b=1;b<arguments.length;b++)c[b-1]=arguments[b];this._elem.trigger(this._eventsPrefix+a,c)};return c}();b.DomElementClass=d})(CCL||(CCL={}));
(function(b){b.PickerEvent={Initialized:"PickerInitialized",Added:"PickerFilesAdded",Started:"PickerUploadStarted",Stopped:"PickerUploadStopped",ResultsChanged:"PickerResultsChanged",LoadingDependencyFailed:"LoadingDependencyFailed"};b.PickerDependencyLoadTimeoutInMs=3E4;var e=function(b){function c(a,c){b.call(this,a);this._settings=c}__extends(c,b);c.prototype.ToggleOkButton=function(a){$(".ccl-button-ok, .ccl-button-pause").each(function(){var c=$(this);a?(void 0===this.previouslyDisabled&&(c.attr("disabled")?
this.previouslyDisabled=!0:this.previouslyDisabled=!1),c.prop("disabled",a)):c.prop("disabled",this.previouslyDisabled)})};c.prototype.ClearResults=function(a){};c.prototype.AllowHide=function(){};c.prototype.isSecure=function(){return"https:"==window.location.protocol};c.prototype.trimStart=function(a,c){if(!a||0==a.length)return a;c=c?c:" ";for(var b=0;b<a.length&&a.charAt(b)==c;b++);return a.substring(b)};c.prototype.trimEnd=function(a,c){if(!a||0==a.length)return a;c=c?c:" ";for(var b=a.length-
1;0<=b&&a.charAt(b)==c;b--);return a.substring(0,b+1)};c.prototype.trim=function(a,c){return a&&0!=a.length?this.trimEnd(this.trimStart(a,c),c):a};return c}(b.DomElementClass);b.ItemPickerBase=e})(CCL||(CCL={}));
(function(b){var e=function(d){function c(a,c){d.call(this,a,c);this._stateHidden=$("#"+this._settings.StateHiddenFieldClientId);this._resultsTable=$("#"+this._settings.FileListTableClientId);this._fileListItemTemplate=$("#"+this._settings.FileListItemTemplateId).html();this.Init();this.Trigger(b.PickerEvent.Initialized);0<this.GetFiles().length&&this.Trigger(b.PickerEvent.ResultsChanged,{results:this.GetFiles()})}__extends(c,d);c.prototype.Init=function(){};c.prototype.getParameterValue=function(a,
c){for(var b=[],f=a.slice(a.indexOf("?")+1).split("&"),d=0;d<f.length;d++)a=f[d].split("="),b.push(a[0]),b[a[0]]=a[1];return b[c]};c.prototype.removeParameter=function(a,c){var b=a.split("#"),f=b[0].split("?");if(2<=f.length){a=f.shift();f=f.join("?");c=encodeURIComponent(c)+"=";f=f.split(/[&;]/g);for(var d=f.length;0<d--;)-1!==f[d].lastIndexOf(c,0)&&f.splice(d,1);a=a+"?"+f.join("&");b[1]&&(a+="#"+b[1])}return a};c.prototype.ReplaceUrlToken=function(a,c,b){var f="{"+c+"}";null!=b&&""!=b?-1!=a.indexOf(f)&&
(a=a.replace(f,b)):a=this.removeParameter(a,c);return a};c.prototype.ReplaceUrlTokens=function(a,c,b){a=this.ReplaceUrlToken(a,this._settings.FileRepoFileNameToken,encodeURIComponent(c));return a=this.ReplaceUrlToken(a,this._settings.FileRepoFileIdToken,encodeURIComponent(b))};c.prototype.GetFullFileRepoUrl=function(){return this.trimEnd(this._settings.FileRepoProxy,"/")};c.prototype.ProcessFileName=function(a){if(/^\.([^\.]+)$/.test(a)){var c=new Date,b=c.getFullYear(),d=c.getMonth()+1;d=10>d?"0"+
d.toString():d.toString();c=c.getDate();a=b+"-"+d+"-"+(10>c?"0"+c.toString():c.toString())+a}return a};c.prototype.GetFileRepoUrlForFileName=function(a){a=this.ReplaceUrlTokens(this.GetFullFileRepoUrl(),a,"");a+=-1<a.indexOf("?")?"&":"?";return a+="ts="+(new Date).getTime()};c.prototype.GetFileRepoUrl=function(a){a=this.ReplaceUrlTokens(this.GetFullFileRepoUrl(),"",a);a+=-1<a.indexOf("?")?"&":"?";return a+="ts="+(new Date).getTime()};c.prototype.ValidateSelectedFiles=function(a,c){for(var b=a.length-
1;0<=b;b--)null!=c&&0<c.length&&(-1===a[b].name.indexOf(".")||-1===$.inArray(a[b].name.split(".").pop().toLowerCase(),c))&&(a[b].error=this._settings.ErrorTextNotAllowedFileType),a[b].error||(0<this._settings.MaxNumberOfFiles&&b>=this._settings.MaxNumberOfFiles?a[b].error=this._settings.MaxNumberOfFilesExceededText:a[b].size>this._settings.MaxFileSize?a[b].error=this._settings.FileSizeExceededText:a[b].size<this._settings.MinFileSize&&(a[b].error=this._settings.FileSizeTooSmallText));this.SetFiles(a);
return a};c.prototype.SetFiles=function(a){this._stateHidden.val(JSON.stringify(a))};c.prototype.GetFiles=function(){return JSON.parse(this._stateHidden.val()||"[]")};c.prototype.UpdateFileList=function(a){var c=this;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);0===a.find(".error").length&&a.remove()});if(a.length){this._settings.ReadOnly||this._chooseButton.hide();for(var d=0;d<a.length;d++){var e=a[d],k=this._fileListItemTemplate.replace("{file.name}",b.CommonFunctions.htmlEncode(e.name)).replace("{file.bytes}",
b.Utils.FormatFileSize(e.size||0,this._settings.KbText,this._settings.MbText));k=$(k);var l=k.find("td.preview img");k.find("td.delete button").click(function(a){a=$(a.target).closest("tr");var b=a.find("td.name > span").text();c.RemoveFile(b,a);return!1});e.thumbnailUrl?l.attr("src",e.thumbnailUrl):l.attr("src",e.icon).attr("height","24").attr("width","24");this._resultsTable.append(k)}}else this._settings.ReadOnly||this._resultsTable.find("tbody").find("tr").length||this._chooseButton.show()};c.prototype.GetSelectedFile=
function(a){if(this._selectedFiles)for(var c=this._selectedFiles.length;c--;)if(this._selectedFiles[c].name===a)return this._selectedFiles[c]};c.prototype.GetSelectedFileByFileId=function(a){if(this._selectedFiles)for(var c=this._selectedFiles.length;c--;)if(this._selectedFiles[c].fileId===a)return this._selectedFiles[c]};c.prototype.RemoveSelectedFile=function(a){if(this._selectedFiles)for(var c=this._selectedFiles.length;c--;)if(this._selectedFiles[c].name===a)return this._selectedFiles.splice(c,
1)[0]};c.prototype.RemoveSelectedFileByFileId=function(a){if(this._selectedFiles)for(var c=this._selectedFiles.length;c--;)if(this._selectedFiles[c].id===a)return this._selectedFiles.splice(c,1)[0]};c.prototype.RemoveFile=function(a,c){for(var f=this.GetFiles(),d=0===c.siblings().length,e=f.length;e--;)if(f[e].name===a){f[e].deleteUrl&&$.ajax({url:f[e].deleteUrl+"&"+this._settings.MethodOverrideQueryStringParam+"=delete",type:"DELETE",xhrFields:{withCredentials:!0}});f.splice(e,1);break}f=this.ValidateSelectedFiles(f,
null);c.remove();this.RemoveSelectedFile(a);this.Trigger(b.PickerEvent.ResultsChanged,{results:f});a=!f.length&&!this._settings.MultiselectAllowed;d=d&&this._settings.MultiselectAllowed&&this.AllUploadsFinished();if(a||d)this._settings.ReadOnly||this._chooseButton.show(),this.HandleStopped({results:[]})};c.prototype.AllUploadsFinished=function(){var a=!0;this._selectedFiles&&this._selectedFiles.forEach(function(c){c.error||(a=!1)});return a};c.prototype.HandleStopped=function(a){this.stopPolling();
this.Trigger(b.PickerEvent.Stopped,a);this.ToggleOkButton(!1)};c.prototype.SetFileErrorText=function(a,c){a.error=c;this.SetFileStatusText(a,c);this.GetRowInResultsTableByText(a.name).find("td.status").addClass("error");this.GetRowInResultsTableByText(a.name).find("td.status span").addClass("label").addClass("label-important")};c.prototype.SetFileStatusText=function(a,c){this.GetRowInResultsTableByText(a.name).find("td.status > span").text(c)};c.prototype.UpdateFileSize=function(a){this.GetRowInResultsTableByText(a.name).find("td.size").text(b.Utils.FormatFileSize(a.size||
0,this._settings.KbText,this._settings.MbText))};c.prototype.UpdateFileName=function(a,c){for(var b=this.GetFiles(),f=b.length;f--;)if(b[f].name===c){b[f].name=a.name;break}this.SetFiles(b);this.GetFileNameElement(c).text(a.name)};c.prototype.GetRowInResultsTableByText=function(a){return this.GetFileNameElement(a).closest("tr")};c.prototype.GetFileNameElement=function(a){return this._resultsTable.find("td.name > span").filter(function(){return $(this).text()===a})};c.prototype.HandleRequestError=
function(){var a=this;this.stopPolling();this._selectedFiles.forEach(function(c){a.SetFileErrorText(c,a._settings.UploadErrorText)});this.HandleStopped({results:this._uploadedFiles})};c.prototype.HandleError=function(a){this.SetFileErrorText(a,this._settings.UploadErrorText);this.AllUploadsFinished()&&0<this._uploadedFiles.length&&this.HandleStopped({results:this._uploadedFiles})};c.prototype.CheckFileDownloadsComplete=function(){var a=this;if(!this._isPolling){this._isPolling=!0;var c=[],b=0;this._selectedFiles.forEach(function(a){!a.error&&
a.signedId&&a.isNew&&(c.push(a.signedId),b++)});if(1===c.length)var d=this.GetFileRepoUrl(c[0]);else if(1<=c.length){d=this.GetFileRepoUrl("batch");var e=c.join()}else this.CompleteFileDownloads();if(d){var l={};e&&(l[this._settings.FileRepoHeaderFileBatch]=e);$.ajax({url:d+"&"+this._settings.FileRepoInfoParam+"=true",type:"get",dataType:"json",headers:l,xhrFields:{withCredentials:!0},success:function(c){var b=!1;c?(c=[].concat(c),c.forEach(function(c){if(c&&c.status)if("DownloadCompleted"===c.status||
"Available"===c.status){var f=a.RemoveSelectedFileByFileId(c.fileId);f&&(f.id=c.fileId,f.signedId=c.signature,f.name=c.fileName,f.type=c.mimeType,f.size=c.fileSize,f.fileUrl=a.GetFileRepoUrl(c.signature),f.deleteUrl=a.GetFileRepoUrl(c.signature),a._uploadedFiles.push(f),a.SetFileStatusText(f,""))}else"Error"===c.status?(f=a.RemoveSelectedFileByFileId(c.fileId),a.SetFileErrorText(f,c.statusMessage)):"Downloading"===c.status&&(f=a.GetSelectedFile(c.fileName),a.SetFileStatusText(f,a._settings.FileIsBeingDownloadedText+
" "+c.statusProgress+"%"));else b=!0})):b=!0;b?a.HandleRequestError():a.AllUploadsFinished()?a.CompleteFileDownloads():a._checkFileDownloadsCompleteTask=setTimeout(function(){a._isPolling=!1;a.CheckFileDownloadsComplete()},1E3)},error:function(){a.HandleRequestError()}})}}};c.prototype.CompleteFileDownloads=function(){this.stopPolling();var a=this.ValidateSelectedFiles(this._uploadedFiles,null);this.UpdateFileList(a);this.Trigger(b.PickerEvent.ResultsChanged,{results:a});this.HandleStopped({results:a});
this._resultsTable.find("tbody").find("tr").length&&this._settings.MultiselectAllowed&&this.Trigger(b.PickerEvent.ResultsChanged,{results:[{}]})};c.prototype.StartUploadFiles=function(a){var c=this;this.ToggleOkButton(!0);this.Trigger(b.PickerEvent.Started);this.Trigger(b.PickerEvent.Added,{files:a});this._selectedFiles=a;this._uploadedFiles=[];var d=!1;this._selectedFiles.forEach(function(a){if(a.error)c.SetFileErrorText(a,a.error);else if(a.fileUrl){c.SetFileStatusText(a,c._settings.FileIsBeingDownloadedText+
" 0%");var f=c.GetFileRepoUrlForFileName(a.name)+"&"+c._settings.FileRepoHeaderDownloadFrom+"=1",e=c.buildDownloadRequestData(a);e&&(f=f+"&"+e);d=!0;b.CommonFunctions.safeAjaxPost({url:f,dataType:"json",xhrFields:{withCredentials:!0},success:function(b){b&&b.fileId&&b.signature?(a.id=b.fileId,a.signedId=b.signature,a.isNew=!0,c.CheckFileDownloadsComplete()):c.HandleError(a)},error:function(){c.HandleError(a)}})}});a&&a.length&&!d&&this._settings.MultiselectAllowed&&(this.SetFiles([]),this.HandleStopped({results:[]}),
this.Trigger(b.PickerEvent.ResultsChanged,{results:[{}]}))};c.prototype.buildDownloadRequestData=function(a){};c.prototype.AddAdditionalHeadersToDownloadFile=function(a,c){};c.prototype.ClearResults=function(a){if(a){var c=this.GetFiles();a.forEach(function(a){for(var b=c.length;b--;)if(c[b].id===a.id){c.splice(b,1);break}});this.SetFiles(c)}};c.prototype.stopPolling=function(){this._checkFileDownloadsCompleteTask&&clearTimeout(this._checkFileDownloadsCompleteTask);this._checkFileDownloadsCompleteTask=
null;this._isPolling=!1};return c}(b.ItemPickerBase);b.FilePickerBase=e})(CCL||(CCL={}));(function(b){var e=function(){function b(){}b.FormatFileSize=function(c,a,b){return 1048576<=c?(c/1048576).toFixed(2)+" "+b:(c/1024).toFixed(2)+" "+a};return b}();b.Utils=e})(CCL||(CCL={}));var Utils;
(function(b){var e=function(){return function(){this.newGuid=function(){function b(c){var a=(Math.random().toString(16)+"000000000").substr(2,8);return c?"-"+a.substr(0,4)+"-"+a.substr(4,4):a}return b()+b(!0)+b(!0)+b()}}}();b.GuidFactory=e;e=function(){return function(b){var c=this;this.value=b;this.getParamValue=function(a){for(var b=[],d=c.value.slice(c.value.indexOf("?")+1).split("&"),e=0;e<d.length;e++){var k=d[e].split("=");b.push(k[0]);b[k[0]]=k[1]}return b[a]};this.appendOrUpdateParam=function(a,
b){var f=new RegExp("([?&])"+a+"=.*?(&|$)","i"),d=-1!==c.value.indexOf("?")?"&":"?";c.value.match(f)?c.value=c.value.replace(f,"$1"+a+"="+b+"$2"):c.value=c.value+d+a+"="+b}}}();b.Url=e})(Utils||(Utils={}));var UrlUtilities=Utils;
(function(b){var e=function(d){function c(a,c){d.call(this,a,c);this.uploaderWindowWidth=660;this.uploaderWindowHeight=552;this.pickerWindow=null;this.oneDrivePickerActions={fileSelected:0}}__extends(c,d);c.prototype.Init=function(){var a=this;this._settings.ReadOnly||(window.addEventListener("message",function(c){if(c.origin===a._settings.PickerDomain&&c.data.isOneDriveForBusinessPickerResult&&c.data.action===a.oneDrivePickerActions.fileSelected)a.onFileSelected(c.data)}),this._chooseButton=$("#"+
this._settings.ButtonId),this._chooseButton.on("click",function(){a.pickerWindowIsAlreadyOpened()?a.pickerWindow.focus():a.pickerWindow=window.open(a.getPickerUrl(),"OneDrivePicker",a.getOnedriveFilePickerWindowSettings())}),this._elem.append(this._chooseButton));this.UpdateFileList(this.GetFiles())};c.prototype.getPickerUrl=function(){var a=new UrlUtilities.Url(this._settings.PickerUrl);a.appendOrUpdateParam("mode",encodeURIComponent(JSON.stringify({allowToSelectMultipleFiles:this._settings.MultiselectAllowed,
checkUploadCopyByDefault:this._settings.CheckUploadCopyByDefault})));return a.value};c.prototype.onFileSelected=function(a){if(!(this._elem.hasClass("disabled")||0<this._resultsTable.find("tr").length)){a=this.ConvertSelectedFiles(a);for(var c=a.length-1;0<=c;c--)a[c].name=this.ProcessFileName(a[c].name);this.ValidateSelectedFiles(a,null);this.UpdateFileList(a);0<a.length&&this.StartUploadFiles(a)}};c.prototype.getWindowLeftCoordinate=function(){return window.screenX+(window.outerWidth-this.uploaderWindowWidth)/
2};c.prototype.getWindowTopCoordinate=function(){return(window.screenY+window.outerHeight-this.uploaderWindowHeight)/2};c.prototype.getWindowPositionAndSizeSettingString=function(a,c){var b=this.getWindowLeftCoordinate(),f=this.getWindowTopCoordinate();return"width = "+a+", height = "+c+", left = "+b+", top = "+f};c.prototype.getOnedriveFilePickerWindowSettings=function(){return this.getWindowPositionAndSizeSettingString(this.uploaderWindowWidth,this.uploaderWindowHeight)+", toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes"};
c.prototype.pickerWindowIsAlreadyOpened=function(){return this.pickerWindow&&!this.pickerWindow.closed};c.prototype.ConvertSelectedFiles=function(a){var c=this,b=a.files;return b?$.map(b,function(b,f){return{name:b.name,size:b.size,thumbnailUrl:c._settings.DefaultThumbnailUrl,fileUrl:b.url,icon:c._settings.DefaultThumbnailUrl,authToken:a.authToken}}):[]};c.prototype.ClearResults=function(a){var c=!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);a.hasClass("clearme")||0===
a.find(".error").length?a.remove():(c=!1,a.addClass("clearme"))});c&&this._chooseButton.show();d.prototype.ClearResults.call(this,a);this.Trigger(b.PickerEvent.ResultsChanged,{results:[]})};c.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};c.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoDownloadFromParam+"="+encodeURIComponent(a.fileUrl)+"&"+this._settings.FileRepoSourceTypeParam+"="+this._settings.SourceType+"&"+
this._settings.FileRepoFileSizeParam+"="+a.size};return c}(b.FilePickerBase);b.OneDrivePicker=e})(CCL||(CCL={}));
(function(b){var e=function(){function a(){}a.show="overlayModal:show";a.hide="overlayModal:hide";return a}();b.OverlayModalEvents=e;var d=function(){return function(){}}();b.OverlayModalCloseContext=d;var c=function(){function c(a,b,f){this.id=a;this.controls=f;this._$document=$(document);this._$window=$(window);this.Params={};a=f.container.data(c.settingsAttribute)||{IsIos:!1,ResizeTimeoutInMilliseconds:10};"string"===typeof b?this._settings={}:$.extend(a,b);this._settings=a;this.Params.Url=this._settings.Url;
this._contentLoader=this.GetContentLoader(this._settings.Mode);this.initialize(f);this._activeElement=f.container.get(0);this._settings.PreferredWidth=this._settings.PreferredWidth||800;this.renderHeader();f.container.data(c.settingsAttribute,this._settings)}c.prototype.renderHeader=function(){if(this._settings.Title){this.controls.container.find("."+b.OverlayModal.CssClasses.Header).length||(this._titleTemplate="<div class='"+b.OverlayModal.CssClasses.Header+"'><h2>"+(this._settings.Title||"")+'</h2><a class="'+
b.OverlayModal.CssClasses.Close+'">Close</a></div>',this.controls.contentContainer.before($(this._titleTemplate)));var a=this.controls.container.find("."+b.OverlayModal.CssClasses.Close);a.off("click");a.click(function(){this.close(f.CloseButtonClicked)}.bind(this))}};c.prototype.setParams=function(a){a&&$.extend(this.Params,a)};c.prototype.setContentMinSize=function(a,c){this._settings.MinContentWidth=a;this._settings.MinContentHeight=c;this.adjustWindowSize()};c.prototype.setPreferredSize=function(a,
c){0<a&&(this._settings.PreferredWidth=a);0<c&&(this._settings.PreferredHeight=c);this.adjustWindowSize()};c.prototype.clearContent=function(){this.controls.contentContainer.empty()};c.prototype.getId=function(){return this.id};c.prototype.onModalKeyUp=function(a){a.which===b.CommonConstants.keyCodes.escape&&b.OverlayModal.instance&&b.OverlayModal.instance.close(f.EscapeKeyPressed)};c.prototype.initialize=function(a){this._$document.on("keyup",this.onModalKeyUp);this._$window.on("resize",this.adjustWindowSizeWithTimeout.bind(this));
this._activeElement=this.controls.container.get(0);if(this._contentLoader)this._contentLoader.onInit(this.controls.contentContainer,this.adjustWindowSize.bind(this),this.Params);null==navigator.userAgent.match(/iPod/)&&$(this.controls.contentContainer).perfectScrollbar({suppressScrollX:!0})};c.prototype.getIsOpened=function(){return this._isOpened};c.prototype.adjustWindowSizeWithTimeout=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=setTimeout(this.adjustWindowSize.bind(this),
this._settings.ResizeTimeoutInMilliseconds)};c.prototype.adjustWindowSize=function(){var a=this._settings,c=this.controls;this.controls.wrapperContainer.removeAttr("style");this.controls.contentContainer.removeAttr("style");var f=0;c.wrapperContainer.children().not(c.contentContainer).each(function(){f+=$(this).outerHeight()});if(this._$window.width()>b.CommonConstants.mediaScreenSizes.mobile){a.PreferredWidth&&0<a.PreferredWidth&&c.wrapperContainer.width(Math.min(a.PreferredWidth,this._$window.width()-
40));var d=c.contentContainer.outerHeight(!0)-c.contentContainer.height();if(a.PreferredHeight&&0<a.PreferredHeight){var e=c.wrapperContainer.outerHeight()-c.contentContainer.height();c.contentContainer.outerHeight(a.PreferredHeight-e+d,!0)}else c.contentContainer.height(c.wrapperContainer.outerHeight()-f-d);c.contentContainer.css({width:a.MinContentWidth&&0<a.MinContentWidth?a.MinContentWidth:void 0,minWidth:a.MinContentWidth&&0<a.MinContentWidth?a.MinContentWidth:void 0,minHeight:a.MinContentHeight&&
0<a.MinContentHeight?a.MinContentHeight:void 0});a=c.wrapperContainer.outerHeight()-c.headerContainer.outerHeight();c.contentContainer.outerHeight()-1>a&&c.contentContainer.outerHeight(a);a=c.wrapperContainer.height()/2;d=c.wrapperContainer.width()/2;c.wrapperContainer.css({left:"50%","margin-left":-1*d,"margin-top":-1*a,top:"50%"})}else c.contentContainer.outerHeight(c.wrapperContainer.height()-f);null==navigator.userAgent.match(/iPod/)&&$(c.contentContainer).perfectScrollbar("update")};c.prototype.toggleContentAreaFrame=
function(a){b.CommonFunctions.makePostMessageCall(window.top,new b.CommonWindowMessages.GenericMessage(a?b.CommonWindowMessages.MessageNames.expandContentAreaFrame:b.CommonWindowMessages.MessageNames.collapseContentAreaFrame));IframeResizer.reportSetIframeDefaultHeight()};c.prototype.open=function(){c.instance=this;this.toggleContentAreaFrame(!0);!this._isOpened&&this._settings.IsTopFrame&&(this.adjustWindowSize(),this.openModal())};c.prototype.openModal=function(){var a=this.controls;this._activeElement&&
$(this._activeElement).removeClass(b.OverlayModal.CssClasses.IsActive);if(this._contentLoader)this._contentLoader.onOpen(this.controls.contentContainer,this.adjustWindowSize.bind(this),this.Params);else this.adjustWindowSizeWithTimeout();this._lastWindowScroll=this._$window.scrollTop();$("html").addClass(b.OverlayModal.CssClasses.Overlay);this.controls.container.addClass(b.OverlayModal.CssClasses.IsActive);this.setFocus();this._$document.trigger(b.OverlayModalEvents.show,[this._activeElement,this.id]);
a.contentContainer.toggleClass(b.OverlayModal.CssClasses.WebkitOverflow)};c.prototype.close=function(a){if(c.instance){a||(a=f.FunctionExecuted);c.instance=null;this.controls.contentContainer.removeClass(b.OverlayModal.CssClasses.WebkitOverflow);this._$window.scrollTop(this._lastWindowScroll);$("html").removeClass(b.OverlayModal.CssClasses.Overlay);if(this._activeElement){$(this._activeElement).removeClass(b.OverlayModal.CssClasses.IsActive);var e=new d;e.closeType=a;e.activeElement=this._activeElement;
e.id=this.id;this._$document.trigger(b.OverlayModalEvents.hide,e);this._activeElement=null}this.toggleContentAreaFrame(!1);this.removeFocus();this._$document.off("keyup",this.onModalKeyUp)}};c.prototype.setFocus=function(){this._activeElement&&(this._lastActive=document.activeElement,this._activeElement.focus())};c.prototype.removeFocus=function(){this._lastActive&&this._lastActive.focus()};c.prototype.GetContentLoader=function(c){var f;c==b.OverlayLoadMode.AjaxStatic&&(f=new a);return f};c.settingsAttribute=
"settings";c.CssClasses={Container:"ccl-overlay-modal",IsActive:"is-active",WebkitOverflow:"ccl-modal-webkit-overflow",Content:"ccl-overlay-modal-content",Wrapper:"ccl-overlay-modal-wrapper",Overlay:"ccl-overlay-modal-has-overlay",OverlayIos:"ccl-overlay-modal-has-overlay-ios",Close:"ccl-overlay-modal-close",Header:"ccl-overlay-modal-header"};return c}();b.OverlayModal=c;e=function(){function a(){}a.prototype.onInit=function(a,c,b){};a.prototype.onOpen=function(a,c,b){};return a}();b.BaseContentLoader=
e;var a=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.onInit=function(a,c,b){b&&b.Url&&$.ajax({type:"POST",url:b.Url,data:b,success:function(b){a.html($(b).text());c()},error:function(a,c,b){alert(b)}})};return c}(e);b.StaticAjaxContentLoader=a;(function(a){a[a.FunctionExecuted=0]="FunctionExecuted";a[a.CloseButtonClicked=1]="CloseButtonClicked";a[a.EscapeKeyPressed=2]="EscapeKeyPressed"})(b.OverlayModalCloseType||(b.OverlayModalCloseType={}));var f=b.OverlayModalCloseType;
e=function(){function a(){b.CommonFunctions.attachPostMessageEventListener($(window),[b.CommonWindowMessages.MessageNames.contentAreaFrameHasExpanded],function(a){b.OverlayModal.instance&&!b.OverlayModal.instance.getIsOpened()&&setTimeout(b.OverlayModal.instance.openModal(),20)})}a._initEventListener=new a;return a}();b.OverlayModalListener=e;(function(a){a.fn.overlayModal=function(b,f){var d={container:this,contentContainer:this.find("."+c.CssClasses.Content),wrapperContainer:this.find("."+c.CssClasses.Wrapper),
headerContainer:this.find("."+c.CssClasses.Header)};b instanceof Object&&a.extend(void 0,b);d=new c(d.container.get(0).id,b,d);d.Params=f;switch(b){case "open":d.open();break;case "close":d.close()}return this}})(jQuery)})(CCL||(CCL={}));var PopupInitFailureReason;(function(b){b[b.BrowserNotSupported=1]="BrowserNotSupported";b[b.ExternalServiceNotAvailable=2]="ExternalServiceNotAvailable"})(PopupInitFailureReason||(PopupInitFailureReason={}));
var PopupInitFailureEventArgs=function(){return function(b,e){this.failureReason=b;this.translation=e}}(),PopupCallback=function(){return function(b,e){this.onMessageReceived=b;this.onPopupClosed=e}}(),Popup=function(){function b(e,d){var c=this;this.settings=e;this.browserSniffer=d;this.popupWidth=660;this.popupHeight=552;this.popupWindow=null;this.subscriberCallbacks=[];this.windowOpenCheckIntervalInMilliseconds=1E3;this.open=function(){c.popupWindowIsAlreadyOpened()?c.popupWindow.focus():(c.popupWindow=
window.open(c.getPopupUrlWithTarget(),c.getInitialPopupTitle(),c.getPopupWindowSettings()),c.timerForCheckingOpenWindow=setInterval(c.notifyIfWindowWasClosed,c.windowOpenCheckIntervalInMilliseconds))};this.subscribe=function(a){c.subscriberCallbacks.push(a)};this.popupWindowIsAlreadyOpened=function(){return c.popupWindow&&!c.popupWindow.closed};this.getPopupUrlWithTarget=function(){var a=new Utils.Url(c.getPopupUrl());if(a.getParamValue(b.target))throw"You cannot set query parameter: ["+b.target+
"] in popupUrl.";a.appendOrUpdateParam(b.target,encodeURI(c.popupIdentifier));return a.value};this.listenForPostMessages=function(){window.addEventListener("message",c.onPostMessageReceived)};this.getPopupWindowSettings=function(){var a=c.getPopupCoordinates();return"width="+a[0]+", height="+a[1]+", left="+a[2]+", top="+a[3]+", toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes"};this.getPopupCoordinates=function(){return[c.popupWidth,c.popupHeight,c.getWindowLeftCoordinate(),
c.getWindowTopCoordinate()]};this.getWindowLeftCoordinate=function(){return window.screenX+(window.outerWidth-c.popupWidth)/2};this.getWindowTopCoordinate=function(){return(window.screenY+window.outerHeight-c.popupHeight)/2};this.isProxyIframeRequired=function(){return c.settings.crossCommunicationProxyUrl&&c.browserSniffer.isInternetExplorerAnyVersion()};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("cross_communication_proxy")){var a=c.prepareIframe("cross_communication_proxy");
document.body.appendChild(a)}};this.prepareIframe=function(a){var b=document.createElement("iframe");b.id=a;b.style.display="none";b.src=c.settings.crossCommunicationProxyUrl;return b};this.notifyIfWindowWasClosed=function(){c.popupWindow&&c.popupWindow.closed&&(c.timerForCheckingOpenWindow=clearInterval(c.timerForCheckingOpenWindow),c.popupWindow=null,c.notifyAboutClosing())};this.notifyAboutClosing=function(){for(var a=0;a<c.subscriberCallbacks.length;a++){var b=c.subscriberCallbacks[a];if(b.onPopupClosed)b.onPopupClosed()}};
this.onPostMessageReceived=function(a){c.isPostMessageForUs(a)&&c.processPostMessage(a)};this.isPostMessageForUs=function(a){return a&&a.origin===c.settings.popupDomain&&a.data&&a.data[b.target]===c.popupIdentifier};this.popupIdentifier=(new Utils.GuidFactory).newGuid();if(objectState.isNullOrUndefined(this.settings))throw"Popup requires settings to be passed. Please provide them.";if(objectState.isNullOrUndefined(this.browserSniffer))throw"Popup requires browserSniffer to be passed. Please provide it.";
this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered();this.listenForPostMessages()}b.prototype.getPopupUrl=function(){return this.settings.popupUrl};b.prototype.getInitialPopupTitle=function(){return"Title"};b.prototype.processPostMessage=function(b){for(var d=0;d<this.subscriberCallbacks.length;d++){var c=this.subscriberCallbacks[d];if(c.onMessageReceived)c.onMessageReceived(b.data)}};b.target="target";return b}();
(function(b){var e=function(){function b(){this.lastPromise=$.Deferred().resolve()}b.prototype.enqueue=function(c){var a=$.Deferred();this.lastPromise.always(function(){c().always(function(){a.resolve()})});this.lastPromise=a};return b}();b.PromiseQueue=e})(CCL||(CCL={}));
(function(b){(function(b){b.toDate=function(b){return b?new Date(b.Year,b.Month-1,b.Day,b.Hour,b.Minute):void 0};b.toDateWithSeconds=function(b){return b?new Date(b.Year,b.Month-1,b.Day,b.Hour,b.Minute,b.Second):void 0};b.fromDate=function(b){return b?{Year:b.getFullYear(),Month:b.getMonth()+1,Day:b.getDate(),Hour:b.getHours(),Minute:b.getMinutes()}:void 0};b.fromDateWithSeconds=function(b){return b?{Year:b.getFullYear(),Month:b.getMonth()+1,Day:b.getDate(),Hour:b.getHours(),Minute:b.getMinutes(),
Second:b.getSeconds()}:void 0}})(b.SerializableDateTimeConverter||(b.SerializableDateTimeConverter={}))})(CCL||(CCL={}));
(function(b){var e=function(){function d(c,a){this._id=c;this._settings=a}d.prototype.toggleContentAreaFrame=function(c){b.CommonFunctions.makePostMessageCall(window.top,new b.CommonWindowMessages.GenericMessage(c?b.CommonWindowMessages.MessageNames.expandContentAreaFrame:b.CommonWindowMessages.MessageNames.collapseContentAreaFrame));IframeResizer.reportSetIframeDefaultHeight()};d.prototype.init=function(){this._settings.OpenOnClick&&this.fancyboxInit();this.imageClickInit();this.slideshowInit()};
d.prototype.fancyboxInit=function(){var c=this;$("#ad-gallery_"+c._id).on("click",".ad-image",function(){var a=$(this).find("img").attr("src"),b=null,d=null;a.split("/");if($(this).parent().find(".ad-image-description")){b=$(this).parent().find(".ad-description-title");var e=b.text();b&&(b=b.html());""!=e&&(b="<big>"+b+"</big>");d=$(this).parent().find(".ad-image-description span");var k=d.text();d&&(d=d.html());d&&0<=d.indexOf("IMAGE_LINK_")&&(k=d="");""!=k&&(""!=e&&(b+="<br>"),d="<i>"+d+"</i>")}$.fancybox.open({href:a,
beforeLoad:function(){c.toggleContentAreaFrame(!0);this.title=c._settings.ShowTitle?(b||"")+(d||""):""},beforeClose:function(){c.toggleContentAreaFrame(!1)},lang:{error_request_cannot_be_loaded:c._settings.Terms.FancyboxErrorRequestCannotBeLoaded,error_try_again_later:c._settings.Terms.FancyboxErrorTryAgainLater,close:c._settings.Terms.FancyboxClose,next:c._settings.Terms.FancyboxNext,previous:c._settings.Terms.FancyboxPrevious,start_slideshow:c._settings.Terms.FancyboxStartSlideshow,toggle_size:c._settings.Terms.FancyboxToggleSize,
pause_slideshow:c._settings.Terms.FancyboxPauseSlideshow}})})};d.prototype.imageClickInit=function(){$("#ad-gallery_"+this._id).on("click",".ad-image",function(){$(this).find("img").attr("src");var c;if($(this).find(".ad-image-description")&&((c=$(this).find(".ad-description-title"))&&c.text(),(c=$(this).find("span"))&&(c=c.text()),""!=c)){var a=window.location.href.trim();0<=c.indexOf("IMAGE_LINK_TAB:")?(c=c.substring(15).trim(),a!=c&&window.open(c,"_blank")):0<=c.indexOf("IMAGE_LINK_PAR:")&&(c=
c.substring(15).trim(),a!=c&&window.open(c,"_self"))}})};d.prototype.slideshowInit=function(){$("#ad-gallery_"+this._id).adGallery({loader_image:this._settings.LoaderImageUrl,width:this._settings.Width,height:this._settings.Hight,start_at_index:this._settings.StartAtIndex,animation_speed:this._settings.AnimationSpeed,update_window_hash:this._settings.UpdateWindowHash,hooks:{displayDescription:this._settings.ShowTitle?null:function(c){c.css("display","none")}},effect:this._settings.TransitionType,
slideshow:{enable:this._settings.Enable,autostart:this._settings.Autostart,start_label:this._settings.Terms.StartLabel,stop_label:this._settings.Terms.StopLabel,speed:this._settings.Speed}})};return d}();b.Slideshow=e})(CCL||(CCL={}));
(function(b){var e=function(d){function c(a,c){d.call(this,a);this.collapsedDataAttribute="data-collapsed";this.scrollTopAnimationTimeMilliseconds=200;this.settings=c}__extends(c,d);c.prototype.renderShowMoreTextSection=function(a,c,d,e,k){var f=this;0<this.settings.MaxTextHeight&&0<this.settings.CollapsedTextHeight&&setTimeout(function(){var g=f.settings.CollapsedTextHeight;if(f.hasEnoughHeightForRenderingShowMore(d)){a.addClass(f.settings.CssClasses.Container).empty();var h=$("<button>").attr({type:"button",
"aria-controls":c.prop("id"),"aria-expanded":"false"}).click(function(e){f.expandText({clickablePlaceholder:a,toggleButton:h,collapsibleContainer:c,collapseHeight:g,collapse:!f.isCollapsed(a),contentPanel:d},function(){k(c,a)});b.CommonFunctions.isOnScreen(c,1,1)||(f.settings.EnableAnimation?$("html, body").animate({scrollTop:c.offset().top},f.scrollTopAnimationTimeMilliseconds,function(){k(c,a)}):$("html, body").scrollTop(c.offset().top))});a.append($("<span>").addClass(f.settings.CssClasses.Line)).append(h).append($("<span>").addClass(f.settings.CssClasses.Line));
f.expandText({clickablePlaceholder:a,toggleButton:h,collapsibleContainer:c,collapseHeight:g,collapse:!e,contentPanel:d},function(){k(c,a)});a.show()}else a.hide(),c.css("max-height","");d.show()})};c.prototype.hasEnoughHeightForRenderingShowMore=function(a){return a.height()>this.settings.MaxTextHeight};c.prototype.expand=function(a,c){a.css("max-height","");c.removeAttr(this.collapsedDataAttribute);c.find("button").attr("aria-expanded","true").text(this.settings.Resources.ShowLess)};c.prototype.isCollapsed=
function(a){return!!a.attr(this.collapsedDataAttribute)};c.prototype.expandText=function(a,c){a.collapse?(a.clickablePlaceholder.attr(this.collapsedDataAttribute,1),a.toggleButton.attr("aria-expanded","false").text(this.settings.Resources.ShowMore)):(a.clickablePlaceholder.removeAttr(this.collapsedDataAttribute),a.toggleButton.attr("aria-expanded","true").text(this.settings.Resources.ShowLess));this.settings.EnableAnimation?a.collapsibleContainer.animate({"max-height":(a.collapse?a.collapseHeight:
a.contentPanel.outerHeight())+"px"},{duration:this.scrollTopAnimationTimeMilliseconds,complete:a.collapse?c:function(){a.collapsibleContainer.css("max-height","");c()}}):a.collapsibleContainer.css("max-height",a.collapse?a.collapseHeight+"px":"")};return c}(b.DomElementClass);b.TextExpander=e})(CCL||(CCL={}));
(function(b){var e=function(){function b(){}b.GetFunctionByName=function(c,a){if(void 0!==c&&null!==c){if(void 0===a||null===a)a=window;c=c.split(".");for(var b=c.pop(),d=0;d<c.length;d++)a=a[c[d]];return a[b]}};return b}();b.Callbacks=e})(CCL||(CCL={}));(function(b){var e=function(){function d(c){this.settings=c;this.inlineTextExpander=new b.InlineTextExpander(this.settings.InlineTextExpanderSettings)}d.prototype.init=function(){};return d}();b.CommentModuleManager=e})(CCL||(CCL={}));
(function(b){var e=function(d){function c(a){d.call(this,a.DomElementClientId);this._stringToDateRegex=/-?\d+/;this._addCommentInputArea=$();this._furtherCommentsAreDisabledInfoPanel=$();this._animationSpeed=200;this._wasControlsCreated=this._wasDataSourceFetchedAtLeastOnce=!1;this._settings=a;this._userData=this._settings.UserData;this._initData=this._settings.DataSource;this._cmm=window[this._settings.CommentModuleManagerName];this._oldestCommentId=this._newestCommentId=-1;this._sending=!1;this._elem.data("CommentModule",
this)}__extends(c,d);c.prototype.initCallbacks=function(a,c,b,d,e){this._onAddCommentFunction=a;this._onEditCommentFunction=c;this._onDeleteCommentFunction=b;this._onLoadOldCommentsFunction=d;this._onDeleteConfirmationFunction=e};c.prototype.createControls=function(a){void 0===a&&(a=!1);this._wasControlsCreated||!this._settings.IsInitiallyVisible&&!a||(this._wasControlsCreated=!0,this._cmm.settings.Resources.FurtherCommentsAreDisabled&&(this._furtherCommentsAreDisabledInfoPanel=$("<div>").addClass(this._cmm.settings.CssClasses.Inactive).text(this._cmm.settings.Resources.FurtherCommentsAreDisabled).hide(),
this._furtherCommentsAreDisabledInfoPanel.addClass(this._cmm.settings.CssClasses.FurtherCommentsDisabled)),this._settings.UseModernSkin?(this._elem.addClass("ccl-commentmodule-modernskin").empty().append(this._addCommentInputArea=this.createInputArea().hide()).append(this.createLoadMoreLink()).append(this.createCommentList(this._initData.Items)),this._cmm.settings.Resources.FurtherCommentsAreDisabled&&this._elem.before(this._furtherCommentsAreDisabledInfoPanel)):(this._elem.empty().append(this.createLoadMoreLink()).append(this.createCommentList(this._initData.Items)).append(this._addCommentInputArea=
this.createInputArea().hide()),this._cmm.settings.Resources.FurtherCommentsAreDisabled&&this._elem.after(this._furtherCommentsAreDisabledInfoPanel)),0<this._initData.Items.length&&(this._wasDataSourceFetchedAtLeastOnce=!0),this._settings.IsInitiallyVisible&&this.updateLoadMoreLink(this,this._initData.VirtualCount-this._initData.Items.length),this.setVisibility())};c.prototype.show=function(){var a=this;this._elem.slideDown(this._animationSpeed,function(){0===a.getCommentsCount()&&a._settings.SetFocusOnShow&&
a.focusInputArea()})};c.prototype.loadAndShow=function(){var a=this;this.createControls(!0);this.loadOldComments(function(){return a.show()})};c.prototype.isDataSourceFetchedAtLeastOnce=function(){return this._wasDataSourceFetchedAtLeastOnce};c.prototype.isVisible=function(){return this._elem.is(":visible")};c.prototype.hide=function(){this._elem.slideUp(this._animationSpeed)};c.prototype.getCommentsCount=function(){return this._list?this._list.children(":data(commentId)").length:0};c.prototype.getCommentsCountWithoutDeleted=
function(){return this._list?this._list.children(":data(commentId):visible").length:0};c.prototype.loadOldComments=function(a){var c=this;void 0===a&&(a=function(){});if(this._onLoadOldCommentsFunction){var b=this._wasDataSourceFetchedAtLeastOnce?0:this._settings.NumberOfPreviouslyReadItemsToDisplay;this._wasDataSourceFetchedAtLeastOnce=!0;this._onLoadOldCommentsFunction(this,this._userData,this._oldestCommentId,this._settings.PageSize,b,function(b,f){c.loadOldCommentsSuccess(b,f);a()},this.loadOldCommentsFault)}};
c.prototype.togglePossibilityToAddComments=function(a){this._settings.AllowAddComments=a;this.setVisibility()};c.prototype.setVisibility=function(){var a=0<this.getCommentsCount()||this._loadMoreLinkContainer.is(":visible");this._elem.toggle(this._settings.AllowAddComments||a);this._addCommentInputArea.toggle(this._settings.AllowAddComments);this._furtherCommentsAreDisabledInfoPanel.toggle(!this._settings.AllowAddComments&&a)};c.prototype.createLoadMoreLink=function(){var a=this;this._loadMoreLinkContainer=
$("<div>").addClass(this._cmm.settings.CssClasses.LoadMoreCommentsLink).hide();this._loadMoreLink=$('<a href="#">').click(function(c){a._loadMoreLink.getIfHyperLinkEnabled()&&(a._loadMoreLink.toggleHyperlink(!1),a.loadOldComments(function(){return a._loadMoreLink.toggleHyperlink(!0)}));c.preventDefault()}).appendTo(this._loadMoreLinkContainer);this._pageInfoLabel=this._settings.ShowPageInfoLabel?$("<span>").addClass(this._cmm.settings.CssClasses.PageInfoLabel).appendTo(this._loadMoreLinkContainer).hide():
$();return this._loadMoreLinkContainer};c.prototype.createCommentList=function(a){this._list=$("<ul>").addClass(this._cmm.settings.CssClasses.CommentList);this.fillCommentList(a,!0);return this._list};c.prototype.fillCommentList=function(a,c){var b=this;a&&(c||(a=a.reverse()),$.each(a,function(a,f){b.renderComment(f,c,!1);if(-1===b._newestCommentId||f.Id>b._newestCommentId)b._newestCommentId=f.Id;if(-1===b._oldestCommentId||f.Id<b._oldestCommentId)b._oldestCommentId=f.Id}));this._list.toggle(!this._list.is(":empty"))};
c.prototype.renderComment=function(a,c,d){var f=this,e=$("<li>"),g=$("<div>"),m=$("<img>"),n=$("<div>"),q=$("<div>"),p=$(a.ProfileHyperlinkControl?a.ProfileHyperlinkControl:b.CommonFunctions.formatString("<span>{0}</span>",a.UserName)),v=$("<span>"),u=$("<div>"),w=$("<span>"),r=$("<textarea>"),t=$("<div>"),y=$("<span>");e.data("commentId",a.Id);var C=a.PictureUrl&&0<a.PictureUrl.length;this._settings.HidePersonPictures?e.addClass(this._cmm.settings.CssClasses.CommentListItemNoPersonPicture):e.addClass(this._cmm.settings.CssClasses.CommentListItem);
a.IsRead||e.addClass(this._cmm.settings.CssClasses.UnreadItem);n.addClass(this._cmm.settings.CssClasses.CommentContent);n.append(q);if(this._settings.UseModernSkin){var z=$("<div>").addClass(b.CommonCssClasses.Clearfix).addClass("ccl-commentmodule-listitem-headerwrapper").appendTo(e),E=$("<div>").append(p);this._settings.HidePersonPictures||z.append(g.append(m));z.append(E);z.append(w);(this._settings.AllowDeleteComments&&a.AllowDeleteComment||this._settings.AllowEditComments&&a.AllowEditComment)&&
this.renderCommentMenu(a,z,r,t,v,u);q.append(v);e.append(n,u)}else this._settings.HidePersonPictures||e.append(g.append(m)),e.append(n,u,w),(this._settings.AllowDeleteComments&&a.AllowDeleteComment||this._settings.AllowEditComments&&a.AllowEditComment)&&this.renderCommentMenu(a,e,r,t,v,u),q.append(p,$("<span>:</span>").addClass(this._cmm.settings.CssClasses.MarginRight5).addClass(this._cmm.settings.CssClasses.ColonAfterPersonName),v);z=this.encodeText(a.CommentText);this._settings.HidePersonPictures||
(g.addClass(this._cmm.settings.CssClasses.PersonImgWrapper),m.addClass(this._cmm.settings.CssClasses.PersonImg).prop({src:C?a.PictureUrl:this._cmm.settings.DefaultPersonImageUrl,alt:"",width:this._cmm.settings.ImageWidth,height:this._cmm.settings.ImageHeight}));p.addClass(this._cmm.settings.CssClasses.PersonName);v.addClass(this._cmm.settings.CssClasses.CommentText).prop("id",""+this._cmm.settings.CommentTextContainerClientIdPrefix+a.Id).data("originalText",z).html(linkifyHtml(z,b.LinkifyOptionsProvider.getDefaults()));
u.addClass(this._cmm.settings.CssClasses.ShowMoreTextContainer);q.hide();this._cmm.inlineTextExpander.scanItemAndAppend(v);n.find("div").first().show();w.addClass(this._cmm.settings.CssClasses.CommentDate).text(a.DateTimeString);a.DateTimeTooltip&&0<a.DateTimeTooltip.length&&w.prop("title",a.DateTimeTooltip);this._settings.AllowEditComments&&a.AllowEditComment&&(r.data("originalText",a.CommentText).val(a.CommentText).keydown(function(a){a.which===b.CommonConstants.keyCodes.escape&&(r.val(r.data("originalText")).trigger("input"),
f.toggleEditing(!1,r,t,v,u));return!0}).on("input paste",function(){f.validateTextArea(r,y,e)}).hide(),this.renderAriaLabels(r),this.makeTextAreaAutoResizable(r),this.updatePlaceholder(r),this.renderPostOrEditButtonPanel(t,!1,y,function(){f.tryEditComment(a.Id,r,y,t,v,u)}).hide(),y.hide().addClass(this._cmm.settings.CssClasses.ErrorText),e.append(r,t,y));d?(this.getCommentPnlById(this._list,a.Id).replaceWith(e),e.get(0).scrollIntoView()):c?this._list.append(e):this._list.prepend(e);return e};c.prototype.tryEditComment=
function(a,c,b,d,e,l){var f;!b.is(":visible")&&0<(f=c.val()).trim().length&&(f!==c.data("originalText")&&this._onEditCommentFunction?this._sending?alert(this._cmm.settings.Resources.TooManyRequestError):(this._sending=!0,this._onEditCommentFunction(this,this._userData,a,f,this.editCommentSuccess,this.editCommentFault)):this.toggleEditing(!1,c,d,e,l))};c.prototype.renderCommentMenu=function(a,c,b,d,e,l){var f=$('<a href="#">').addClass(this._cmm.settings.CssClasses.ShowMenuLink).attr("aria-label",
this._cmm.settings.Resources.ShowMenuLinkAccessibilityText).click(function(a){a.preventDefault()}).appendTo(c);this.renderMenuItems(a,c,f,b,d,e,l)};c.prototype.renderMenuItems=function(a,c,b,d,e,l,m){var f=$("<div>").addClass(this._cmm.settings.CssClasses.Menu).hide().appendTo(c),g=$("<ul>").appendTo(f);this._settings.AllowEditComments&&a.AllowEditComment&&this.renderCommentEditButton(d,e,l,m).appendTo(g);this._settings.AllowDeleteComments&&a.AllowDeleteComment&&this.renderCommentDeleteButton(a,c).appendTo(g);
this.createDropDownMenu(a,b,f)};c.prototype.createDropDownMenu=function(a,c,b){a=new DropDownMenu("CommentMenu"+a.Id,!1);a.settings={showMenuOnHover:this._settings.ShowMenuOnHover,isIos:this._cmm.settings.IsIos,closeMenuWhenClickingOnLink:!0,closeMenuWhenClickingInside:!0,appendToBody:!1,selectedHolderCssClass:"",useTargetPosition:!0,setMinWidthByTarget:!1,horizontalPosition:this._cmm.settings.DropDownMenuPosition,useFixedPosition:!1,zIndex:1E3,autofitHeight:!1};a.initializeControls(b,c,c)};c.prototype.renderCommentEditButton=
function(a,c,d,e){var f=this,g=$("<li>");$('<a href="#">').addClass(this._cmm.settings.CssClasses.MenuItemLink).click(function(b){f.toggleEditing(!0,a,c,d,e);b.preventDefault()}).append($("<img>").prop({src:b.CommonConstants.onePixelTransparentImageSource,alt:""}).addClass(this._cmm.settings.CssClasses.EditButton)).append($("<span>").text(this._cmm.settings.Resources.EditComment)).appendTo(g);return g};c.prototype.toggleEditing=function(a,c,b,d,e){c.add(b).toggle(a);d.toggle(!a);a&&c.focus().trigger("input");
e.children().toggle(!a)};c.prototype.renderCommentDeleteButton=function(a,c){var f=this,d=$("<li>");$('<a href="#">').addClass(this._cmm.settings.CssClasses.MenuItemLink).click(function(b){f.deleteComment(a.Id,c);b.preventDefault()}).append($("<img>").prop({src:b.CommonConstants.onePixelTransparentImageSource,alt:""}).addClass(this._cmm.settings.CssClasses.DeleteButton)).append($("<span>").text(this._cmm.settings.Resources.DeleteComment)).appendTo(d);return d};c.prototype.createInputArea=function(){var a=
this,c=$("<div>");(this._settings.HidePersonPictures||this._settings.UseModernSkin)&&c.addClass(this._cmm.settings.CssClasses.InputAreaNoPersonPicture);c.addClass(this._cmm.settings.CssClasses.InputArea);var b=this._cmm.settings.CurrentPersonImageUrl&&0<this._cmm.settings.CurrentPersonImageUrl.length,d=null;this._settings.HidePersonPictures||this._settings.UseModernSkin||(d=$("<img>").addClass(this._cmm.settings.CssClasses.PersonImg).prop({src:b?this._cmm.settings.CurrentPersonImageUrl:this._cmm.settings.DefaultPersonImageUrl,
alt:this._cmm.settings.CurrentPersonFullName,width:this._cmm.settings.ImageWidth,height:this._cmm.settings.ImageHeight}));var e=$("<span>").hide().addClass(this._cmm.settings.CssClasses.ErrorText);this._addCommentTextArea=$("<textarea>").prop("rows",1).on("input paste",function(){a.validateTextArea(a._addCommentTextArea,e,c)});this.renderAriaLabels(this._addCommentTextArea);this.makeTextAreaAutoResizable(this._addCommentTextArea);this.updatePlaceholder(this._addCommentTextArea);b=this.renderPostOrEditButtonPanel($("<div>"),
!0,e,function(){a.tryAddNewComment(e)});this._settings.HidePersonPictures||this._settings.UseModernSkin||c.append(d);c.append(this._addCommentTextArea,b,e);return c};c.prototype.renderPostOrEditButtonPanel=function(a,c,b,d){return a.addClass(this._cmm.settings.CssClasses.PostButtonPanel).toggle(!this._settings.HidePostButtonWhileEmpty).append($("<input />").prop("type","submit").addClass(this._cmm.settings.CssClasses.PostButton).val(c?this._cmm.settings.Resources.PostCommentButtonText:this._cmm.settings.Resources.EditCommentButtonText).click(function(a){d();
a.preventDefault()}))};c.prototype.tryAddNewComment=function(a){a.is(":visible")||(a=this._addCommentTextArea.val(),0<a.trim().length&&(this.addNewComment(a),this._addCommentTextArea.val("").trigger("change"),this._settings.HidePostButtonWhileEmpty&&this.getPostButtonPanelForTextArea(this._addCommentTextArea).hide()))};c.prototype.validateTextArea=function(a,c,d){var f=a.val().length;f>this._cmm.settings.CommentMaxLength?(c.text(b.CommonFunctions.formatString(this._cmm.settings.Resources.TextTooLongError,
this._cmm.settings.CommentMaxLength,f)),c.show(),d.addClass(this._cmm.settings.CssClasses.ErrorArea)):(this._settings.HidePostButtonWhileEmpty&&this.getPostButtonPanelForTextArea(a).toggle(0<f),d.removeClass(this._cmm.settings.CssClasses.ErrorArea),c.hide())};c.prototype.getPostButtonPanelForTextArea=function(a){return a.next("."+this._cmm.settings.CssClasses.PostButtonPanel.replace(" ","."))};c.prototype.focusInputArea=function(){this._addCommentTextArea&&this._addCommentTextArea.focus()};c.prototype.updateLoadMoreLink=
function(a,c){if(0<c){var d=a._settings.ShowPageInfoLabel;if(!a._settings.PageSize||0>=a._settings.PageSize||(a._wasDataSourceFetchedAtLeastOnce||0===a._settings.NumberOfPreviouslyReadItemsToDisplay?a._settings.PageSize:Math.min(a._settings.NumberOfPreviouslyReadItemsToDisplay,a._settings.PageSize))>=c){var f=1===c?a._cmm.settings.Resources.ShowOneMoreComment:b.CommonFunctions.formatString(a._cmm.settings.Resources.ShowXMoreComments,c);d=!1}else f=a._cmm.settings.Resources.ShowMoreComments;a._loadMoreLink.text(f);
d?(f=this.getCommentsCount(),a._pageInfoLabel.text(b.CommonFunctions.formatString(a._cmm.settings.Resources.ViewingXofYCommentsFormat,f,c+f))):a._pageInfoLabel.text("");a._pageInfoLabel.toggle(d);a._loadMoreLinkContainer.show()}};c.prototype.addNewComment=function(a){this._onAddCommentFunction&&(this._sending?alert(this._cmm.settings.Resources.TooManyRequestError):(this._sending=!0,this._onAddCommentFunction(this,this._userData,a,this._newestCommentId,this.addNewCommentSuccess,this.addNewCommentFault)))};
c.prototype.addNewCommentSuccess=function(a,c){a._sending=!1;c&&(a.fillCommentList(c.Items,!0),c=a.getCommentPnlById(a._list,a._newestCommentId),0<c.length&&c.get(0).scrollIntoView());a.afterAddingCommentFunction&&a.afterAddingCommentFunction({commentModule:a,userData:a._userData})};c.prototype.addNewCommentFault=function(a,c){a._sending=!1;alert(a._cmm.settings.Resources.AddCommentError)};c.prototype.editCommentSuccess=function(a,c){a._sending=!1;c&&a.renderComment(c,!1,!0)};c.prototype.editCommentFault=
function(a,c,b){a._sending=!1;alert(a._cmm.settings.Resources.EditCommentError);c&&(c=a.getCommentPnlById(a._list,c))&&(a=c.find("."+a._cmm.settings.CssClasses.CommentText),a.html(a.data("originalText")),a=c.find("textarea"),a.val(a.data("originalText")))};c.prototype.deleteComment=function(a,c){var d=this,f=function(){d._onDeleteCommentFunction&&(d._sending?alert(d._cmm.settings.Resources.TooManyRequestError):(d._sending=!0,d._onDeleteCommentFunction(d,d._userData,a,d.deleteCommentSuccess,d.deleteCommentFault),
c.hide()))};this._onDeleteConfirmationFunction?this._onDeleteConfirmationFunction(this,this._userData,a,this._cmm.settings.Resources.DeleteConfirmation,f):b.CommonFunctions.jAjaxConfirm(this._cmm.settings.Resources.DeleteConfirmation,"",this._cmm.settings.Resources.DeleteComment,this._cmm.settings.Resources.Cancel,function(a){a&&f()})};c.prototype.deleteCommentSuccess=function(a,c,b){a._sending=!1;c&&(c=a.getCommentPnlById(a._list,c))&&(c.remove(),a._list.toggle(!a._list.is(":empty")),a.setVisibility())};
c.prototype.deleteCommentFault=function(a,c,b){a._sending=!1;alert(a._cmm.settings.Resources.DeleteCommentError);c&&(a=a.getCommentPnlById(a._list,c))&&a.show()};c.prototype.loadOldCommentsSuccess=function(a,c){c&&(a.fillCommentList(c.Items,!1),a._loadMoreLinkContainer.hide(),a.updateLoadMoreLink(a,c.VirtualCount-c.Items.length),a.setVisibility())};c.prototype.loadOldCommentsFault=function(a,c){a._sending=!1};c.prototype.makeTextAreaAutoResizable=function(a){setTimeout(function(){a.autogrow()},0)};
c.prototype.updatePlaceholder=function(a){var c=this;setTimeout(function(){a.prop("placeholder",c.getPostCommentTextAreaWatermark())},0)};c.prototype.renderAriaLabels=function(a){var c=this._settings.DomElementClientId+"_DescribedLabel",b=this._elem.find("#"+c);0<b.length?b.text(this.getPostCommentTextAreaWatermark()):(b=$("<span>").prop("id",c).addClass(this._cmm.settings.CssClasses.Hidden).text(this.getPostCommentTextAreaWatermark()),this._elem.append(b));a.attr("aria-label",this.getPostCommentTextAreaAriaLabel()).attr("aria-describedby",
c)};c.prototype.getPostCommentTextAreaWatermark=function(){return this._settings.CustomPostCommentTextAreaWatermark&&"string"===typeof this._settings.CustomPostCommentTextAreaWatermark&&0<this._settings.CustomPostCommentTextAreaWatermark.length?this._settings.CustomPostCommentTextAreaWatermark:this._cmm.settings.Resources.PostCommentTextAreaWatermark};c.prototype.getPostCommentTextAreaAriaLabel=function(){return this._settings.CustomPostCommentTextAreaAriaLabel&&"string"===typeof this._settings.CustomPostCommentTextAreaAriaLabel&&
0<this._settings.CustomPostCommentTextAreaAriaLabel.length?this._settings.CustomPostCommentTextAreaAriaLabel:this._cmm.settings.Resources.PostCommentTextAreaAriaLabel};c.prototype.stringToDate=function(a){return new Date(parseInt(this._stringToDateRegex.exec(a)[0]))};c.prototype.encodeText=function(a){return b.CommonFunctions.replaceLineBreaksWithBrTags(b.CommonFunctions.htmlEncode(a))};c.prototype.getCommentPnlById=function(a,c){var b=null;a.children(":data(commentId)").each(function(a,d){a=$(d);
if(a.data("commentId")===c)return b=a,!1});return b};return c}(b.DomElementClass);b.CommentModule=e})(CCL||(CCL={}));jQuery.fn.extend({getCommentModuleObject:function(){return this.data("CommentModule")}});
(function(b){var e=function(){function d(){this.managedContainers=new Map;this.temporaryUnmanagedMenus=new Map}d.getInstance=function(){void 0===d.instance&&(d.instance=new d);return d.instance};d.prototype.registerContainer=function(c,a){this.managedContainers.has(c)||(a=new b.DropDownMenuManagedContainer(a),this.managedContainers.set(c,a),this.putUnmanagedMenusToContainer(c,a))};d.prototype.containerAddOrReplaceInstance=function(c,a){this.managedContainers.has(c)?this.managedContainers.get(c).addOrReplaceInstance(a):
this.addInstanceToTemporaryUnmanagedMenus(c,a)};d.prototype.addInstanceToTemporaryUnmanagedMenus=function(c,a){this.temporaryUnmanagedMenus.has(c)||this.temporaryUnmanagedMenus.set(c,[]);this.temporaryUnmanagedMenus.get(c).push(a)};d.prototype.putUnmanagedMenusToContainer=function(c,a){this.temporaryUnmanagedMenus.has(c)&&(this.temporaryUnmanagedMenus.get(c).forEach(function(c){return a.addOrReplaceInstance(c)}),this.temporaryUnmanagedMenus.delete(c))};return d}();b.DropDownMenuManager=e})(CCL||(CCL=
{}));
(function(b){var e=function(){function d(c){var a=this;this.dropDownMenuList=[];this.settings=c;this.$window=$(window);$(document).on((this.settings.IsIos?"touchend":"click")+" "+b.CommonTriggers.clickInInnerFrame,function(c){c=$(c.target);var b=c.closest("["+a.settings.TargetLinkDataAttributeName+"]");if(0<b.length){var d=window[b.attr(a.settings.TargetLinkDataAttributeName)];d.toggleManagedMenu();a.startTrackingResize(d);a.dropDownMenuList.forEach(function(c){c!==d&&(c.hideMenu(),a.stopTrackingResize(c))})}else{c=c.closest("[id][role='menu']");
if(0<c.length&&(c=window[c.attr("id")],0<=a.dropDownMenuList.indexOf(c)))return;a.dropDownMenuList.forEach(function(a){return a.hideMenu()})}})}d.prototype.addOrReplaceInstance=function(c){var a=this.dropDownMenuList.filter(function(a){return a.name!==c.name});a.push(c);this.dropDownMenuList=a};d.prototype.startTrackingResize=function(c){var a=this;if(void 0===c.onResizeHandler){var b=function(){a.stopTrackingResize(c);c.hideMenu()};this.$window.resize(b);c.onResizeHandler=b}};d.prototype.stopTrackingResize=
function(c){void 0!==c.onResizeHandler&&(this.$window.off("resize",c.onResizeHandler),c.onResizeHandler=void 0)};return d}();b.DropDownMenuManagedContainer=e})(CCL||(CCL={}));
(function(b){var e=function(d){function c(a,c){d.call(this,a,c)}__extends(c,d);c.prototype.Init=function(){var a=this;this._scope=this._settings.Scope;this._clientId=this._settings.ClientId;this._applicationKey=this._settings.ApplicationKey;this._multiselectAllowed=this._settings.MultiselectAllowed;this._allowedFileTypeExtensions=this._settings.AllowedFileTypeExtensions;this._interFrameMessageName=this._settings.InterFrameMessageName;this._downloadUrlTemplate="https://www.googleapis.com/drive/v2/files/{fileid}?key={appkey}";
this.googleSheetMimeType="application/vnd.google-apps.spreadsheet";this._language=this._settings.Language;this._settings.ReadOnly||(this._chooseButton=this._loader=this._elem.children("."+this._settings.LoaderCssClass),$(window).load(function(){return a.initializeDependencies()}));this.UpdateFileList(this.GetFiles())};c.prototype.initializeDependencies=function(){var a=this;this._settings.UseProxyIframe&&$("."+this._settings.PickerControlCssClass).attr("src",this._settings.ProxyIframeSrc);asyncDependenciesResolver.loadScriptAsync({url:a._settings.ApiScriptUrl,
timeoutInMilliseconds:b.PickerDependencyLoadTimeoutInMs}).pipe(function(){return asyncDependenciesResolver.loadScriptAsync({url:a._settings.ClientScriptUrl,timeoutInMilliseconds:b.PickerDependencyLoadTimeoutInMs})}).always(function(){a._loader.remove()}).done(function(){a._chooseButton=$("."+a._settings.PickerControlCssClass);"none"!==a._loader.css("display")&&a._chooseButton.show();a._settings.UseProxyIframe?a.listenToProxyPickerFileSelected():a.displayRegularPickerOnButtonClick()}).fail(function(){a._settings.ReadOnly=
!0;a._chooseButton=$();a.Trigger(b.PickerEvent.LoadingDependencyFailed)})};c.prototype.listenToProxyPickerFileSelected=function(){var a=this;$(document).on(this._settings.ProxyUploadFilesSelectedEventName,function(c,b){c=b.files;c.forEach(function(a){a.fileUrl=a.url;a.isNew=!0});a._selectedFiles=c;a.UpdateFileList(a._selectedFiles);a.ValidateSelectedFiles(a._selectedFiles,a._allowedFileTypeExtensions);a.StartUploadFiles(a._selectedFiles)})};c.prototype.displayRegularPickerOnButtonClick=function(){var a=
this;this._chooseButton.on("click",function(c){gapi.auth.getToken()?a.showPicker():a.doAuth(!1,function(c){a.showPicker()}.bind(a))});this._chooseButton.on("keydown",function(c){if(13===c.which||32===c.which)c.preventDefault(),a._chooseButton.click()});b.CommonFunctions.attachPostMessageEventListener($(window),this._interFrameMessageName,function(c,b){window!=b||c.origin?(a._origin=c.origin,a._chooseButton.prop("disabled",!1)):a._origin=window.location.protocol+"//"+window.location.host}.bind(this));
gapi.load("picker",{callback:function(){c.prototype.pickerApiLoad.call(this)}.bind(this)})};c.prototype.pickerApiLoad=function(){this.doAuth(!0,function(){b.CommonFunctions.makePostMessageCall(window.itslTop||window.top,{messageName:this._interFrameMessageName.toString()})}.bind(this))};c.prototype.doAuth=function(a,c){gapi.auth.authorize({client_id:this._clientId,scope:this._scope,immediate:a},c)};c.prototype.showPicker=function(){var a=gapi.auth.getToken().access_token;a=(new google.picker.PickerBuilder).addViewGroup((new google.picker.ViewGroup(this.preparePickerView(google.picker.ViewId.DOCS))).addView(this.preparePickerView(google.picker.ViewId.DOCS_IMAGES)).addView(this.preparePickerView(google.picker.ViewId.DOCS_VIDEOS)).addView(this.preparePickerView(google.picker.ViewId.DOCUMENTS)).addView(this.preparePickerView(google.picker.ViewId.DRAWINGS)).addView(this.preparePickerView(google.picker.ViewId.FOLDERS)).addView(this.preparePickerView(google.picker.ViewId.PDFS)).addView(this.preparePickerView(google.picker.ViewId.PHOTOS)).addView(this.preparePickerView(google.picker.ViewId.PRESENTATIONS)).addView(this.preparePickerView(google.picker.ViewId.SPREADSHEETS))).setOAuthToken(a).setDeveloperKey(this._applicationKey).setOrigin(this._origin).setCallback(function(a){this.pickerCallback(a)}.bind(this)).setLocale(this._language);
this._multiselectAllowed&&a.enableFeature(google.picker.Feature.MULTISELECT_ENABLED);a.build().setVisible(!0)};c.prototype.preparePickerView=function(a){a=new google.picker.DocsView(a);a.setIncludeFolders(!0);a.setParent("root");return a};c.prototype.pickerCallback=function(a){var c=this;if(a[google.picker.Response.ACTION]==google.picker.Action.PICKED){this._selectedFiles=this.ConvertSelectedFiles(a[google.picker.Response.DOCUMENTS]);for(a=this._selectedFiles.length-1;0<=a;a--)this._selectedFiles[a].name=
this.ProcessFileName(this._selectedFiles[a].name);this.UpdateFileList(this._selectedFiles);var b=[];if(0<this._selectedFiles.length){var d={};d.Authorization="Bearer "+gapi.auth.getToken().access_token;this._selectedFiles.forEach(function(a){var f=c.ComposeDownloadUrl(a.fileId);$.support.cors||(f=c._settings.GoogleDriveProxy+encodeURIComponent(f));b.push($.ajax({url:f,type:"GET",data:"",headers:d,success:function(b){var d=!1;if(b.downloadUrl)a.fileUrl=b.downloadUrl+"&"+c._settings.TokenPlaceholderInQuerystring+
"="+gapi.auth.getToken().access_token;else if(b.exportLinks&&b.exportLinks[Object.keys(b.exportLinks)[0]]){d=a.type===c.googleSheetMimeType;a.type=b.exportLinks["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":b.exportLinks["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":b.exportLinks["image/png"]?"image/png":b.exportLinks["application/vnd.openxmlformats-officedocument.presentationml.presentation"]?
"application/vnd.openxmlformats-officedocument.presentationml.presentation":b.exportLinks["application/pdf"]?"application/pdf":Object.keys(b.exportLinks)[0];a.fileUrl=b.exportLinks[a.type]+"&"+c._settings.TokenPlaceholderInQuerystring+"="+gapi.auth.getToken().access_token;var f=c.getParameterValue(a.fileUrl,"exportFormat");if(f){var e=a.name;f="."+f;a.name.substr(-f.length)!==f&&(a.name+=f);c.UpdateFileName(a,e)}}else a.error=c._settings.UnsupportedDownloadTypeErrorText;a.thumbnailUrl=b.thumbnailLink;
c.checkFileSize(a,d)},error:function(){a.error=c._settings.UploadErrorText}}))});$.when.apply($,b).done(function(){c.ValidateSelectedFiles(c._selectedFiles,c._allowedFileTypeExtensions);c.StartUploadFiles(c._selectedFiles)})}}};c.prototype.checkFileSize=function(a,c){0==a.size&&(a.size=this.getFileSize(a,c),this.UpdateFileSize(a))};c.prototype.getFileSize=function(a,c){var b=0;c=this.getFileUrl(a.fileUrl,c);try{b=this.getContentLength(c)}catch(h){a.error=this._settings.UploadErrorText}return b};c.prototype.getFileUrl=
function(a,c){return c?this._settings.GoogleDriveProxy+encodeURIComponent(a):a};c.prototype.getContentLength=function(a){var c=0,d=new XMLHttpRequest;d.open("HEAD",a,!1);d.send();d.status==b.CommonConstants.httpStatusCodes.ok&&(c=parseInt(d.getResponseHeader("Content-Length")));return c};c.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoDownloadFromParam+"="+a.fileUrl+"&"+this._settings.FileRepoFileSizeParam+"="+a.size};c.prototype.AddAdditionalHeadersToDownloadFile=function(a,
c){a[this._settings.FileRepoHeaderGoogleDriveFileSize]=c.size};c.prototype.ConvertSelectedFiles=function(a){return a?$.map(a,function(a,c){return{fileId:a[google.picker.Document.ID],name:a[google.picker.Document.NAME],type:a[google.picker.Document.MIME_TYPE],icon:a[google.picker.Document.ICON_URL],size:a.sizeBytes}}):[]};c.prototype.ComposeDownloadUrl=function(a){return this._downloadUrlTemplate.replace("{fileid}",a).replace("{appkey}",this._applicationKey)};c.prototype.ClearResults=function(a){var c=
!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);a.hasClass("clearme")||0===a.find(".error").length?a.remove():(c=!1,a.addClass("clearme"))});c&&this._chooseButton.show();d.prototype.ClearResults.call(this,a);this.Trigger(b.PickerEvent.ResultsChanged,{results:[]})};c.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};c.prototype.HandleStopped=function(a){d.prototype.HandleStopped.call(this,a);this._settings.UseProxyIframe&&
$(document).trigger(this._settings.ProxyUploadFinishedEventName)};return c}(b.FilePickerBase);b.GoogleDrivePicker=e})(CCL||(CCL={}));
(function(b){b.ControlTabsEvent={Initialized:"ControlTabsInitialized",TabIndexChanged:"ControlTabsSelectedIndexChanged"};var e=function(d){function c(a,c){d.call(this,a);this._settings=c;this.InitControls();this.RunControlInitializationCallback()}__extends(c,d);c.prototype.SetCurrentTab=function(a){this.GetCurrentTab()!==a&&$(this._tabItemLinks[a]).click()};c.prototype.GetCurrentTab=function(){return parseInt(this._selectedTabIndexHolder.val())};c.prototype.GetTabsCount=function(){return this._tabItemLinks.length};
c.prototype.SetTabEnabled=function(a,c){(a=a&&this.IsTabAvailable(c))?($(this._tabItemLinks[c]).removeClass("disabled"),$(this._mobileSelect.find("> option")[c]).prop("disabled",!1)):($(this._tabItemLinks[c]).addClass("disabled"),$(this._mobileSelect.find("> option")[c]).prop("disabled",!0))};c.prototype.SetTabNotAvailable=function(a){$(this._tabItemLinks[a]).addClass("tabIsNotAvailable");this.SetTabEnabled(!1,a)};c.prototype.UpdateTabImageUrl=function(a,c){$(this._tabItemLinks[a]).find("img").attr("src",
c)};c.prototype.IsTabAvailable=function(a){return!$(this._tabItemLinks[a]).hasClass("tabIsNotAvailable")};c.prototype.SetTabToolTip=function(a,c){$(this._tabs[a]).attr("title",c)};c.prototype.InitControls=function(){var a=this;this._tabsList=this._elem.find("ul."+this._settings.TabsCssClass);this._mobileSelect=this._elem.find("select."+this._settings.TabsCssClass);this._selectedTabIndexHolder=this._elem.find("#"+this._settings.TabIndexHolderClientId);this._tabs=this._elem.find("ul > li > h2");this._tabItemLinks=
this._elem.find("ul > li > h2 > a");this._tabItemLinks.each(function(c,b){a.InitTabItem(c,b)});$(this._tabItemLinks[this._settings.CurrentlySelectedTabIndex]).click();this.Trigger(b.ControlTabsEvent.Initialized)};c.prototype.RunControlInitializationCallback=function(){var a=b.Callbacks.GetFunctionByName(this._settings.OnControlInitialization,null);void 0!==a&&null!==a&&a(this)};c.prototype.InitTabItem=function(a,c){var b=this;a=$(c);$(a.data("contentid")).addClass(this._settings.TabContentCssClass).addClass(this._settings.ClearLeftCssClass).hide();
a.on("click",function(a){b.OnTabChanged(a)})};c.prototype.OnTabChanged=function(a){a=$(a.currentTarget);if(a.hasClass("disabled"))return!1;var c=a.closest("li"),d=$(a.data("contentid"));a=c.data("tabitemindex");this._tabsList.find("> li").removeClass(this._settings.ActiveTabCssClass);c.addClass(this._settings.ActiveTabCssClass);this._scrollPosition=$(window).scrollTop();this._tabItemLinks.each(function(a,c){$($(c).data("contentid")).hide()});d.show();$(window).scrollTop(this._scrollPosition);this._mobileSelect.prop("selectedIndex",
a);c=this._selectedTabIndexHolder.val();this._selectedTabIndexHolder.val(a);d=this._selectedTabIndexHolder.val();this.Trigger(b.ControlTabsEvent.TabIndexChanged,{selectedTab:a,previousTabString:c,currentTabString:d});return!1};return c}(b.DomElementClass);b.ControlTabs=e})(CCL||(CCL={}));
(function(b){var e=function(d){function c(a,c){d.call(this,a,c)}__extends(c,d);c.prototype.Init=function(){var a=this;this._settings.ReadOnly||(this._chooseButton=this._loader=this._elem.children("."+this._settings.LoaderCssClass),$(window).load(function(){return a.initializeWithScripts()}));this.UpdateFileList(this.GetFiles())};c.prototype.initializeWithScripts=function(){var a=this;asyncDependenciesResolver.loadScriptAsync({url:a._settings.ScriptUrl,attributes:{"data-app-key":a._settings.ApplicationKey,
id:"dropboxjs"},timeoutInMilliseconds:b.PickerDependencyLoadTimeoutInMs}).always(function(){a._loader.remove()}).done(function(){a._chooseButton=$(Dropbox.createChooseButton({success:function(c){if(!(a._elem.hasClass("disabled")||0<a._resultsTable.find("tr").length)){c=a.ConvertSelectedFiles(c);for(var b=c.length-1;0<=b;b--)c[b].name=a.ProcessFileName(c[b].name);a.ValidateSelectedFiles(c,null);a.UpdateFileList(c);0<c.length&&a.StartUploadFiles(c)}},linkType:"direct",multiselect:a._settings.MultiselectAllowed,
extensions:a._settings.AllowedFileTypeExtensions}));a._chooseButton.attr("tabindex","0");"none"===a._loader.css("display")&&a._chooseButton.hide();a._elem.append(a._chooseButton)}).fail(function(){a._settings.ReadOnly=!0;a._chooseButton=$();a.Trigger(b.PickerEvent.LoadingDependencyFailed)})};c.prototype.ConvertSelectedFiles=function(a){return a?$.map(a,function(a,c){return{name:a.name,size:a.bytes,thumbnailUrl:a.thumbnailLink,fileUrl:a.link,icon:a.icon}}):[]};c.prototype.ClearResults=function(a){var c=
!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);a.hasClass("clearme")||0===a.find(".error").length?a.remove():(c=!1,a.addClass("clearme"))});c&&this._chooseButton.show();d.prototype.ClearResults.call(this,a);this.Trigger(b.PickerEvent.ResultsChanged,{results:[]})};c.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};c.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoDownloadFromParam+"="+encodeURIComponent(a.fileUrl)};
return c}(b.FilePickerBase);b.DropboxPicker=e})(CCL||(CCL={}));
(function(b){var e=function(d){function c(a,c){d.call(this,a,c)}__extends(c,d);c.ConfirmReplaceFile=function(){return confirm(c.confirmReplaceMessage)};c.prototype.Init=function(){var a=this;this._chooseButton=$(".ccl-fileuploader-button").children("input");this.fileUploaderContainer=$(".ccl-fileuploader-container");c.confirmReplaceMessage=this._settings.ConfirmReplaceMessageText;this._chooseButton.focusin(function(c){a._chooseButton.parent().toggleClass("ccl-button-color-green-highlight")}).focusout(function(c){a._chooseButton.parent().toggleClass("ccl-button-color-green-highlight")});this._elem.on("fileuploadstarted",
function(){a.ToggleOkButton(!0);a.Trigger(b.PickerEvent.Started)}).on("fileuploadadd",function(c){for(var d=[],f=1;f<arguments.length;f++)d[f-1]=arguments[f];a.Trigger(b.PickerEvent.Added,d[0])}).on("fileuploadstopped",function(c){for(var d=[],f=1;f<arguments.length;f++)d[f-1]=arguments[f];d[0].results=a.fileUploaderContainer.fileupload("getUploadedFiles");a.Trigger(b.PickerEvent.Stopped,d[0]);a.ToggleOkButton(!1)}).on("fileuploadresultschanged",function(c){for(var d=[],f=1;f<arguments.length;f++)d[f-
1]=arguments[f];a.Trigger(b.PickerEvent.ResultsChanged,d[0])}).on("fileuploadsubmit",function(c){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];b=b[0];b.url=a.GetFileRepoUrlForFileName(a.ProcessFileName(b.files[0].name));b.xhrFields={withCredentials:!0}}).on("fileuploaddestroy",function(c){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];b=b[0];b.url&&(b.url+="&"+a._settings.MethodOverrideQueryStringParam+"=delete");b.type="DELETE";b.xhrFields={withCredentials:!0}}).on("fileuploaddone",
function(c){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];(b=b[0])&&b.result&&b.result.fileId&&b.result.signature&&(d={deleteUrl:a.GetFileRepoUrl(b.result.signature),fileUrl:a.GetFileRepoUrl(b.result.signature),id:b.result.fileId,signedId:b.result.signature,name:b.result.fileName,size:b.result.fileSize,type:b.result.mimeType,thumbnailUrl:a._settings.DefaultThumbnailUrl,isNew:!0},b.result.files=[d])})};c.prototype.ClearResults=function(){this.fileUploaderContainer.fileupload("clearResults")};
c.prototype.AllowHide=function(){return this.fileUploaderContainer.fileupload("allowHide")};return c}(b.FilePickerBase);b.FilePicker=e})(CCL||(CCL={}));var tmpl,FileRepoUploaderInstance;
(function(b){b.FileRepoUploaderEvent={PickerChanged:"FileRepoUploaderPickerChanged",ResultsChanged:"FileRepoUploaderResultsChanged"};var e=function(d){function c(a,c){var f=this;d.call(this,a);this._pickers=[];this._inlineModeFileList=[];this._inlineModeFileKeys={};this._removedFiles=[];this._changedFiles={};this._settings=c;this._currentTabIndex=-1;FileRepoUploaderInstance=this;$("#"+this._settings.ControlTabsClientId).on(b.ControlTabsEvent.TabIndexChanged,function(a){for(var c=[],d=1;d<arguments.length;d++)c[d-
1]=arguments[d];f._currentTabIndex!==c[0].selectedTab&&(f._currentTabIndex=c[0].selectedTab,(c=f._pickers[f._currentTabIndex])&&f.Trigger(b.FileRepoUploaderEvent.PickerChanged,{selectedPicker:c}))});this._elem.on(b.PickerEvent.Initialized,function(a){a=b.DomElementClass.GetInstanceForElement(a.target.id);f._pickers.push(a);1==f._pickers.length&&f._settings.IsEmpty&&f.Trigger(b.FileRepoUploaderEvent.PickerChanged,{selectedPicker:f._pickers[0]})});this._elem.on(b.PickerEvent.ResultsChanged,function(a){for(var c=
[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];d=b.DomElementClass.GetInstanceForElement(a.target.id);c=c[0].results;var e=f._settings.ReadOnly?f.GetControlTabs().GetCurrentTab():f._pickers.indexOf(d);f.GetControlTabs().SetCurrentTab(e);f.HandleResultsChanges(c,e);f.Trigger(b.FileRepoUploaderEvent.ResultsChanged,{results:c,picker:d})});this._elem.on(b.PickerEvent.Started,function(a){for(var c=1;c<arguments.length;c++);c=b.DomElementClass.GetInstanceForElement(a.target.id);c=f._settings.ReadOnly?
f.GetControlTabs().GetCurrentTab():f._pickers.indexOf(c);f.HandleResultsChanges([{}],c)});if(c.InlineMode)this._elem.on(b.PickerEvent.Added,function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];(c.UniqueFileNamesOnly||f.CanCheckFileNames())&&b[0].files.forEach(function(a){c.UniqueFileNamesOnly&&f._filesContainer.find("td.name").toArray().forEach(function(b){if(b.innerText===a.name)if(confirm(c.FileAlreadyExistsDialogText.replace("{0}",a.name))){b=$(b).closest("."+c.FileListRowCssClass);
var d=b.find("a."+c.RemoveActionCssClass);d=$(d).data("filekey");d=f.GetFileByKey(d);f.RemoveFile(d,b)}else a.error=c.FileAlreadyExistsErrorMessage});!a.error&&f.CanCheckFileNames()&&(a.error=f.GetFileNameValidation(a.name))})}),this._elem.on(b.PickerEvent.Stopped,function(a){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];f.UpdateFileList(c[0].results,!0,null);f.UpdateFileListState(f._inlineModeFileList);d=c[0].results&&0<c[0].results.length&&f._expandableContainer.getIsExpandedState();
var e=b.DomElementClass.GetInstanceForElement(a.target.id);e.ClearResults(c[0].results);d&&e.AllowHide()&&f._expandableContainer.toggle()}),this._elem.on("hybrideditoritemtextupdated",function(a){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];e=$(a.target).closest("."+c.FileListRowCssClass);var g=e.find("a."+c.RemoveActionCssClass);g=$(g).data("filekey");g=f.GetFileByKey(g);d=d[0].value;d||(d="(empty)",e.find("."+c.FileNameContainerCssClass).text(d));g.rawFilename=d;g.name=g.rawFilename;
g.extension&&(g.name+=g.extension);f._changedFiles[g.id]=g;f._changedFilesStateHidden.val(JSON.stringify(f._changedFiles));f.UpdateFileListState(f._inlineModeFileList);d=f._pickers[f.GetControlTabs().GetCurrentTab()];f.Trigger(b.FileRepoUploaderEvent.ResultsChanged,{results:f._inlineModeFileList,picker:d})}),this._expandableContainer=new ExpandableContainer(this._elem,{expander:$("#"+this._settings.ExpandableHeaderClientId),target:$("#"+this._settings.ExpandableContentClientId)}),this._filesContainer=
$("#"+c.FileListContainerId),this._filesContainer.on("click","."+this._settings.RemoveActionCssClass,function(a){var c=$(a.target).data("filekey");c=f.GetFileByKey(c);a=$(a.target).closest("."+f._settings.FileListRowCssClass);f.RemoveFile(c,a)}),this._filesContainer.on("click","."+this._settings.ViewActionCssClass,function(a){a=$(a.target).data("filekey");a=f.GetFileByKey(a);f.OpenFile(a,!0)}),this._filesContainer.on("click","."+this._settings.EditActionCssClass,function(a){a=$(a.target).data("filekey");
a=f.GetFileByKey(a);f.OpenFile(a,!1)}),this._filesContainer.on("click","."+this._settings.DownloadActionCssClass,function(a){a=$(a.target).data("filekey");a=f.GetFileByKey(a);f.DownloadFile(a)}),$("#"+this._settings.ViewDialogId).on("click",".ccl-button-ok",function(a){f._openedForEditing&&(a=$(".ccl-cssmodal-modal-iframe").attr("src"),$(".ccl-cssmodal-modal-iframe").attr("src",a))}),this._templatesContainer=document.createElement(this._filesContainer.prop("nodeName")),tmpl&&(this._fileListItemTemplate=
tmpl(c.FileListItemTemplateId)),this._fileListStateHidden=$("#"+this._settings.FileListHiddenStateClientId),a=this.ReadFileList(),0<a.length&&this.UpdateFileList(a,!1,null),this._changedFilesStateHidden=$("#"+this._settings.ChangedFilesHiddenStateClientId),this._removedFilesStateHidden=$("#"+this._settings.RemovedFilesHiddenStateClientId);else this._elem.on(b.PickerEvent.Added,function(a){for(var c=[],b=1;b<arguments.length;b++)c[b-1]=arguments[b];c=c[0];f.CanCheckFileNames()&&c.files.forEach(function(a){a.error||
(a.error=f.GetFileNameValidation(a.name))})})}__extends(c,d);c.prototype.CanCheckIllegalCharacters=function(){return this._settings.IllegalCharacters&&0<this._settings.IllegalCharacters.length?!0:!1};c.prototype.CanCheckIllegalFileNames=function(){return this._settings.IllegalFileNames&&0<this._settings.IllegalFileNames.length?!0:!1};c.prototype.CanCheckFileNames=function(){return this.CanCheckIllegalCharacters||this.CanCheckIllegalFileNames};c.prototype.GetFileNameValidation=function(a){var c=[];
if(this.CanCheckIllegalCharacters())for(var b=this._settings.IllegalCharacters.length,d=0;d<b;d++)this._settings.IllegalCharacters[d]&&-1<a.indexOf(this._settings.IllegalCharacters[d])&&c.push(this._settings.IllegalCharacters[d]);if(this.CanCheckIllegalFileNames())for(a=a.split(".")[0],b=this._settings.IllegalFileNames.length,d=0;d<b;d++)this._settings.IllegalFileNames[d]&&a.toUpperCase()===this._settings.IllegalFileNames[d].toUpperCase()&&c.push(this._settings.IllegalFileNames[d]);return 0<c.length?
(b=c.filter(function(a,b){return c.indexOf(a)==b}),this._settings.FileNameInvalidErrorMessage.replace("{0}",b.join(" "))):null};c.prototype.AddExternalFile=function(a){var c=[];c.push(JSON.parse(JSON.stringify(a)));this.UpdateFileList(c,!0,null);this.UpdateFileListState(this._inlineModeFileList)};c.prototype.ReplaceExternalFile=function(a,c){var b=[];c=JSON.parse(JSON.stringify(c));b.push(c);c=this._filesContainer.find("[id$="+a+"]").closest("."+this._settings.FileListRowCssClass);this.UpdateFileList(b,
!0,c);this.UpdateFileListState(this._inlineModeFileList);a=this.GetFileByKey(a);this.RemoveFile(a,c)};c.prototype.GetUploadResults=function(){return this._fileListStateHidden&&this._fileListStateHidden.val()?this._fileListStateHidden.val():""};c.prototype.RemoveFile=function(a,c){a.deleteUrl?$.ajax({url:a.deleteUrl+"&"+this._settings.MethodOverrideQueryStringParam+"=delete",type:"DELETE",xhrFields:{withCredentials:!0}}):(this._removedFiles.push(a.id),this._removedFilesStateHidden.val(JSON.stringify(this._removedFiles)));
this.RemoveFileFromList(a,c)};c.prototype.RemoveFileFromList=function(a,c){c.remove();this._changedFiles[a.id]&&(delete this._changedFiles[a.id],this._changedFilesStateHidden.val(JSON.stringify(this._changedFiles)));this._inlineModeFileList.splice(this._inlineModeFileList.indexOf(a),1);this.UpdateFileListState(this._inlineModeFileList);a=this._pickers[this.GetControlTabs().GetCurrentTab()];this.Trigger(b.FileRepoUploaderEvent.ResultsChanged,{results:this._inlineModeFileList,picker:a})};c.prototype.OpenFile=
function(a,c){if(!c&&this.ShouldBeEditedUsingDirectEdit(a)){var b=this._settings.DirectEditUrl;b=b.replace("{fileName}",encodeURIComponent(a.name));b=b.replace("{fileId}",encodeURIComponent(a.id));window.open(b,"","height = 300, width = 500, toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes")}else{b=this._settings.ViewEditUrl;b=b.replace("{fileName}",encodeURIComponent(a.name));b=b.replace("{viewOnly}",c.toString());b=b.replace("{fileRepoId}",encodeURIComponent(a.signedId));
var d=a.modified?new Date(a.modified):new Date;this._openedForEditing=!c;b=b.replace("{uniqueId}",this.convertToTicks(d).toString());this.ShouldBeOpenedInPopup(a.type)?this.OpenInWindow(b):(d=c=0,this.isEmbeddedVideo(a.type)&&(c=400,d=300),this.OpenInModalDialog(c,d,a.name,b,!1))}};c.prototype.ShouldBeOpenedInPopup=function(a){return this.IsOwasFileType(a)||0<=this._settings.AdditionalMimeTypesOpenedInPopup.indexOf(a)};c.prototype.OpenInWindow=function(a){var c=window.open(a,"","width="+.8*screen.width+
", height="+.8*screen.height+",location = 0, directories = 0, toolbar = 0, scrollbars = 0, status = 0, menubars = 0, resizable = 1");this.CheckIfBrowserIsOldIE()&&this.AttachEventForOldIE(c,"onload",function(){$("head",c.document).append('<style type="text/css">html,body{height:100%}html{width:auto;margin-top:-8px;}</style>')})};c.prototype.CheckIfBrowserIsOldIE=function(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")?10>=parseInt(a.split("msie")[1])?!0:!1:!1};c.prototype.AttachEventForOldIE=
function(a,c,b){a.addEventListener?a.addEventListener(c,b,!1):a[c]=b};c.prototype.OpenInModalDialog=function(a,c,b,d,e){var f=this.GetDialog();f.setContentMinSize(a,c);f.setTitle(b);f.setAjaxUrl(d);f.openDialog(e)};c.prototype.IsOwasFileType=function(a){return 0<=this._settings.OWASMimeTypes.indexOf(a)};c.prototype.ShouldBeEditedUsingDirectEdit=function(a){return this._settings.UseDirectEdit&&!this.IsEditableOwasFile(a)};c.prototype.IsEditableOwasFile=function(a){return 0<=this._settings.OWASMimeTypes.indexOf(a.type)&&
0<=this._settings.EditableMimeTypes.indexOf(a.type)};c.prototype.convertToTicks=function(a){return 621355968E9+1E4*a.getTime()};c.prototype.DownloadFile=function(a){a=this._settings.DownloadRedirectUrl.replace(this._settings.FileRepoFileIdToken,encodeURIComponent(a.signedId));window.open(a)};c.prototype.IsViewSupported=function(a){return a?0<=this._settings.ViewMimeTypes.indexOf(a):!1};c.prototype.IsEditingAllowed=function(a){return a?0<=this._settings.EditableMimeTypes.indexOf(a)&&this._settings.IsFileEditingAllowed:
!1};c.prototype.isEmbeddedVideo=function(a){return a?0<=this._settings.EmbedVideoMimeTypes.indexOf(a):!1};c.prototype.GetDialog=function(){return window[this._settings.ViewDialogId]};c.prototype.HandleResultsChanges=function(a,c){var b=this.GetControlTabs(),d=b.GetTabsCount();a=a&&0<a.length;for(var f=0;f<d;f++){var e=b.IsTabAvailable(f);b.SetTabEnabled(a?f==c:e,f);b.SetTabToolTip(f,this.GetTooltipForTab(a?c:f,f))}};c.prototype.GetTooltipForTab=function(a,c){return this._settings.DisabledTabTextForPickers.filter(function(c){return c.PickerIndex===
a})[0].Tooltips.filter(function(a){return a.PickerIndex===c})[0].Tooltip};c.prototype.GetControlTabs=function(){this._controlTabsControl||(this._controlTabsControl=b.DomElementClass.GetInstanceForElement(this._settings.ControlTabsClientId));return this._controlTabsControl};c.prototype.ReadFileList=function(){return this._fileListStateHidden&&this._fileListStateHidden.val()?JSON.parse(this._fileListStateHidden.val()):JSON.parse("[]")};c.prototype.GetRemovedFileIds=function(){return this._removedFilesStateHidden&&
this._removedFilesStateHidden.val()?JSON.parse(this._removedFilesStateHidden.val()):JSON.parse("[]")};c.prototype.GetChangedFilesDictionary=function(){return this._changedFilesStateHidden&&this._changedFilesStateHidden.val()?JSON.parse(this._changedFilesStateHidden.val()):JSON.parse("{}")};c.prototype.UpdateFileListState=function(a){this._fileListStateHidden.val(JSON.stringify(a));this._fileListStateHidden.trigger("change")};c.prototype.UpdateFileList=function(a,c,b){var d=this,f=this;a.forEach(function(a){a.thumbnailUrl=
f.GetFileIcon(a.name);d._inlineModeFileList.push(a);d._inlineModeFileKeys[a.id]=a;var c=a.name.split(".");if(1<c.length){a.rawFilename=c[0];if(2<c.length)for(var b=1;b<=c.length-2;b++)a.rawFilename+="."+c[b];a.extension="."+c[c.length-1]}else a.rawFilename=a.name});a&&0<a.length&&(a=this.RenderTemplate(this._fileListItemTemplate,a,c),b&&0<b.length?b.after(a):a.appendTo(this._filesContainer),c&&DropDownMenu.initialize(),a.find("."+this._settings.ViewActionCssClass).filter(function(){var a=f.GetFileByKey($(this).data("filekey"));
return!f.IsViewSupported(a.type)}).closest("li").hide(),this._settings.UseDirectEdit||a.find("."+this._settings.EditActionCssClass).filter(function(){var a=f.GetFileByKey($(this).data("filekey"));return!f.IsEditingAllowed(a.type)}).closest("li").hide());var e=this;$(".ccl-hybrideditoritem").each(function(){e.fixSize($(this))})};c.prototype.fixSize=function(a){a.css("width","0px");setTimeout(function(){a.css("width","auto")},10)};c.prototype.RenderTemplate=function(a,c,b){if(!a)return $();a=a({files:c,
delayMenuInit:b});return a instanceof $?a:$(this._templatesContainer).html(a).children()};c.prototype.GetFileIcon=function(a){a=this.GetFileExtension(a);if(this._settings.FileTypeIcons)return this._settings.FileTypeIcons[a]||this._settings.DefaultFileIcon};c.prototype.GetFileExtension=function(a){a=a.split(".");return 1>=a.length?"":a.pop().toLowerCase()};c.prototype.GetFileByKey=function(a){return this._inlineModeFileKeys[a]};c.prototype.GetFilenameEditorItemSettings=function(){return{editModeEnabled:"inline",
inlineEditorOptions:{blockedCharacters:this._settings.IllegalCharacters,editFieldAutoWidth:!1,editFieldDisplayInline:!0,editFieldCssClass:this._settings.FileNameEditorCssClass,forceContainerSize:!0,maxLength:255}}};return c}(b.DomElementClass);b.FileRepoUploader=e})(CCL||(CCL={}));
(function(b){var e=function(){function d(c,a,b){void 0===b&&(b=null);this.form=c;this.warningMessage=a;this.options=b;this.textInputs=c.find("input[type=text], input[type=numeric],textarea");this.hybridEditors=c.find("div.ccl-hybrideditoritem > input[type=hidden]");this.checkboxesRadios=c.find("input[type=checkbox],input[type=radio]");this.selects=c.find("select");this.textInputs.each(function(a,c){a=$(c);a.data(d.initialValueDataKey,a.val())});this.hybridEditors.each(function(a,c){a=$(c);a.data(d.initialValueDataKey,
a.val())});this.checkboxesRadios.each(function(a,c){a=$(c);a.data(d.initialValueDataKey,a.is(":checked"))});this.selects.each(function(a,c){a=$(c);a.data(d.initialValueDataKey,a.find(":selected").val())});this.AttachHandler();c.submit($.proxy(this.DetachHandler,this));this.initOptions(a);d.instances.push(this)}d.prototype.initOptions=function(c){if(this.options){this.options.cancelButtonId&&$(document.getElementById(this.options.cancelButtonId)).click($.proxy(this.DetachHandler,this));this.options.$cancelButtons&&
this.options.$cancelButtons.length&&this.options.$cancelButtons.click($.proxy(this.DetachHandler,this));var a=this.options.whiteList;a&&a.enabled&&(this.dialogWhiteList=new b.DialogWhiteList,this.dialogWhiteList.clearStateCallback=a.clearStateCallback,this.dialogWhiteList.confirmationMessage=c)}};d.prototype.IsDirty=function(){return 1==this.form.data(d.dirtyFormDataKey)};d.prototype.SetDirty=function(c){var a=c?1:0;this.toggleWhiteListEnabled(c);this.form.data(d.dirtyFormDataKey,a);this.form.trigger("dirtyChanged",
a)};d.prototype.AttachHandler=function(){if(!this.isAttached){var c=$.proxy(this.onBeforeUnloadHandler,this);$(window).on(d.eventBeforeunload,c);this.isAttached=!0}};d.prototype.DetachHandler=function(){if(this.isAttached){var c=$.proxy(this.onBeforeUnloadHandler,this);$(window).off(d.eventBeforeunload,c);this.isAttached=!1}this.toggleWhiteListEnabled(!1)};d.manuallyRunBeforeUnloadHandler=function(){d.instances.forEach(function(c){c.onBeforeUnloadHandler()})};d.prototype.onBeforeUnloadHandler=function(){var c=
this.IsDirty();c||this.textInputs.each(function(a,b){a=$(b);if(a.is(":visible")&&a.val()!=a.data(d.initialValueDataKey))return c=!0,!1});c||this.hybridEditors.each(function(a,b){a=$(b);if(a.val()!=a.data(d.initialValueDataKey))return c=!0,!1});c||this.checkboxesRadios.each(function(a,b){a=$(b);if(a.is(":visible")&&a.is(":checked")!=a.data(d.initialValueDataKey))return c=!0,!1});c||this.selects.each(function(a,b){a=$(b);if(a.is(":visible")&&a.find(":selected").val()!=a.data(d.initialValueDataKey))return c=
!0,!1});if(!c&&window.CKEDITOR&&CKEDITOR.instances)for(var a in CKEDITOR.instances)if(isTextEditorDirty(a)){c=!0;break}this.options&&this.options.callback&&(c=this.options.callback());this.SetDirty(c);if(c)return this.warningMessage};d.prototype.toggleWhiteListEnabled=function(c){this.dialogWhiteList&&(c?this.dialogWhiteList.enable():this.dialogWhiteList.disable())};d.instances=[];d.eventBeforeunload="beforeunload";d.initialValueDataKey="InitialValue";d.dirtyFormDataKey="IsDirty";return d}();b.FormCheckBeforeUnload=
e})(CCL||(CCL={}));
(function(b){var e=function(d){function c(a,c){var e=this;d.call(this,a,c);this._inputControl=$("#"+c.InputClientId);this._inputLabel=$("#"+c.LabelClientId);this._inputControl.on("keydown keyup change input propertychange",function(){e._inputControl.is(":visible")&&e.NotifyResultChanged()});this.determineVisibilityOfEmbedCheckbox(this.GetResults());this.Trigger(b.PickerEvent.Initialized);this.NotifyResultChanged()}__extends(c,d);c.prototype.GetResults=function(){return this._inputControl.val()||this._inputLabel.text()};
c.prototype.determineVisibilityOfEmbedCheckbox=function(a){a?this.isSecure?this.isUrlUnsecure(a)||8>=a.trim().length?$(".checkbox-embed-link-target").hide():$(".checkbox-embed-link-target").show():$(".checkbox-embed-link-target").show():$(".checkbox-embed-link-target").hide()};c.prototype.NotifyResultChanged=function(){var a=[],c=this.GetResults();this.determineVisibilityOfEmbedCheckbox(c);c&&a.push({fileUrl:c});this.Trigger(b.PickerEvent.ResultsChanged,{results:a})};c.prototype.isUrlUnsecure=function(a){a=
a.trim();var c=!0;8<a.length&&(a=this.parseUrl(a)[1],c=!a||"https:"!==a.toLowerCase());return c};c.prototype.parseUrl=function(a){return/^(?:(?:(?:([^:\/#\?]+:)?(?:(?:\/\/)((?:((?:[^:@\/#\?]+)(?::(?:[^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?::([0-9]+))?))?)?)?((?:\/?(?:[^\/\?#]+\/+)*)(?:[^\?#]*)))?(\?[^#]+)?)(#.*)?/.exec(a)};return c}(b.ItemPickerBase);b.LinkPicker=e})(CCL||(CCL={}));
(function(b){var e;(function(c){c[c.Horizontal=0]="Horizontal";c[c.Vertical=1]="Vertical"})(e||(e={}));var d=function(){function c(a,b,d){this.settings=b;this.cssClasses=d;this.$mainContainer=this.settings.contentContainer.wrap("<div class='"+this.cssClasses.TooltipWrapper+"'></div>").parent();this.$arrowContainer=$("<div class='"+this.cssClasses.TooltipArrow+"'></div>").prependTo(this.$mainContainer);this.$mainContainer.data("CustomTooltip",this);$.ui.position[c.tooltipCollisionName]!==c.tooltipCollision&&
($.ui.position[c.tooltipCollisionName]=c.tooltipCollision)}c.prototype.openTooltip=function(a,b){var d=this;this.isOpened||(this.isOpened=!0,this.dialogArrow=b.Arrow,this.$targetElement=a,this.$mainContainer.removeAttr("style"),this.clearArrowClassesFromMainContainer(),this.$mainContainer.css({display:"block","z-index":this.settings.zIndex}),this.$mainContainer.position({of:a,my:b.My,at:b.At,collision:c.tooltipCollisionName+" "+c.tooltipCollisionName,within:b.Within}),this.setArrowPosition(),this.$mainContainer.fadeIn(250,
function(){d.$mainContainer.show()}))};c.prototype.closeTooltip=function(){this.isOpened&&(this.$mainContainer.hide(),this.isOpened=!1)};c.prototype.isTooltipOpened=function(){return this.isOpened};c.prototype.setArrowPosition=function(){var a="",c="";switch(this.dialogArrow){case this.cssClasses.Bottom:c="center top";a="center bottom";break;case this.cssClasses.Top:c="center bottom";a="center top";break;case this.cssClasses.Left:c="right center";a="left center";break;case this.cssClasses.Right:c=
"left center",a="right center"}""!==a&&""!==c&&(this.clearArrowClassesFromMainContainer(),this.$mainContainer.addClass(this.dialogArrow),this.$arrowContainer.position({of:this.$targetElement,my:c,at:a,collision:"none none"}))};c.prototype.clearArrowClassesFromMainContainer=function(){this.$mainContainer.removeClass(this.cssClasses.Top+" "+this.cssClasses.Bottom+" "+this.cssClasses.Left+" "+this.cssClasses.Right)};c.prototype.invertArrow=function(a){switch(a){case e.Horizontal:switch(this.dialogArrow){case this.cssClasses.Right:this.dialogArrow=
this.cssClasses.Left;break;case this.cssClasses.Left:this.dialogArrow=this.cssClasses.Right}break;case e.Vertical:switch(this.dialogArrow){case this.cssClasses.Bottom:this.dialogArrow=this.cssClasses.Top;break;case this.cssClasses.Top:this.dialogArrow=this.cssClasses.Bottom}}this.setArrowPosition()};c.tooltipCollisionName="flipWithArrow";c.tooltipCollision={left:function(a,c){var b=a.left;$.ui.position.flip.left(a,c);$.ui.position.fit.left(a,c);b!==a.left&&c.elem.data("CustomTooltip").invertArrow(e.Horizontal)},
top:function(a,c){var b=a.top;$.ui.position.flip.top(a,c);$.ui.position.fit.top(a,c);b!==a.top&&c.elem.data("CustomTooltip").invertArrow(e.Vertical)}};return c}();b.CustomTooltip=d})(CCL||(CCL={}));
(function(b){var e=function(){function b(c,a,d,e){void 0===d&&(d=null);void 0===e&&(e=500);this.loadingIndicatorClass=a;this.$element=$(c);this.$elementsToDisable=d;this.timeout=e;var f=this;$(function(){f.$element.on("click",f.handler.bind(f)).each(function(){var a=$._data(this,"events").click,c=a.pop();a.unshift(c)}).on(b.eventRemoveLoadingIndicator,function(a,c){return f.removeLoadingIndicatorClass(c)})})}b.prototype.handler=function(){var c=this;this.disableLoadingIndicator||(this.timer=setTimeout(function(){c.$element.addClass(c.loadingIndicatorClass);
c.toggleDisabled(!0)},this.timeout))};b.prototype.removeLoadingIndicatorClass=function(c){void 0===c&&(c=!1);clearTimeout(this.timer);this.$element.removeClass(this.loadingIndicatorClass);c||this.toggleDisabled()};b.prototype.toggleDisabled=function(c){void 0===c&&(c=!1);this.$element.prop("disabled",c);void 0!==this.$elementsToDisable&&null!==this.$elementsToDisable&&$.each(this.$elementsToDisable,function(a,b){$(b).prop("disabled",c)})};b.eventRemoveLoadingIndicator="removeLoadingIndicator";return b}();
b.ButtonLoadingIndicator=e})(CCL||(CCL={}));(function(b){var e=function(){function b(c){this.delayedCallback=c}b.prototype.invokeCallback=function(c,a){var b=this;this.timeoutId&&clearTimeout(this.timeoutId);this.timeoutId=setTimeout(function(){b.delayedCallback(c)},a)};return b}();b.CallbackDebouncer=e})(CCL||(CCL={}));
(function(b){var e=function(){function d(){var c=this;this.firstHit=!0;this.lastState=b.CommonFunctions.isPhoneScreenSize();var a=new b.CallbackDebouncer(function(){var a=b.CommonFunctions.isPhoneScreenSize();if(c.firstHit||a!==c.lastState)c.firstHit=!1,$(c).trigger(d.mediaChangedEventName,a),c.lastState=a});$(window).resize(function(){a.invokeCallback(void 0,200)})}d.mediaChangedEventName="mediaTypeChanged";return d}();b.WindowResizeHandler=e})(CCL||(CCL={}));
__extends=this&&this.__extends||function(b,e){function d(){this.constructor=b}for(var c in e)e.hasOwnProperty(c)&&(b[c]=e[c]);b.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)};
(function(b){(function(b){(function(b){var c=function(){function a(a,c,b){contract.require(!objectState.isNullOrUndefined(a),"This class requires 'name' to be passed. Please, provide it.");-1===a.lastIndexOf(".")||void 0!==c||b?(this._name=a,this._extension=objectState.isNullOrUndefined(c)?null:c):(this._name=a.substring(0,a.lastIndexOf(".")),this._extension=a.substring(a.lastIndexOf(".")+1))}a.prototype.getName=function(){return this._name};a.prototype.getExtension=function(){return this._extension};
a.prototype.getFullName=function(){return this._name+"."+(this._extension?this._extension:"")};return a}();b.FileName=c})(b.Model||(b.Model={}))})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
var BaseMetadata=function(){return function(b,e,d){this.name=b;this.sourceType=e;this.mimeType=d}}(),LocalFileInputHandle=function(){function b(b){this.fileInput=b}b.prototype.get=function(){return this.fileInput};return b}(),LocalFileHandle=function(){function b(b){this.file=b}b.prototype.get=function(){return this.file};return b}(),ExternalSourceFileHandle=function(){function b(b,d,c,a){this.url=b;this.id=d;this.canBeCopied=c;this.canBeShared=a}b.prototype.get=function(){return objectState.isNullOrUndefined(this.id)?
this.url:{url:this.url,id:this.id,canBeCopied:null==this.canBeCopied?!0:this.canBeCopied,canBeShared:null==this.canBeShared?!0:this.canBeShared}};return b}(),SourceType;(function(b){b[b.Dropbox=1]="Dropbox";b[b.Google=2]="Google";b[b.OneDriveForBusiness=3]="OneDriveForBusiness";b[b.Local=4]="Local";b[b.OneDrivePersonal=5]="OneDrivePersonal";b[b.WebDav=6]="WebDav";b[b.Ziggeo=7]="Ziggeo"})(SourceType||(SourceType={}));
(function(b){b.isOneDrive=function(e){return e===b.OneDrivePersonal||e===b.OneDriveForBusiness};b.isCloud=function(e){return e===b.Dropbox||e===b.Google||b.isOneDrive(e)||e===b.WebDav||e===b.Ziggeo}})(SourceType||(SourceType={}));
var FileInOneDriveHandle=function(){function b(b){this.postMessageFile=b}b.prototype.get=function(){return objectState.isNullOrUndefined(this.postMessageFile.id)?this.postMessageFile.url:{url:this.postMessageFile.url,viewUrl:this.postMessageFile.viewUrl,downloadUrl:this.postMessageFile.downloadUrl,id:this.postMessageFile.id,canBeCopied:null==this.postMessageFile.canBeCopied?!0:this.postMessageFile.canBeCopied,canBeShared:null==this.postMessageFile.canBeShared?!0:this.postMessageFile.canBeShared}};
return b}(),PickerFileResult=function(){function b(b,d,c,a,f,g){this.fileHandle=b;this.name=d;this.size=c;this.sourceType=a;this.relativePath=f;this.mimeType=g}b.prototype.getFileHandle=function(){return this.fileHandle.get()};b.createExternalSourcePickerFileResult=function(e,d,c,a,f,g,h,k){return new b(new ExternalSourceFileHandle(e,g,h,k),d,c,a,null,f)};b.createLocalPickerFileResultWithInput=function(e,d){return new b(new LocalFileInputHandle(e),d,null,SourceType.Local)};b.createLocalPickerFileResult=
function(e){return new b(new LocalFileHandle(e),e.name,e.size,SourceType.Local,null,e.type)};b.createFolderPickerFileResultWithRelativePath=function(e,d){return new b(new LocalFileHandle(e),e.name,e.size,SourceType.Local,d,e.type)};b.createPickerFileResultWithFileName=function(e){return new b(new LocalFileHandle(null),e,0,SourceType.Local,null,null)};b.createOneDrivePickerFileResult=function(e){return new b(new FileInOneDriveHandle(e),e.name,e.size,e.sourceType,null,e.mimeType)};return b}(),UploadMetadata=
function(b){function e(d,c,a,e,g,h,k,l,m){b.call(this,c,a,h);this.id=d;this.name=c;this.sourceType=a;this.signature=e;this.signedFileRepoId=g;this.mimeType=h;this.isTemplate=k;this.customId=l;this.originalFileId=m}__extends(e,b);e.castMetadataObjectToUploadMetadata=function(b){return new e(b.id,b.name,b.sourceType,b.signature,b.signedFileRepoId,b.mimeType,!1,b.customId,b.originalFileId)};e.updateName=function(b,c){b.name=c};e.setTemplate=function(b,c){b.isTemplate=c};e.create=function(b,c){var a=
b.name,d=b.sourceType,g=b.mimeType,h=null,k=null,l=null,m=null;b=b.getFileHandle().id;c&&(c.fileGuid&&(h=c.fileGuid),c.signedGuid&&(k=c.signedGuid),c.signedFileRepoId&&(l=c.signedFileRepoId),c.mimeType&&(g=c.mimeType),c.customId&&(m=c.customId));return new e(h,a,d,k,l,g,!1,m,b)};return e}(BaseMetadata),ValidationStatus;
(function(b){b[b.Ok=0]="Ok";b[b.Inconclusive=1]="Inconclusive";b[b.FileIsUnavailable=2]="FileIsUnavailable";b[b.FileSizeIsTooSmall=3]="FileSizeIsTooSmall";b[b.FileSizeIsTooBig=4]="FileSizeIsTooBig";b[b.FileExtensionIsNotAllowed=5]="FileExtensionIsNotAllowed";b[b.FilenameContainsIllegalCharacters=6]="FilenameContainsIllegalCharacters";b[b.FileNameIsIllegal=7]="FileNameIsIllegal";b[b.FileIsEmpty=8]="FileIsEmpty";b[b.FileNameIsTooLong=9]="FileNameIsTooLong";b[b.FileNameIsEmpty=10]="FileNameIsEmpty";
b[b.FileTypeNotSupportedByCasper=11]="FileTypeNotSupportedByCasper";b[b.FileCannotBeCopied=12]="FileCannotBeCopied";b[b.FileCannotBeShared=13]="FileCannotBeShared"})(ValidationStatus||(ValidationStatus={}));
var ValidationResult=function(){function b(b,d){this.status=b;this.data=d}b.prototype.isValid=function(){return this.status===ValidationStatus.Ok||this.status===ValidationStatus.Inconclusive};b.prototype.getStatus=function(){return this.status};b.prototype.getData=function(){return this.data};return b}(),FileExtensionValidator=function(){function b(b,d){this.allowedExtensions=b;this.forbiddenExtensions=d}b.prototype.validateFile=function(e){if(objectState.isNullOrUndefined(e))throw Error("Argument 'file' cannot be null or undefined");
if(objectState.isNullOrUndefined(e.name))return new ValidationResult(ValidationStatus.Inconclusive);e=b.getFileExtension(e.name);return!this.isAllowed(e)||this.isForbidden(e)?new ValidationResult(ValidationStatus.FileExtensionIsNotAllowed):new ValidationResult(ValidationStatus.Ok)};b.prototype.isAllowed=function(b){var d=this;return this.isAllowedFileValidationEnabled()?this.allowedExtensions.some(function(c){return d.equalsIgnoreCase(c,b)}):!0};b.prototype.isAllowedFileValidationEnabled=function(){return Array.isArray(this.allowedExtensions)&&
0<this.allowedExtensions.length};b.prototype.isForbidden=function(b){var d=this;return this.isForbiddenFileValidationEnabled()?this.forbiddenExtensions.some(function(c){return d.equalsIgnoreCase(c,b)}):!1};b.prototype.isForbiddenFileValidationEnabled=function(){return Array.isArray(this.forbiddenExtensions)&&0<this.forbiddenExtensions.length};b.prototype.equalsIgnoreCase=function(b,d){return b.toLowerCase()===d.toLowerCase()};b.getFileExtension=function(b){return b&&(b=b.split("."),1<b.length)?b.pop():
""};return b}(),GapiDocType=function(){function b(){}b.word="application/vnd.openxmlformats-officedocument.wordprocessingml.document";b.excel="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";b.powerpoint="application/vnd.openxmlformats-officedocument.presentationml.presentation";b.wordMimeTypes=["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-word.document.12","application/vnd.oasis.opendocument.text","application/msword","application/rtf"];
b.excelMimeTypes=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","application/vnd.oasis.opendocument.spreadsheet"];b.powerpointMimeTypes=["application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint","application/vnd.ms-pps","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.presentationml.slideshow"];b.png="image/png";b.pdf="application/pdf";b.googleSpreadsheet=
"application/vnd.google-apps.spreadsheet";b.googleDocument="application/vnd.google-apps.document";b.googlePresentation="application/vnd.google-apps.presentation";b.googleDrawing="application/vnd.google-apps.drawing";b.googleForm="application/vnd.google-apps.form";b.googleJam="application/vnd.google-apps.jam";b.videoMimeTypes=["video/mp4","video/ogg","video/webm","video/x-m4v"];b.audioMimeTypes="audio/mp3 audio/mp4 audio/mpeg audio/ogg audio/vnd.wave audio/webm audio/x-m4a audio/wav".split(" ");b.imageMimeTypes=
["image/gif","image/jpeg","image/png","image/bmp"];b.archiveMimeTypes="application/x-7z-compressed application/x-bzip application/x-bzip2 application/x-rar-compressed application/vnd.rar application/x-tar application/zip application/x-zip-compressed multipart/x-zip application/x-gzip application/gzip".split(" ");b.googleApps=[b.googleSpreadsheet,b.googleDocument,b.googlePresentation,b.googleJam];b.getDocumentType=function(e){return e[b.word]?b.word:e[b.excel]?b.excel:e[b.powerpoint]?b.powerpoint:
e[b.png]?b.png:e[b.pdf]?b.pdf:Object.keys(e)[0]};return b}(),GoogleAppExportInfo=function(){function b(){}b.getExportedTypesMap=function(){var b={};b[GapiDocType.googleDocument]={mimeType:GapiDocType.word,extension:"docx"};b[GapiDocType.googleSpreadsheet]={mimeType:GapiDocType.excel,extension:"xlsx"};b[GapiDocType.googlePresentation]={mimeType:GapiDocType.powerpoint,extension:"pptx"};return b};b.exportedMimeTypes=b.getExportedTypesMap();b.getExportedTypeForGoogleApp=function(e){return b.exportedMimeTypes[e]};
b.getGoogleAppForExportedExtension=function(e){for(var d in b.exportedMimeTypes)if(b.exportedMimeTypes.hasOwnProperty(d)&&b.exportedMimeTypes[d].extension===e)return d};return b}(),FileInCloudTypeValidator=function(b){function e(d,c,a){b.call(this,d,c);this.allowedGoogleAppMimeTypes=this.mapFileExtensionsToGoogleAppMimeTypes(d);this.forbiddenGoogleAppMimeTypes=this.mapFileExtensionsToGoogleAppMimeTypes(c);this.isCasperEnabled=a}__extends(e,b);e.prototype.validateFile=function(d){if(objectState.isNullOrUndefined(d))throw Error("Argument 'file' cannot be null or undefined");
return this.isCasperEnabled&&!e.isSupportedByCasper(d.mimeType)?new ValidationResult(ValidationStatus.FileTypeNotSupportedByCasper,d.name):this.isGoogleAppFileFromGoogle(d)?this.validateGoogleApp(d):b.prototype.validateFile.call(this,d)};e.prototype.mapFileExtensionsToGoogleAppMimeTypes=function(b){if(!Array.isArray(b))return[];for(var c=[],a=0;a<b.length;a++){var d=GoogleAppExportInfo.getGoogleAppForExportedExtension(b[a]);d&&c.push(d)}return c};e.prototype.isGoogleAppFileFromGoogle=function(b){return b.sourceType===
SourceType.Google&&b.mimeType&&-1!==GapiDocType.googleApps.indexOf(b.mimeType)};e.prototype.validateGoogleApp=function(b){return!this.isAllowedGoogleApp(b)||this.isForbiddenGoogleApp(b)?new ValidationResult(ValidationStatus.FileExtensionIsNotAllowed):!1===b.getFileHandle().canBeShared?new ValidationResult(ValidationStatus.FileCannotBeShared,b.name):!1===b.getFileHandle().canBeCopied?new ValidationResult(ValidationStatus.FileCannotBeCopied,b.name):new ValidationResult(ValidationStatus.Ok)};e.prototype.isAllowedGoogleApp=
function(b){return this.isAllowedFileValidationEnabled()?-1!==this.allowedGoogleAppMimeTypes.indexOf(b.mimeType):!0};e.prototype.isForbiddenGoogleApp=function(b){return this.isForbiddenFileValidationEnabled()?-1!==this.forbiddenGoogleAppMimeTypes.indexOf(b.mimeType):!1};e.isSupportedMimeTypeForTemplating=function(b){switch(b){case "application/vnd.google-apps.document":case "application/vnd.google-apps.spreadsheet":case "application/vnd.google-apps.presentation":case "application/vnd.google-apps.drawing":case "application/vnd.google-apps.jam":return!0}return!1};
e.isSupportedByCasper=function(b){return 0===b.indexOf("application/vnd.google-apps.")?e.isSupportedMimeTypeForTemplating(b):!0};return e}(FileExtensionValidator),FileInCloudMetadata=function(b){function e(d,c,a,e,g,h,k,l){void 0===l&&(l=!1);b.call(this,d,c,e);this.name=d;this.sourceType=c;this.viewUrl=a;this.mimeType=e;this.isTemplate=g;this.downloadUrl=h;this.editUrl=k;this.isRegisteredWithCasper=l;this.supportsTemplating=FileInCloudTypeValidator.isSupportedMimeTypeForTemplating(e);this.isSupportedByCasper=
FileInCloudTypeValidator.isSupportedByCasper(e)}__extends(e,b);e.clone=function(b){var c=new e(b.name,b.sourceType,b.viewUrl,b.mimeType,b.isTemplate,b.downloadUrl,b.editUrl,b.isRegisteredWithCasper);c.id=b.id;c.oAuthContext=b.oAuthContext;return c};e.castMetadataObjectToFileInCloudMetadata=function(b){var c=new e(b.name,b.sourceType,b.viewUrl,b.mimeType,b.isTemplate,b.downloadUrl,b.editUrl,b.isRegisteredWithCasper);c.id=b.id;c.oAuthContext=b.oAuthContext;return c};e.setTemplate=function(b,c){b.isTemplate=
c};e.downloadUrlTemplate="https://drive.google.com/uc?export=download&id={fileId}";e.create=function(b,c){var a=b.name,d=b.sourceType,g=e.getViewUrl(b),h=e.getDownloadUrl(b),k=e.getEditUrl(b);a=new e(a,d,g,b.mimeType,!1,h,k);a.oAuthContext=c;a.id=e.getId(b);return a};e.getViewUrl=function(b){b=b.getFileHandle();return"string"===typeof b?b:b.viewUrl?b.viewUrl:b.url};e.getEditUrl=function(b){b=b.getFileHandle();return"string"===typeof b?b:b.editUrl?b.editUrl:b.url};e.getDownloadUrl=function(b){if(!FileInCloudTypeValidator.isSupportedByCasper(b.mimeType))return null;
b=b.getFileHandle();var c="";b&&(b.downloadUrl?c=b.downloadUrl:b.id&&(c=e.downloadUrlTemplate.replace("{fileId}",b.id)));return c};e.getId=function(b){b=b.getFileHandle();return e.isIdAvailable(b)?b.id:null};e.isIdAvailable=function(b){return!objectState.isNullOrUndefined(b)&&!objectState.isNullOrUndefined(b.id)};return e}(BaseMetadata),UploadControlTranslation=function(){return function(){}}();
(function(b){b=b.FileList||(b.FileList={});b=b.Model||(b.Model={});b=b.FileItemState||(b.FileItemState={});b[b.New=0]="New";b[b.Ready=1]="Ready";b[b.InProgress=2]="InProgress";b[b.Aborting=3]="Aborting";b[b.Error=4]="Error";b[b.Success=5]="Success"})(CCL||(CCL={}));
(function(b){(function(b){(function(b){var c=function(){function a(){this.currentState=b.FileItemState.New}a.prototype.getCurrentState=function(){return this.currentState};a.prototype.isFinalState=function(){return this.currentState===b.FileItemState.Success||this.currentState===b.FileItemState.Error};a.prototype.prepareUpload=function(){if(this.currentState===b.FileItemState.New)this.currentState=b.FileItemState.Ready;else throw Error("You can only prepare upload if it is in status 'New'");};a.prototype.startUpload=
function(){if(this.currentState===b.FileItemState.Ready)this.currentState=b.FileItemState.InProgress;else throw Error("You can only start upload if it is in status 'Ready'");};a.prototype.abortUpload=function(){if(this.currentState===b.FileItemState.InProgress)this.currentState=b.FileItemState.Aborting;else throw Error("You can only abort upload if it is in status 'InProgress'");};a.prototype.finishUpload=function(){if(this.currentState===b.FileItemState.Ready||this.currentState===b.FileItemState.InProgress||
this.currentState===b.FileItemState.Aborting)this.currentState=b.FileItemState.Success;else throw Error("You can only finish upload if it is in status 'InProgress' or 'Ready' or 'Aborting'");};a.prototype.failUpload=function(){if(this.currentState===b.FileItemState.Ready||this.currentState===b.FileItemState.InProgress||this.currentState===b.FileItemState.Aborting)this.currentState=b.FileItemState.Error;else throw Error("You can only fail upload if it is in status 'Ready' or 'InProgress' or 'Aborting'");
};return a}();b.FileItemStateMachine=c})(b.Model||(b.Model={}))})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(b){var d=function(){function c(){}c.internalFileItemSelected="internal:fileitem:selected";c.internalFileItemViewActivated="internal:fileitem:view:activated";c.internalFileItemViewOriginalActivated="internal:fileitem:vieworiginal:activated";c.internalFileItemDownloadActivated="internal:fileitem:download:activated";c.internalFileItemEditActivated="internal:fileitem:edit:activated";c.internalFileItemTemplateChanged="internal:fileitem:templateChanged";return c}();b.InternalTriggers=
d})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(b){(function(d){var c=function(){function a(a){var c=this;this.onItemClick=function(a,d){!c.noInteraction&&a.canBeSelected&&a.isUploaded()&&d.target.dispatchEvent(new CustomEvent(b.InternalTriggers.internalFileItemSelected,{bubbles:!0,detail:{File:a}}))};contract.require(!objectState.isNullOrUndefined(a.fileName),"This class requires 'fileName' to be passed. Please, provide it.");this.fileName=ko.observable(a.fileName.getName());this.fileExtension=ko.observable(a.fileName.getExtension());
this.fileFullName=ko.observable(a.fileName.getFullName());this.stateMachine=a.stateMachine;this.isRemoveAllowed=ko.observable(objectState.isNullOrUndefined(a.isRemoveAllowed)?!0:a.isRemoveAllowed);this.showTemplateOptionsInFilelist=ko.observable(!1);this.showTemplateOptionsForItem=ko.observable(!1);this.disableTemplateOptionsForItem=ko.observable(!1);this.isRenaming=ko.observable(!1);this.isRenaming.subscribe(function(a){a||c.renameFile()});this.noInteraction=objectState.isNullOrUndefined(a.noInteraction)?
!1:a.noInteraction;this.onRemoveCallback=a.onRemoveCallback;this.onRenameCallback=a.onRenameCallback;this.onSetTemplateCallback=a.onSetTemplateCallback;this.errorMessage=ko.observable(objectState.isNullOrUndefined(a.errorMessage)?null:a.errorMessage);this.warningMessage=ko.observable(objectState.isNullOrUndefined(a.warningMessage)?null:a.warningMessage);this.Metadata=a.metadata;this.PreviewSettings=a.previewSettings;this.Name=this.fileFullName();this.IsViewableInOfficeOnline=a.isViewableInOfficeOnline;
this.SnapshotFileRepoSignature=a.snapshotFileRepoSignature;this.SnapshotFileRepoId=a.snapshotFileRepoId;this.SnapshotFileUrl=a.snapshotFileUrl;this.SnapshotFileId=a.snapshotFileId;this.isUploaded=ko.observable(!1);this.isCompleted=ko.observable(!1);this.rightSideCustomHtml=ko.pureComputed(function(){return objectState.isNullOrUndefined(a.rightSideCustomHtml)?null:a.rightSideCustomHtml});this.customContextMenuItems=a.customContextMenuItems;this.isSupportedByCasper=ko.observable(!1);var d=this.Metadata;
this.mimeType=d?ko.observable(d.mimeType):ko.observable("");this.getItemCss=ko.pureComputed(function(){if(c.errorMessage()||c.warningMessage())return"ccl-fl-item-error";if(c.noInteraction)return"no-interaction";var a="";c.canBeSelected&&c.isUploaded()&&(a+=" ccl-fl-item-selectable");c.showTemplateOptionsInFilelist()&&c.showTemplateOptionsForItem()&&a+" ccl-fl-item-with-template-options";return a});this.getRowCss=ko.pureComputed(function(){var a=[];a.push("ccl-fl-item-row-container");c.showTemplateOptionsInFilelist()&&
c.errorMessage()&&a.push("h-less-opacity");return a.join(" ")});this.getFileItemCss=ko.pureComputed(function(){var b=["ccl-fl-item-details"];c.isUploaded()||b.push("ccl-fl-item-details-file-icon-faded");a.iconCssClass&&b.push(a.iconCssClass);return b.join(" ")});this.getFileNameCss=ko.pureComputed(function(){var a=[];c.errorMessage()||c.warningMessage()?a.push("ccl-fl-item-details-text-file-name-error"):c.isUploaded()?a.push("ccl-fl-item-details-text-file-name-uploaded"):a.push("ccl-fl-item-details-text-file-name-faded");
return a.join(" ")});this.getFileExtensionText=ko.pureComputed(function(){return"."+c.fileExtension()});this.getFileExtensionCss=ko.pureComputed(function(){return c.errorMessage()||c.warningMessage()?"ccl-fl-item-details-text-file-extension-error":c.isUploaded()?"ccl-fl-item-details-text-file-extension-uploaded":"ccl-fl-item-details-text-file-extension-faded"});this.getFormCssClasses=ko.pureComputed(function(){return c.errorMessage()||c.warningMessage()?"ccl-fl-item-details-form error":"ccl-fl-item-details-form"});
this.getRemoveButtonCss=ko.pureComputed(function(){return"ccl-fl-item-remove-"+(c.isRemoveAllowed()?"enabled":"disabled")});this.progress=ko.observable(0);this.stateMachine.prepareUpload();this.isExtraOperationAvailable=ko.pureComputed(function(){return c.isUploaded()})}a.prototype.setProgress=function(a){var c=this.progress();if(100<a)throw"Progress can't exceed 100";c>=a||(0===c&&0<a&&this.stateMachine.startUpload(),this.progress(a))};a.prototype.setTemplate=function(a){this.isFileFromGoogleDrive()?
FileInCloudMetadata.setTemplate(this.Metadata,a):UploadMetadata.setTemplate(this.Metadata,a);this.onSetTemplateCallback()};a.prototype.renameFile=function(){var a=this.Metadata,c=this.fileName();!objectState.isNullOrUndefined(this.fileExtension())&&0<this.fileExtension().length&&(c=this.fileName()+"."+this.fileExtension());if(a instanceof UploadMetadata){var b=PickerFileResult.createPickerFileResultWithFileName(c);b=this.validator.validateFile(b);b.isValid()?(UploadMetadata.updateName(a,c),this.errorMessage(null),
this.isRenaming(!1),this.onRenameCallback(),this.Name=c):(this.isRenaming(!0),this.errorMessage(b.getData()))}else throw Error("Metadata needs to be of type UploadMetadata to be able to rename the file");};a.prototype.canRename=function(){return this.isUploaded()&&!this.IsFileInCloud};Object.defineProperty(a.prototype,"IsFileInCloud",{get:function(){return this.Metadata instanceof FileInCloudMetadata},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"MimeType",{get:function(){return this.mimeType()},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"RegisteredWithCasper",{get:function(){return this.IsFileInCloud?this.Metadata.isRegisteredWithCasper:!1},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"canBeSelected",{get:function(){if(this.isFileFromGoogleDrive()&&!this.RegisteredWithCasper)switch(this.mimeType()){case GapiDocType.googleDocument:case GapiDocType.googlePresentation:case GapiDocType.googleSpreadsheet:case GapiDocType.googleDrawing:case GapiDocType.googleForm:case GapiDocType.googleJam:return!1}return!0},
enumerable:!0,configurable:!0});a.prototype.isFileFromGoogleDrive=function(){return this.IsFileInCloud?this.Metadata.sourceType===SourceType.Google:!1};a.prototype.isFileTemplate=function(){var a=this.Metadata;return a instanceof FileInCloudMetadata||a instanceof UploadMetadata?a.isTemplate:!1};a.prototype.markAsUploaded=function(){this.isUploaded()||this.stateMachine.finishUpload();this.progress(100);this.isUploaded(!0)};a.prototype.markAsCompleted=function(){this.isCompleted(!0)};a.prototype.setFolderError=
function(){this.setError(UploadControlTranslation.someFilesInThatFolderCannotBeUploaded)};a.prototype.setError=function(a){this.errorMessage(a);this.progress(100);this.stateMachine.failUpload();this.isRemoveAllowed(!0)};a.prototype.setFolderWarning=function(){this.warningMessage(UploadControlTranslation.someFilesInThatFolderCannotBeUploaded)};a.prototype.getState=function(){return this.stateMachine.getCurrentState()};a.prototype.abortUpload=function(){this.stateMachine.abortUpload()};a.buildItemForUpload=
function(c,b){c=new d.FileName(c);b=new a({fileName:c,stateMachine:new d.FileItemStateMachine,iconCssClass:a.getCssIconForFile(a.getFilePurpose(c.getExtension())),metadata:b});b.isSupportedByCasper(!0);return b};a.buildItemForFolder=function(c){return new a({fileName:new d.FileName(c,void 0,!0),stateMachine:new d.FileItemStateMachine,iconCssClass:"ccl-fl-item-details-folder-icon"})};a.buildItemForFileInCloud=function(c){var b=new a({fileName:new d.FileName(c.name),stateMachine:new d.FileItemStateMachine,
iconCssClass:a.getCssIconForFileInCloud(c),metadata:c});c.isSupportedByCasper&&b.isSupportedByCasper(!0);return b};a.getCssIconForFileInCloud=function(c){return c.sourceType===SourceType.Google?a.getCssIconForGoogleDriveFile(c.mimeType):SourceType.isOneDrive(c.sourceType)?a.getCssIconForOneDriveFile(c.mimeType):a.defaultIconCssClass};a.getCssIconForOneDriveFile=function(c){return a.getGenericCssIconOrDefault(c,"ccl-fl-item-details-one-drive-file-icon")};a.getGenericCssIconOrDefault=function(a,c){return a===
GapiDocType.pdf?"ccl-fl-item-details-pdf-file-icon":-1!==GapiDocType.wordMimeTypes.indexOf(a)?"ccl-fl-item-details-document-file-icon":-1!==GapiDocType.powerpointMimeTypes.indexOf(a)?"ccl-fl-item-details-presentation-file-icon":-1!==GapiDocType.excelMimeTypes.indexOf(a)?"ccl-fl-item-details-table-file-icon":-1!==GapiDocType.videoMimeTypes.indexOf(a)?"ccl-fl-item-details-video-file-icon":-1!==GapiDocType.audioMimeTypes.indexOf(a)?"ccl-fl-item-details-audio-file-icon":-1!==GapiDocType.imageMimeTypes.indexOf(a)?
"ccl-fl-item-details-image-file-icon":-1!==GapiDocType.archiveMimeTypes.indexOf(a)?"ccl-fl-item-details-archive-file-icon":c};a.getCssIconForGoogleDriveFile=function(c){switch(c){case GapiDocType.googleDocument:return"ccl-fl-item-details-google-document-icon";case GapiDocType.googlePresentation:return"ccl-fl-item-details-google-presentation-icon";case GapiDocType.googleSpreadsheet:return"ccl-fl-item-details-google-spreadsheet-icon";case GapiDocType.googleJam:return"ccl-fl-item-details-google-jam-icon";
default:return a.getGenericCssIconOrDefault(c,"ccl-fl-item-details-google-drive-file-icon")}};a.getFilePurpose=function(a){return-1!==["docx","doc","docm","rtf"].indexOf(a)?"document":-1!==["pptx","ppt","pptm"].indexOf(a)?"presentation":-1!==["pdf"].indexOf(a)?"pdf":-1!==["xlsx","xls","xlsb, xlsm"].indexOf(a)?"table":-1!==["swf","mp4","m4v","webm"].indexOf(a)?"video":-1!=="mp3 m4a wav fla acc ogg".split(" ").indexOf(a)?"audio":-1!==["bmp","gif","jpg","jpeg","png"].indexOf(a)?"image":-1!==["zip","rar",
"7z"].indexOf(a)?"archive":-1!==["odt"].indexOf(a)?"writer":-1!==["odp"].indexOf(a)?"impress":-1!==["ods"].indexOf(a)?"calc":"generic"};a.getCssIconForFile=function(a){return"ccl-fl-item-details-"+a+"-file-icon"};a.defaultIconCssClass="ccl-fl-item-details-generic-file-icon";return a}();d.FileItem=c})(b.Model||(b.Model={}))})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(b){(function(b){var c=function(){function a(a){var c=this;this.settings=a;this.getViewUrl=function(a,b){void 0===b&&(b=!1);var d=a.Metadata;if(d&&d.signedFileRepoId)return(a=c.getViewEditUrlTemplate(d.name,b?a.SnapshotFileRepoSignature:d.signedFileRepoId,b?a.SnapshotFileId.toString():d.id,d.customId))?a.replace(c.settings.TemplateTokens.ViewOnly,(!0).toString()):"";if(d&&d.viewUrl)return d.viewUrl;throw Error("Download error: Unknown type of Metadata!");}}a.prototype.getDownloadUrl=
function(a){if((a=a.Metadata)&&a.signedFileRepoId){var c=this.settings.DownloadEndpointUrl;c=c.replace(this.settings.TemplateTokens.FileRepoId,encodeURIComponent(a.signedFileRepoId));return c=c.replace(this.settings.TemplateTokens.CustomId,encodeURIComponent(a.customId))}if(a&&a.downloadUrl)return a.downloadUrl;throw Error("Download error: Unknown type of Metadata!");};a.prototype.getEditUrl=function(a){if((a=a.Metadata)&&a.signedFileRepoId)return(a=this.getViewEditUrlTemplate(a.name,a.signedFileRepoId,
a.id,a.customId))?a.replace(this.settings.TemplateTokens.ViewOnly,(!1).toString()):"";if(a&&a.editUrl)return a.editUrl;throw Error("Download error: Unknown type of Metadata!");};a.prototype.getViewEditUrlTemplate=function(a,c,b,d){if(a&&c&&b){var e=this.settings.ViewEditEndpointUrl;e=e.replace(this.settings.TemplateTokens.FileRepoId,encodeURIComponent(c));e=e.replace(this.settings.TemplateTokens.FileName,encodeURIComponent(a));e=e.replace(this.settings.TemplateTokens.UniqueId,b);return e=e.replace(this.settings.TemplateTokens.CustomId,
d)}return""};return a}();b.FileItemActions=c})(b.Model||(b.Model={}))})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(e){var d=function(){function c(a,d){var e=this;this.settings=a;this.fileActions=d;this.openPreview=function(a,d){void 0===d&&(d=!1);var f=a.PreviewSettings?a.PreviewSettings:c.getDefaultPreviewSettings(a.IsFileInCloud,a.MimeType,e.settings),g=d?b.PreviewType.NewTab:f.Type;d=!d&&f.Url?f.Url:a.IsFileInCloud?e.fileActions.getEditUrl(a):e.fileActions.getViewUrl(a);switch(g){case b.PreviewType.None:e.download(a);break;case b.PreviewType.NewPopup:e.openInPopup(d);break;case b.PreviewType.NewTab:e.openInTab(d);
break;case b.PreviewType.SameFrame:e.openInSameFrame(d);break;case b.PreviewType.Modal:e.openInModalDialog(a.Name,d,f.DialogWidth,f.DialogHeight,f.DialogMaximised)}}}c.getDefaultPreviewSettings=function(a,d,e){return e.MimeTypesToView.some(function(a){return a===d})?a?{Type:b.PreviewType.NewTab}:c.shouldBeOpenedInPopup(d,e)?{Type:b.PreviewType.NewPopup}:{Type:b.PreviewType.Modal,DialogWidth:c.isEmbeddedVideo(d,e)?c.videoMinWidth:0,DialogHeight:c.isEmbeddedVideo(d,e)?c.videoMinHeight:0,DialogMaximised:!1}:
{Type:b.PreviewType.None}};c.shouldBeOpenedInPopup=function(a,c){return this.isOwasFileType(a,c)||0<=c.AdditionalMimeTypesOpenedInPopup.indexOf(a)};c.isOwasFileType=function(a,c){return 0<=c.OwasMimeTypes.indexOf(a)};c.isEmbeddedVideo=function(a,c){return!!a&&0<=c.EmbedVideoMimeTypes.indexOf(a)};c.prototype.openEdit=function(a){var c=this.fileActions.getEditUrl(a);a.IsFileInCloud&&this.settings.GoogleMimeTypes.some(function(c){return c===a.MimeType})?this.openInTab(c):this.openInPopup(c)};c.prototype.openView=
function(a,c){void 0===c&&(c=!1);c=this.settings.UsePreviewSettingsUrlToView&&a.PreviewSettings.Url?a.PreviewSettings.Url:this.fileActions.getViewUrl(a,c);a.IsFileInCloud&&this.settings.GoogleMimeTypes.some(function(c){return c===a.MimeType})?this.openInTab(c):this.openInPopup(c)};c.prototype.download=function(a){a=this.fileActions.getDownloadUrl(a);contract.require(!objectState.isNullOrUndefined(a),"No download url for file.");this.openInTab(a)};c.prototype.openInTab=function(a){window.open(a)};
c.prototype.openInPopup=function(a){window.open(a,"","width="+.8*screen.width+", height="+.8*screen.height+",location=0, directories=0, toolbar=0, scrollbars=0, status=0, menubars=0, resizable=1")};c.prototype.openInModalDialog=function(a,b,d,e,k){void 0===k&&(k=!1);var f=window[this.settings.PreviewDialogInstanceName];f&&(f.setAjaxUrl(b),f.setTitle(a),f.setContentMinSize(d,e),0<e&&f.setContentMaxSize(d,c.maxHeight),f.openDialog(k))};c.prototype.openInSameFrame=function(a){window.location.href=a};
c.videoMinWidth=650;c.videoMinHeight=350;c.maxHeight=600;return c}();e.PreviewerControl=d})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(e){(function(d){var c=function(){function a(a,c){var d=this;this.fileItem=a;this.settings=c;this.items=ko.observableArray([]);this.isContextMenuDisplayed=ko.observable(!1);this.isAnyOperationAvailable=ko.observable(!1);this.onViewClick=function(a,c){d.dispatchInternalEvent(e.InternalTriggers.internalFileItemViewActivated,c,d.ensureViewMode(a))};this.onViewOriginalClick=function(a,c){d.dispatchInternalEvent(e.InternalTriggers.internalFileItemViewOriginalActivated,c,d.ensureViewMode(a))};
this.onEditClick=function(a,c){d.dispatchInternalEvent(e.InternalTriggers.internalFileItemEditActivated,c,d.ensureEditMode(a))};this.onDownloadClick=function(a,c){d.dispatchInternalEvent(e.InternalTriggers.internalFileItemDownloadActivated,c,a)};this.onRenameClick=function(a,c){d.isContextMenuDisplayed(!1);a.isRenaming(!0)};this.onKeyDown=function(a,c){if(d.isContextMenuDisplayed()){if(c.which===b.CommonConstants.keyCodes.escape)return d.isContextMenuDisplayed(!1),c.currentTarget.querySelector(".ccl-fl-context-menu-ellipsis").focus(),
!1;if(c.which===b.CommonConstants.keyCodes.tab){a=c.currentTarget.querySelector(".ccl-fl-context-menu-ellipsis");var e=c.currentTarget.querySelectorAll(".ccl-fl-context-menu-dialog-content-item");e=e[e.length-1];if(c.shiftKey&&c.target===a)return e.focus(),!1;if(!c.shiftKey&&c.target===e)return a.focus(),!1}}return!0};this.isEditEnabled=function(){return!d.settings.DisableEdit};this.isRenameEnabled=function(){return!d.settings.DisableRename};this.isViewEnabled=function(){return!d.settings.DisableView};
this.isOriginalEnabled=function(){return!d.settings.DisableOriginal};this.isFileEditable=function(){return Array.isArray(d.settings.MimeTypesToEdit)?d.fileItem.isFileFromGoogleDrive()?Array.isArray(d.settings.MimeTypesToEditFromGoogleDrive)?d.settings.MimeTypesToEditFromGoogleDrive.some(function(a){return a===d.fileItem.mimeType()}):!1:d.settings.MimeTypesToEdit.some(function(a){return a===d.fileItem.mimeType()}):!1};this.isFileViewable=function(){return d.isAnyPreviewAvailable(d.fileItem)};this.isDownloadPossible=
function(){var a=d.fileItem.Metadata;return Array.isArray(d.settings.GoogleMimeTypes)&&d.settings.GoogleMimeTypes.some(function(a){return a===d.fileItem.MimeType})?a.isRegisteredWithCasper:a&&(a.signedFileRepoId||a.downloadUrl)};this.isAnyPreviewAvailable=function(a){return(a=a.PreviewSettings?a.PreviewSettings:e.PreviewerControl.getDefaultPreviewSettings(a.IsFileInCloud,a.MimeType,d.settings))&&a.Type!==b.PreviewType.None};this.redraw(a);a.isCompleted.subscribe(function(){d.redraw(a)})}a.prototype.toggleContextMenu=
function(a,c){var b=this;if(this.isContextMenuDisplayed())this.isContextMenuDisplayed(!1);else{this.isContextMenuDisplayed(!0);var d=$(c.target.parentElement.parentElement);$(document).mousedown(function(a){d.is(a.target)||0!==d.has(a.target).length||b.isContextMenuDisplayed(!1)})}};a.prototype.ensureViewMode=function(a){a.PreviewSettings&&a.PreviewSettings.Url&&(a.PreviewSettings.Url=a.PreviewSettings.Url.replace("ViewOnly%3DFalse","ViewOnly%3DTrue").replace("UserAction%3DEdit","UserAction%3DView"));
return a};a.prototype.ensureEditMode=function(a){a.PreviewSettings&&a.PreviewSettings.Url&&(a.PreviewSettings.Url=a.PreviewSettings.Url.replace("ViewOnly%3DTrue","ViewOnly%3DFalse").replace("UserAction%3DView","UserAction%3DEdit"));return a};a.prototype.createDefaultItems=function(a){var c=this,b=[];b.push({Text:this.settings.Translations.View,Action:function(b,d){c.onViewClick(a,d)},Visible:this.isViewEnabled()&&this.isFileViewable()&&a.isUploaded()});b.push({Text:this.settings.Translations.ViewOriginal,
Action:function(b,d){c.onViewOriginalClick(a,d)},Visible:this.isOriginalEnabled()&&this.isViewEnabled()&&this.isFileViewable()&&a.isUploaded()&&a.SnapshotFileId&&a.IsViewableInOfficeOnline});b.push({Text:this.settings.Translations.Edit,Action:function(b,d){c.onEditClick(a,d)},Visible:this.isEditEnabled()&&this.isFileEditable()&&a.isUploaded()});b.push({Text:this.settings.Translations.Download,Action:function(b,d){c.onDownloadClick(a,d)},Visible:!this.settings.DisableDownload&&a.isUploaded()&&this.isDownloadPossible()});
b.push({Text:this.settings.Translations.Rename,Action:function(b,d){c.onRenameClick(a,d)},Visible:this.isRenameEnabled()&&a.canRename()});return b};a.prototype.createCustomItems=function(a){var c=this,b=[];if(null==a.customContextMenuItems)return b;a.customContextMenuItems.forEach(function(d){b.push({Text:d.Text,Action:function(b,e){e.stopPropagation();d.Action&&d.Action(c.createCustomEvent("fileitem:customaction",a));d.EventName&&c.dispatchInternalEvent(d.EventName,e,a)},Visible:d.Visible})});return b};
a.prototype.redraw=function(a){var c=this.createDefaultItems(a);a=this.createCustomItems(a);this.items(c.concat(a).filter(function(a){return a.Visible}));this.isAnyOperationAvailable(0<this.items().length)};a.prototype.dispatchInternalEvent=function(a,c,b){this.isContextMenuDisplayed(!1);c.target.dispatchEvent(this.createCustomEvent(a,b))};a.prototype.createCustomEvent=function(a,c){return new CustomEvent(a,{bubbles:!0,detail:{File:c}})};return a}();d.ContextMenuViewModel=c})(e.Model||(e.Model={}))})(b.FileList||
(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(b){(function(d){var c=function(){function a(){this.name=a.defaultFileItemContextMenuHtmlTag;this.viewModel={createViewModel:function(a,c){return new b.Model.ContextMenuViewModel(a.file,a.settings)}};this.template='\n            <div class="ccl-fl-context-menu" data-bind="\n                visible: isAnyOperationAvailable,\n                event: { keydown: onKeyDown }\n            ">\n                <button type="button" class="ccl-fl-context-menu-ellipsis" data-bind="\n                    attr: {\'aria-label\': settings.Translations.FileListOptions},\n                    click: toggleContextMenu,\n                    clickBubble: false,\n                    css: { \'ccl-fl-context-menu-ellipsis-active\': isContextMenuDisplayed }\n                ">\n                    <span class="ili ili-h-ellipsis"></span>\n                </button>\n                <div class="ccl-fl-context-menu-dialog" data-bind="visible: isContextMenuDisplayed">\n                    <div class="ccl-fl-context-menu-dialog-content" data-bind="foreach: { data: items, as: \'item\' }">\n                        <button type="button" class="ccl-fl-context-menu-dialog-content-item" tabindex="0" data-bind="click: item.Action, clickBubble: false, text: item.Text"></button>\n                    </div>\n                </div>\n            </div>\n        '}a.defaultFileItemContextMenuHtmlTag=
"file-item-context-menu";return a}();d.ContextMenuComponent=c})(b.Components||(b.Components={}))})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));(function(b){(function(b){var d=function(){function c(){}c.view="view";c.copy="copy";return c}();b.DropDownConstants=d})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(e){(function(d){var c=function(){function a(a,c){this.fileItem=a;this.items=[{Text:c.Translations.TemplateOptionsStudentsCanView,Value:e.DropDownConstants.view},{Text:c.Translations.TemplateOptionsMakeACopyForEachStudent,Value:e.DropDownConstants.copy}];this.selected=ko.observable(this.items[0].Text);this.show=ko.observable(!1);a=a.Metadata;(a instanceof FileInCloudMetadata||a instanceof UploadMetadata)&&a.isTemplate&&(this.selected=ko.observable(this.items[1].Text),a=this.createTemplateChangedEvent(a.id,
a.isTemplate),document.body.dispatchEvent(a))}a.prototype.selectOption=function(a,c,b,d){c=b.fileItem.Metadata;if(c instanceof FileInCloudMetadata&&2===c.sourceType||c instanceof UploadMetadata)b.fileItem.setTemplate(a.Value===e.DropDownConstants.copy),c=this.createTemplateChangedEvent(c.id,a.Value===e.DropDownConstants.copy),d.dispatchEvent(c);b.selected(a.Text);b.show(!1)};a.prototype.toggle=function(a,c,b){var d=this;if(!a.fileItem.disableTemplateOptionsForItem())if(this.show())this.show(!1);else{b&&
document.body.addEventListener("click",function(a){b.contains(a.target)||(d.show(!1),document.body.removeEventListener("click",function(){}))});a=document.querySelectorAll(".dropdown-container.show");if(0<a.length)for(var e in a)a.hasOwnProperty(e)&&a[e].classList.remove("show");this.show(!this.show());(e=document.querySelector(".dropdown-container.show > ul > li"))&&e.focus()}};a.prototype.handleContainerKeydown=function(a,c,d){return c.which===b.CommonConstants.keyCodes.space||c.which===b.CommonConstants.keyCodes.escape&&
this.show()?(this.toggle(a,c,d),!1):!0};a.prototype.handleRowKeydown=function(a,c,d,e){if(!this.show())return!0;switch(c.which){case b.CommonConstants.keyCodes.arrowDown:return this.moveDown(e),!1;case b.CommonConstants.keyCodes.arrowUp:return this.moveUp(e),!1;case b.CommonConstants.keyCodes.enter:case b.CommonConstants.keyCodes.space:return this.selectOption(a,c,d,e),!1;default:return!0}};a.prototype.createTemplateChangedEvent=function(a,c){return new CustomEvent(e.InternalTriggers.internalFileItemTemplateChanged,
{bubbles:!0,detail:{id:a,isTemplate:c}})};a.prototype.moveDown=function(a){var c=a.nextElementSibling;c||(c=a.parentElement.firstElementChild);c.focus()};a.prototype.moveUp=function(a){var c=a.previousElementSibling;c||(c=a.parentElement.lastElementChild);c.focus()};return a}();d.DropDownViewModel=c})(e.Model||(e.Model={}))})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(b){(function(d){var c=function(){function a(){this.name=a.defaultDropDownHtmlTag;this.viewModel={createViewModel:function(a,c){return new b.Model.DropDownViewModel(a.file,a.settings)}};this.template='\n            <fieldset class="dropdown">\n                <div class="legend-container" tabindex="0" aria-haspopup="true" data-bind="click: function(data, event) { toggle(data, event, $element);} , attr: {\'aria-expanded\': show() }, event: { keydown: function(data,event) { return handleContainerKeydown(data, event, $element);} }">\n                    <legend data-bind="text: selected()"></legend><span class="arrow-down"></span>\n                </div>\n                <div class="dropdown-container" data-bind="css: {\'show\': show }">\n                    <ul class="dropdown-items" data-bind="foreach: items">\n                        <li class="dropdown-item" tabindex="-1" role="option" data-bind="click: function(data, event) { $parent.selectOption(data, event, $parent, $element); }, text: Text, value: Value, event: {keydown: function(data,event) { return $parent.handleRowKeydown(data, event, $parent, $element);} }"></li>\n                    </ul>\n                </div>\n            </fieldset>\n        '}
a.defaultDropDownHtmlTag="templateoptions-dropdown";return a}();d.DropDownComponent=c})(b.Components||(b.Components={}))})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(b){(function(d){var c=function(){function a(a,c,d){var e=this;this.settings=a;this.fileItems=c;this.validator=d;this.addFile=function(a){var c=!1;e.showTemplateOptionsInFilelist()&&(c=e.settings.MimeTypesToTemplateFromUpload.some(function(c){return c===a.mimeType()}),(a.IsFileInCloud&&a.isFileFromGoogleDrive()||a.isUploaded()&&c)&&a.showTemplateOptionsInFilelist(!0));a.validator=e.validator;e.files.push(a);e.lastAddedFile=a;e.showTemplateOptionsInFilelist()&&(a.IsFileInCloud||
c)&&e.updateDisabledStateForTemplateOptionsInFileList()};this.clearFileList=function(){e.files.removeAll();e.lastAddedFile=null};this.removeFile=function(a){e.files.remove(a);a.isFileTemplate()&&e.updateDisabledStateForTemplateOptionsInFileList();if(a.onRemoveCallback)a.onRemoveCallback()};this.getFiles=function(){return e.files()};this.getLastAddedFile=function(){return e.lastAddedFile};this.isVisible=ko.observable(!0);this.files=ko.observableArray(c);this.showTemplateOptionsInFilelist=ko.observable(objectState.isNullOrUndefined(this.settings)?
!1:this.settings.ShowTemplateOptions);this.isEnabledMakeACopyForEachStudent=ko.observable(objectState.isNullOrUndefined(this.settings)?!1:this.settings.IsEnabledMakeACopyForEachStudent);this.selectedTemplate=ko.observable("");document.body.addEventListener(b.InternalTriggers.internalFileItemTemplateChanged,function(a){e.updateDisabledStateForTemplateOptionsInFileList();e.selectedTemplate=a.detail.isTemplate?a.detail.id:""})}a.prototype.updateDisabledStateForTemplateOptionsInFileList=function(){for(var a=
this.isTemplateSelected(),c=0,b=this.files();c<b.length;c++){var d=b[c];if(d.IsFileInCloud){var e=d.Metadata;e=this.settings.DisableTemplateOptions||!e.supportsTemplating&&!e.isTemplate||a&&!e.isTemplate;d.disableTemplateOptionsForItem(e)}else d.Metadata instanceof UploadMetadata&&(e=d.Metadata,e=this.settings.DisableTemplateOptions||a&&!e.isTemplate,d.disableTemplateOptionsForItem(e))}};a.prototype.isTemplateSelected=function(){for(var a=!1,c=0,b=this.files();c<b.length;c++)if(b[c].Metadata.isTemplate){a=
!0;break}return a};return a}();d.FileListViewModel=c})(b.Model||(b.Model={}))})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(b){(function(d){var c=function(){function a(c,b,d){var e=this;void 0===b&&(b=a.defaultFileListHtmlTag);this.settings=c;this.name=b;this.renameValidator=d;this.viewModel={createViewModel:function(a,c){return e.getViewModel(a,c)}};this.template=this.getHtmlTemplate()}a.prototype.getViewModel=function(a,c){c=new b.Model.FileListViewModel(a&&a.settings?a.settings:this.settings,a&&a.files?this.transformFiles(a.files):[],a&&a.renameValidator?a.renameValidator:this.renameValidator);
a&&a.api(c);return c};a.prototype.getHtmlTemplate=function(){return'\n                <div data-bind="foreach: { data: files, as: \'file\' }, visible: isVisible">\n                    <div class="ccl-fl-item-container">\n                        <div data-bind="css: getRowCss()">\n                            <div tabindex="0" data-bind="css: getItemCss(), click: function(file, event) { onItemClick(file, event) }, clickBubble: false" class="ccl-fl-item">\n                                <div data-bind="style: {width: progress() + \'%\'},\n                                    css: isCompleted() ? \'ccl-fl-item-uploaded\' : \'ccl-fl-item-progress-animate\',\n                                    visible: !errorMessage()">\n                                </div>\n                                <div class="ccl-fl-item-content">\n                                    <div data-bind="css: getFileItemCss()">\n                                        <form data-bind="css: getFormCssClasses(), submit: renameFile, visible: isRenaming()">\n                                            <label data-bind="attr: { for: \'ccl-fl-item-\' + $index() }, text: $parent.settings.Translations.WriteANewFileName" style="display: none"></label>\n                                            <input type="text" data-bind="attr: { id: \'ccl-fl-item-\' + $index(), placeholder: $parent.settings.Translations.WriteANewFileName }, hasFocus: isRenaming,  textInput: fileName, click: function() { }, clickBubble: false">\n                                        </form>\n                                        <span data-bind="text: fileName, css: getFileNameCss(), visible: !isRenaming()"></span>\n                                        <span data-bind="visible: fileExtension() && !isRenaming(), text: getFileExtensionText, css: getFileExtensionCss()"></span>\n                                    </div>\n                                    <div data-bind="visible: !isRenaming()">\n                                        <div class="ccl-fl-item-actions">\n                                            \x3c!-- ko template: { nodes: $componentTemplateNodes, data: { file: file, settings: $parent.settings }, if: $parent.settings.EnableContextMenu && !$parent.settings.NoInteraction} --\x3e\x3c!-- /ko --\x3e\n                                    <div data-bind="visible: !$parent.settings.DisableRemove && isRemoveAllowed() && !(isFileTemplate() && $parent.settings.DisableTemplateOptions)">\n                                                <button data-bind="click: function() { $parent.removeFile(file) }, css: getRemoveButtonCss(), attr: { \'aria-label\': $parent.settings.Translations.Delete }"></button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="ccl-fl-item-template-options" data-bind="visible: $parent.showTemplateOptionsInFilelist && showTemplateOptionsForItem(), css: disableTemplateOptionsForItem() ? \'disabled\' : \'\'">\n                                <templateoptions-dropdown params="file: $data, settings: $parent.settings"></templateoptions-dropdown>\n                            </div>\n\n                            <div class="ccl-fl-warning" data-bind="visible: warningMessage()">\n                                <div class="ili ili-exclamation-circle ccl-fl-warning-exclamation-circle" aria-hidden="true"></div>\n                                <div class="ccl-fl-warning-message" data-bind="text: warningMessage"></div>\n                            </div>\n\n                            <div class="ccl-fl-item-right-placeholder" data-bind="visible: rightSideCustomHtml(), html: rightSideCustomHtml"></div>\n                        </div>\n                        <div class="ccl-fl-error" data-bind="visible: errorMessage()">\n                            <div class="ccl-fl-error-message" data-bind="text: errorMessage"></div>\n                        </div>\n                    </div>\n                </div>'};
a.prototype.transformFiles=function(a){var c=this;return ko.utils.arrayMap(a,function(a){var d=new b.Model.FileName(a.Name);a=new b.Model.FileItem({fileName:d,stateMachine:new b.Model.FileItemStateMachine,metadata:a.Metadata,iconCssClass:a.IsFileInCloud?b.Model.FileItem.getCssIconForFileInCloud(a.Metadata):b.Model.FileItem.getCssIconForFile(b.Model.FileItem.getFilePurpose(d.getExtension())),previewSettings:a.PreviewSettings,noInteraction:c.settings.NoInteraction,rightSideCustomHtml:a.RightSideCustomHtml,
isViewableInOfficeOnline:a.IsViewableInOfficeOnline,snapshotFileRepoSignature:a.SnapshotFileRepoSignature,snapshotFileRepoId:a.SnapshotFileRepoId,snapshotFileId:a.SnapshotFileId,snapshotFileUrl:a.SnapshotFileUrl,customContextMenuItems:a.CustomContextMenuItems});a.markAsUploaded();a.markAsCompleted();return a})};a.defaultFileListHtmlTag="file-list";return a}();d.FileListComponent=c})(b.Components||(b.Components={}))})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(b){(function(b){var c=function(a){function c(b,d){void 0===d&&(d=c.defaultNestedFileListHtmlTag);a.call(this,b.settings,d);this.fileList=b;this.name=d}__extends(c,a);c.prototype.getViewModel=function(a,c){return this.fileList};c.defaultNestedFileListHtmlTag="nested-file-list";return c}(b.FileListComponent);b.NestedFileListComponent=c})(b.Components||(b.Components={}))})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(b){var d=function(){function c(a,c){var d=this;void 0===a&&(a={});void 0===c&&(c=void 0);this.params=a;this.renameValidator=c;this.Settings={EnableContextMenu:!1,IsEnabledMakeACopyForEachStudent:!1,NoInteraction:!1,ShowTemplateOptions:!1,DisableDownload:!0,DisableEdit:!0,DisableView:!0,DisableRemove:!0,DisableRename:!0,DisableFileListControlItemClick:!1,ShowGoogleLinks:!0,ShowOneDriveLinks:!0,DownloadEndpointUrl:void 0,ViewEditEndpointUrl:void 0,MimeTypesToEdit:[],MimeTypesToView:[],
TemplateTokens:void 0,ShouldApplyKnockoutBindings:!0,ContainerClientId:void 0,HtmlTagName:this.defaultHtmlTagName,Translations:{},Triggers:{},AdditionalMimeTypesOpenedInPopup:[],EmbedVideoMimeTypes:[],OwasMimeTypes:[],GoogleMimeTypes:[]};this.api=ko.observable();this.handleItemSelected=function(a){a.stopPropagation();d.Settings.DisableFileListControlItemClick||d.dispatchExternalEvent(d.getFileItemFromInternalEvent(a),d.Settings.Triggers.FileItemSelected,d.Settings.ShouldTriggerItemSelected,function(a){d.previewer.openPreview(a)})};
this.handleItemViewActivated=function(a,c){void 0===c&&(c=!1);a.stopPropagation();d.dispatchExternalEvent(d.getFileItemFromInternalEvent(a),c?d.Settings.Triggers.FileItemViewOriginalActivated:d.Settings.Triggers.FileItemViewActivated,d.Settings.ShouldTriggerItemViewActivated,function(a){d.previewer.openView(a,c)})};this.handleItemEditActivated=function(a){a.stopPropagation();d.dispatchExternalEvent(d.getFileItemFromInternalEvent(a),d.Settings.Triggers.FileItemEditActivated,d.Settings.ShouldTriggerItemEditActivated,
function(a){d.previewer.openEdit(a)})};this.handleItemDownloadActivated=function(a){a.stopPropagation();d.dispatchExternalEvent(d.getFileItemFromInternalEvent(a),d.Settings.Triggers.FileItemDownloadActivated,d.Settings.ShouldTriggerItemDownloadActivated,function(a){d.previewer.download(a)})};Object.assign(this.Settings,a);this.validatePrerequisiteSettings();this.container=document.getElementById(this.Settings.ContainerClientId);contract.require(!objectState.isNullOrUndefined(this.container),"No parent container element with ContainerClientId="+
this.Settings.ContainerClientId+" has been found.");this.previewer=new b.PreviewerControl(this.Settings,new b.Model.FileItemActions(this.Settings));this.attachListeners()}Object.defineProperty(c.prototype,"defaultHtmlTagName",{get:function(){return"file-list"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"htmlTagName",{get:function(){return this.Settings.HtmlTagName},enumerable:!0,configurable:!0});c.prototype.addFile=function(a){this.api&&this.api().addFile(a)};c.prototype.clearFileList=
function(){this.api&&this.api().clearFileList()};c.prototype.removeFile=function(a){this.api&&this.api().removeFile(a)};c.prototype.getFiles=function(){return this.api?this.api().getFiles():[]};c.prototype.getLastAddedFile=function(){return this.api?this.api().getLastAddedFile():null};c.prototype.dispose=function(){ko.components.unregister(this.htmlTagName);ko.components.unregister(b.Components.ContextMenuComponent.defaultFileItemContextMenuHtmlTag);ko.components.unregister(b.Components.DropDownComponent.defaultDropDownHtmlTag);
this.container&&ko.cleanNode(this.container)};c.prototype.validatePrerequisiteSettings=function(){contract.require(!objectState.isNullOrUndefined(this.Settings.ContainerClientId),"File list control requires a parent container element with correct ContainerClientId. Passed ContainerClientId is "+this.Settings.ContainerClientId);this.Settings.DisableRename||contract.require(!objectState.isNullOrUndefined(this.renameValidator),"Rename functionality of the control requires 'RenameValidator' parameter.");
this.Settings.DisableDownload||contract.require(!objectState.isNullOrUndefined(this.Settings.DownloadEndpointUrl),"Download file functionality of the control requires 'DownloadEndpointUrl' to be supplied.");this.Settings.DisableEdit&&this.Settings.DisableView||contract.require(!objectState.isNullOrUndefined(this.Settings.ViewEditEndpointUrl),"Edit file functionality of the control requires 'EditEndpointUrl' to be supplied.")};c.prototype.initializeContextMenuComponent=function(){this.registerComponent(b.Components.ContextMenuComponent.defaultFileItemContextMenuHtmlTag,
function(){return new b.Components.ContextMenuComponent})};c.prototype.initializeTemplateOptionDropdownComponent=function(){this.registerComponent(b.Components.DropDownComponent.defaultDropDownHtmlTag,function(){return new b.Components.DropDownComponent})};c.prototype.registerComponent=function(a,c){ko.components.isRegistered(a)||(a=c(),ko.components.register(a.name,a))};c.prototype.attachListeners=function(){var a=this;this.container.addEventListener(b.InternalTriggers.internalFileItemSelected,function(c){return a.handleItemSelected(c)});
this.container.addEventListener(b.InternalTriggers.internalFileItemViewActivated,function(c){return a.handleItemViewActivated(c)});this.container.addEventListener(b.InternalTriggers.internalFileItemViewOriginalActivated,function(c){return a.handleItemViewActivated(c,!0)});this.container.addEventListener(b.InternalTriggers.internalFileItemEditActivated,function(c){return a.handleItemEditActivated(c)});this.container.addEventListener(b.InternalTriggers.internalFileItemDownloadActivated,function(c){return a.handleItemDownloadActivated(c)})};
c.prototype.dispatchExternalEvent=function(a,c,b,d){this.Settings.Triggers&&c&&a&&(b&&a.PreviewSettings.Type&&0!==a.PreviewSettings.Type?this.container.dispatchEvent(new CustomEvent(c,{detail:{File:a,DefaultHandler:function(){d(a)}}})):d(a))};c.prototype.getFileItemFromInternalEvent=function(a){return(a=a.detail)?a.File:void 0};return c}();b.BaseFileListControl=d})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(b){var d=function(c){function a(a,b){void 0===a&&(a={});void 0===b&&(b=void 0);c.call(this,a,b);this.initializeFileListComponent(this.Settings,this.Settings.HtmlTagName)}__extends(a,c);Object.defineProperty(a.prototype,"defaultHtmlTagName",{get:function(){return b.Components.FileListComponent.defaultFileListHtmlTag},enumerable:!0,configurable:!0});a.prototype.initialize=function(a){var c=this;void 0===a&&(a=[]);a=a.filter(function(a){return c.showCloudLinks||a.IsFileInCloud===
c.showCloudLinks});0<a.length&&(0===this.container.getElementsByTagName(this.Settings.HtmlTagName).length&&this.container.appendChild(this.createElement(this.Settings.HtmlTagName,this.Settings,a)),this.Settings.ShouldApplyKnockoutBindings&&ko.applyBindings(this,this.container))};a.prototype.initializeFileListComponent=function(a,c){a&&a.EnableContextMenu&&!a.NoInteraction&&this.initializeContextMenuComponent();a&&a.ShowTemplateOptions&&this.initializeTemplateOptionDropdownComponent();this.registerComponent(a.HtmlTagName,
function(){return new b.Components.FileListComponent(a,c)})};a.prototype.createElement=function(a,c,d){a=window.document.createElement(a);a.setAttribute("params","settings: "+JSON.stringify(c)+", files: "+JSON.stringify(d)+", api: api");c=window.document.createElement(b.Components.ContextMenuComponent.defaultFileItemContextMenuHtmlTag);c.setAttribute("params","file: $data.file, settings: $data.settings");a.appendChild(c);return a};Object.defineProperty(a.prototype,"showCloudLinks",{get:function(){return this.Settings.ShowGoogleLinks||
this.Settings.ShowOneDriveLinks},enumerable:!0,configurable:!0});return a}(b.BaseFileListControl);b.FileListControl=d})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));
(function(b){(function(b){var d=function(c){function a(a,d){void 0===a&&(a={});void 0===d&&(d=void 0);c.call(this,a,d);this.api=ko.observable(new b.Model.FileListViewModel(this.Settings,[],this.renameValidator));this.initializeSharedFileListComponent(this.api())}__extends(a,c);Object.defineProperty(a.prototype,"defaultHtmlTagName",{get:function(){return b.Components.NestedFileListComponent.defaultNestedFileListHtmlTag},enumerable:!0,configurable:!0});a.prototype.initializeSharedFileListComponent=
function(a){a.settings&&a.settings.EnableContextMenu&&!a.settings.NoInteraction&&this.initializeContextMenuComponent();a.settings&&a.settings.ShowTemplateOptions&&this.initializeTemplateOptionDropdownComponent();this.registerComponent(a.settings.HtmlTagName,function(){return new b.Components.NestedFileListComponent(a,a.settings.HtmlTagName)})};return a}(b.BaseFileListControl);b.NestedFileListControl=d})(b.FileList||(b.FileList={}))})(CCL||(CCL={}));var PickerPurpose;
(function(b){b[b.Upload=0]="Upload";b[b.LinkToCloud=1]="LinkToCloud";b[b.Combined=2]="Combined"})(PickerPurpose||(PickerPurpose={}));var PickerInitFailureReason;(function(b){b[b.BrowserNotSupported=1]="BrowserNotSupported";b[b.ExternalServiceNotAvailable=2]="ExternalServiceNotAvailable"})(PickerInitFailureReason||(PickerInitFailureReason={}));
var PickerInitFailureEventArgs=function(){return function(b,e,d){this.failureReason=b;this.failureMessage=e;this.pickerName=d}}(),PickerCallback=function(){return function(b,e,d,c){this.onPickerInitSuccess=b;this.onPickerInitFailure=e;this.onFileSelected=d;this.onFileSelectionCanceled=c}}(),PickerResult=function(){function b(b,d){this.files=b;this.authToken=d}b.prototype.setOAuthContext=function(b){this.oAuthContext=b};b.prototype.getOAuthContext=function(){return this.oAuthContext};return b}(),MediaRecorderPicker=
function(){function b(b,d,c){var a=this;this.settings=b;this.translations=d;this.jq=c;this.subscriberCallbacks=[];this.actionMenu=null;this.open=function(){};this.subscribe=function(c){if(c.onPickerInitSuccess)c.onPickerInitSuccess();a.subscriberCallbacks.push(c)};this.enableMultipleFilesSelecting=function(){a.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){a.allowToSelectMultipleFiles=!1};this.startRecordAudioFeedback=function(){a.openRecordDialog(a.settings.MediaRecorderAudioUrl)};
this.startRecordVideoFeedBack=function(){a.openRecordDialog(a.settings.MediaRecorderVideoUrl)};this.listenForPostMessages=function(){window.addEventListener("message",a.onContentSaved);window.addEventListener("message",a.onMediaRecorderClosed)};this.onContentSaved=function(c){a.isPostMessageForUs(c,CCL.CommonWindowMessages.MessageNames.mediaRecorderContentSaved)&&(c=JSON.parse(c.data))&&c.extendedData&&a.processPostMessage(c.extendedData)};this.onMediaRecorderClosed=function(c){a.isPostMessageForUs(c,
CCL.CommonWindowMessages.MessageNames.mediaRecorderClosed)&&(c=window[a.settings.MediaRecorderDialogInstanceName])&&c.getIsOpened()&&CssModal.closeDialog()};this.isPostMessageForUs=function(a,c){return a&&a.data?(a="string"===typeof a.data?CCL.CommonFunctions.safeParseJson(a.data):a.data)&&a.messageName&&a.messageName===c:!1};contract.require(!objectState.isNullOrUndefined(b),"This media recorder picker requires 'settings' to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(d),
"This media recorder picker requires 'translations' to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(c),"This media recorder picker requires 'jquery' to be passed. Please provide it.");this.listenForPostMessages()}b.prototype.initActionMenu=function(){if(this.actionMenu)return this.actionMenu;var b=new CCL.ActionMenuSettings;b.MenuZIndex=5E3;var d=new CCL.ActionMenuItem("<span class='ccl-picker-media-recorder-audio-item-link'>"+this.translations.MediaRecorderRecordAudio+
"</span>","",this.startRecordAudioFeedback),c=new CCL.ActionMenuItem("<span class='ccl-picker-media-recorder-video-item-link'>"+this.translations.MediaRecorderRecordVideo+"</span>","",this.startRecordVideoFeedBack);return this.actionMenu=new CCL.ActionMenu("ccl-picker-media-recorder-link-id",[d,c],b)};b.prototype.dispose=function(){window.removeEventListener("message",this.onContentSaved);window.removeEventListener("message",this.onMediaRecorderClosed)};b.prototype.openRecordDialog=function(b){var d=
window[this.settings.MediaRecorderDialogInstanceName];d.setTitle(this.translations.MediaRecorderModalDialogTitle);d.openDialog(!1);d.setIframeUrl(b,!1)};b.prototype.processPostMessage=function(b){b=PickerFileResult.createExternalSourcePickerFileResult(b.url,b.name,b.size,SourceType.Ziggeo,null,b.id);b=new PickerResult([b]);for(var d=0,c=this.subscriberCallbacks;d<c.length;d++){var a=c[d];if(a.onFileSelected)a.onFileSelected(b)}};return b}(),PickerInitStatus;
(function(b){b[b.InProgress=0]="InProgress";b[b.Success=1]="Success";b[b.Error=2]="Error"})(PickerInitStatus||(PickerInitStatus={}));var FileUploadState;(function(b){b[b.New=0]="New";b[b.Ready=1]="Ready";b[b.InProgress=2]="InProgress";b[b.Aborting=3]="Aborting";b[b.Error=4]="Error";b[b.Success=5]="Success"})(FileUploadState||(FileUploadState={}));
var Url=function(){return function(b){var e=this;this.value=b;this.getParamValue=function(b){for(var c=[],a,d=e.value.slice(e.value.indexOf("?")+1).split("&"),g=0;g<d.length;g++)a=d[g].split("="),c.push(a[0]),c[a[0]]=a[1];return c[b]};this.appendOrUpdateParam=function(b,c){var a=new RegExp("([?&])"+b+"=.*?(&|$)","i"),d=-1!==e.value.indexOf("?")?"&":"?";e.value.match(a)?e.value=e.value.replace(a,"$1"+b+"="+c+"$2"):e.value=e.value+d+b+"="+c}}}();
function GuidFactory(){return{newGuid:function(){function b(b){var d=(Math.random().toString(16)+"000000000").substr(2,8);return b?"-"+d.substr(0,4)+"-"+d.substr(4,4):d}return b()+b(!0)+b(!0)+b()}}}
var guidFactory=GuidFactory(),PickerInPopup=function(){function b(){var e=this;this.popupWidth=660;this.popupHeight=552;this.pickerWindow=null;this.open=function(){e.pickerWindowIsAlreadyOpened()?e.pickerWindow.focus():e.pickerWindow=window.open(e.getPickerUrlWithTarget(),e.getInitialPopupTitle(),e.getPopupWindowSettings())};this.listenForPostMessages=function(){window.addEventListener("message",e.onPostMessageReceived)};this.pickerWindowIsAlreadyOpened=function(){return e.pickerWindow&&!e.pickerWindow.closed};
this.getPickerUrlWithTarget=function(){var d=new Url(e.getPickerUrl());if(d.getParamValue(b.target))throw"You cannot set query parameter: ["+b.target+"] in getPickerUrl function.";d.appendOrUpdateParam(b.target,encodeURI(e.pickerIdentifier));return d.value};this.getPopupWindowSettings=function(){var b=e.getPopupCoordinates();return"width="+b[0]+", height="+b[1]+", left="+b[2]+", top="+b[3]+", toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes"};this.getPopupCoordinates=function(){return[e.popupWidth,
e.popupHeight,e.getWindowLeftCoordinate(),e.getWindowTopCoordinate()]};this.getWindowLeftCoordinate=function(){return window.screenX+(window.outerWidth-e.popupWidth)/2};this.getWindowTopCoordinate=function(){return(window.screenY+window.outerHeight-e.popupHeight)/2};this.onPostMessageReceived=function(b){e.isPostMessageForUs(b)&&e.processPostMessage(b)};this.isPostMessageForUs=function(d){return d&&d.data&&d.data[b.target]===e.pickerIdentifier};this.pickerIdentifier=guidFactory.newGuid();this.listenForPostMessages()}
b.target="target";return b}(),WebDavPicker=function(b){function e(d,c,a,e,g){var f=this;void 0===g&&(g={purpose:PickerPurpose.Upload,allowToSelectMultipleFiles:!1,allowCollaboration:!1});b.call(this);this.settings=d;this.browserSniffer=c;this.browserNotSupportedErrorTranslation=a;this.modeSerializer=e;this.mode=g;this.subscriberCallbacks=[];this.subscribe=function(a){f.raiseInitCallback(a);f.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=
!0};this.disableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=!1};this.isProxyIframeRequired=function(){return f.browserSniffer.isInternetExplorerAnyVersion()&&f.settings.crossCommunicationProxyUrl};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("webdav_proxy")){var a=f.prepareIframe("webdav_proxy");document.body.appendChild(a)}};this.prepareIframe=function(a){var c=document.createElement("iframe");c.id=a;c.style.display="none";c.src=f.settings.crossCommunicationProxyUrl;
return c};this.raiseInitCallback=function(a){if(f.browserSniffer.isInternetExplorer9()){var c=new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,f.browserNotSupportedErrorTranslation,UploadControlTranslation.webDav);a.onPickerInitFailure(c)}else a.onPickerInitSuccess()};if(objectState.isNullOrUndefined(this.settings))throw"WebDavPicker requires settings to be passed. Please provide them.";if(objectState.isNullOrUndefined(this.browserSniffer))throw"WebDavPicker requires browserSniffer to be passed. Please provide a handle to it.";
if(objectState.isNullOrUndefined(this.browserNotSupportedErrorTranslation))throw"WebDavPicker requires browserNotSupportedErrorTranslation to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.modeSerializer))throw"WebDavPicker requires modeSerializer to be passed. Please provide it.";this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered()}__extends(e,b);e.prototype.processPostMessage=function(b){if(b.origin===this.settings.pickerDomain){b=b.data.files.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.url,
a.name,a.size,SourceType.WebDav,a.mimeType)});b=new PickerResult(b);for(var c=0,a=this.subscriberCallbacks;c<a.length;c++){var d=a[c];if(d.onFileSelected)d.onFileSelected(b)}}};e.prototype.getPickerUrl=function(){var b=new Url(this.settings.pickerUrl);b.appendOrUpdateParam("mode",this.modeSerializer.serialize(this.mode));return b.value};e.prototype.getInitialPopupTitle=function(){return"WebDav"};e.create=function(b,c,a,f){return new e(b,c,"",a,f)};return e}(PickerInPopup),FileInFolder=function(){return function(b){this.result=
b;this.error=null}}(),FolderMetadata=function(){return function(b){this.name=b;this.files=[];this.folders=[]}}(),Folder=function(){return function(b,e){var d=this;this.name=b;this.path=e;this.error=null;this.getFolderMetadata=function(){for(var c=new FolderMetadata(d.name),a=0,b=d.files;a<b.length;a++){var e=b[a];null===e.error&&c.files.push(e.metadata)}a=0;for(b=d.folders;a<b.length;a++)e=b[a],null===e.error&&0!==e.getFilesWithoutValidationErrors().length&&(e=e.getFolderMetadata(),c.folders.push(e));
return c};this.getFilesWithoutValidationErrors=function(){return d.getFiles().filter(function(c){return!c.error})};this.isAnyErrorInFolder=function(){if(d.error)return!0;for(var c=0,a=d.files;c<a.length;c++)if(a[c].error)return!0;c=0;for(a=d.folders;c<a.length;c++)if(a[c].isAnyErrorInFolder())return!0;return!1};this.getFiles=function(){if(d.error)return[];var c=d.files;d.folders.forEach(function(a){a=a.getFiles();c=c.concat(a)});return c};this.folders=[];this.files=[]}}(),ActionQueue=function(){return function(b){var e=
this;this.maxNumberOfConcurrentActions=b;this.queue=[];this.numberOfActionsInProgress=0;this.register=function(b){e.maxNumberOfConcurrentActionsNotReached()?(b(),e.numberOfActionsInProgress++):e.queue.push(b)};this.remove=function(b){e.queue=e.queue.filter(function(c){return c!==b})};this.signalDone=function(){0!==e.numberOfActionsInProgress&&(e.numberOfActionsInProgress--,e.elementsWaiting()&&e.maxNumberOfConcurrentActionsNotReached()&&e.startNextAction())};this.clear=function(){e.queue=[]};this.startNextAction=
function(){e.numberOfActionsInProgress++;e.queue.shift()()};this.elementsWaiting=function(){return 0<e.queue.length};this.maxNumberOfConcurrentActionsNotReached=function(){return e.numberOfActionsInProgress<e.maxNumberOfConcurrentActions}}}(),GenericUploader;
(function(b){(function(b){(function(b){var c=function(){return function(a){var c=this;this.jq=a;this.jqueryUploadControl=null;this.startUpload=function(a,b){c.jqueryUploadControl||(c.jqueryUploadControl=c.jq('<input type="file" />'),c.jqueryUploadControl.fileupload(a));c.jqueryUploadControl.fileupload("add",b)};contract.require(!objectState.isNullOrUndefined(a),"argument 'jq' is not defined")}}();b.HtmlUploadInputHandler=c})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||
(b.Sender={}))})(GenericUploader||(GenericUploader={}));(function(b){(function(b){(function(b){var c=function(){return function(){}}();b.Callbacks=c})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){(function(a){var c=function(){function a(a,c,b){var d=this;this.isIe9=a;this.validationHeader=c;this.callbacks=b;this.add=function(a,c){d.isIe9||(c.headers=d.getHeadersForFileRepo(),c.crossDomain=!0);d.callbacks.onFileSelected(function(){c.abort()});c.submit()};contract.require(!objectState.isNullOrUndefined(a),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'validationHeader' is not defined");contract.require(!objectState.isNullOrUndefined(b),
"argument 'callbacks' is not defined")}a.prototype.getHeadersForFileRepo=function(){return{"X-Public-Upload":"1","X-Customer-Validations":this.validationHeader,"X-Authorization-FileRepoToken":"Bearer "+this.token}};return a}();a.Add=c})(c.Action||(c.Action={}))})(b.FileInput||(b.FileInput={}))})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){(function(a){var c=function(){return function(a){var c=this;this.callbacks=a;this.progress=function(a,b){c.callbacks.onUploadProgress(b.loaded/b.total*100)};contract.require(!objectState.isNullOrUndefined(a),"argument 'callbacks' is not defined")}}();a.ProgressAll=c})(c.Action||(c.Action={}))})(b.FileInput||(b.FileInput={}))})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader=
{}));
(function(b){(function(b){(function(b){(function(c){(function(a){var c=function(){return function(a,c){var b=this;this.errorResponseTranslator=a;this.callbacks=c;this.done=function(a,c){if(b.isDoneReallyAFail(c))a=b.errorResponseTranslator.getErrorMessageFromErrorCode(c.result.Error),b.callbacks.onSendFailure(a);else b.callbacks.onSendSuccess(b.file,c.result)};this.isDoneReallyAFail=function(a){return b.isIframeTransportUsed(a)&&"undefined"!==typeof a.result&&null!=a.result.Error?!0:!1};this.isIframeTransportUsed=function(a){return a.dataType&&
"iframe"===a.dataType.substr(0,6)};contract.require(!objectState.isNullOrUndefined(a),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'callbacks' is not defined")}}();a.Done=c})(c.Action||(c.Action={}))})(b.FileInput||(b.FileInput={}))})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){(function(a){var c=function(){function a(a,c){var b=this;this.errorResponseTranslator=a;this.callbacks=c;this.fail=function(a,c){if(b.isFileUploadAborted(c.errorThrown)){if(b.callbacks.onAbortSuccess)b.callbacks.onAbortSuccess()}else a=b.getErrorMessageFromResponse(c),b.callbacks.onSendFailure(a)};contract.require(!objectState.isNullOrUndefined(a),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(c),
"argument 'callbacks' is not defined")}a.prototype.isFileUploadAborted=function(a){return"abort"===a};a.prototype.getErrorMessageFromResponse=function(a){var c=this.errorResponseTranslator.getErrorMessageFromResponse(a);null==c&&a.xhr&&(c=this.getErrorMesageFromXhr(a.xhr()));return c};a.prototype.getErrorMesageFromXhr=function(a){if(a.responseText)try{var c=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(c.errorMessage))return c.errorMessage}catch(l){}return a.statusText};return a}();
a.Fail=c})(c.Action||(c.Action={}))})(b.FileInput||(b.FileInput={}))})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){var a=function(){return function(a,c,b,d){this.addAction=a;this.progressAction=c;this.doneAction=b;this.failAction=d;contract.require(!objectState.isNullOrUndefined(a),"argument 'addAction' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'progressAllAction' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'doneAction' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'failAction' is not defined")}}();
c.Actions=a})(b.FileInput||(b.FileInput={}))})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){var a=function(){function a(a,c,b,d,e){var f=this;this.isIe9=a;this.endpoint=c;this.validationHeader=b;this.redirectUrl=d;this.actions=e;this.build=function(a,c){var b={};contract.require(!objectState.isNullOrUndefined(a),"argument 'file' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'token' is not defined");f.actions.doneAction.file=a;f.actions.addAction.token=c;b.url=f.createUrl(c);b.dataType="json";b.add=f.actions.addAction.add;
b.progressall=f.actions.progressAction.progress;b.fail=f.actions.failAction.fail;b.done=f.actions.doneAction.done;b.dropZone=null;return b};this.createUrl=function(a){return f.isIe9?f.getUrlWithValidationParamsInQueryString(f.endpoint,f.getIframeUploadQueryStringParameters(a)):f.endpoint};contract.require(!objectState.isNullOrUndefined(a),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'endpoint' is not defined");contract.require(!objectState.isNullOrUndefined(b),
"argument 'validationHeader' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'actions' is not defined")}a.prototype.getIframeUploadQueryStringParameters=function(a){return{"X-Public-Upload":"1","X-Customer-Validations":this.validationHeader,"X-Authorization-FileRepoToken":"Bearer "+a,redirectUrl:this.redirectUrl}};a.prototype.getUrlWithValidationParamsInQueryString=function(a,c){c=$.param(c);var b=-1===a.indexOf("?");return a+(b?"?":"&")+c};return a}();c.ConfigurationBuilder=
a})(b.FileInput||(b.FileInput={}))})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));(function(b){var e=function(){return function(){}}();b.SenderCallbacks=e})(GenericUploader||(GenericUploader={}));(function(b){var e=function(){return function(b,c){this.file=b;this.uploadStateChannelId=c}}();b.RequestToSender=e})(GenericUploader||(GenericUploader={}));
var UploaderSenderOptions=function(){return function(b){var e=this;this.editableOptions=b;this.dictionary={};this.hasChanged=!1;this.addParameter=function(b,c){e.hasChanged=!0;e.url.addSearch(b,c)};this.addDictionaryParameter=function(b,c){e.dictionary[b]=c};this.getDictionaryParameter=function(b){return e.dictionary[b]};this.getProcessedOptions=function(){return{url:e.url.normalizeSearch().toString()}};contract.require(!objectState.isNullOrUndefined(b),"argument 'editableOptions' is not defined");
this.url=URI(this.editableOptions.url).normalizeSearch()}}();
(function(b){(function(b){(function(b){var c=function(){function a(a,c,b,d,e){var f=this;this.isIe9=a;this.inputHandler=c;this.callbacks=b;this.configurationBuilder=d;this.tokenProviderEndpoint=e;this.send=function(a,c,b,d){f.callbacks.onFileSelected=f.fileSelected;f.callbacks.onSendSuccess=b;f.callbacks.onSendFailure=d;f.callbacks.onUploadProgress=c;$.getJSON(f.tokenProviderEndpoint+"?FileName="+encodeURIComponent(a.file.name),function(c){c=f.configurationBuilder.build(a.file,c);var b=f.createRequestContent(a.file);
f.inputHandler.startUpload(c,b)});return{abort:f.abort}};this.createRequestContent=function(a){var c={};f.isIe9?c.fileInput=a.getFileHandle():c.files=[a.getFileHandle()];return c};this.fileSelected=function(a){f.abortUpload=a};this.abort=function(a){f.callbacks.onAbortSuccess=a;f.abortUpload()};contract.require(!objectState.isNullOrUndefined(a),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'localFileInputHander' is not defined");contract.require(!objectState.isNullOrUndefined(b),
"argument 'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'optionsBuilder' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'tokenProviderEndpoint' is not defined")}a.prototype.getOptions=function(){return null};return a}();b.Sender=c})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){var c=b.FileInput.Action.Add,a=b.FileInput.Action.ProgressAll,d=b.FileInput.Action.Done,e=b.FileInput.Action.Fail,h=b.FileInput.Actions,k=b.FileInput.ConfigurationBuilder,l=function(){return function(f,g,l){var m=this;this.errorResponseTranslator=g;this.fileRepoData=l;this.build=function(){var f=new b.HtmlUploadInputHandler($),g=new b.Callbacks,l=new c(m.isIe9,m.fileRepoData.ValidationHeader,g),n=new a(g),p=new d(m.errorResponseTranslator,g),q=new e(m.errorResponseTranslator,
g);l=new h(l,n,p,q);l=new k(m.isIe9,m.fileRepoData.Endpoint,m.fileRepoData.ValidationHeader,m.fileRepoData.RedirectUrl,l);return new b.Sender(m.isIe9,f,g,l,m.fileRepoData.TokenProviderEndpoint)};contract.require(!objectState.isNullOrUndefined(f),"argument 'browserSniffer' is not defined");contract.require(!objectState.isNullOrUndefined(g),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(l),"argument 'fileRepoData' is not defined");this.isIe9=f.isInternetExplorer9()}}();
b.Factory=l})(b.FileRepoSenderForLocalFiles||(b.FileRepoSenderForLocalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(e){(function(d){var c=function(){function a(a,c){var d=this;this.actionQueue=a;this.senderFactory=c;this.abortActions=[];this.send=function(a,c,b){d.onUploadProgress=c;d.onSendCompleted=b;d.folder=a;d.filesToUpload=a.getFilesWithoutValidationErrors();d.numberOfFilesToUpload=d.filesToUpload.length;d.uploadedFiles=0;d.filesToUpload.forEach(function(a){d.actionQueue.register(function(){d.sendFile(a)})});return{abort:d.abort}};this.sendFile=function(a){var c=new b.RequestToSender(a.result),
e=d.senderFactory.build().send(c,function(){},function(c,b){d.fileSendingSuccess(a,c,b)},function(c){d.fileSendingFailure(a,c)});d.addAbortAction(a,function(){e.abort()})};this.createRequestContent=function(a){var c={};c.files=a.map(function(a){return a.getFileHandle()});return c};this.fileSendingSuccess=function(a,c,b){a.metadata=UploadMetadata.create(c,b);d.fileUploadEnded(a)};this.fileSendingFailure=function(a,c){a.error=c;d.fileUploadEnded(a)};this.fileUploadEnded=function(a){d.uploadedFiles++;
d.updateProgress();d.removeAbortAction(a);d.actionQueue.signalDone();if(d.allFilesUploaded())d.onSendCompleted(d.folder)};this.removeAbortAction=function(a){d.abortActions=d.abortActions.filter(function(c){return c.file!==a})};this.addAbortAction=function(a,c){d.abortActions.push({file:a,action:c})};this.allFilesUploaded=function(){return d.uploadedFiles===d.numberOfFilesToUpload};this.updateProgress=function(){d.onUploadProgress(d.uploadedFiles/d.numberOfFilesToUpload*100)};this.abort=function(a){d.actionQueue.clear();
d.abortActions.forEach(function(a){a.action()});a()};contract.require(!objectState.isNullOrUndefined(this.actionQueue),"argument 'actionQueue' is not defined");contract.require(!objectState.isNullOrUndefined(this.senderFactory),"argument 'senderFactory' is not defined")}a.prototype.getOptions=function(){return null};return a}();d.FolderSender=c})(e.FileRepoSenderForLocalFolders||(e.FileRepoSenderForLocalFolders={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){var c=function(){return function(a){var c=this;this.fileRepoForLocalFilesFactory=a;this.build=function(){var a=new ActionQueue(2);return new b.FolderSender(a,c.fileRepoForLocalFilesFactory)}}}();b.Factory=c})(b.FileRepoSenderForLocalFolders||(b.FileRepoSenderForLocalFolders={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
var FolderValidator=function(){function b(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'validators' cannot be null or undefined");this.validators=b}b.prototype.validateFolder=function(b){for(var d=0,c=this.validators;d<c.length;d++){var a=c[d];if(!objectState.isNullOrUndefined(a)&&(a=a.validateFolder(b),!a.isValid()))return a}return new ValidationResult(ValidationStatus.Ok)};return b}(),IllegalCharactersValidator=function(){function b(b){this.illegalCharacters=b}b.prototype.validateFile=
function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file' cannot be null or undefined");if(objectState.isNullOrUndefined(b.name))return new ValidationResult(ValidationStatus.Inconclusive);if(objectState.isNullOrUndefined(this.illegalCharacters)||0===this.illegalCharacters.length)return new ValidationResult(ValidationStatus.Ok);b=this.getInvalidCharactersFromFilename(b.name);return 0<b.length?new ValidationResult(ValidationStatus.FilenameContainsIllegalCharacters,b):new ValidationResult(ValidationStatus.Ok)};
b.prototype.getInvalidCharactersFromFilename=function(b){for(var d=[],c=0,a=this.illegalCharacters;c<a.length;c++){var e=a[c];e&&-1<b.indexOf(e)&&d.push(e)}return d.filter(function(a,c){return d.indexOf(a)===c})};return b}(),RestrictedFileNameValidator=function(){function b(b){this.restrictedFileNames=b}b.prototype.validateFile=function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file' cannot be null or undefined");if(objectState.isNullOrUndefined(b.name))return new ValidationResult(ValidationStatus.Inconclusive);
if(objectState.isNullOrUndefined(this.restrictedFileNames)||0===this.restrictedFileNames.length)return new ValidationResult(ValidationStatus.Ok);b=b.name.split(".")[0];for(var d=0,c=this.restrictedFileNames;d<c.length;d++){var a=c[d];if(a&&b.toUpperCase()===a.toUpperCase())return new ValidationResult(ValidationStatus.FileNameIsIllegal,a)}return new ValidationResult(ValidationStatus.Ok)};return b}(),FolderValidatorFactory=function(){function b(){}b.prototype.createFileValidator=function(b){b=[new NameLengthValidator(b.maxFileNameLength)];
return new FolderValidator(b)};b.prototype.createFileValidatorWithLocalizedMessages=function(b,d){b=this.createFileValidator(b);return new LocalizedFolderValidator(b,d)};return b}(),LocalizedFolderValidator=function(){function b(b,d){this.validator=b;this.literals=d}b.prototype.validateFolder=function(b){b=this.validator.validateFolder(b);return b.isValid()?new ValidationResult(b.getStatus()):this.createLocalizedValidationResult(b)};b.prototype.createLocalizedValidationResult=function(b){var d=b.getStatus();
b=this.getErrorMessage(b);return new ValidationResult(d,b)};b.prototype.getErrorMessage=function(b){switch(b.getStatus()){case ValidationStatus.FileNameIsTooLong:return this.literals.fileNameIsTooLong.replace("{0}",b.getData());default:return"-"}};return b}(),Components;
(function(b){b=b.ComponentName||(b.ComponentName={});b.dialog="uc-dialog";b.uploadArea="upload-area";b.dropzonePicker="dropzone-picker";b.dropboxPicker="dropbox-picker";b.folderPicker="folder-picker";b.googlePicker="google-picker";b.linkToGoogleDrivePicker="link-to-google-drive-picker";b.linkToOnedrivePicker="link-to-onedrive-picker";b.localPicker="local-picker";b.onedrivePicker="onedrive-picker";b.webDavPicker="webdav-picker";b.mediaRecorderPicker="media-recorder-picker"})(Components||(Components=
{}));
(function(b){(function(e){var d=function(){function c(a,d){var f=this;this.picker=a;this.showOffice365=d;this.name=b.ComponentName.linkToOnedrivePicker;this.viewModel=function(a){return new e.PickerViewModel(f.picker,a.onPickerOpen)};this.template=e.Template.create(this.name,this.showOffice365?c.office365Template:c.onedriveTemplate)}c.onedriveTemplate='\n        <div class="ccl-uc-source-content-image ccl-uc-onedrive-icon" aria-hidden="true"></div> \n        <span class="ccl-uc-source-content-text">OneDrive</span>';c.office365Template=
'\n        <div class="ccl-uc-source-content-image ccl-uc-office365-icon" aria-hidden="true"></div> \n        <span class="ccl-uc-source-content-text">Office 365</span>';return c}();e.LinkToOneDrivePickerComponent=d})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){(function(b){(function(b){var c=function(){return function(a){var c=this;this.picker=a;this.handlePickerInitialization=function(){c.isLoading=ko.observable(!0);c.isLoadingFailed=ko.observable(!1);c.picker.subscribe(new PickerCallback(c.onPickerInitSuccess,c.onPickerInitFailure,function(){},function(){}))};this.onPickerInitSuccess=function(){c.isLoading(!1);c.picker.initActionMenu()};this.onPickerInitFailure=function(){c.isLoading(!1);c.isLoadingFailed(!0)};this.dispose=function(){c.picker.dispose()};
contract.require(!objectState.isNullOrUndefined(a),"This media recorder view model requires picker to be passed. Please provide it.");this.handlePickerInitialization()}}();b.MediaRecorderViewModel=c})(b.MediaRecorder||(b.MediaRecorder={}))})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){(function(e){(function(d){var c=function(){return function(a){var c=this;this.picker=a;this.name=b.ComponentName.mediaRecorderPicker;this.viewModel=function(){return new d.MediaRecorderViewModel(c.picker)};this.template='\n<button type="button" id="ccl-picker-media-recorder-link-id" class="ccl-picker-media-recorder-link" data-bind="text: UploadControlTranslation.mediaRecorder"></button>'}}();d.MediaRecorderPickerComponent=c})(e.MediaRecorder||(e.MediaRecorder={}))})(b.Picker||(b.Picker=
{}))})(Components||(Components={}));
(function(b){(function(b){var d=function(){function c(){}c.create=function(a,c){return'\n<div class="ccl-uc-source-container">\n    <button class="ccl-uc-source-content" id="'+a+'" data-bind="click: onClick, disable: isLoading() || isLoadingFailed()">\n        <span>\n'+c+'\n        </span>\n    </button>\n    <div class="ccl-uc-source-status">\n        <span aria-hidden="true" class="ili ili-spinner ili-pulse-linear" data-bind="visible: isLoading"></span>\n        <span aria-hidden="true" class="ili ili-exclamation-circle" data-bind="visible: isLoadingFailed"></span>\n    </div>\n</div>'};return c}();
b.Template=d})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){(function(b){var d=function(){return function(c,a){var b=this;this.picker=c;this.onPickerOpen=a;this.onClick=function(){b.onPickerOpen();b.picker.open()};this.handlePickerInitialization=function(){b.isLoading=ko.observable(!0);b.isLoadingFailed=ko.observable(!1);b.picker.subscribe(new PickerCallback(b.onPickerInitSuccess,b.onPickerInitFailure,function(){},function(){}))};this.onPickerInitSuccess=function(){b.isLoading(!1)};this.onPickerInitFailure=function(){b.isLoading(!1);b.isLoadingFailed(!0)};
contract.require(!objectState.isNullOrUndefined(c),"This ViewModel requires picker to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(a),"This ViewModel requires onPickerOpen to be passed. Please provide it.");this.handlePickerInitialization()}}();b.PickerViewModel=d})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){(function(e){var d=function(){return function(c){var a=this;this.picker=c;this.name=b.ComponentName.webDavPicker;this.viewModel=function(c){return new e.PickerViewModel(a.picker,c.onPickerOpen)};this.template=e.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-webdav-icon" aria-hidden="true"></div> \n        <span data-bind="text: UploadControlTranslation.webDav" class="ccl-uc-source-content-text"></span>')}}();e.WebDavPickerComponent=d})(b.Picker||(b.Picker=
{}))})(Components||(Components={}));
(function(b){var e=function(){function b(){}b.isMobile=function(){return window.matchMedia&&window.matchMedia("only screen and (max-width: 568px)").matches};b.isIos=function(){return/(iPod|iPhone)/i.test(navigator.userAgent)};b.toggleTopFrameAndMobileOverlay=function(c){b.sendMessageToTopFrame(window.parent,c?"collapseContentAreaFrame":"expandContentAreaFrame");b.sendMessageToTopFrame(window.parent,"setIframeDefaultHeight");$("html").toggleClass($("body").hasClass("h-ios")?"ccl-overlay-modal-has-overlay-ios":
"ccl-overlay-modal-has-overlay",!c)};b.sendMessageToTopFrame=function(c,a){c&&c.postMessage(JSON.stringify({messageName:a}),"*")};b.sendMessageToTopFrameWithData=function(c,a,b){c&&c.postMessage(JSON.stringify({messageName:a,data:b}),"*")};return b}();b.UploadControlUtils=e})(Components||(Components={}));
var FolderBuilder=function(){return function(b,e){var d=this;this.validator=b;this.folderValidator=e;this.buildFolder=function(c){var a=null,b=[];c.forEach(function(c){var e=d.getFolderFromRelativePath(c.relativePath,b);null===a&&(a=b[0]);!objectState.isNullOrUndefined(e)&&objectState.isNullOrUndefined(e.error)&&d.processFile(c,e)});return a};this.getFolderFromRelativePath=function(c,a){c=d.getPathOfParentFolder(c);var b=d.getFolderForPath(c,a);b||(b=d.createNewFolder(c,a));return b};this.createNewFolder=
function(c,a){var b=d.getFolderName(c);b=new Folder(b,c);d.validateFolder(b);(c=d.getParentFolder(c,a))&&c.folders.push(b);a.push(b);return b};this.getParentFolder=function(c,a){c=d.getPathOfParentFolder(c);if(!c)return null;var b=d.getFolderForPath(c,a);b||(b=d.createNewFolder(c,a));return b};this.processFile=function(c,a){c=new FileInFolder(c);d.validateFile(c);a.files.push(c)};this.getFolderForPath=function(c,a){return(a=a.filter(function(a){return a.path===c}))&&0!==a.length?a[0]:null};this.getFolderName=
function(c){var a=c.lastIndexOf("/");return c.substring(a+1,c.length)};this.getPathOfParentFolder=function(c){var a=c.lastIndexOf("/");return-1===a?null:c.substring(0,a)};this.validateFile=function(c){var a=d.validator.validateFile(c.result);a.isValid()||(c.error=a.getData())};this.validateFolder=function(c){var a=d.folderValidator.validateFolder(c);a.isValid()||(c.error=a.getData())};contract.require(!objectState.isNullOrUndefined(this.validator),"'fileResultValidator' is not defined");contract.require(!objectState.isNullOrUndefined(this.folderValidator),
"'folderValidator' is not defined")}}(),FolderController=function(){return function(b,e,d,c){var a=this;this.pickers=b;this.folderSenderFactory=e;this.folderBuilder=d;this.actionQueue=c;this.subscribe=function(c){a.callbacks=c};this.initializePickers=function(){a.pickers.forEach(function(c){a.initPickerCallback(c)})};this.initPickerCallback=function(c){var b=function(){};b=new PickerCallback(b,b,a.folderSelected,b);c.subscribe(b)};this.uploadCompleted=function(c,b){c.markAsUploaded();c.onRemoveCallback=
function(){a.fileRemoved(c)};c.isRemoveAllowed(!0);a.allFilesinFolderInvalid(b)?a.signalError(c):(a.showWarningIfFolderContainsAnyError(c,b),c.Metadata=b.getFolderMetadata(),a.callbacks.onActionSuccess(c.Metadata),c.markAsCompleted())};this.fileRemoved=function(c){a.callbacks.onFileRemoved(c.Metadata)};this.allFilesinFolderInvalid=function(a){return 0===a.getFilesWithoutValidationErrors().length};this.signalError=function(c){c.setFolderError();a.callbacks.onActionError({},UploadControlTranslation.someFilesInThatFolderCannotBeUploaded)};
this.showWarningIfFolderContainsAnyError=function(a,c){c.isAnyErrorInFolder()&&a.setFolderWarning()};this.uploadProgressed=function(a,c){a.setProgress(c)};this.abortSucceeded=function(c){a.callbacks.onActionAborted(c.Metadata)};this.folderSelected=function(c){var b=a.folderBuilder.buildFolder(c.files),d=CCL.FileList.Model.FileItem.buildItemForFolder(b.name);a.callbacks.onFilesSelected([d]);if(a.allFilesinFolderInvalid(b))a.signalError(d);else{a.showWarningIfFolderContainsAnyError(d,b);var e=function(){a.send(d,
b)};d.onRemoveCallback=function(){a.actionQueue.remove(e);a.fileRemoved(d)};a.actionQueue.register(e)}};this.send=function(c,b){var d=a.folderSenderFactory.build().send(b,function(b){return a.uploadProgressed(c,b)},function(b){a.actionQueue.signalDone();a.uploadCompleted(c,b)});c.onRemoveCallback=function(){a.actionQueue.signalDone();d.abort(function(){return a.abortSucceeded(c)})}};contract.require(!objectState.isNullOrUndefined(this.pickers),"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.folderSenderFactory),
"'senderFactory' is not defined");contract.require(!objectState.isNullOrUndefined(this.folderBuilder),"'folderBuilder' is not defined");contract.require(!objectState.isNullOrUndefined(this.actionQueue),"'actionQueue' is not defined");this.initializePickers()}}(),PickerFileResultValidatorLiterals=function(){function b(b){this.fileExtensionNotAllowed=b.FileExtensionNotAllowed;this.fileTooBig=b.FileTooBig;this.fileTooSmall=b.FileTooSmall;this.invalidCharactersXInFileName=b.InvalidCharactersXInFileName;
this.unableToOpenFile=b.UnableToOpenFile;this.invalidFirstPartOfFileName=b.InvalidFirstPartOfFileName;this.fileNameIsTooLong=b.FileNameIsTooLong;this.mb=b.Mb;this.kb=b.Kb;this.fileIsEmpty=b.FileIsEmpty;this.fileNameIsEmpty=b.FileNameIsEmpty;this.fileTypeNotSupportedByCasper=b.FileTypeNotSupportedByCasper;this.fileNotEnoughPermissions=b.FileNotEnoughPermissions}b.prototype.getExcededSizeLimitTranslation=function(b){return this.fileTooBig.replace("{0}",this.getFormattedFileSize(b))};b.prototype.getBelowSizeLimitTranslation=
function(b){return this.fileTooSmall.replace("{0}",this.getFormattedFileSize(b))};b.prototype.getFormattedFileSize=function(b){return"number"!==typeof b?"":1048576<=b?(b/1048576).toFixed(2)+" "+this.mb:(b/1024).toFixed(2)+" "+this.kb};return b}(),LocalFilePicker=function(){function b(b,d,c,a){var e=this;this.mode=b;this.browserSniffer=d;this.fileNameExtractor=c;this.jq=a;this.subscriberCallbacks=[];this.open=function(){var a=e.jq(e.getInputMarkup());a.on("change",function(){e.handleFileSelectedInInput(a,
a[0])});a.click()};this.subscribe=function(a){if(a.onPickerInitSuccess)a.onPickerInitSuccess();e.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=function(){e.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){e.mode.allowToSelectMultipleFiles=!1};this.handleFileSelectedInInput=function(a,c){a=e.browserSniffer.isInternetExplorer9()?e.createResultWithInputElement(a,c):e.createResultWithFileList(a,c);c=0;for(var b=e.subscriberCallbacks;c<b.length;c++){var d=
b[c];if(d.onFileSelected)d.onFileSelected(new PickerResult(a))}};contract.require(!objectState.isNullOrUndefined(b),"This picker requires mode to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(d),"This picker requires browserSniffer to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(c),"This picker requires fileNameExtractor to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(a),"This picker requires jquery to be passed. Please provide it.")}
b.prototype.getInputMarkup=function(){return'<input type="file" '+this.getMultipleAttributeForInput()+" "+this.getAcceptAttributeForInput()+" />"};b.prototype.getMultipleAttributeForInput=function(){return this.mode.allowToSelectMultipleFiles?'multiple="multiple"':""};b.prototype.getAcceptAttributeForInput=function(){return this.mode.allowedFileExtensions?'accept="'+this.getFileExtensionsForAcceptAttribute()+'"':""};b.prototype.getFileExtensionsForAcceptAttribute=function(){return this.mode.allowedFileExtensions.map(function(b){return"."+
b}).join(",")};b.prototype.createResultWithInputElement=function(b,d){d=this.fileNameExtractor.getFileName(d.value);return[PickerFileResult.createLocalPickerFileResultWithInput(b,d)]};b.prototype.createResultWithFileList=function(b,d){return[].slice.call(d.files).map(function(c){return PickerFileResult.createLocalPickerFileResult(c)})};return b}(),DropzonePicker=function(){function b(b,d){var c=this;this.mode=b;this.fileValidator=d;this.subscriberCallbacks=[];this.currentDragEnterCount=0;this.enableMultipleFilesSelecting=
function(){c.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){c.mode.allowToSelectMultipleFiles=!1};this.onFilesDropped=function(a){c.mode.allowDragAndDrop&&(c.browserSupportsFileAndDirectoryEntriesApi(a)?c.preparePickerFileResultsUsingFileAndDirectoryEntriesApiAsync(a.items):c.preparePickerFileResultsUsingFileListAsync(a.files)).then(c.handlePickerFileResults)};this.open=function(){};this.isEnabled=function(){return c.mode.allowDragAndDrop};this.browserSupportsFileAndDirectoryEntriesApi=
function(a){return a.items&&0<a.items.length&&(a.items[0].webkitGetAsEntry||a.items[0].getAsEntry)};this.preparePickerFileResultsUsingFileAndDirectoryEntriesApiAsync=function(a){if(!c.mode.allowToSelectMultipleFiles&&1<a.length)return $.Deferred().resolve([]).promise();for(var b=[],d=0;d<a.length;d++)b.push(c.getEntry(a[d]));if(b.some(function(a){return a.isDirectory}))return $.Deferred().resolve([]).promise();var e=[];b.forEach(function(a){return e.push(c.getFileFromEntryAsync(a))});return $.when.apply($,
e).pipe(c.mapFilesToPickerFileResults)};this.getEntry=function(a){return a.webkitGetAsEntry?a.webkitGetAsEntry():a.getAsEntry()};this.getFileFromEntryAsync=function(a){var c=$.Deferred();a.file(function(a){return c.resolve(a)},function(a){return c.reject(a)});return c.promise()};this.mapFilesToPickerFileResults=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];return a.map(function(a){return PickerFileResult.createLocalPickerFileResult(a)})};this.preparePickerFileResultsUsingFileListAsync=
function(a){if(null===a||void 0===a||!c.mode.allowToSelectMultipleFiles&&1<a.length)return $.Deferred().resolve([]).promise();var b=[],d=[].slice.call(a);d.forEach(function(a){b.push(c.fileValidator.isFile(a))});return $.when.apply($,b).pipe(function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return a.some(function(a){return!1===a})?[]:c.mapFilesToPickerFileResults.apply(c,d)})};this.handlePickerFileResults=function(a){if(0!==a.length)for(var b=0,d=c.subscriberCallbacks;b<d.length;b++){var e=
d[b];if(e.onFileSelected)e.onFileSelected(new PickerResult(a))}};contract.require(!objectState.isNullOrUndefined(b),"This picker requires mode to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(d),"This picker requires fileValidator to be passed. Please provide it.")}b.prototype.subscribe=function(b){if(b.onPickerInitSuccess)b.onPickerInitSuccess();this.subscriberCallbacks.push(b)};return b}(),FileValidator=function(){function b(){var b=this;this.isFile=function(d){return b.attemptToReadFile(d)}}
b.prototype.attemptToReadFile=function(b){var d=$.Deferred(),c=new FileReader;c.onprogress=function(){c.abort();d.resolve(!0)};c.onerror=function(){d.resolve(!1)};c.readAsArrayBuffer(b.slice(0,5));return d.promise()};return b}(),FolderPicker=function(){function b(b){var d=this;this.jq=b;this.subscriberCallbacks=[];this.open=function(){var c=d.jq('<input type="file" webkitdirectory="" directory="" />');c.on("change",function(){d.fileSelectedInInput(c,c[0])});c.click()};this.subscribe=function(c){if(c.onPickerInitSuccess)c.onPickerInitSuccess();
d.subscriberCallbacks.push(c)};this.enableMultipleFilesSelecting=function(){d.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){d.allowToSelectMultipleFiles=!1};this.fileSelectedInInput=function(c,a){c=d.createResultWithFileList(c,a);if(0!==c.length){a=0;for(var b=d.subscriberCallbacks;a<b.length;a++){var e=b[a];if(e.onFileSelected)e.onFileSelected(new PickerResult(c))}}};contract.require(!objectState.isNullOrUndefined(b),"This picker requires jquery to be passed. Please provide it.")}
b.prototype.createResultWithFileList=function(b,d){var c=this;return[].slice.call(d.files).map(function(a){return PickerFileResult.createFolderPickerFileResultWithRelativePath(a,c.getRelativePath(a,""))})};b.prototype.getRelativePath=function(b,d){return b.webkitRelativePath||b.relativePath||d||""};return b}(),FileNameFromPathExtractor=function(){function b(){}b.prototype.getFileName=function(b){if(null===b)return null;if("undefined"!==typeof b){if("string"!==typeof b)throw"Argument filePath is of type other than string";
return b.replace(/[\s\S]*[\\/]/,"")}};return b}(),DropboxPicker=function(){return function(b,e,d,c){var a=this;void 0===c&&(c={purpose:PickerPurpose.Upload,allowToSelectMultipleFiles:!1,allowCollaboration:!1});this.settings=b;this.dropbox=e;this.dropboxNotAvailableErrorTranslation=d;this.mode=c;this.subscriberCallbacks=[];this.subscribe=function(c){a.attemptToRaiseInitCallback(c);a.subscriberCallbacks.push(c)};this.enableMultipleFilesSelecting=function(){a.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=
function(){a.mode.allowToSelectMultipleFiles=!1};this.open=function(){if(a.isInitializationSuccessful()){var c=a.getDropboxOptions();a.dropbox.choose(c)}};this.initializeWithScript=function(){asyncDependenciesResolver.loadScriptAsync({url:"https://www.dropbox.com/static/api/2/dropins.js",attributes:{id:"dropboxjs","data-app-key":a.settings.dropboxAppKey},timeoutInMilliseconds:3E4}).done(function(){return a.initStatus=PickerInitStatus.Success}).fail(function(){return a.initStatus=PickerInitStatus.Error}).always(a.notifySubscribersAboutInitialization)};
this.notifySubscribersAboutInitialization=function(){for(var c=0,b=a.subscriberCallbacks;c<b.length;c++)a.attemptToRaiseInitCallback(b[c])};this.attemptToRaiseInitCallback=function(c){if(a.isInitializationSuccessful()&&c.onPickerInitSuccess)c.onPickerInitSuccess();if(a.initStatus===PickerInitStatus.Error&&c.onPickerInitFailure)c.onPickerInitFailure(new PickerInitFailureEventArgs(PickerInitFailureReason.ExternalServiceNotAvailable,a.dropboxNotAvailableErrorTranslation,UploadControlTranslation.dropbox))};
this.isInitializationSuccessful=function(){return a.initStatus===PickerInitStatus.Success};this.getDropboxOptions=function(){return{success:a.onDropboxFileSelected,cancel:a.onDropboxFileSelectionCanceled,linkType:"direct",multiselect:a.mode.allowToSelectMultipleFiles,extensions:a.getAllowedFileExtensionsWithDots()}};this.getAllowedFileExtensionsWithDots=function(){return a.mode.allowedFileExtensions?a.mode.allowedFileExtensions.map(function(a){return"."+a}):null};this.onDropboxFileSelected=function(c){c=
c.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.link,a.name,a.bytes,SourceType.Dropbox)});for(var b=0,d=a.subscriberCallbacks;b<d.length;b++){var e=d[b];if(e.onFileSelected)e.onFileSelected(new PickerResult(c))}};this.onDropboxFileSelectionCanceled=function(){for(var c=0,b=a.subscriberCallbacks;c<b.length;c++){var d=b[c];if(d.onFileSelectionCanceled)d.onFileSelectionCanceled()}};if(objectState.isNullOrUndefined(this.settings))throw"DropboxPicker requires settings to be passed. Please provide them.";
if(objectState.isNullOrUndefined(this.dropbox))throw"DropboxPicker requires dropbox api to be passed. Please provide a handle to it.";if(objectState.isNullOrUndefined(this.dropboxNotAvailableErrorTranslation))throw"DropboxPicker requires error translation to be passed. Please provide it.";"complete"===document.readyState?this.initializeWithScript():window.addEventListener("load",this.initializeWithScript)}}(),DropboxWrapper=function(){function b(){this.isAvailable=function(){try{return!objectState.isNullOrUndefined(Dropbox)}catch(e){return!1}}}
b.prototype.choose=function(b){Dropbox.choose(b)};return b}(),CloudPickerModeSerializer=function(){function b(){}b.prototype.serialize=function(b){return encodeURI(JSON.stringify(b))};b.prototype.deserialize=function(b){return JSON.parse(decodeURI(b))};return b}(),GooglePickerInPopup=function(b){function e(d,c,a,e,g){var f=this;b.call(this);this.settings=d;this.browserSniffer=c;this.browserNotSupportedErrorTranslation=a;this.pickerModeSerializer=e;this.mode=g;this.subscriberCallbacks=[];this.subscribe=
function(a){f.raiseInitCallback(a);f.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=!1};this.isProxyIframeRequired=function(){return f.browserSniffer.isInternetExplorerAnyVersion()};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("cross_communication_proxy")){var a=f.prepareIframe("cross_communication_proxy");document.body.appendChild(a)}};
this.prepareIframe=function(a){var c=document.createElement("iframe");c.id=a;c.style.display="none";c.src=f.settings.crossCommunicationProxyUrl;return c};this.raiseInitCallback=function(a){if(f.browserSniffer.isInternetExplorer9()){var c=new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,f.browserNotSupportedErrorTranslation,UploadControlTranslation.googleDrive);a.onPickerInitFailure(c)}else a.onPickerInitSuccess()};this.shouldProcessPostMessage=function(a){return a.origin===
f.settings.pickerDomain};if(objectState.isNullOrUndefined(this.settings))throw"GooglePickerInPopup requires settings to be passed. Please provide them.";if(objectState.isNullOrUndefined(this.browserSniffer))throw"GooglePickerInPopup requires browserSniffer to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.browserNotSupportedErrorTranslation))throw"GooglePickerInPopup requires browserNotSupportedErrorTranslation to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.pickerModeSerializer))throw"GooglePickerInPopup requires modeSerializer to be passed. Please provide it.";
if(objectState.isNullOrUndefined(this.mode))throw"GooglePickerInPopup requires mode to be passed. Please provide it.";this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered()}__extends(e,b);e.prototype.processPostMessage=function(b){if(this.shouldProcessPostMessage(b)){var c=b.data.files.map(function(a){var c=!0,b=!0;a.capabilities&&(c=a.capabilities.canCopy,b=a.capabilities.canShare);return PickerFileResult.createExternalSourcePickerFileResult(a.url,a.name,a.size,SourceType.Google,a.mimeType,
a.id,c,b)});c=new PickerResult(c);b=this.getOAuthContext(b);objectState.isNullOrUndefined(b)||c.setOAuthContext(b);b=0;for(var a=this.subscriberCallbacks;b<a.length;b++){var d=a[b];if(d.onFileSelected)d.onFileSelected(c)}}};e.prototype.getOAuthContext=function(b){return objectState.isNullOrUndefined(b.data.oAuthContext)?null:b.data.oAuthContext};e.prototype.getPickerUrl=function(){var b=new Url(this.settings.pickerUrl);b.appendOrUpdateParam("mode",this.pickerModeSerializer.serialize(this.mode));return b.value};
e.prototype.getInitialPopupTitle=function(){return"Google Drive"};return e}(PickerInPopup),OneDrivePicker=function(b){function e(d,c,a,e,g){var f=this;void 0===g&&(g={purpose:PickerPurpose.Upload,allowToSelectMultipleFiles:!1,allowCollaboration:!1,checkUploadCopyByDefault:d.checkUploadCopyByDefault});b.call(this);this.settings=d;this.browserSniffer=c;this.browserNotSupportedErrorTranslation=a;this.modeSerializer=e;this.mode=g;this.subscriberCallbacks=[];this.subscribe=function(a){f.raiseInitCallback(a);
f.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=!1};this.isProxyIframeRequired=function(){return f.browserSniffer.isInternetExplorerAnyVersion()&&f.settings.crossCommunicationProxyUrl};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("onedrive_proxy")){var a=f.prepareIframe("onedrive_proxy");document.body.appendChild(a)}};this.prepareIframe=
function(a){var c=document.createElement("iframe");c.id=a;c.style.display="none";c.src=f.settings.crossCommunicationProxyUrl;return c};this.raiseInitCallback=function(a){if(f.browserSniffer.isInternetExplorer9()){var c=new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,f.browserNotSupportedErrorTranslation,UploadControlTranslation.oneDrive);a.onPickerInitFailure(c)}else a.onPickerInitSuccess()};if(objectState.isNullOrUndefined(this.settings))throw"OneDrivePicker requires settings to be passed. Please provide them.";
if(objectState.isNullOrUndefined(this.browserSniffer))throw"OneDrivePicker requires browserSniffer to be passed. Please provide a handle to it.";if(objectState.isNullOrUndefined(this.browserNotSupportedErrorTranslation))throw"OneDrivePicker requires browserNotSupportedErrorTranslation to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.modeSerializer))throw"OneDrivePicker requires modeSerializer to be passed. Please provide it.";this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered()}
__extends(e,b);e.prototype.processPostMessage=function(b){if(b.origin===this.settings.pickerDomain){var c=b.data.files.map(function(a){return PickerFileResult.createOneDrivePickerFileResult(a)});c=new PickerResult(c);c.setOAuthContext(b.data.oAuthContext);b.data.purpose===PickerPurpose.Combined&&(c.purpose=b.data.isLinkMode?PickerPurpose.LinkToCloud:PickerPurpose.Upload);b=0;for(var a=this.subscriberCallbacks;b<a.length;b++){var d=a[b];if(d.onFileSelected)d.onFileSelected(c)}}};e.prototype.getPickerUrl=
function(){var b=new Url(this.settings.pickerUrl);b.appendOrUpdateParam("mode",this.modeSerializer.serialize(this.mode));return b.value};e.prototype.getInitialPopupTitle=function(){return"OneDrive"};e.create=function(b,c,a,f){return new e(b,c,"",a,f)};return e}(PickerInPopup);
(function(b){(function(e){var d=function(){return function(c,a){var d=this;this.picker=c;this.hasFolderPicker=a;this.icon=browserSniffer.isAnyMobile()?"ccl-uc-device-icon":this.hasFolderPicker?"ili ili-file":"ccl-uc-computer-icon";this.name=b.ComponentName.localPicker;this.viewModel=function(a){return new e.PickerViewModel(d.picker,a.onPickerOpen)};this.template=e.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image '+this.icon+'" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.fileFromComputer" class="ccl-uc-source-content-text"></span>')}}();
e.LocalPickerComponent=d})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){(function(b){(function(b){var c=function(){function a(a){var c=this;this.picker=a;this.css=ko.observable("");this.title=UploadControlTranslation.addFiles;this.caption=UploadControlTranslation.orSimplyDropThemHere;this.currentDragEnterCount=0;this.showCaption=function(){return BrowserSniffer().isAnyMobile()||!c.picker.isEnabled()?!1:!0};this.dropzoneDragOver=function(a,b){a=b.originalEvent;if(!c.isDraggingFiles(a))return!1;a.stopPropagation();a.preventDefault();c.picker.isEnabled()?a.dataTransfer.dropEffect=
"copy":a.dataTransfer.dropEffect="none";return!0};this.dropzoneDrop=function(a,b){a=b.originalEvent;if(!c.isDraggingFiles(a)||!c.picker.isEnabled())return!1;c.picker.onFilesDropped(a.dataTransfer);return!0};this.documentDragEnter=function(a){c.isDraggingFiles(a)&&(a.preventDefault(),c.currentDragEnterCount++,c.picker.isEnabled()&&c.css("highlight"))};this.documentDragOver=function(a){c.isDraggingFiles(a)&&(a.preventDefault(),a.dataTransfer.dropEffect="none")};this.documentDrop=function(a){c.isDraggingFiles(a)&&
(a.preventDefault(),c.currentDragEnterCount=0,c.css(""))};this.documentDragLeave=function(a){c.isDraggingFiles(a)&&(c.currentDragEnterCount--,0===c.currentDragEnterCount&&c.css(""))};this.isDraggingFiles=function(a){if(a.dataTransfer.types)for(var c=0;c<a.dataTransfer.types.length;c++)if("Files"===a.dataTransfer.types[c])return!0;return!1};contract.require(!objectState.isNullOrUndefined(a),"This ViewModel requires picker to be passed. Please provide them.");this.eventHandlers={drop:this.dropzoneDrop,
dragover:this.dropzoneDragOver};this.subscribeToDocumentDragDropEvents()}a.prototype.subscribeToDocumentDragDropEvents=function(){document.addEventListener("dragenter",this.documentDragEnter,!1);document.addEventListener("dragover",this.documentDragOver,!1);document.addEventListener("drop",this.documentDrop,!1);document.addEventListener("dragleave",this.documentDragLeave,!1)};return a}();b.DropzoneViewModel=c})(b.Dropzone||(b.Dropzone={}))})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){(function(e){(function(d){var c=function(){return function(a){this.picker=a;this.name=b.ComponentName.dropzonePicker;this.viewModel={instance:new d.DropzoneViewModel(this.picker)};this.template='\n<button class="ccl-uc-dropzone-container" data-bind="event: eventHandlers">\n    <div class="ccl-uc-dropzone" data-bind="css: css">\n        <div id="ccl-uc-dropzone-text-container">\n            <div aria-hidden="true" class="ili ili-file"></div>\n            <span id="ccl-uc-dropzone-text" data-bind="text: title"></span>\n        </div>\n        <span id="ccl-uc-dropzone-caption" data-bind="text: caption, visible: showCaption()"></span>\n    </div>\n</button>'}}();
d.DropzonePickerComponent=c})(e.Dropzone||(e.Dropzone={}))})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){(function(e){var d=function(){return function(c){var a=this;this.picker=c;this.name=b.ComponentName.dropboxPicker;this.viewModel=function(c){return new e.PickerViewModel(a.picker,c.onPickerOpen)};this.template=e.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-dropbox-icon" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.dropbox" class="ccl-uc-source-content-text"></span>')}}();e.DropboxPickerComponent=d})(b.Picker||
(b.Picker={}))})(Components||(Components={}));
(function(b){(function(e){var d=function(){return function(c){var a=this;this.picker=c;this.name=b.ComponentName.googlePicker;this.viewModel=function(c){return new e.PickerViewModel(a.picker,c.onPickerOpen)};this.template=e.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-google-icon" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.googleDrive" class="ccl-uc-source-content-text"></span>')}}();e.GooglePickerComponent=d})(b.Picker||
(b.Picker={}))})(Components||(Components={}));
(function(b){(function(e){var d=function(){function c(a,d){var f=this;this.picker=a;this.showOffice365=d;this.name=b.ComponentName.onedrivePicker;this.viewModel=function(a){return new e.PickerViewModel(f.picker,a.onPickerOpen)};this.template=e.Template.create(this.name,this.showOffice365?c.office365Template:c.onedriveTemplate)}c.onedriveTemplate='\n        <div class="ccl-uc-source-content-image ccl-uc-onedrive-icon" aria-hidden="true"></div> \n        <span class="ccl-uc-source-content-text">OneDrive</span>';c.office365Template=
'\n        <div class="ccl-uc-source-content-image ccl-uc-office365-icon" aria-hidden="true"></div> \n        <span class="ccl-uc-source-content-text">Office 365</span>';return c}();e.OneDrivePickerComponent=d})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){(function(e){var d=function(){return function(c){var a=this;this.picker=c;this.name=b.ComponentName.linkToGoogleDrivePicker;this.viewModel=function(c){return new e.PickerViewModel(a.picker,c.onPickerOpen)};this.template=e.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-google-icon" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.googleDrive" class="ccl-uc-source-content-text"></span>')}}();e.LinkToGoogleDrivePickerComponent=
d})(b.Picker||(b.Picker={}))})(Components||(Components={}));
(function(b){(function(e){var d=function(){return function(c){var a=this;this.picker=c;this.name=b.ComponentName.folderPicker;this.viewModel=function(c){return new e.PickerViewModel(a.picker,c.onPickerOpen)};this.template=e.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ili ili-folder" aria-hidden="true"></div> \n        <span data-bind="text: UploadControlTranslation.folderFromComputer" class="ccl-uc-source-content-text"></span>')}}();e.FolderPickerComponent=d})(b.Picker||
(b.Picker={}))})(Components||(Components={}));
var PickerObjectsFactory=function(){function b(b,d){var c=this;this.settings=b;this.translations=d;this.initializeDropzonePicker=function(a){var b=c.getDropzonePickerMode();b=new DropzonePicker(b,new FileValidator);a.push(b);a=new Components.Picker.Dropzone.DropzonePickerComponent(b);ko.components.register(a.name,a)};this.initializeLocalFilePicker=function(a,b){if(c.settings.EnableLocalUpload&&(!BrowserSniffer().isChromeBookOs()||!c.settings.EnableLinkingToGoogleDrive&&!c.settings.EnableUploadFromGoogleDrive)){var d=
c.getPickerMode();d=new LocalFilePicker(d,BrowserSniffer(),new FileNameFromPathExtractor,$);a.push(d);a=new Components.Picker.LocalPickerComponent(d,c.isFolderUploadingAllowed());ko.components.register(a.name,a);b.push(c.getUploadPickerComponentInfo(a.name))}};this.initializeFolderPicker=function(a,b){if(c.isFolderUploadingAllowed()){var d=new FolderPicker($);a.push(d);a=new Components.Picker.FolderPickerComponent(d);ko.components.register(a.name,a);b.push(c.getUploadPickerComponentInfo(a.name))}};
this.isFolderUploadingAllowed=function(){return c.settings.EnableLocalUpload&&c.settings.AllowToUploadFolders&&browserSniffer.isDirectoryUploadSupported()&&!browserSniffer.isAnyMobile()&&!browserSniffer.isChromeBookOs()};this.initializeDropboxPicker=function(a,b){if(c.settings.EnableUploadFromDropbox){var d=c.getDropboxPickerInitSettings();d=new DropboxPicker(d,new DropboxWrapper,c.translations.DropboxApiNotAvailable,c.getUploadCloudPickerMode());a.push(d);a=new Components.Picker.DropboxPickerComponent(d);
ko.components.register(a.name,a);b.push(c.getUploadPickerComponentInfo(a.name))}};this.initializeGoogleDriveUploadPicker=function(a,b){if(c.settings.EnableUploadFromGoogleDrive){var d=c.getGooglePickerInitSettings();d=new GooglePickerInPopup(d,BrowserSniffer(),c.translations.GoogleBrowserNotSupported,new CloudPickerModeSerializer,c.getUploadCloudPickerMode());a.push(d);a=new Components.Picker.GooglePickerComponent(d);ko.components.register(a.name,a);b.push(c.getUploadPickerComponentInfo(a.name))}};
this.getGooglePickerInitSettings=function(){return{pickerDomain:c.settings.GoogleDriveUploadSettings.PickerDomain,pickerUrl:c.settings.GoogleDriveUploadSettings.PickerUrl,crossCommunicationProxyUrl:c.settings.GoogleDriveUploadSettings.CrossCommunicationProxyUrl,checkUploadCopyByDefault:!1}};this.getUploadCloudPickerMode=function(){return{purpose:PickerPurpose.Upload,allowToSelectMultipleFiles:c.settings.AllowToSelectMultipleFiles,allowedFileExtensions:c.settings.ValidationSettings.AllowedFileExtensions,
allowedMimeTypes:c.settings.ValidationSettings.AllowedMimeTypes,allowCollaboration:!1}};this.initializeOneDriveUploadPicker=function(a,b){if(c.settings.EnableUploadFromOneDrive){var d=c.getUploadCloudPickerMode();d.checkUploadCopyByDefault=c.settings.OneDriveUploadSettings.CheckUploadCopyByDefault;d=new OneDrivePicker(c.getOneDrivePickerInitSettings(),BrowserSniffer(),c.translations.OneDriveBrowserNotSupported,new CloudPickerModeSerializer,d);a.push(d);a=new Components.Picker.OneDrivePickerComponent(d,
c.settings.OneDriveUploadSettings.ShowOffice365);ko.components.register(a.name,a);b.push(c.getUploadPickerComponentInfo(a.name))}};this.initializeGoogleDriveLinkingPicker=function(a,b){if(c.settings.EnableLinkingToGoogleDrive){var d=c.getGooglePickerInitSettings();d=new GooglePickerInPopup(d,BrowserSniffer(),c.translations.GoogleBrowserNotSupported,new CloudPickerModeSerializer,c.getLinkToCloudPickerMode());a.push(d);a=new Components.Picker.LinkToGoogleDrivePickerComponent(d);ko.components.register(a.name,
a);b.push(c.getLinkPickerComponentInfo(a.name))}};this.getLinkToCloudPickerMode=function(){return{allowToSelectMultipleFiles:c.settings.AllowToSelectMultipleFiles,purpose:PickerPurpose.LinkToCloud,allowedFileExtensions:c.settings.ValidationSettings.AllowedFileExtensions,allowedMimeTypes:c.settings.ValidationSettings.AllowedMimeTypes,allowCollaboration:!1}};this.initializeOneDriveLinkingPicker=function(a,b){if(c.settings.EnableLinkingFromOneDrive){var d=c.getOneDrivePickerInitSettings(),e=c.getLinkToCloudPickerMode();
e.checkUploadCopyByDefault=d.checkUploadCopyByDefault;d=new OneDrivePicker(d,BrowserSniffer(),c.translations.OneDriveBrowserNotSupported,new CloudPickerModeSerializer,e);a.push(d);a=new Components.Picker.LinkToOneDrivePickerComponent(d,c.settings.OneDriveUploadSettings.ShowOffice365);ko.components.register(a.name,a);b.push(c.getLinkPickerComponentInfo(a.name))}};this.initializeWebDavUploadPicker=function(a,b){if(c.settings.EnableUploadFromWebDav){var d=new WebDavPicker(c.getWebDavPickerInitSettings(),
BrowserSniffer(),c.translations.WebDavBrowserNotSupported,new CloudPickerModeSerializer,c.getUploadCloudPickerMode());a.push(d);a=new Components.Picker.WebDavPickerComponent(d);ko.components.register(a.name,a);b.push(c.getUploadPickerComponentInfo(a.name))}};this.getCombinedPickerMode=function(){return{allowToSelectMultipleFiles:c.settings.AllowToSelectMultipleFiles,purpose:PickerPurpose.Combined,allowedFileExtensions:c.settings.ValidationSettings.AllowedFileExtensions,allowedMimeTypes:c.settings.ValidationSettings.AllowedMimeTypes,
allowCollaboration:!1}};this.initializeOneDriveCombinedPicker=function(a,b,d){if(c.settings.EnableLinkingFromOneDrive)if(c.settings.EnableUploadFromOneDrive){var e=c.getOneDrivePickerInitSettings(),f=c.getCombinedPickerMode();f.checkUploadCopyByDefault=e.checkUploadCopyByDefault;e=new OneDrivePicker(e,BrowserSniffer(),c.translations.OneDriveBrowserNotSupported,new CloudPickerModeSerializer,f);a.push(e);b.push(e);a=new Components.Picker.OneDrivePickerComponent(e,c.settings.OneDriveUploadSettings.ShowOffice365);
ko.components.register(a.name,a);d.push(c.getCombinedPickerComponentInfo(a.name))}else c.initializeOneDriveLinkingPicker(b,d);else c.initializeOneDriveUploadPicker(a,d)};this.initializeMediaRecorderPicker=function(a){if(c.settings.EnableUploadFromMediaRecorder){var b=new MediaRecorderPicker(c.settings,c.translations,$);a.push(b);a=new Components.Picker.MediaRecorder.MediaRecorderPickerComponent(b);ko.components.register(a.name,a)}}}b.prototype.build=function(){var b=[],d=[],c=[],a=[];this.initializeDropzonePicker(b);
this.initializeLocalFilePicker(b,a);this.initializeFolderPicker(c,a);this.initializeDropboxPicker(b,a);this.settings.ForceSingleColumnPickerLayout?this.initializeOneDriveCombinedPicker(b,d,a):(this.initializeOneDriveUploadPicker(b,a),this.initializeOneDriveLinkingPicker(d,a));this.initializeGoogleDriveLinkingPicker(d,a);this.settings.ForceSingleColumnPickerLayout||this.initializeGoogleDriveUploadPicker(b,a);this.initializeWebDavUploadPicker(b,a);this.initializeMediaRecorderPicker(b);return[b,d,c,
a]};b.prototype.getDropzonePickerMode=function(){return{allowToSelectMultipleFiles:this.settings.AllowToSelectMultipleFiles,allowDragAndDrop:this.settings.EnableLocalUpload&&this.settings.LocalUploadSettings.AllowDragAndDrop}};b.prototype.getPickerMode=function(){return{allowToSelectMultipleFiles:this.settings.AllowToSelectMultipleFiles,allowedFileExtensions:this.settings.ValidationSettings.AllowedFileExtensions}};b.prototype.getUploadPickerComponentInfo=function(b){return{componentName:b,purpose:PickerPurpose.Upload}};
b.prototype.getDropboxPickerInitSettings=function(){return{dropboxAppKey:this.settings.DropboxUploadSettings.DropboxAppKey}};b.prototype.getOneDrivePickerInitSettings=function(){return{pickerDomain:this.settings.OneDriveUploadSettings.OneDrivePickerDomain,pickerUrl:this.settings.OneDriveUploadSettings.OneDrivePickerUrl,crossCommunicationProxyUrl:this.settings.OneDriveUploadSettings.CrossCommunicationProxyUrl,checkUploadCopyByDefault:this.settings.OneDriveUploadSettings.CheckUploadCopyByDefault}};
b.prototype.getLinkPickerComponentInfo=function(b){return{componentName:b,purpose:this.settings.ForceSingleColumnPickerLayout?PickerPurpose.Upload:PickerPurpose.LinkToCloud}};b.prototype.getWebDavPickerInitSettings=function(){return{pickerDomain:this.settings.WebDavUploadSettings.WebDavPickerDomain,pickerUrl:this.settings.WebDavUploadSettings.WebDavPickerUrl,crossCommunicationProxyUrl:this.settings.WebDavUploadSettings.CrossCommunicationProxyUrl,checkUploadCopyByDefault:!1}};b.prototype.getCombinedPickerComponentInfo=
function(b){return{componentName:b,purpose:PickerPurpose.Combined}};return b}(),MetadataArrays=function(){return function(){}}(),LegacyGenericUploaderLiterals=function(){function b(b){this.maxFileSizeForUpload=b.MaxFileSizeForUpload;this.files=b.Files;this.fileExtensionNotAllowed=b.FileExtensionNotAllowed;this.fileTooBig=b.FileTooBig;this.fileTooSmall=b.FileTooSmall;this.invalidCharactersXInFileName=b.InvalidCharactersXInFileName;this.unableToOpenFile=b.UnableToOpenFile;this.invalidFirstPartOfFileName=
b.InvalidFirstPartOfFileName;this.mb=b.Mb;this.kb=b.Kb;this.fileIsEmpty=b.FileIsEmpty;this.fileNameIsTooLong=b.FileNameIsTooLong;this.fileNameIsEmpty=b.fileNameIsEmpty}b.prototype.getExcededSizeLimitTranslation=function(b){return this.fileTooBig.replace("{0}",this.getFormattedFileSize(b))};b.prototype.getBelowSizeLimitTranslation=function(b){return this.fileTooSmall.replace("{0}",this.getFormattedFileSize(b))};b.prototype.getFormattedFileSize=function(b){return"number"!==typeof b?"":1048576<=b?(b/
1048576).toFixed(2)+" "+this.mb:(b/1024).toFixed(2)+" "+this.kb};return b}(),HiddenMetadataManager=function(){function b(b,d){var c=this;this.metadataField=b;this.fileListControlSettings=d;this.replaceFileItems=function(a){for(var b=[],d=[],e=[],k=0;k<a.length;k++){var l=a[k];if(l.getState()===CCL.FileList.Model.FileItemState.Success)if(l=l.Metadata,l instanceof UploadMetadata)b.push(l);else if(l instanceof FileInCloudMetadata)d.push(l);else if(l instanceof FolderMetadata)e.push(l);else throw Error("Serialization error: Unknown type of Metadata!");
}c.metadataField.val(JSON.stringify({uploadMetadataArray:b,fileInCloudMetadataArray:d,folderMetadataArray:e}))};this.getFileItems=function(){var a=c.metadataArrays,b=[];if(a.uploadMetadataArray)for(var d=function(a){var d=CCL.FileList.Model.FileItem.buildItemForUpload(a.name,new UploadMetadata(a.id,a.name,a.sourceType,a.signature,a.signedFileRepoId,a.mimeType,a.isTemplate,a.customId,a.originalFileId));c.fileListControlSettings.ShowTemplateOptions&&c.fileListControlSettings.MimeTypesToTemplateFromUpload.some(function(a){return a===
d.mimeType()})&&(d.showTemplateOptionsInFilelist(!0),d.showTemplateOptionsForItem(!0));b.push(d)},e=0,k=a.uploadMetadataArray;e<k.length;e++)d(k[e]);if(a.fileInCloudMetadataArray&&(c.fileListControlSettings.ShowGoogleLinks||c.fileListControlSettings.ShowOneDriveLinks))for(e=0,k=a.fileInCloudMetadataArray;e<k.length;e++)d=FileInCloudMetadata.clone(k[e]),d=CCL.FileList.Model.FileItem.buildItemForFileInCloud(d),c.fileListControlSettings.ShowTemplateOptions&&(d.isFileFromGoogleDrive()||d.isUploaded())&&
(d.showTemplateOptionsInFilelist(c.fileListControlSettings.ShowTemplateOptions),d.showTemplateOptionsForItem(!0)),b.push(d);if(a.folderMetadataArray)for(e=0,a=a.folderMetadataArray;e<a.length;e++)k=a[e],d=CCL.FileList.Model.FileItem.buildItemForFolder(k.name),d.Metadata=c.getFolderMetadataInstance(k),b.push(d);return b};this.getFolderMetadataInstance=function(a){var c=new FolderMetadata(a.name);c.files=a.files;c.folders=a.folders;return c}}Object.defineProperty(b.prototype,"metadataArrays",{get:function(){var b=
this.metadataField.val();return objectState.isNullOrWhitespace(b)?new MetadataArrays:JSON.parse(b)},enumerable:!0,configurable:!0});return b}(),UploadStatus;(function(b){b[b.Awaiting=0]="Awaiting";b[b.InProgress=1]="InProgress";b[b.Succeeded=2]="Succeeded";b[b.SucceededWithErrors=3]="SucceededWithErrors";b[b.Failed=4]="Failed"})(UploadStatus||(UploadStatus={}));
var UploadStatusCalculator=function(){function b(){var b=this;this.calculate=function(d){var c=b.countFileItemsInGivenStates(d,[CCL.FileList.Model.FileItemState.New,CCL.FileList.Model.FileItemState.Ready,CCL.FileList.Model.FileItemState.InProgress,CCL.FileList.Model.FileItemState.Aborting]),a=b.countFileItemsInGivenStates(d,[CCL.FileList.Model.FileItemState.Success]);d=b.countFileItemsInGivenStates(d,[CCL.FileList.Model.FileItemState.Error]);return b.determineStatus(c,a,d)}}b.prototype.countFileItemsInGivenStates=
function(b,d){return b.filter(function(c){c=c.getState();return-1!==d.indexOf(c)}).length};b.prototype.determineStatus=function(b,d,c){return 0<b?UploadStatus.InProgress:0<d&&0<c?UploadStatus.SucceededWithErrors:0<d?UploadStatus.Succeeded:0<c?UploadStatus.Failed:UploadStatus.Awaiting};return b}(),uploaderFileStatus;(function(b){b[b.added=1]="added";b[b.inProgress=2]="inProgress";b[b.success=3]="success";b[b.error=4]="error"})(uploaderFileStatus||(uploaderFileStatus={}));
function AjaxUploaderCommon(){return{getRelativePath:function(b,e){return browserSniffer.isFirefox()?b.relativePath||e||"":b.webkitRelativePath||b.relativePath||e||""}}}
var auCommon=AjaxUploaderCommon(),UploaderFileItem=function(){function b(b,d){var c=this;this.fileData=b;this.literals=d;this.getProgressSafe=function(a){return a||0};this.hasAction=ko.observable(!1);this.preview=ko.observable(null);this.progress=ko.observable(null);this.progressText=ko.pureComputed(function(){var a=String(100*c.getProgressSafe(c.progress()));return parseInt(a,10)+"%"});this.status=ko.observable(uploaderFileStatus.added);this.isActionEnabled=ko.observable(!0);this.isActionVisible=
ko.observable(!0);this.errorMessage=ko.observable(null);this.messageColumnCss=ko.pureComputed(function(){switch(c.status()){case uploaderFileStatus.error:return"error";case uploaderFileStatus.inProgress:return"progress";default:return"empty-col"}});this.buttonColumnCss=ko.pureComputed(function(){var a="";switch(c.status()){case uploaderFileStatus.success:a+="delete";break;default:a+="cancel"}c.isActionEnabled()||(a+=" transparent");return a});this.isError=ko.pureComputed(function(){return c.status()===
uploaderFileStatus.error});this.isInProgress=ko.pureComputed(function(){return c.status()===uploaderFileStatus.inProgress});this.isProgressSet=ko.pureComputed(function(){return objectState.isNumber(c.progress())});this.useDefaultPreview=ko.pureComputed(function(){return null===c.preview()});this.name=this.fileData.name;this.size=this.fileData.size;this.fileId=this.fileData.fileId;this.sizeText=this.literals.getFormattedFileSize(b.size);this.action=null}b.prototype.emptyAction=function(){return!1};
return b}(),UploaderFileList=function(){return function(b,e,d){var c=this;this.fileListElement=b;this.fileItemFactory=e;this.literals=d;this.findFileById=function(a){return ko.utils.arrayFirst(c.files(),function(c){return c.fileId===a})};this.setFileStatus=function(a,b,d){a=c.findFileById(a);objectState.isNullOrUndefined(a)||(a.status(b),c.prepareActionCallback(a,d))};this.prepareActionCallback=function(a,c){c?(a.action=function(){c(a.fileId)},a.hasAction(!0)):null===c&&(a.action=null,a.hasAction(!1))};
this.setErrorMessage=function(a,b){a=c.findFileById(a);objectState.isNullOrUndefined(a)||(objectState.isNullOrWhitespace(b)&&(b=c.literals.unknown),a.errorMessage(b))};this.addFile=function(a,b){c.removeFiles();a=c.fileItemFactory.create(a,c.literals);c.prepareActionCallback(a,b);c.files.push(a)};this.removeFile=function(a){c.files.remove(function(c){return c.fileId===a})};this.removeFiles=function(){c.files.removeAll()};this.setDefaultFileProgress=function(a){c.updateFileProgress(a,null)};this.updateFileProgress=
function(a,b){a=c.findFileById(a);objectState.isNullOrUndefined(a)||a.progress(b)};this.setFileStatusToInProgress=function(a){c.setFileStatus(a,uploaderFileStatus.inProgress)};this.setFileStatusToSuccess=function(a,b){c.setFileStatus(a,uploaderFileStatus.success,b)};this.setFileStatusToError=function(a,b,d){c.setFileStatus(a,uploaderFileStatus.error,d);c.setErrorMessage(a,b)};this.updateFilePreview=function(a,b){a=c.findFileById(a);objectState.isNullOrUndefined(a)||a.preview(b)};this.setActionCallback=
function(a,b){a=c.findFileById(a);objectState.isNullOrUndefined(a)||c.prepareActionCallback(a,b)};this.disableAction=function(a){a=c.findFileById(a);objectState.isNullOrUndefined(a)||a.isActionEnabled(!1)};this.enableAction=function(a){a=c.findFileById(a);objectState.isNullOrUndefined(a)||a.isActionEnabled(!0)};this.hideAction=function(a){a=c.findFileById(a);objectState.isNullOrUndefined(a)||a.isActionVisible(!1)};contract.require(!objectState.isNullOrUndefined(b),"argument 'fileListElement' is not defined");
contract.require(!objectState.isNullOrUndefined(e),"argument 'fileItemFactory' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'literals' is not defined");this.files=ko.observableArray([]);ko.applyBindings(this,this.fileListElement[0])}}();
function UploadStateServiceClient(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'options' is not defined");contract.require(!objectState.isNullOrUndefined(b.client),"'options.client' is not defined");contract.require(!objectState.isNullOrUndefined(b.hub),"'options.hub' is not defined");var e={usePreExistingChannel:null,openChannel:function(c){e.usePreExistingChannel=!1;null!==b.hub&&"undefined"!==typeof b.hub.id&&(e.usePreExistingChannel=!0);b.client.UpdateUploadProgress=function(a){e.onProgress(a)};
b.client.UploadCompleted=function(a){e.onSuccess(JSON.parse(a));e.usePreExistingChannel||b.hub.stop()};b.client.UploadError=function(a){e.onFail(a);e.usePreExistingChannel||b.hub.stop()};b.client.uploadAborted=function(){e.onAbort();e.usePreExistingChannel||b.hub.stop()};e.usePreExistingChannel?(c.channelId=b.hub.id,e.onChannelOpened(c)):e.openNewChannel(c)},openNewChannel:function(c){var a=!1;b.hub.start({transport:"longPolling"}).done(function(){a||(a=!0,c.channelId=b.hub.id,e.onChannelOpened(c))}).fail(function(){a||
(a=!0,console.log("Could not connect to UploadProgressNotificationHub!"),e.onChannelOpenFailure())});b.openTimeoutPeriodInMs&&setTimeout(function(){a||(a=!0,console.log("Connecting to UploadProgressNotificationHub timed out!"),e.onChannelOpenFailure())},b.openTimeoutPeriodInMs)},onProgress:function(c){if(b.onProgress)b.onProgress(c)},onSuccess:function(c){if(b.onSuccess)b.onSuccess(c)},onFail:function(c){if(b.onFail)b.onFail(c)},onAbort:function(){if(b.onAbort)b.onAbort()},onChannelOpened:function(c){if(b.onChannelOpened)b.onChannelOpened(c)},
onChannelOpenFailure:function(){if(b.onChannelOpenFailure)b.onChannelOpenFailure()},initialize:function(c){e.openChannel(c)}},d={channelId:null,abort:function(){}};e.initialize(d);return d}
var UploadStateService=function(){return function(){var b=this;this.uploadStateServiceClient=this.server=this.hub=this.client=null;this.specifyServiceUrl=function(b){objectState.isNullOrUndefined(b.endpoint)||($.connection.hub.url=b.endpoint)};this.openChannelWithoutSignalRLoaded=function(b){if(b&&b.onChannelOpenFailure)b.onChannelOpenFailure()};this.openChannelWithSignalRLoaded=function(e){e=e||{};b.uploadStateServiceClient=UploadStateServiceClient({client:b.client,hub:b.hub,onProgress:e.onProgress,
onSuccess:e.onSuccess,onFail:e.onFail,onChannelOpened:e.onChannelOpened,onAbort:e.onAbort,onChannelOpenFailure:e.onChannelOpenFailure,openTimeoutPeriodInMs:3E3})};this.abortUploadWithoutSignalRLoaded=function(b){safeConsoleLogger.log("Request to abort failed. Script with signalr hub definition has not come yet.");b&&b()};this.abortUploadWithSignalRLoaded=function(e){b.server.abortUpload().fail(function(b){safeConsoleLogger.log("Request to abort failed, probably because SignalR is unavailable. "+b);
e&&e()})};this.signalrHubScriptLoaded=function(e){contract.require(!objectState.isNullOrUndefined(e),"argument 'options' is not defined");contract.require(!objectState.isNullOrUndefined(e.signalR),"'options.signalR' is not defined");contract.require(!objectState.isNullOrUndefined(e.signalR.uploadProgressNotificationHub),"could not find progress notification hub");b.specifyServiceUrl(e);b.client=e.signalR.uploadProgressNotificationHub.client;b.server=e.signalR.uploadProgressNotificationHub.server;
b.hub=e.signalR.hub;b.openChannel=b.openChannelWithSignalRLoaded;b.abortUpload=b.abortUploadWithSignalRLoaded};this.openChannel=this.openChannelWithoutSignalRLoaded;this.abortUpload=this.abortUploadWithoutSignalRLoaded}}();
(function(b){var e=function(){function b(){this.resetState()}b.prototype.getCurrentState=function(){return this.currentState};b.prototype.getFileId=function(){return this.fileId};b.prototype.isFinalState=function(){return this.currentState===FileUploadState.Success||this.currentState===FileUploadState.Error};b.prototype.prepareUpload=function(c){contract.require(!objectState.isNullOrUndefined(c),"'fileId' is not defined");if(this.currentState===FileUploadState.New)this.fileId=c,this.currentState=
FileUploadState.Ready;else throw Error("You can only prepare upload if it is in status 'New'");};b.prototype.startUpload=function(){if(this.currentState===FileUploadState.Ready)this.currentState=FileUploadState.InProgress;else throw Error("You can only start upload if it is in status 'Ready'");};b.prototype.abortUpload=function(){if(this.currentState===FileUploadState.InProgress)this.currentState=FileUploadState.Aborting;else throw Error("You can only abort upload if it is in status 'InProgress'");
};b.prototype.finishUpload=function(){if(this.currentState===FileUploadState.Ready||this.currentState===FileUploadState.InProgress||this.currentState===FileUploadState.Aborting)this.currentState=FileUploadState.Success;else throw Error("You can only finish upload if it is in status 'InProgress' or 'Ready' or 'Aborting'");};b.prototype.failUpload=function(){if(this.currentState===FileUploadState.Ready||this.currentState===FileUploadState.InProgress||this.currentState===FileUploadState.Aborting)this.currentState=
FileUploadState.Error;else throw Error("You can only fail upload if it is in status 'Ready' or 'InProgress' or 'Aborting'");};b.prototype.resetState=function(){this.currentState=FileUploadState.New;this.fileId=null};return b}();b.FileUploadStateHandler=e})(GenericUploader||(GenericUploader={}));var LegacyGenericUploaderControlFailureReason;(function(b){b[b.AllPickersFailed=0]="AllPickersFailed"})(LegacyGenericUploaderControlFailureReason||(LegacyGenericUploaderControlFailureReason={}));
var LegacyGenericUploaderControlFailureEventArgs=function(){return function(b){this.failureReason=b}}(),LegacyGenericUploaderCallbacks=function(){return function(b,e){b&&e&&(this.controlInitialized=e.getFunctionByName(b?b.OnControlInitialization:void 0),this.fileSelected=e.getFunctionByName(b?b.OnFileSelected:void 0),this.fileSelectionCanceled=e.getFunctionByName(b?b.OnFileSelectionCanceled:void 0),this.fileUploadSuccess=e.getFunctionByName(b?b.OnFileUploadSuccess:void 0),this.fileUploadError=e.getFunctionByName(b?
b.OnFileUploadError:void 0),this.controlInitializationError=e.getFunctionByName(b?b.OnControlInitializationError:void 0),this.pickerInitFailure=e.getFunctionByName(b?b.OnPickerInitFailure:void 0),this.fileUploadAborted=e.getFunctionByName(b?b.OnFileUploadAborted:void 0),this.fileRemoved=e.getFunctionByName(b?b.fileRemoved:void 0))}}(),LegacyGenericUploaderControl=function(){function b(b,d,c,a,f,g,h,k,l){var e=this;this.settings=b;this.literals=d;this.pickers=c;this.sender=a;this.fileList=f;this.fileMetadataFactory=
g;this.uploaderCallbacks=h;this.uploadStateHandler=k;this.fileResultValidator=l;this.shouldAllowToCancelUpload=!1;this.initPickerInitializationDfds=function(a){e.pickerInitializationDfds=a.map(function(){return $.Deferred()})};this.initialize=function(){e.pickers.forEach(function(a,c){e.initPickerCallback(a,c)});e.controlInitializedDfd.done(e.uploaderCallbacks.controlInitialized);e.controlInitializedDfd.fail(e.uploaderCallbacks.controlInitializationError)};this.initPickerCallback=function(a,c){var b=
new PickerCallback(function(){return e.onPickerInitialized(c)},function(a){return e.onPickerInitializationError(c,a)},e.onFileSelected,function(){});a.subscribe(b);e.pickerInitializationDfds[c].fail(e.uploaderCallbacks.pickerInitFailure)};this.onPickerInitialized=function(a){e.pickerInitializationDfds[a].resolve();e.checkPickersInitStateAndRaiseControlInit()};this.onPickerInitializationError=function(a,c){e.pickerInitializationDfds[a].reject(e,c);e.checkPickersInitStateAndRaiseControlInit()};this.checkPickersInitStateAndRaiseControlInit=
function(){e.pickerInitializationDfds.every(function(a){return"rejected"===a.state()})?e.controlInitializedDfd.reject(e,new LegacyGenericUploaderControlFailureEventArgs(LegacyGenericUploaderControlFailureReason.AllPickersFailed)):e.pickerInitializationDfds.every(function(a){return"pending"!==a.state()})&&e.controlInitializedDfd.resolve(e)};this.onUploadError=function(a){e.fileList.setFileStatusToError(e.uploadStateHandler.getFileId(),a,e.removeFromList);e.uploadStateHandler.failUpload();e.fileList.enableAction(e.uploadStateHandler.getFileId());
e.enablePickerButton();e.uploaderCallbacks.fileUploadError&&e.uploaderCallbacks.fileUploadError(a)};this.onUploadSuccess=function(a,c){e.fileList.setFileStatusToSuccess(e.uploadStateHandler.getFileId(),e.removeFromList);e.uploadStateHandler.finishUpload();e.settings.disableDeletePostBackAfterUpload?e.doNotAllowToCancelUpload():e.fileList.enableAction(e.uploadStateHandler.getFileId());e.uploaderCallbacks.fileUploadSuccess&&e.uploaderCallbacks.fileUploadSuccess(a,c||{})};this.removeFromList=function(a){e.fileList.removeFile(a);
e.enablePickerButton();e.uploaderCallbacks.fileRemoved&&e.uploaderCallbacks.fileRemoved()};this.disablePickerButton=function(){e.pickers.forEach(function(a){return a.disable()})};this.enablePickerButton=function(){e.pickers.forEach(function(a){return a.enable()})};this.addFilesToFileList=function(a){a=e.fileMetadataFactory.create(a);e.fileList.addFile(a);e.uploadStateHandler.prepareUpload(a.fileId);e.fileList.setFileStatusToInProgress(e.uploadStateHandler.getFileId())};this.onUploadProgress=function(a){a/=
100;e.shouldAllowToCancelUpload&&(e.fileList.enableAction(e.uploadStateHandler.getFileId()),e.shouldAllowToCancelUpload=!1);e.fileList.updateFileProgress(e.uploadStateHandler.getFileId(),a);e.settings.disableDeletePostBackAfterUpload&&a>=e.disableDeletePostbackThreshold&&e.doNotAllowToCancelUpload()};this.onAbortSuccess=function(){e.uploadStateHandler.abortUpload();e.removeFromList(e.uploadStateHandler.getFileId());e.uploaderCallbacks.fileUploadAborted&&e.uploaderCallbacks.fileUploadAborted()};this.onAbortFailure=
function(){e.uploadStateHandler.isFinalState()?safeConsoleLogger.log("Abort request failed, but upload has already ended."):(e.doNotAllowToCancelUpload(),e.fileList.updateFileProgress(e.uploadStateHandler.getFileId(),"-"),e.fileList.setFileStatusToInProgress(e.uploadStateHandler.getFileId()))};this.onFileSelected=function(a){e.uploadStateHandler.resetState();e.disablePickerButton();var c=e.sender.getOptions();e.uploaderCallbacks.fileSelected&&e.uploaderCallbacks.fileSelected(a.files[0],c);e.addFilesToFileList(a.files);
if(e.validate(a)){e.shouldAllowToCancelUpload=!0;e.fileList.disableAction(e.uploadStateHandler.getFileId());a=new GenericUploader.RequestToSender(a.files[0]);var b=e.sender.send(a,e.onUploadProgress,e.onUploadSuccess,e.onUploadError,c);e.fileList.setActionCallback(e.uploadStateHandler.getFileId(),function(){b.abort(e.onAbortSuccess,e.onAbortFailure)});e.uploadStateHandler.startUpload()}};this.validate=function(a){if(1<a.files.length)return!0;a=e.fileResultValidator.validateFile(a.files[0]);return a.isValid()?
!0:(e.onUploadError(a.getData()),!1)};this.doNotAllowToCancelUpload=function(){e.shouldAllowToCancelUpload=!1;e.fileList.disableAction(e.uploadStateHandler.getFileId())};this.hidePicker=function(){e.pickers.forEach(function(a){return a.hide()})};this.showPicker=function(){e.pickers.forEach(function(a){return a.show()})};this.enableMultipleFilesMode=function(){e.pickers.forEach(function(a){return a.enableMultipleFilesSelecting()})};this.disableMultipleFilesMode=function(){e.pickers.forEach(function(a){return a.disableMultipleFilesSelecting()})};
this.subscribe=function(a){e.uploaderCallbacks=a;e.controlInitializedDfd.done(e.uploaderCallbacks.controlInitialized);e.controlInitializedDfd.fail(e.uploaderCallbacks.controlInitializationError);e.pickerInitializationDfds.forEach(function(a){return a.fail(e.uploaderCallbacks.pickerInitFailure)})};contract.require(!objectState.isNullOrUndefined(this.settings),"'settings' is not defined");contract.require(!objectState.isNullOrUndefined(this.literals),"'literals' is not defined");contract.require(!objectState.isNullOrUndefined(this.pickers),
"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.sender),"'sender' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),"'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileMetadataFactory),"'fileMetadataFactory' is not defined");contract.require(!objectState.isNullOrUndefined(this.uploaderCallbacks),"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.uploadStateHandler),"'uploadStateHandler' is not defined");
contract.require(!objectState.isNullOrUndefined(this.fileResultValidator),"'fileResultValidator' is not defined");this.controlInitializedDfd=$.Deferred();this.initPickerInitializationDfds(c);this.disableDeletePostbackThreshold=.99;this.initialize()}b.prototype.setCurrentFileStatusToError=function(b){var d=this.uploadStateHandler.getFileId();this.fileList.setFileStatusToError(d,b,this.removeFromList);this.fileList.enableAction(d)};b.prototype.setFileRemovedCallback=function(b){var d=this;this.fileList.setActionCallback(this.uploadStateHandler.getFileId(),
function(c){d.removeFromList(c);"function"===typeof b&&b()})};b.prototype.displayFileInFileList=function(b,d,c){var a=this.fileMetadataFactory.generateFileId();this.uploadStateHandler.prepareUpload(a);this.uploadStateHandler.finishUpload();b={name:b,size:d,fileId:this.uploadStateHandler.getFileId()};this.fileList.addFile(b);c?(this.fileList.setFileStatusToSuccess(this.uploadStateHandler.getFileId(),this.removeFromList),this.disablePickerButton()):this.fileList.setFileStatusToSuccess(this.uploadStateHandler.getFileId());
this.settings.readOnlyMode?this.fileList.hideAction(this.uploadStateHandler.getFileId()):this.settings.disableDeletePostBackAfterUpload?this.doNotAllowToCancelUpload():this.fileList.enableAction(this.uploadStateHandler.getFileId())};return b}(),LegacyGenericUploaderSettings=function(){function b(b){this.redirectUrl=b.RedirectUrl;this.pickerUrl=b.PickerUrl;this.uploadUrl=b.UploadUrl;this.disableDeletePostBackAfterUpload=this.getBoolean(b.DisableDeletePostBackAfterUpload);this.readOnlyMode=this.getBoolean(b.ReadOnlyMode);
this.uploadStateServiceEndpoint=b.UploadStateServiceEndpoint;this.minFileSize=parseInt(b.MinFileSize);this.maxFileSize=parseInt(b.MaxFileSize);this.forbiddenFileExtensions=this.getArray(b.ForbiddenFileExtensions);this.illegalCharacters=this.getArray(b.IllegalCharacters);this.restrictedFileNames=this.getArray(b.IllegalFileNames);this.maxFileNameLength=parseInt(b.MaxFileNameLength)}b.prototype.getBoolean=function(b){return/^true$/i.test(b)};b.prototype.getArray=function(b){return"undefined"===typeof b||
null==b?null:JSON.parse(b)};return b}();function UploaderSenderOptionsFactory(){return{create:function(b){return new UploaderSenderOptions(b)}}}
function ExternalUploadersFileMetadataFactory(b,e){contract.require(!objectState.isNullOrUndefined(b),"");contract.require(!objectState.isNullOrUndefined(e),"");return{create:function(d){if(void 0==d)throw Error("Files are undefined");if(!(d instanceof Array))throw Error("Files are not an array");var c={fileId:null,size:null,name:null};c.fileId=b.newGuid();c.size=d.reduce(function(a,c){return a+c.size},0);c.name=1===d.length?d[0].name:e;return c},generateFileId:function(){return b.newGuid()}}}
var PickerFileResultValidator=function(){function b(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'validators' cannot be null or undefined");this.validators=b}b.prototype.validateFile=function(b){for(var d=0,c=this.validators;d<c.length;d++){var a=c[d];if(!objectState.isNullOrUndefined(a)&&(a=a.validateFile(b),!a.isValid()))return a}return new ValidationResult(ValidationStatus.Ok)};return b}(),FileReaderErrorValidator=function(){function b(){}b.prototype.validateFile=function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file' cannot be null or undefined");
b=b.getFileHandle();return objectState.isFileError(b)||objectState.isDomError(b)?new ValidationResult(ValidationStatus.FileIsUnavailable,b):new ValidationResult(ValidationStatus.Ok)};return b}(),FileSizeValidator=function(){function b(b,d,c,a){if(0>b)throw Error("Minimal file size cannot be negative");if(0>d)throw Error("Maximal file size cannot be negative");if(b>d)throw Error("Maximal file size must be greater than minimal file size");this.minFileSize=b;this.maxFileSize=d;this.maxFileSizeForPlagiarism=
a;this.plagiarismAllowedExtensions=c;this.isPlagiarismValidationEnabled=Array.isArray(this.plagiarismAllowedExtensions)&&0<this.plagiarismAllowedExtensions.length&&!objectState.isNullOrUndefined(this.maxFileSizeForPlagiarism)}b.prototype.validateFile=function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file' cannot be null or undefined");if(objectState.isNullOrUndefined(b.size))return new ValidationResult(ValidationStatus.Inconclusive);if(0===b.size)return new ValidationResult(ValidationStatus.FileIsEmpty);
if(b.size<this.minFileSize)return new ValidationResult(ValidationStatus.FileSizeIsTooSmall,this.minFileSize);var d=FileExtensionValidator.getFileExtension(b.name);return this.isPlagiarismValidationEnabled&&this.isPlagiarismSupported(d)||!(b.size>this.maxFileSize)?this.isPlagiarismValidationEnabled&&this.isPlagiarismSupported(d)&&b.size>this.maxFileSizeForPlagiarism?new ValidationResult(ValidationStatus.FileSizeIsTooBig,this.maxFileSizeForPlagiarism):new ValidationResult(ValidationStatus.Ok):new ValidationResult(ValidationStatus.FileSizeIsTooBig,
this.maxFileSize)};b.prototype.isPlagiarismSupported=function(b){return this.plagiarismAllowedExtensions.some(function(d){return d.toLowerCase()===b.toLowerCase()})};return b}(),NameLengthValidator=function(){function b(b){this.maxAllowedFileNameLength=b;contract.require(!objectState.isNullOrUndefined(b),"'MaxAllowedFileNameLength' is not provided");if(!objectState.isNumber(b)||0>=b)throw Error("'maxAllowedFileNameLength' cannot be 0 or negative");}b.prototype.validateFile=function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file' cannot be null or undefined");
return this.validate(b.name)};b.prototype.validateFolder=function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file' cannot be null or undefined");return this.validate(b.name)};b.prototype.validate=function(b){if(objectState.isNullOrUndefined(b))throw Error("Argument 'file.name' cannot be null or undefined");return b.length>this.maxAllowedFileNameLength?new ValidationResult(ValidationStatus.FileNameIsTooLong,this.maxAllowedFileNameLength):0===b.length?new ValidationResult(ValidationStatus.FileNameIsEmpty):
new ValidationResult(ValidationStatus.Ok)};return b}(),LocalizedPickerFileResultValidator=function(){function b(b,d){this.validator=b;this.literals=d}b.prototype.validateFile=function(b){b=this.validator.validateFile(b);return b.isValid()?new ValidationResult(b.getStatus()):this.createLocalizedValidationResult(b)};b.prototype.createLocalizedValidationResult=function(b){var d=b.getStatus();b=this.getErrorMessage(b);return new ValidationResult(d,b)};b.prototype.getErrorMessage=function(b){switch(b.getStatus()){case ValidationStatus.FileExtensionIsNotAllowed:return this.literals.fileExtensionNotAllowed;
case ValidationStatus.FileIsUnavailable:return this.literals.unableToOpenFile;case ValidationStatus.FileNameIsIllegal:return this.literals.invalidFirstPartOfFileName.replace("{0}",b.getData());case ValidationStatus.FileSizeIsTooBig:return this.literals.getExcededSizeLimitTranslation(b.getData());case ValidationStatus.FileSizeIsTooSmall:return this.literals.getBelowSizeLimitTranslation(b.getData());case ValidationStatus.FileIsEmpty:return this.literals.fileIsEmpty;case ValidationStatus.FilenameContainsIllegalCharacters:return this.literals.invalidCharactersXInFileName.replace("{0}",
b.getData().join(" "));case ValidationStatus.FileNameIsTooLong:return this.literals.fileNameIsTooLong.replace("{0}",b.getData());case ValidationStatus.FileNameIsEmpty:return this.literals.fileNameIsEmpty;case ValidationStatus.FileTypeNotSupportedByCasper:return this.literals.fileTypeNotSupportedByCasper.replace("{0}",b.getData());case ValidationStatus.FileCannotBeShared:case ValidationStatus.FileCannotBeCopied:return this.literals.fileNotEnoughPermissions.replace("{0}",b.getData());default:return"-"}};
return b}(),PickerFileResultValidatorFactory=function(){function b(){}b.prototype.createFileValidatorWithLocalizedMessages=function(b,d){b=[new FileExtensionValidator(null,b.forbiddenFileExtensions),new FileReaderErrorValidator,new FileSizeValidator(b.minFileSize,b.maxFileSize),new IllegalCharactersValidator(b.illegalCharacters),new RestrictedFileNameValidator(b.restrictedFileNames),new NameLengthValidator(b.maxFileNameLength)];b=new PickerFileResultValidator(b);return new LocalizedPickerFileResultValidator(b,
d)};b.create=function(b,d){b=[new FileExtensionValidator(b.AllowedFileExtensions,b.ForbiddenFileExtensions),new FileReaderErrorValidator,new FileSizeValidator(b.MinFileSize,b.MaxFileSize,b.AllowedFileExtensionsForPlagiarism,b.MaxFileSizeForPlagiarism),new IllegalCharactersValidator(b.IllegalCharacters),new RestrictedFileNameValidator(b.IllegalFileNames),new NameLengthValidator(b.MaxFileNameLength)];b=new PickerFileResultValidator(b);return new LocalizedPickerFileResultValidator(b,d)};b.createValidatorForLinkedFilesInCloud=
function(b,d,c,a,f){b=[new NameLengthValidator(b),new FileInCloudTypeValidator(d,c,a)];b=new PickerFileResultValidator(b);return new LocalizedPickerFileResultValidator(b,f)};b.createValidatorForCollaborationFiles=function(b,d){b=new NameLengthValidator(b);return new LocalizedPickerFileResultValidator(b,d)};b.createValidatorForRenameFile=function(b,d){b=[new IllegalCharactersValidator(b.IllegalCharacters),new RestrictedFileNameValidator(b.IllegalFileNames),new NameLengthValidator(b.MaxFileNameLength)];
b=new PickerFileResultValidator(b);return new LocalizedPickerFileResultValidator(b,d)};return b}(),LegacyGenericUploaderControlFactory=function(){return function(b,e,d,c,a,f){var g=this;this.settings=b;this.literals=e;this.callbacks=d;this.pickers=c;this.fileList=a;this.sender=f;this.create=function(){return new LegacyGenericUploaderControl(g.settings,g.literals,g.pickers,g.sender,g.fileList,g.fileMetadataFactory,g.callbacks,g.uploadStateHandler,g.fileResultValidator)};contract.require(!objectState.isNullOrUndefined(this.settings),
"'settings' is not defined");contract.require(!objectState.isNullOrUndefined(this.literals),"'literals' is not defined");contract.require(!objectState.isNullOrUndefined(this.callbacks),"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.pickers),"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),"'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(this.sender),"'sender' is not defined");this.fileMetadataFactory=
ExternalUploadersFileMetadataFactory(window.guidFactory,this.literals.files);this.uploadStateHandler=new GenericUploader.FileUploadStateHandler;this.fileResultValidator=(new PickerFileResultValidatorFactory).createFileValidatorWithLocalizedMessages(b,this.literals)}}(),FileInGoogleDriveHandle=function(){function b(b){this.metadata=b}b.prototype.get=function(){return this.metadata};return b}(),CloudPickerWithButton=function(){function b(b,d){this.picker=b;this.button=d;if(objectState.isNullOrUndefined(this.picker))throw"This picker requires picker to be passed. Please provide it.";
if(objectState.isNullOrUndefined(this.button))throw"This picker requires button to be passed. Please provide it.";}b.prototype.show=function(){this.button.show()};b.prototype.hide=function(){this.button.hide()};b.prototype.enable=function(){this.button.removeAttr("disabled")};b.prototype.disable=function(){this.button.attr("disabled","disabled")};b.prototype.subscribe=function(b){var d=this,c=new PickerCallback(function(){d.button.unbind("click",d.picker.open);d.button.click(d.picker.open);b.onPickerInitSuccess()},
function(a){d.disable();b.onPickerInitFailure(a)},b.onFileSelected,b.onFileSelectionCanceled);this.picker.subscribe(c)};b.prototype.enableMultipleFilesSelecting=function(){this.picker.enableMultipleFilesSelecting()};b.prototype.disableMultipleFilesSelecting=function(){this.picker.disableMultipleFilesSelecting()};b.prototype.open=function(){"disabled"!==this.button.attr("disabled")&&this.picker.open()};return b}(),LocalFilePickerWrapper=function(){function b(b,d){this.localFilePicker=b;this.button=
d;if(objectState.isNullOrUndefined(this.localFilePicker))throw"This picker requires localFilePicker to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.button))throw"This picker requires button to be passed. Please provide it.";this.button.subscribeToFileSelectedEvent(this.localFilePicker.handleFileSelectedInInput)}b.prototype.show=function(){this.button.show()};b.prototype.hide=function(){this.button.hide()};b.prototype.enable=function(){this.button.enable()};b.prototype.disable=
function(){this.button.disable()};b.prototype.subscribe=function(b){this.localFilePicker.subscribe(b)};b.prototype.enableMultipleFilesSelecting=function(){this.localFilePicker.enableMultipleFilesSelecting();this.button.enableMultipleFilesSelecting()};b.prototype.disableMultipleFilesSelecting=function(){this.localFilePicker.disableMultipleFilesSelecting();this.button.disableMultipleFilesSelecting()};b.prototype.open=function(){this.button.open()};return b}();
(function(b){(function(b){(function(b){var c=function(){return function(){}}();b.Callbacks=c})(b.FileRepoSenderForExternalFiles||(b.FileRepoSenderForExternalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));var FileRepoError;(function(b){b[b.AbortedByUser=0]="AbortedByUser";b[b.UnknownError=1]="UnknownError";b[b.DownloadFromWebDavForbidden=2]="DownloadFromWebDavForbidden";b[b.FileSizeTooLarge=3]="FileSizeTooLarge"})(FileRepoError||(FileRepoError={}));
(function(b){b.toString=function(e){return b[e]}})(FileRepoError||(FileRepoError={}));
(function(b){(function(b){(function(b){(function(c){(function(a){var c=function(){function a(a,c){var b=this;this.errorResponseTranslator=a;this.callbacks=c;this.success=function(a,c,d){if(b.isSuccessReallyAFail(a))if(b.isErrorCodeAborted(a.error))b.callbacks.onAbortSuccess();else a=b.errorResponseTranslator.getErrorMessageFromErrorCode(a.error),b.callbacks.onSendFailure(a);else b.callbacks.onSendSuccess(b.file,a)};this.isSuccessReallyAFail=function(a){return!a||null!=a.error};contract.require(!objectState.isNullOrUndefined(a),
"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'callbacks' is not defined")}a.prototype.isErrorCodeAborted=function(a){return a===FileRepoError.toString(FileRepoError.AbortedByUser)};return a}();a.Success=c})(c.Action||(c.Action={}))})(b.Ajax||(b.Ajax={}))})(b.FileRepoSenderForExternalFiles||(b.FileRepoSenderForExternalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){(function(a){var c=function(){function a(a,c){var b=this;this.errorResponseTranslator=a;this.callbacks=c;this.error=function(a,c,d){if(b.wasUploadAborted(a))b.callbacks.onAbortSuccess();else a=b.getErrorMesage(a,d),b.callbacks.onSendFailure(a)};contract.require(!objectState.isNullOrUndefined(a),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'callbacks' is not defined")}a.prototype.getErrorMesage=
function(a,c){var b=this.errorResponseTranslator.getErrorMessageFromXhr(a);null==b&&(b=this.attemptToGetErrorMessageFromXhr(a));null==b&&(b=c);return b};a.prototype.attemptToGetErrorMessageFromXhr=function(a){if(a.responseText)try{var c=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(c.errorMessage))return c.errorMessage}catch(l){}return null};a.prototype.wasUploadAborted=function(a){if(!a||!a.responseText)return!1;try{var c=JSON.parse(a.responseText)}catch(l){return!1}return c&&c.error?
c.error===FileRepoError.toString(FileRepoError.AbortedByUser):!1};return a}();a.Error=c})(c.Action||(c.Action={}))})(b.Ajax||(b.Ajax={}))})(b.FileRepoSenderForExternalFiles||(b.FileRepoSenderForExternalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){(function(c){var a=function(){function a(a,c,b,d){var e=this;this.isIe9=a;this.fileRepoData=c;this.errorAction=b;this.successAction=d;this.build=function(a,c){contract.require(!objectState.isNullOrUndefined(a),"argument 'request' is not defined");var b={};e.successAction.file=a.file;e.isIe9?b.url=e.getUrlWithValidationParamsInQueryString(e.fileRepoData.Endpoint,e.getHeadersForFileRepo(c)):(b.url=e.fileRepoData.Endpoint,b.headers=e.getHeadersForFileRepo(c));b.type=
"POST";b.dataType="json";b.success=e.successAction.success;b.error=e.errorAction.error;b.data=JSON.stringify({Url:e.getUrlForFile(a.file),Name:a.file.name,Size:a.file.size,UploadStateChannelId:a.uploadStateChannelId,SourceType:a.file.sourceType});return b};contract.require(!objectState.isNullOrUndefined(a),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'fileRepoData' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'errorAction' is not defined");
contract.require(!objectState.isNullOrUndefined(d),"argument 'successAction' is not defined");this.tokenProviderEndpoint=c.TokenProviderEndpoint}a.prototype.getUrlWithValidationParamsInQueryString=function(a,c){c=$.param(c);var b=-1===a.indexOf("?");return a+(b?"?":"&")+c};a.prototype.getHeadersForFileRepo=function(a){return{"X-Public-Upload-From-External-Source":"1","X-Customer-Validations":this.fileRepoData.ValidationHeader,"X-Authorization-FileRepoToken":"Bearer "+a}};a.prototype.getUrlForFile=
function(a){return(a=a.getFileHandle())&&a.url?a.url:a};return a}();c.AjaxSettingsBuilder=a})(b.Ajax||(b.Ajax={}))})(b.FileRepoSenderForExternalFiles||(b.FileRepoSenderForExternalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
var UploadController=function(){function b(e,d,c,a,f){var g=this;this.pickers=e;this.sender=d;this.validator=c;this.actionQueue=a;this.settings=f;this.subscribe=function(a){g.callbacks=a;g.pickerInitializationDfds.forEach(function(a){return a.fail(g.callbacks.onInitializationFailure)})};this.initializePickers=function(){g.pickerInitializationDfds=g.pickers.map(function(){return $.Deferred()});g.pickers.forEach(function(a,c){g.initPickerCallback(a,c)})};this.initPickerCallback=function(a,c){var b=
new PickerCallback(function(){return g.resolvePickerInitialization(c)},function(a){return g.rejectPickerInitialization(c,a)},g.filesSelected,function(){});a.subscribe(b)};this.resolvePickerInitialization=function(a){g.pickerInitializationDfds[a].resolve()};this.rejectPickerInitialization=function(a,c){g.pickerInitializationDfds[a].reject(g,c)};this.uploadFailed=function(a,c){a.setError(c);a.onRemoveCallback=function(){g.fileRemoved(a)};a.isRemoveAllowed(!0);g.callbacks.onActionError(a.Metadata,a.errorMessage())};
this.uploadSucceeded=function(a,c,b){a.markAsUploaded();a.onRemoveCallback=function(){g.fileRemoved(a)};a.onRenameCallback=function(){g.renameFile(a)};a.isRemoveAllowed(!0);a.Metadata=UploadMetadata.create(c,b);a.mimeType(b.mimeType);g.updateShowTemplateOption(a);g.callbacks.onActionSuccess(a.Metadata);a.markAsCompleted()};this.fileRemoved=function(a){g.callbacks.onFileRemoved(a.Metadata)};this.renameFile=function(a){g.callbacks.onFileRenamed(a.Metadata)};this.uploadProgressed=function(a,c){a.isUploaded()||
(a.isRemoveAllowed(c<b.progressThresholdAfterWhichRemoveActionIsDisallowed),a.setProgress(c))};this.abortSucceeded=function(a){g.callbacks.onActionAborted(a.Metadata)};this.abortFailed=function(a){a.isUploaded()?safeConsoleLogger.warn("Abort request failed because upload already finished"):a.isRemoveAllowed(!1)};this.filesSelected=function(a){a.purpose!==PickerPurpose.LinkToCloud&&(a=g.prepareFileItemsWithResult(a),g.callbacks.onFilesSelected(a.map(function(a){return a.fileItem})),a.forEach(function(a){return g.prepareFileForSending(a.fileItem,
a.result)}))};this.prepareFileItemsWithResult=function(a){return a.files.map(function(a){return{result:a,fileItem:g.prepareFileItem(a)}})};this.prepareFileItem=function(a){a=CCL.FileList.Model.FileItem.buildItemForUpload(a.name,UploadMetadata.create(a));a.isCompleted()&&g.updateShowTemplateOption(a);return a};this.prepareFileForSending=function(a,c){if(g.handleValidation(a,c)){var b=new GenericUploader.RequestToSender(c),d=function(){g.send(a,b,c)};a.onRemoveCallback=function(){g.actionQueue.remove(d);
g.fileRemoved(a)};a.onSetTemplateCallback=function(){g.callbacks.onFileSetTemplate(a.Metadata)};g.actionQueue.register(d)}};this.handleValidation=function(a,c){c=g.validator.validateFile(c);if(c.isValid())return!0;g.uploadFailed(a,c.getData());return!1};this.send=function(a,c,b){var d=g.sender.send(c,function(c){return g.uploadProgressed(a,c)},function(c,b){g.actionQueue.signalDone();g.uploadSucceeded(a,c,b)},function(c){g.actionQueue.signalDone();g.uploadFailed(a,c)});a.onRemoveCallback=function(){g.actionQueue.signalDone();
d.abort(function(){return g.abortSucceeded(a)},function(){return g.abortFailed(a)})}};contract.require(!objectState.isNullOrUndefined(this.pickers),"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.sender),"'sender' is not defined");contract.require(!objectState.isNullOrUndefined(this.validator),"'fileResultValidator' is not defined");contract.require(!objectState.isNullOrUndefined(this.actionQueue),"'actionQueue' is not defined");this.initializePickers()}b.prototype.updateShowTemplateOption=
function(b){this.settings.FileListControlSettings.MimeTypesToTemplateFromUpload.some(function(d){return d===b.mimeType()})&&(b.showTemplateOptionsInFilelist(this.settings.FileListControlSettings.ShowTemplateOptions),b.showTemplateOptionsForItem(this.settings.FileListControlSettings.ShowTemplateOptions))};b.progressThresholdAfterWhichRemoveActionIsDisallowed=99;return b}();
(function(b){(function(b){(function(b){var c=function(){function a(a,c,b,d){var e=this;this.uploadStateService=a;this.jQuery=c;this.callbacks=b;this.ajaxSettingsBuilder=d;this.send=function(a,c,b,d){e.callbacks.onSendSuccess=b;e.callbacks.onSendFailure=d;a=e.prepareDelayedObj(a);a.data.onProgress=c;a.data.onAbort=function(){return e.callbacks.onAbortSuccess()};a.wait(e.openSignalRCommunicationChannel);a.wait(e.callFileRepo);return{abort:e.abort}};this.callFileRepo=function(a){$.getJSON(e.ajaxSettingsBuilder.tokenProviderEndpoint+
"?FileName="+encodeURIComponent(a.data.request.file.name),function(c){c=e.ajaxSettingsBuilder.build(a.data.request,c);e.jQuery.ajax(c)})};this.prepareDelayedObj=function(a){a=DelayRequest({request:a});a.signal();return a};this.openSignalRCommunicationChannel=function(a){e.uploadStateService.openChannel({onChannelOpened:function(c){a.data.request.uploadStateChannelId=c.channelId;a.signal()},onSuccess:null,onFail:null,onProgress:a.data.onProgress,onAbort:null,onChannelOpenFailure:function(){safeConsoleLogger.log("Opening channel failed, probably because SignalR is unavailable. Upload progress will not be tracked.");
a.data.onProgress(UploadController.progressThresholdAfterWhichRemoveActionIsDisallowed);a.signal()}})};this.abort=function(a,c){e.callbacks.onAbortSuccess=a;e.uploadStateService.abortUpload(c)};contract.require(!objectState.isNullOrUndefined(a),"argument 'uploadStateService' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'jQuery' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(d),
"argument 'ajaxSettingsBuilder' is not defined")}a.prototype.getOptions=function(){return null};return a}();b.Sender=c})(b.FileRepoSenderForExternalFiles||(b.FileRepoSenderForExternalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){(function(b){var c=b.Ajax.Action.Error,a=b.Ajax.Action.Success,d=b.Ajax.AjaxSettingsBuilder,e=function(){return function(e,f,g){var h=this;this.errorResponseTranslator=f;this.settings=g;this.fileRepoData={};this.build=function(){var e=new b.Callbacks,f=new c(h.errorResponseTranslator,e),g=new a(h.errorResponseTranslator,e);f=new d(h.isIe9,h.fileRepoData,f,g);var k=new UploadStateService;window.asyncDependenciesResolver.subscribeToDependencyLoadEvent(window.asyncDependencies.signalRHubScript,
function(){k.signalrHubScriptLoaded({signalR:$.signalR,endpoint:h.uploadStateServiceEndpoint})});return new b.Sender(k,$,e,f)};contract.require(!objectState.isNullOrUndefined(e),"argument 'browserSniffer' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(g),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(g.uploadStateServiceEndpoint),"argument 'settings.uploadStateServiceEndpoint' is not defined");
contract.require(!objectState.isNullOrUndefined(g.fileRepoData),"argument 'settings.fileRepoData' is not defined");this.uploadStateServiceEndpoint=g.uploadStateServiceEndpoint;this.fileRepoData=g.fileRepoData;this.isIe9=e.isInternetExplorer9()}}();b.Factory=e})(b.FileRepoSenderForExternalFiles||(b.FileRepoSenderForExternalFiles={}))})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(b){(function(b){var d=function(){function c(a,c){this.localSenderFactory=a;this.cloudSenderFactory=c;contract.require(!objectState.isNullOrUndefined(a),"FileRepoSender requires localSenderFactory to be provided.");contract.require(!objectState.isNullOrUndefined(c),"FileRepoSender requires cloudSenderFactory to be provided.")}c.prototype.send=function(a,c,b,d,e){return this.buildSenderForSourceType(a.file.sourceType).send(a,c,b,d,e)};c.prototype.getOptions=function(){return null};c.prototype.buildSenderForSourceType=
function(a){if(a===SourceType.Local)return this.localSenderFactory.build();if(SourceType.isCloud(a))return this.cloudSenderFactory.build();throw"Unsupported SourceType";};return c}();b.FileRepoSender=d})(b.Sender||(b.Sender={}))})(GenericUploader||(GenericUploader={}));
var GoogleTranslations=function(){return function(b,e){this.browserNotSupported=b;this.googleApiNotAvailable=e}}(),SelfResettingFileInput=function(){function b(b){this.input=b}b.prototype.show=function(){this.input.show()};b.prototype.hide=function(){this.input.hide()};b.prototype.enable=function(){this.input.removeAttr("disabled")};b.prototype.disable=function(){this.input.attr("disabled","disabled")};b.prototype.open=function(){this.input.click()};b.prototype.enableMultipleFilesSelecting=function(){this.input.attr("multiple",
"multiple")};b.prototype.disableMultipleFilesSelecting=function(){this.input.removeAttr("multiple")};b.prototype.subscribeToFileSelectedEvent=function(b){var d=this;this.input.on("change",function(){var c=d.input;d.input=d.cloneInputAndReplaceInDom(c);d.prepareInputForCallback(c);b(c,c[0])})};b.prototype.getFileInputJQueryElement=function(){return this.input};b.prototype.getFileInputHtmlElement=function(){return this.input[0]};b.prototype.cloneInputAndReplaceInDom=function(b){var d=this.cloneElementPreservingEventHandlers(b);
this.resetElementUsingForm(d);this.addElementToDomAfterOtherElement(d,b);this.removeElementFromDomKeepingInformationAboutFile(b);this.removeEventHandlersFromElement(b);return d};b.prototype.cloneElementPreservingEventHandlers=function(b){return b.clone(!0)};b.prototype.resetElementUsingForm=function(b){$("<form></form>").append(b)[0].reset()};b.prototype.removeEventHandlersFromElement=function(b){b.off()};b.prototype.addElementToDomAfterOtherElement=function(b,d){d.after(b)};b.prototype.removeElementFromDomKeepingInformationAboutFile=
function(b){b.detach()};b.prototype.prepareInputForCallback=function(b){b.removeAttr("disabled")};return b}(),GapiCallback=function(){return function(b,e,d,c){this.onFileSelected=b;this.onFileSelectionCanceled=e;this.onFileSelectionFailed=d;this.onFileProcessing=c}}();
(function(b){(function(e){var d=function(){return function(c,a,d,e,h){var f=this;this.pickerComponents=c;this.pickers=a;this.onCloseClick=d;this.onPickerOpen=e;this.linkToTabName="linkToTab";this.uploadFileTabName="uploadFileTab";this.cloudServiceUnavailableTranslation=ko.observable("");this.isNarrowScreen=ko.observable(b.UploadControlUtils.isMobile());this.namesOfPickersFailedToInit="";this.handlePickersInitialization=function(){f.isWarningVisible=ko.observable(!1);for(var a=0,c=f.pickers;a<c.length;a++)c[a].subscribe(new PickerCallback(function(){},
f.handlePickerInitFailure,function(){},function(){}))};this.handlePickerInitFailure=function(a){f.concatFailedPickerNames(a.pickerName);f.cloudServiceUnavailableTranslation(UploadControlTranslation.cloudServiceUnavailable.replace("{0}",f.namesOfPickersFailedToInit));f.isWarningVisible(!0)};this.isUploadColumnVisible=function(){return 0<f.uploadPickerComponents.length};this.dialogHasMoreThenOneColumn=function(){return f.isUploadColumnVisible()&&f.isLinkColumnVisible()};this.isSeparatorVisible=function(){return f.dialogHasMoreThenOneColumn()};
this.isLinkColumnVisible=function(){return 0<f.linkToCloudPickerComponents.length};this.changeTabForMobile=function(){f.isNarrowScreen.peek()&&f.selectedTabName($(event.currentTarget).find("a").prop("hash").substr(1));event.preventDefault()};this.subscribeToBlurEventCapturePhase=function(){document.getElementById("ccl-uc-file-dialog-container").addEventListener("blur",f.hideDialogContainer,!0)};this.hideDialogContainer=function(){setTimeout(function(){if(f.isNotPartOfDialogContainer($(document.activeElement)))f.onCloseClick()},
0)};this.isNotPartOfDialogContainer=function(a){return 0===a.closest("#ccl-uc-file-dialog-container").length};this.concatFailedPickerNames=function(a){f.namesOfPickersFailedToInit=1>f.namesOfPickersFailedToInit.length?f.namesOfPickersFailedToInit+a:f.namesOfPickersFailedToInit+(", "+a)};this.handlePickersInitialization();!h&&this.subscribeToBlurEventCapturePhase();this.uploadPickerComponents=c.filter(function(a){return a.purpose===PickerPurpose.Upload||a.purpose===PickerPurpose.Combined});this.linkToCloudPickerComponents=
c.filter(function(a){return a.purpose===PickerPurpose.LinkToCloud});this.selectedTabName=ko.observable(this.isUploadColumnVisible()?this.uploadFileTabName:this.isLinkColumnVisible()?this.linkToTabName:"");this.isUploadColumnSelected=ko.pureComputed(function(){return!f.isNarrowScreen()||f.selectedTabName()===f.uploadFileTabName});this.isLinkColumnSelected=ko.pureComputed(function(){return!f.isNarrowScreen()||f.selectedTabName()===f.linkToTabName});$(window).on("resize",function(){var a=b.UploadControlUtils.isMobile();
f.isNarrowScreen(a);$("#ccl-uc-file-dialog-container").is(":visible")&&b.UploadControlUtils.toggleTopFrameAndMobileOverlay(!a)})}}();e.DialogViewModel=d})(b.Dialog||(b.Dialog={}))})(Components||(Components={}));
(function(b){(function(e){var d=function(){return function(c,a,d){var f=this;this.pickerComponents=c;this.pickers=a;this.showOnlyUploadDialog=d;this.name=b.ComponentName.dialog;this.viewModel=function(a){return new e.DialogViewModel(f.pickerComponents,f.pickers,a.onCloseClick,a.onPickerOpen,f.showOnlyUploadDialog)};this.template='\n<div id="ccl-uc-file-dialog-container" tabindex="1">\n    <div id="ccl-uc-triangle-row" data-bind="visible: !isNarrowScreen()">\n        <div id="ccl-uc-triangle-container">\n            <div id="ccl-uc-triangle"></div>\n        </div>\n    </div>\n        \n    <div id="ccl-uc-file-dialog">\n        <button data-bind="click: onCloseClick, visible: !isNarrowScreen(), attr: { \'aria-label\': UploadControlTranslation.close }" id="ccl-uc-close-button" class="ccl-uc-close-icon"></button>\n        <div class="ccl-uc-source-title-container" data-bind="visible: isNarrowScreen">\n            <div role="tab" class="ccl-uc-source-column-title" data-bind="visible: isUploadColumnVisible(), click: changeTabForMobile">\n                <a href="#uploadFileTab" data-bind="text: UploadControlTranslation.uploadFileFromMobile, css: { \'ccl-uc-tab-link-active\': (selectedTabName() === uploadFileTabName && dialogHasMoreThenOneColumn() ) }"></a>\n            </div>\n            <div role="tab" class="ccl-uc-source-column-title" data-bind="visible: isLinkColumnVisible(), click: changeTabForMobile">\n                <a href="#linkToTab" data-bind="text: UploadControlTranslation.linkToMobile, css: { \'ccl-uc-tab-link-active\': (selectedTabName() === linkToTabName && dialogHasMoreThenOneColumn() ) }"></a>\n            </div>\n        </div>\n        <div id="ccl-uc-source">\n            <div class="ccl-uc-source-utmost-column" data-bind="visible: (isUploadColumnVisible() && isUploadColumnSelected)" role="tabpanel">\n                <div class="ccl-uc-source-column-title" data-bind="visible: !isNarrowScreen(), text: UploadControlTranslation.uploadFileFrom"></div>\n                <div data-bind="foreach: uploadPickerComponents">\n                    <div class="ccl-uc-source-column-line" data-bind="component: {name: componentName, params: {onPickerOpen: $parent.onPickerOpen}}"></div>\n                </div>\n            </div>\n        \n            <div id="ccl-uc-source-middle-column" data-bind="visible: (isSeparatorVisible() && !isNarrowScreen())">\n                <div id="ccl-uc-source-middle-column-line"></div>\n                <div id="ccl-uc-source-middle-column-title" data-bind="text: UploadControlTranslation.or"></div>\n            </div>\n        \n            <div class="ccl-uc-source-utmost-column" data-bind="visible: (isLinkColumnVisible() && isLinkColumnSelected)" role="tabpanel">\n                <div class="ccl-uc-source-column-title" data-bind="visible: !isNarrowScreen(), text: UploadControlTranslation.linkTo"></div>\n                <div data-bind="foreach: linkToCloudPickerComponents">\n                    <div class="ccl-uc-source-column-line" data-bind="component: {name: componentName, params: {onPickerOpen: $parent.onPickerOpen}}"></div>\n                </div>\n            </div>\n        </div>\n        <div class="ccl-uc-warning-container" data-bind="visible: isWarningVisible">\n            <div class="ccl-uc-warning">\n                <div class="ccl-uc-warning-icon">\n                    <span aria-hidden="true" class="ili ili-exclamation-circle"></span>\n                </div>\n                <div class="ccl-uc-warning-text">\n                    <span class="ccl-uc-warning-text-header" data-bind="text: cloudServiceUnavailableTranslation"></span>\n                    <span data-bind="text: UploadControlTranslation.tryAgainOrContactAdministrator"></span>\n                </div>\n            </div>\n        </div>\n        <div data-bind="visible: isNarrowScreen" class="ccl-uc-close-button-mobile-container">\n            <button data-bind="text: UploadControlTranslation.cancel, click: onCloseClick" class="ccl-button ccl-button-color-grey"></button>\n        </div>\n    </div>\n</div>\n'}}();
e.DialogComponent=d})(b.Dialog||(b.Dialog={}))})(Components||(Components={}));
(function(b){var e=function(){return function(d,c,a,e){var f=this;void 0===a&&(a=CCL.FileList.Components.NestedFileListComponent.defaultNestedFileListHtmlTag);this.uploadAreaState=d;this.pickers=c;this.fileListHtmlTagName=a;this.settings=e;this.name=b.ComponentName.uploadArea;this.viewModel={createViewModel:function(a,c){return new b.UploadAreaViewModel(f.uploadAreaState,f.settings,f.pickers)}};this.template='\n<div data-bind="visible: isUploadAreaVisible, css: getUploadAreaCss()" class="ccl-uc-upload-area">\n    <dropzone-picker data-bind="visible: !enableCompactView && !showOnlyUploadDialog, click: showDialog" class="ccl-uc-upload-area-picker"></dropzone-picker>\n    <button data-bind="visible: enableCompactView && !showOnlyUploadDialog, click: showDialog, text: linkTitle" class="ccl-uc-upload-area-picker"></button>\n    <media-recorder-picker data-bind="visible: enableCompactView && !showOnlyUploadDialog"></media-recorder-picker>\n    <uc-dialog data-bind="visible: isDialogVisible, css: uploadDialogCss" params="onCloseClick: onCloseDialogClick, onPickerOpen: hideDialog"></uc-dialog>\n</div>\n<'+this.fileListHtmlTagName+
">\n    <"+CCL.FileList.Components.ContextMenuComponent.defaultFileItemContextMenuHtmlTag+' params="file: $data.file, settings: $data.settings"></'+CCL.FileList.Components.ContextMenuComponent.defaultFileItemContextMenuHtmlTag+">\n</"+this.fileListHtmlTagName+">\n"}}();b.UploadAreaComponent=e})(Components||(Components={}));
var FeedbackManager=function(){return function(b){var e=this;this.feedbackControl=b;this.messages=[];this.showFeedback=function(b){e.messages.push(b);b=e.messages.join("<br />");e.feedbackControl.showMessage(CCL.FeedbackType.Information,b)}}}(),GapiInitializerSettings=function(){return function(b,e){this.clientId=b;this.scope=e}}(),GapiFileResult=function(){function b(b,d,c,a,f,g,h,k,l){var e=this;void 0===l&&(l=PickerPurpose.Upload);this.url=b;this.name=d;this.size=c;this.mimeType=a;this.id=f;this.jq=
g;this.authorizationHandler=h;this.googleDriveProxy=k;this.purpose=l;this.updateFileResultUsingGetCallToMetadataService=function(){e.fileMetadataObtainedDfd=$.Deferred();var a={url:e.getMetadataServiceUrl(),type:"GET",data:"",headers:e.authorizationHandler.getAuthorizationHeader(),success:e.onMetadataGetCallSuccess,error:e.onMetadataGetCallError};e.jq.ajax(a);return e.fileMetadataObtainedDfd.promise()};this.onMetadataGetCallError=function(){e.fileMetadataObtainedDfd.reject()};this.onMetadataGetCallSuccess=
function(a){var c=-1<GapiDocType.googleApps.indexOf(a.mimeType);e.permissions=a.permissions;e.capabilities=a.capabilities;e.url=e.purpose===PickerPurpose.LinkToCloud?e.getFileViewUrl(c,a):e.getFileDownloadUrl(a);e.mimeType=a.mimeType;e.purpose===PickerPurpose.Upload&&c?e.updateFileSizeUsingHeadCallToMetadataService():e.fileMetadataObtainedDfd.resolve()};this.updateFileSizeUsingHeadCallToMetadataService=function(){var a={url:e.getMetadataServiceUrl(),type:"HEAD",data:"",dataType:"text",success:e.onMetadataHeadCallSuccess,
error:e.onMetadataHeadCallError};e.jq.ajax(a)};this.onMetadataHeadCallSuccess=function(a,c,b){e.size=parseInt(b.getResponseHeader("Content-Length"));e.fileMetadataObtainedDfd.resolve()};this.onMetadataHeadCallError=function(a,c,b){500===a.status&&(e.size=0);e.fileMetadataObtainedDfd.resolve()};this.getMetadataServiceUrl=function(){return 0===e.mimeType.indexOf("application/vnd.google-apps.")?e.googleDriveProxy+encodeURIComponent(e.url):e.url};contract.require(!objectState.isNullOrWhitespace(k),"'googleDriveProxy' is null or whitespace")}
b.prototype.getFileViewUrl=function(b,d){return b?d.alternateLink:d.embedLink};b.prototype.getFileDownloadUrl=function(b){if(b.downloadUrl)return this.authorizationHandler.appendOAuthTokenToUrl(b.downloadUrl).value;if(b.exportLinks&&b.exportLinks[Object.keys(b.exportLinks)[0]]){var d=GapiDocType.getDocumentType(b.exportLinks);b=this.authorizationHandler.appendOAuthTokenToUrl(b.exportLinks[d]);this.updateExtensionBasedOnExportFormatParam(b);return b.value}};b.prototype.updateExtensionBasedOnExportFormatParam=
function(b){if(b=b.getParamValue("exportFormat"))this.name+="."+b};return b}(),GapiDownloadUrl=function(){function b(){this.url="https://www.googleapis.com/drive/v2/files/{fileId}?supportsTeamDrives=true&fields=mimeType,downloadUrl,exportLinks,alternateLink,embedLink,permissions,capabilities"}b.prototype.getDownloadUrl=function(b){contract.require(!objectState.isNullOrWhitespace(b),"'fileId' is null or whitespace");return this.url.replace("{fileId}",b)};return b}(),GapiActions=function(){function b(e,
d,c,a,f,g){var h=this;void 0===g&&(g=PickerPurpose.Upload);this.pickerApi=e;this.authorizationHandler=d;this.proxy=c;this.getCurrentCallbacks=a;this.downloadUrl=f;this.purpose=g;this.onPickerAction=function(a){h.callbacks=h.getCurrentCallbacks();switch(a.action){case h.pickerApi.Action.PICKED:h.handleFilePickedAction(a);break;case h.pickerApi.Action.CANCEL:if(h.callbacks.onFileSelectionCanceled)h.callbacks.onFileSelectionCanceled()}};this.handleFilePickedAction=function(a){if(h.callbacks.onFileProcessing)h.callbacks.onFileProcessing();
a=a[h.pickerApi.Response.DOCUMENTS].map(function(a){return new GapiFileResult(h.downloadUrl.getDownloadUrl(a[h.pickerApi.Document.ID]),a[h.pickerApi.Document.NAME],a.sizeBytes,a.mimeType,a[h.pickerApi.Document.ID],$,h.authorizationHandler,h.proxy,h.purpose)});a.length>b.maximumNumberOfConcurrentRequestsToGoogleApi?h.processFilesSequentially(a):h.processFilesInParallel(a)};this.processFilesSequentially=function(a){a.reduce(function(a,c){return a.pipe(c.updateFileResultUsingGetCallToMetadataService)},
$.Deferred().resolve().promise()).done(function(){h.raiseFileSelectedCallbackWithPickerResult(a)}).fail(h.raiseFailureCallback)};this.raiseFailureCallback=function(){if(h.callbacks.onFileSelectionFailed)h.callbacks.onFileSelectionFailed()};this.processFilesInParallel=function(a){var c=[];a.forEach(function(a){a=a.updateFileResultUsingGetCallToMetadataService();c.push(a)});$.when.apply($,c).done(function(){h.raiseFileSelectedCallbackWithPickerResult(a)}).fail(h.raiseFailureCallback)};this.raiseFileSelectedCallbackWithPickerResult=
function(a){a=a.map(h.mapGapiFileToPickerFile);a=new PickerResult(a);h.callbacks.onFileSelected(a)};this.mapGapiFileToPickerFile=function(a){var c=new FileInGoogleDriveHandle({url:a.url,id:a.id,permissions:a.permissions,capabilities:a.capabilities});return new PickerFileResult(c,a.name,a.size,SourceType.Google,null,a.mimeType)}}b.maximumNumberOfConcurrentRequestsToGoogleApi=7;return b}(),GapiAuthorizationHandler=function(){return function(b){var e=this;this.authApi=b;this.getOAuthToken=function(){if(!e.authApi.currentUser.get().isSignedIn())throw Error("You need to Sign In before getting Google Drive's oAuth Token");
return e.authApi.currentUser.get().getAuthResponse().access_token};this.getAuthorizationHeader=function(){return{Authorization:"Bearer "+e.getOAuthToken()}};this.appendOAuthTokenToUrl=function(b){b=new Url(b);b.appendOrUpdateParam("access_token",e.getOAuthToken());return b};this.authorize=function(b,c){e.authApi.currentUser.get().isSignedIn()?b():e.authApi.signIn().then(function(){b()},function(){c()})}}}(),GapiInitializer=function(){return function(b){var e=this;this.settings=b;this.isAuthApiLoaded=
this.isPickerApiLoaded=!1;this.gapi=window.gapi;this.init=function(b,c){contract.require(!objectState.isNullOrUndefined(b),"'onInitSuccess' is not defined");contract.require(!objectState.isNullOrUndefined(c),"'onInitFailure' is not defined");e.onInitSuccess=b;e.onInitFailure=c;if(objectState.isNullOrUndefined(e.gapi)){if(safeConsoleLogger.error("Loading of Gapi failed. Most probably https://apis.google.com/js/api.js was blocked by firewall, proxy or adblock."),e.onInitFailure)e.onInitFailure()}else e.loadAuthApi(),
e.loadPickerApi()};this.loadAuthApi=function(){try{e.gapi.load("auth2",{callback:e.initAuthApi})}catch(d){if(safeConsoleLogger.error("Loading of Gapi Auth failed."),e.onInitFailure)e.onInitFailure()}};this.initAuthApi=function(){e.gapi.auth2.init({client_id:e.settings.clientId,scope:e.settings.scope}).then(function(){e.onAuthApiLoaded()},function(b){safeConsoleLogger.error(b);e.onInitFailure()})};this.loadPickerApi=function(){try{e.gapi.load("picker",{callback:e.onPickerApiLoaded})}catch(d){if(safeConsoleLogger.error("Loading of Gapi Picker failed."),
e.onInitFailure)e.onInitFailure()}};this.onAuthApiLoaded=function(){e.isAuthApiLoaded=!0;e.attempToRaiseSuccess()};this.onPickerApiLoaded=function(){e.isPickerApiLoaded=!0;e.attempToRaiseSuccess()};this.attempToRaiseSuccess=function(){if(e.isPickerApiLoaded&&e.isAuthApiLoaded)e.onInitSuccess(e.gapi.auth2.getAuthInstance(),google.picker)}}}(),GoogleSettings=function(){return function(b,e,d,c,a,f,g){this.clientId=b;this.scope=e;this.developerKey=d;this.allowMultipleFiles=c;this.originUrl=a;this.proxy=
f;this.language=g}}(),GapiPickerUiFactory=function(){return function(b,e,d,c,a){var f=this;this.onPickerAction=b;this.authHandler=e;this.developerKey=d;this.originUrl=c;this.language=a;this.build=function(){f.builder=new google.picker.PickerBuilder;f.triggerBuild().setVisible(!0)};this.triggerBuild=function(){f.builder.setOAuthToken(f.authHandler.getOAuthToken()).setDeveloperKey(f.developerKey).setCallback(f.onPickerAction).setLocale(f.language);f.prepareViews();f.setOriginUrlIfProvided();f.setApplicationIdIfProvided();
f.handleMultipleFilesMode();f.enableTeamDrives();return f.builder.build()};this.prepareViews=function(){var a=null;f.displayOnlyGoogleApps?a=GapiDocType.googleApps:f.areAllowedMimeTypesProvided()&&(a=f.allowedMimeTypes);f.builder.addView(f.prepareMainView(a));f.builder.addView(f.prepareTeamDriveView(a));f.builder.addView(f.prepareSharedView(a))};this.prepareMainView=function(a){void 0===a&&(a=null);a=f.prepareView(a);a.setParent("root");return a};this.prepareTeamDriveView=function(a){void 0===a&&
(a=null);a=f.prepareView(a);a.setEnableTeamDrives(!0);return a};this.prepareSharedView=function(a){void 0===a&&(a=null);a=f.prepareView(a);a.setOwnedByMe(!1);return a};this.prepareView=function(a){void 0===a&&(a=null);var c=new google.picker.DocsView(google.picker.ViewId.DOCS);c.setIncludeFolders(!0);a&&c.setMimeTypes(""+a.join(","));return c};this.areAllowedMimeTypesProvided=function(){return Array.isArray(f.allowedMimeTypes)&&0<f.allowedMimeTypes.length};this.handleMultipleFilesMode=function(){f.isMultipleFilesModeEnabled?
f.builder.enableFeature(google.picker.Feature.MULTISELECT_ENABLED):f.builder.disableFeature(google.picker.Feature.MULTISELECT_ENABLED)};this.enableTeamDrives=function(){f.builder.enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES)};this.setOriginUrlIfProvided=function(){objectState.isNullOrUndefined(f.originUrl)||f.builder.setOrigin(f.originUrl)};this.setApplicationIdIfProvided=function(){objectState.isNullOrUndefined(f.applicationId)||f.builder.setAppId(f.applicationId)}}}(),GooglePicker=function(){function b(b,
d,c,a){var e=this;this.settings=b;this.gapiInitializer=d;this.browserSniffer=c;this.translations=a;this.pickerReadyDfd=$.Deferred();this.subscribe=function(a){e.pickerReadyDfd.done(a.onPickerInitSuccess);e.pickerReadyDfd.fail(a.onPickerInitFailure);e.callbacks=a};this.open=function(){e.authHandler.authorize(e.displayWindowWithFiles,e.terminateAuthorization)};this.enableMultipleFilesSelecting=function(){e.settings.allowMultipleFiles&&(e.uiFactory.isMultipleFilesModeEnabled=!0)};this.disableMultipleFilesSelecting=
function(){e.uiFactory.isMultipleFilesModeEnabled=!1};this.getCurrentCallbacks=function(){return new GapiCallback(e.onFileSelected,e.callbacks.onFileSelectionCanceled)};this.onFileSelected=function(a){a=a.files.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.getFileHandle().url,a.name,a.size,a.sourceType)});a=new PickerResult(a);e.callbacks.onFileSelected(a)};this.onGapiInitSuccess=function(a,c){e.enabled=!0;e.authHandler=new GapiAuthorizationHandler(a);a=new GapiDownloadUrl;
c=new GapiActions(c,e.authHandler,e.settings.proxy,e.getCurrentCallbacks,a);e.uiFactory=new GapiPickerUiFactory(c.onPickerAction,e.authHandler,e.settings.developerKey,e.settings.originUrl,e.settings.language);e.pickerReadyDfd.resolve()};this.onGapiInitFailure=function(){e.enabled=!1;e.pickerReadyDfd.reject(new PickerInitFailureEventArgs(PickerInitFailureReason.ExternalServiceNotAvailable,e.translations.googleApiNotAvailable,UploadControlTranslation.googleDrive))};this.displayWindowWithFiles=function(){e.uiFactory.build()};
this.terminateAuthorization=function(){throw Error("Authorization failed");};contract.require(!objectState.isNullOrUndefined(b),"'settings' are not defined");contract.require(!objectState.isNullOrUndefined(d),"'gapiInitializer' is not defined");contract.require(!objectState.isNullOrUndefined(c),"'browserSniffer' is not defined");contract.require(!objectState.isNullOrUndefined(a),"'translations' are not defined");this.visible=!0;this.enabled=!1;this.multipleFilesSelectingEnabled=b.allowMultipleFiles;
c.isInternetExplorer9()?this.pickerReadyDfd.reject(new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,a.browserNotSupported,UploadControlTranslation.googleDrive)):this.initialize()}b.prototype.initialize=function(){this.gapiInitializer.init(this.onGapiInitSuccess,this.onGapiInitFailure)};return b}();
function AjaxUploaderCallbacks(b){var e=FunctionFinder();return{controlInitialized:e.getFunctionByName(b?b.OnControlInitialization:void 0),fileSelected:e.getFunctionByName(b?b.OnFileSelected:void 0),beforeFileUpload:e.getFunctionByName(b?b.OnBeforeFileUpload:void 0),fileUploadSuccess:e.getFunctionByName(b?b.OnFileUploadSuccess:void 0),fileUploadError:e.getFunctionByName(b?b.OnFileUploadError:void 0),beforeFileRemoved:e.getFunctionByName(b?b.OnBeforeFileRemoved:void 0),fileRemoveSuccess:e.getFunctionByName(b?
b.OnFileRemoveSuccess:void 0),fileRemoveError:e.getFunctionByName(b?b.OnFileRemoveError:void 0),fileRemoved:e.getFunctionByName(b?b.OnFileRemoved:void 0),beforeFileUploadAborted:e.getFunctionByName(b?b.OnBeforeFileUploadAborted:void 0),fileUploadAborted:e.getFunctionByName(b?b.OnFileUploadAborted:void 0),fileUploadProgress:e.getFunctionByName(b?b.OnFileUploadProgress:void 0)}}
function AjaxUploaderControl(b,e,d,c,a,f,g,h){contract.require(!objectState.isNullOrUndefined(b),"argument 'controls' is not defined");contract.require(!objectState.isNullOrUndefined(b.fileInput),"controls.fileInput is not defined");contract.require(!objectState.isNullOrUndefined(b.fileList),"controls.fileList is not defined");contract.require(!objectState.isNullOrUndefined(b.dropZone),"controls.dropZone is not defined");contract.require(!objectState.isNullOrUndefined(b.folderInput),"controls.folderInput is not defined");
contract.require(!objectState.isNullOrUndefined(b.folderInputLink),"controls.folderInputLink is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'validationService' is not defined");contract.require(objectState.isFunction(d.validateFile),"'validationService' has invalid interface");contract.require(!objectState.isNullOrUndefined(c),"argument 'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(a),
"argument 'fileUploadService' is not defined");contract.require(objectState.isFunction(a.subscribe),"'fileUploadService' has invalid interface");contract.require(!objectState.isNullOrUndefined(f),"argument 'folderManifestFactory' is not defined");contract.require(!objectState.isNullOrUndefined(g),"argument 'literals' is not defined");if(void 0===h||null===h)h={};var k={currentFileId:null,disableDeletePostbackThreshold:.99,fileUploader:null,initialize:function(a){k.initializeElementsToSupportSingleOrMultipleFiles();
k.initializeDropZone();void 0!==h.controlInitialized&&h.controlInitialized(a);k.initializeFileUploader()},initializeElementsToSupportSingleOrMultipleFiles:function(){k.changeFileInputToAcceptSingleFile();k.changeDropZoneToAcceptSingleFile();e.allowMultipleFiles&&k.initializeFolderInput()},initializeDropZone:function(){e.allowDragAndDrop?k.enableDropZone():k.disableDropZone()},initializeFolderInput:function(){e.allowFoldersUpload?(k.initializeFolderUploadElements(),k.enableFolderInput()):k.disableFolderInput()},
enableFolderInput:function(){browserSniffer.isDirectoryUploadSupported()&&(b.folderInputLink.removeClass("h-hidden"),b.folderInput.show(),b.folderInputLink.show())},disableFolderInput:function(){b.folderInput.hide();b.folderInputLink.hide()},changeFileInputToAcceptSingleFile:function(){b.fileInput.removeAttr("multiple")},changeFileInputToAcceptMultipleFiles:function(){b.fileInput.attr("multiple",!0)},enableDropZone:function(){browserSniffer.isDragAndDropSupported()&&(b.dropZone.removeClass("h-hidden"),
b.dropZone.show())},disableDropZone:function(){b.dropZone.hide()},changeDropZoneToAcceptMultipleFiles:function(){$(b.fileInput.selector).unbind("fileuploaddrop",k.takeOnlyFirstFileFunction)},changeDropZoneToAcceptSingleFile:function(){$(b.fileInput.selector).bind("fileuploaddrop",k.takeOnlyFirstFileFunction)},isMultipleFileSelect:function(a){return a.originalFiles&&1<a.originalFiles.length},isSingleFileInFolder:function(a){return a.originalFiles&&1===a.originalFiles.length&&""!==auCommon.getRelativePath(a.originalFiles[0],
"")?!0:!1},getArrayFromEventFileList:function(a){var c=[],b;for(b=0;b<a.length;b+=1)c.push(a[b]);return c},handleFolderSelect:function(a){var c=k.getArrayFromEventFileList(a.target.files);k.fileUploader.upload(c);a.target.value=null},initializeFolderUploadElements:function(){b.folderInputLink.click(function(){b.folderInput.click()});b.folderInput.on("change",k.handleFolderSelect)},initializeFileUploader:function(){k.fileUploader=a.subscribe({fileInput:b.fileInput,dropZone:b.dropZone},{onDone:k.onDone,
onFail:k.onFail,onProcessAlways:k.onProcessAlways,onProgress:k.onProgress,onAdd:k.onAdd,onSend:k.onSend,onFileUploadAborted:k.onUploadAborted})},getFolderName:function(a){var c,b=null;for(c=0;c<a.length;c+=1){var d=auCommon.getRelativePath(a[c],"");var e=d.indexOf("/");if(-1===e)return null;d=d.substring(0,e);if(null===b)b=d;else if(b!==d)return null}return b},getFileNameForMultipleFiles:function(a){a=k.getFolderName(a);return null!==a?a:g.files},getTotalSize:function(a){var c=0;$.each(a,function(a,
b){c+=b.size||0});return c},getFileInfo:function(a,c){a=c?{name:k.getFileNameForMultipleFiles(a),size:k.getTotalSize(a)}:a[0];a.fileId=guidFactory.newGuid();return a},handleForbiddenFolderUpload:function(a,c){d.validateIsFile(a.files[0],k.handleIsAFileValidationResult.bind(k,a.files,0,c.fileId,{total:a.files.length,checked:0,stop:!1}))},handleIsAFileValidationResult:function(a,b,e,f,g){f.checked+=1;a[b].checkedForBeingAFolder=!0;g.isValid?f.stop||(f.checked===f.total?k.fileUploader.upload(a):(b+=
1,d.validateIsFile(a[b],k.handleIsAFileValidationResult.bind(k,a,b,e,f)))):(f.stop=!0,c.setFileStatusToError(e,g.errorMessage,k.removeFromList),c.enableAction(e))},hasToBeCheckedForBeingAFolder:function(a){return d.mightBeAFolder(a)&&!a.checkedForBeingAFolder},hasToHandlePossibleForbiddenFolderUpload:function(a){var c;if(browserSniffer.isDirectoryUploadSupported())return!1;if(a.files&&a.files.length)for(c=0;c<a.files.length;c+=1){var b=a.files[c];if(k.hasToBeCheckedForBeingAFolder(b))return!0}return!1},
getProgressFromCallback:function(a,b){h.fileUploadProgress(a,{disableFileAction:function(){c.disableAction(b)},setProgressTo:function(c){a=c}});return a},onDone:function(a,b){k.enableUploadButtonsAndDropzone();var d=b.fileId;c.updateFileProgress(d,1);c.setFileStatusToSuccess(d,k.requestFileDelete);void 0!==h.fileUploadSuccess&&h.fileUploadSuccess(a,b)},onFail:function(a,b){k.enableUploadButtonsAndDropzone();b=b.fileId;c.setFileStatusToError(b,a,k.removeFromList);c.enableAction(b);void 0!==h.fileUploadError&&
h.fileUploadError(a)},onProcessAlways:function(a,b){k.isMultipleFileSelect(b)||(a=b.files[b.index],a.preview&&c.updateFilePreview(b.fileId,a.preview))},onProgress:function(a,b){a=b.fileId;b=b.loaded/b.total;var d=objectState.isFunction(h.fileUploadProgress)?k.getProgressFromCallback(b,a):b;c.updateFileProgress(a,d);e.disableDeletePostBackAfterUpload&&b>=k.disableDeletePostbackThreshold&&c.disableAction(a)},onAdd:function(a,b,g){var l=k.isMultipleFileSelect(b)||k.isSingleFileInFolder(b),m=null!=k.currentFileId;
if(void 0!==h.fileSelected&&(m=h.fileSelected(a,b,m),null!=m&&!0===m.cancel))return m;m=k.getFileInfo(b.files,l);k.currentFileId=m.fileId;c.addFile(m,function(){k.onBeforeAbortUpload();b.abort()});if(k.hasToHandlePossibleForbiddenFolderUpload(b))return k.handleForbiddenFolderUpload(b,m),{cancel:!0};var n=d.validateFile(m);if(!n.isValid)return k.onFail(n.errorMessage,m),{cancel:!0};b.formData=l&&e.includeFolderManifest?{manifest:f.createJSON(b.files)}:{};b.fileId=m.fileId;k.disableUploadButtonsAndDropzone();
c.setFileStatusToInProgress(m.fileId);void 0!==h.beforeFileUpload&&h.beforeFileUpload(a,b,g);window.focus();return{success:!0}},onSend:function(a,b,d){d||(a=b.fileId,c.setDefaultFileProgress(a),e.disableDeletePostBackAfterUpload&&!b.allowAbortInUploadWithoutProgress&&c.disableAction(a))},onBeforeFileRemoved:function(a,c){void 0!==h.beforeFileRemoved&&h.beforeFileRemoved(a,c)},onFileRemoveError:function(a,c,b){void 0!==h.fileRemoveError&&h.fileRemoveError(a,c,b)},onFileRemoveSuccess:function(a,b,d){void 0!==
h.fileRemoveSuccess&&h.fileRemoveSuccess(a,b,d);c.removeFiles();void 0!==h.fileRemoved&&h.fileRemoved()},removeFromList:function(a){k.currentFileId=null;c.removeFile(a);h.fileRemoved&&h.fileRemoved()},requestFileDelete:function(c){a.requestFileDelete(c,{beforeRemoved:k.onBeforeFileRemoved,removeError:k.onFileRemoveError,removeSuccess:k.onFileRemoveSuccess})},onBeforeAbortUpload:function(){void 0!==h.beforeFileUploadAborted&&h.beforeFileUploadAborted()},onUploadAborted:function(a,b){void 0!==h.fileUploadAborted&&
h.fileUploadAborted(a,b);c.removeFiles();k.currentFileId=null;k.enableUploadButtonsAndDropzone()},returnFalseFunction:function(){return!1},takeOnlyFirstFileFunction:function(a,c){c.files=c.files.splice(0,1)},disableUploadButtonsAndDropzone:function(){b.folderInput.prop("disabled",!0);$(b.fileInput.selector).prop("disabled",!0);$(b.fileInput.selector).bind("fileuploaddrop",k.returnFalseFunction)},enableUploadButtonsAndDropzone:function(){b.folderInput.prop("disabled",!1);$(b.fileInput.selector).prop("disabled",
!1);$(b.fileInput.selector).unbind("fileuploaddrop",k.returnFalseFunction)}},l={subscribe:function(a){h=a},setCurrentFileStatusToError:function(a){var b=k.currentFileId;c.setFileStatusToError(b,a,k.removeFromList);c.enableAction(b)},enableMultipleFilesMode:function(){e.allowFoldersUpload&&k.enableFolderInput();e.allowMultipleFiles&&(k.changeFileInputToAcceptMultipleFiles(),k.changeDropZoneToAcceptMultipleFiles())},enableSingleFileMode:function(){k.disableFolderInput();k.changeFileInputToAcceptSingleFile();
k.changeDropZoneToAcceptSingleFile()},disableUploadsUntilFileIsRemoved:function(a){k.disableUploadButtonsAndDropzone();c.setActionCallback(k.currentFileId,function(c){k.removeFromList(c);k.enableUploadButtonsAndDropzone();a()})},setFileRemovedCallback:function(a){c.setActionCallback(k.currentFileId,function(c){k.removeFromList(c);"function"===typeof a&&a()})},displayFileInFileList:function(a,b){k.currentFileId=guidFactory.newGuid();c.addFile({name:a,size:b,fileId:k.currentFileId});c.setFileStatusToSuccess(k.currentFileId);
e.readOnlyMode&&c.hideAction(k.currentFileId)}};k.initialize(l);return l}var UploaderFileItemFactory=function(){return function(b){var e=this;this.literals=b;this.create=function(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'fileData' is not defined");return new UploaderFileItem(b,e.literals)};contract.require(!objectState.isNullOrUndefined(b),"argument 'literals' is not defined")}}();
function AjaxUploaderFolderManifestFactory(){var b={escapeRegExpSpecialCharacters:function(b){return b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},makeForwardAndBackSlashesTreatedAsEqual:function(b){return b.replace(/\\\\|\//g,"[\\/]")},markStringAsEndingInput:function(b){return b+"$"},getFileNameRemovalRegExpString:function(d){d=b.escapeRegExpSpecialCharacters(d);d=b.makeForwardAndBackSlashesTreatedAsEqual(d);return b.markStringAsEndingInput(d)},getFileNameRemovalRegExp:function(d){d=b.getFileNameRemovalRegExpString(d);
return new RegExp(d,"i")},removeFileNameFromPath:function(d,c){c=b.getFileNameRemovalRegExp(c);return d.replace(c,"")},trimFolderPath:function(b){b=b.replace(/[\\/]$/,"");return b=b.replace(/^[\\/]/,"")},getFolderForFile:function(d){var c=auCommon.getRelativePath(d,"");d=c.length<d.name.length?c:b.removeFileNameFromPath(c,d.name);return b.trimFolderPath(d)},convertSingleFileToArrayIfNeeded:function(b){Array.isArray(b)||(b=[b]);return b},getArrayOfFolders:function(d){var c=[],a=d.length,e;for(e=0;e<
a;e+=1)objectState.isFileError(d[e])||c.push(b.getFolderForFile(d[e]));return c}},e={create:function(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'files' is not defined");d=b.convertSingleFileToArrayIfNeeded(d);return{folders:b.getArrayOfFolders(d)}},createJSON:function(b){b=e.create(b);return JSON.stringify(b)}};return e}
function AjaxUploaderValidationService(b,e){contract.require(!objectState.isNullOrUndefined(b),"argument 'settings' is not defined");contract.require(0<=b.maxFileSize,"MaxFileSize cannot be less than zero");contract.require(0<=b.minFileSize,"MinFileSize cannot be less than zero");contract.require(!objectState.isNullOrUndefined(e),"argument 'translations' is not defined");var d={getSuccessResult:function(){return{isValid:!0}},getErrorResult:function(a){return{isValid:!1,errorMessage:a}},tryReadFile:function(a,
c){var b=new FileReader,f=!1;b.onprogress=function(a){f||(f=!0,b.abort(),c(d.getSuccessResult()))};b.onerror=function(a){f||(f=!0,c(d.getErrorResult(e.cantHandleFolderDragAndDrop)))};b.readAsArrayBuffer(a)},validateFileSize:function(a){return a<b.minFileSize?d.getErrorResult(e.fileTooSmall):a>b.maxFileSize?d.getErrorResult(e.fileTooBig):d.getSuccessResult()},validateFileExtension:function(a){return b.forbiddenFileExtensions.test(a)?d.getSuccessResult():d.getErrorResult(e.fileExtensionNotAllowed)},
validateFileNameAgainstIllegalCharacters:function(a){var c=[];if(d.areIllegalCharactersDefined())for(var g=b.illegalCharacters.length,h=0;h<g;h++)b.illegalCharacters[h]&&-1<a.indexOf(b.illegalCharacters[h])&&c.push(b.illegalCharacters[h]);return 0<c.length?(a=c.filter(function(a,b){return c.indexOf(a)==b}),d.getErrorResult(e.invalidCharactersXInFileName.replace("{0}",a.join(" ")))):d.getSuccessResult()},areIllegalCharactersDefined:function(){return null!=b.illegalCharacters&&0<b.illegalCharacters.length},
validateFileNameAgainstIllegalFileNames:function(a){var c=[];if(d.areIllegalFileNamesDefined()){a=a.split(".")[0];for(var g=b.illegalFileNames.length,h=0;h<g;h++)b.illegalFileNames[h]&&a.toUpperCase()===b.illegalFileNames[h].toUpperCase()&&c.push(b.illegalFileNames[h])}return 0<c.length?(a=c.filter(function(a,b){return c.indexOf(a)==b}),d.getErrorResult(e.invalidFirstPartOfFileName.replace("{0}",a.join(" ")))):d.getSuccessResult()},areIllegalFileNamesDefined:function(){return null!=b.illegalFileNames&&
0<b.illegalFileNames.length},checkIsFileError:function(a){return objectState.isFileError(a)?d.getErrorResult(e.unableToOpenFile):d.getSuccessResult()}},c={maxFileSize:b.maxFileSize,minFileSize:b.minFileSize,validateFile:function(a){contract.require(!objectState.isNullOrUndefined(a),"argument 'file' is not defined");var c=d.checkIsFileError(a);if(!1===c.isValid)return c;c=d.validateFileNameAgainstIllegalCharacters(a.name);if(!1===c.isValid)return c;c=d.validateFileNameAgainstIllegalFileNames(a.name);
if(!1===c.isValid)return c;c=d.validateFileExtension(a.name);if(!1===c.isValid)return c;c=d.validateFileSize(a.size);return!1===c.isValid?c:d.getSuccessResult()},mightBeAFolder:function(a){return""===a.type},validateIsFile:function(a,b){c.mightBeAFolder(a)&&FileReader?d.tryReadFile(a,b):b(d.getSuccessResult())}};return c}
function AjaxUploaderFileUploader(b){var e={fileInputSelector:b.selector,getFileInput:function(){return $(e.fileInputSelector)},uploadFiles:function(b){e.getFileInput().fileupload("add",{files:b})}};return{upload:function(b){b=Array.isArray(b)?b:[b];e.uploadFiles(b)}}}
function AjaxUploaderFileService(b,e,d){contract.require(!objectState.isNullOrUndefined(b),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(b.uploadUrl),"parameter 'uploadUrl' of argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(b.uploadType),"parameter 'uploadType' of argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'optionsFactory' is not defined");var c={uploadUrl:b.uploadUrl,
uploadType:b.uploadType,dataType:"json",previewMaxWidth:50,previewMaxHeight:50,loadImageMaxFileSize:25E6,errorMessageTranslator:d,isFileUploadAborted:function(a){return"abort"===a.errorThrown},isIframeTransportUsed:function(a){return a.dataType&&"iframe"===a.dataType.substr(0,6)},isUploadProgressSupported:function(a){return!c.isIframeTransportUsed(a)},isDoneReallyAFail:function(a){return!c.isIframeTransportUsed(a)||"undefined"!==typeof a.result&&null==a.result.Error?!1:!0},disableFileUpload:function(a){a.isEnabled=
!1},enableFileUpload:function(a){a.isEnabled=!0},hasDataToSend:function(a){return 0<a.files.length},getErrorMesageFromXhr:function(a){if(a.responseText)try{var c=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(c.errorMessage))return c.errorMessage}catch(g){}return a.statusText},checkSubscribeFunctionPreconditions:function(a,c){contract.require(!objectState.isNullOrUndefined(a),"argument 'uploaderControls' is not defined");contract.require(!objectState.isNullOrUndefined(a.fileInput),
"parameter 'fileInput' of argument 'uploaderControls' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(c.onFail),"parameter 'onFail' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(c.onDone),"parameter 'onDone' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(c.onFileUploadAborted),"parameter 'onFileUploadAborted' of argument 'uploaderCallbacks' is not defined");
contract.require(!objectState.isNullOrUndefined(c.onProcessAlways),"parameter 'onProcessAlways' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(c.onProgress),"parameter 'onProgress' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(c.onSend),"parameter 'onSend' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(c.onAdd),"parameter 'onAdd' of argument 'uploaderCallbacks' is not defined")},
getErrorMessageFromResponse:function(a){var b=null;c.errorMessageTranslator&&(b=c.errorMessageTranslator.getErrorMessageFromResponse(a));null==b&&a.xhr&&(b=c.getErrorMesageFromXhr(a.xhr()));return b},getErrorMessageFromIframeUploadResponse:function(a){var b=null;a.result&&c.errorMessageTranslator&&(b=c.errorMessageTranslator.getErrorMessageFromErrorCode(a.result.Error));null==b&&(b=void 0);return b}};return{subscribe:function(a,b){c.checkSubscribeFunctionPreconditions(a,b);var d={url:c.uploadUrl},
f={isEnabled:!0};a.fileInput.fileupload({url:d.url,type:c.uploadType,dataType:c.dataType,dropZone:a.dropZone||void 0,previewMaxWidth:c.previewMaxWidth,previewMaxHeight:c.previewMaxHeight,loadImageMaxFileSize:c.loadImageMaxFileSize,singleFileUploads:!1,done:function(a,d){if(c.isDoneReallyAFail(d))d.textStatus="error",a=c.getErrorMessageFromIframeUploadResponse(d),b.onFail(a,d);else b.onDone(a,d);c.enableFileUpload(f)},fail:function(a,d){if(c.isFileUploadAborted(d))b.onFileUploadAborted(a,d);else a=
c.getErrorMessageFromResponse(d),b.onFail(a,d);c.enableFileUpload(f)},processalways:b.onProcessAlways,progress:b.onProgress,send:function(a,d){b.onSend(a,d,c.isUploadProgressSupported(d))}});a.fileInput.bind("fileuploadadd",function(a,g){if(!f.isEnabled)return!1;var h=$(this);if(!c.hasDataToSend(g))return!1;c.disableFileUpload(f);var k=e.create(d);if(!0===b.onAdd(a,g,k).cancel)return c.enableFileUpload(f),!1;h.fileupload("option",k.getProcessedOptions())});return AjaxUploaderFileUploader(a.fileInput)},
requestFileDelete:function(a,b){a={url:URI(c.uploadUrl).addSearch("fileId",a).normalizeSearch().toString(),dataType:"json",type:"DELETE",beforeSend:b.beforeRemoved,error:b.removeError,success:b.removeSuccess};$.ajax(a)}}}
function AjaxUploaderControlInitialization(b,e,d,c,a){var f=UploaderSenderOptionsFactory(),g=AjaxUploaderFolderManifestFactory(),h=new UploaderFileItemFactory(e),k=AjaxUploaderValidationService(b,e);h=new UploaderFileList(d.fileList,h,e);a=AjaxUploaderFileService(b,f,a);return AjaxUploaderControl(d,b,k,h,a,g,e,c)}
function AjaxUploaderControls(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'controls' is not defined");var e={getJQuerySafeId:function(b){return"#"+b.replace(/(:|\.|\[|\])/g,"\\$1")},jQElementExists:function(b){return 0<b.length},getJQElement:function(b,c){b=e.getJQuerySafeId(b);b=$(b);if(e.jQElementExists(b))return b;if(void 0!==c)throw c;},initializeBrowseButtonFocusStyles:function(b){b.focusin(function(){b.toggleClass("ccl-button-color-green-highlight")}).focusout(function(){b.toggleClass("ccl-button-color-green-highlight")})},
initialize:function(b){b=b.fileInput.parent();e.initializeBrowseButtonFocusStyles(b)}};b={fileInput:e.getJQElement(b.FileInput,"FileInput not found"),fileList:e.getJQElement(b.FileList,"FileList not found"),dropZone:e.getJQElement(b.DropZone,"DropZone not found"),folderInput:e.getJQElement(b.FolderInput,"FolderInput not found"),folderInputLink:e.getJQElement(b.FolderInputLink,"FolderInputLink not found")};e.initialize(b);return b}
function AjaxUploaderLiterals(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'translations' is not defined");var e={fileExtensionNotAllowed:b.FileExtensionNotAllowed,fileTooBig:b.FileTooBig,fileTooSmall:b.FileTooSmall,kb:b.Kb,mb:b.Mb,error:b.Error,maxFileSizeForUpload:b.MaxFileSizeForUpload,dropYourFilesHere:b.DropYourFilesHere,browse:b.Browse,remove:b.Remove,unknown:b.Unknown,cantHandleFolderDragAndDrop:b.CantHandleFolderUpload,invalidCharactersXInFileName:b.InvalidCharactersXInFileName,
unableToOpenFile:b.UnableToOpenFile,files:b.Files,invalidFirstPartOfFileName:b.InvalidFirstPartOfFileName,getFormattedFileSize:function(b){return"number"!==typeof b?"":1048576<=b?(b/1048576).toFixed(2)+" "+e.mb:(b/1024).toFixed(2)+" "+e.kb}};return e}
function AjaxUploaderSettings(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'settings' is not defined");var e={getRegExp:function(b){if(b instanceof RegExp)return b;b=b.split("/");var c=b.pop();b.shift();return new RegExp(b.join("/"),c)},getBoolean:function(b){return/^true$/i.test(b)},getArray:function(b){return"undefined"===typeof b||null==b?null:JSON.parse(b)}};return{uploadUrl:b.UploadUrl,uploadType:b.UploadType,maxFileSize:parseInt(b.MaxFileSize),minFileSize:parseInt(b.MinFileSize||
0),forbiddenFileExtensions:e.getRegExp(b.ForbiddenFileExtensions),allowFoldersUpload:e.getBoolean(b.AllowFoldersUpload),allowMultipleFiles:e.getBoolean(b.AllowMultipleFiles),allowDragAndDrop:e.getBoolean(b.AllowDragAndDrop),includeFolderManifest:e.getBoolean(b.IncludeFolderManifest),disableDeletePostBackAfterUpload:e.getBoolean(b.DisableDeletePostBackAfterUpload),illegalFileNames:e.getArray(b.IllegalFileNames),illegalCharacters:e.getArray(b.IllegalCharacters),readOnlyMode:e.getBoolean(b.ReadOnlyMode)}}
var FileListLiterals=function(){function b(b){this.kb=b.KbTranslation;this.mb=b.MbTranslation;this.error=b.ErrorTranslation;this.remove=b.RemoveTranslation;this.unknown=b.UnknownTranslation}b.prototype.getFormattedFileSize=function(b){return"number"!==typeof b?"":1048576<=b?(b/1048576).toFixed(2)+" "+this.mb:(b/1024).toFixed(2)+" "+this.kb};return b}(),FilesInCloudController=function(){return function(b,e,d){var c=this;this.pickers=b;this.fileValidator=e;this.showTemplateOptionsInFilelist=d;this.subscribe=
function(a){c.callbacks=a};this.subscribeToPickers=function(){c.pickers.forEach(function(a){c.initPickerCallback(a)})};this.initPickerCallback=function(a){var b=function(){};b=new PickerCallback(b,b,function(a){return c.fileSelected(a)},b);a.subscribe(b)};this.fileSelected=function(a){if(a.purpose!==PickerPurpose.Upload){a=c.getFilesWithFileItems(a);var b=a.map(function(a){return a.fileItem});c.callbacks.onFilesSelected(b);for(b=0;b<a.length;b++){var d=a[b];c.processFile(d.result,d.fileItem)}}};this.getFilesWithFileItems=
function(a){return a.files.map(function(b){return{result:b,fileItem:c.prepareFileItem(b,a.getOAuthContext())}})};this.prepareFileItem=function(a,b){var d=CCL.FileList.Model.FileItem.buildItemForFileInCloud(FileInCloudMetadata.create(a,b));d.onRemoveCallback=function(){c.callbacks.onFileRemoved(d.Metadata)};d.onSetTemplateCallback=function(){c.callbacks.onFileSetTemplate(d.Metadata)};d.showTemplateOptionsInFilelist(c.showTemplateOptionsInFilelist);return d};this.processFile=function(a,b){a=c.fileValidator.validateFile(a);
a.isValid()?(a=b.Metadata,a instanceof FileInCloudMetadata&&a.sourceType===SourceType.Google&&b.showTemplateOptionsForItem(c.showTemplateOptionsInFilelist),b.markAsUploaded(),c.callbacks.onActionSuccess(b.Metadata),b.markAsCompleted()):(a=a.getData(),b.setError(a),c.callbacks.onActionError(b.Metadata,a))};this.subscribeToPickers()}}(),UploadAreaState=function(){return function(){var b=this;this.isVisible=ko.observable(!1);this.show=function(){b.isVisible(!0)};this.hide=function(){b.isVisible(!1)}}}(),
UploadControl=function(){function b(b,d,c,a,f,g,h,k,l,m,n,q){var e=this;this.uploadAreaContainerId=b;this.controllers=d;this.callbacks=c;this.uploadArea=a;this.fileList=f;this.statusCalculator=g;this.metadataManager=h;this.allowToSelectMultipleFiles=k;this.showOnlyUploadDialog=l;this.uploadPopupUrlForMobile=m;this.showTemplateOptionsInFilelist=n;this.mimeTypesToTemplateFromUpload=q;this.fileSelectedMessageName="fileSelected";this.fileSuccessMessageName="fileSuccess";this.fileErrorMessageName="fileError";
this.closeWindowMessageName="closeWindow";this.subscribeToControllers=function(){e.controllers.forEach(e.subscribeToController)};this.subscribeToController=function(a){a.subscribe({onInitializationFailure:function(){},onFilesSelected:e.signalFilesSelection,onActionSuccess:e.signalSuccess,onActionError:e.signalError,onActionAborted:e.signalAbort,onFileRemoved:e.signalFileRemoval,onFileRenamed:e.signalFileRenamed,onFileSetTemplate:e.signalFileIsTemplate})};this.handleStateChange=function(){var a=e.fileList.getFiles();
e.metadataManager.replaceFileItems(a);e.handleUploadAreaVisibility();e.callbacks.onStatusChanged&&(a=e.statusCalculator.calculate(a),e.callbacks.onStatusChanged(a))};this.handleUploadAreaVisibility=function(){e.allowToSelectMultipleFiles||0===e.fileList.getFiles().length?e.uploadArea.show():e.uploadArea.hide()};this.signalFilesSelection=function(a){e.showOnlyUploadDialog&&Components.UploadControlUtils.sendMessageToTopFrameWithData(window.opener,e.fileSelectedMessageName,a);for(var c=0;c<a.length;c++)e.fileList.addFile(a[c]);
e.handleStateChange();e.callbacks.onFilesSelected&&(a=a.map(function(a){return a.Metadata}),e.callbacks.onFilesSelected(a))};this.signalSuccess=function(a){e.showOnlyUploadDialog&&Components.UploadControlUtils.sendMessageToTopFrameWithData(window.opener,e.fileSuccessMessageName,a);e.handleStateChange();if(e.callbacks.onActionSuccess)e.callbacks.onActionSuccess(a)};this.signalError=function(a,c){e.showOnlyUploadDialog&&Components.UploadControlUtils.sendMessageToTopFrameWithData(window.opener,e.fileErrorMessageName,
c);e.handleStateChange();if(e.callbacks.onActionError)e.callbacks.onActionError(a,c)};this.signalAbort=function(a){e.handleStateChange();if(e.callbacks.onActionAborted)e.callbacks.onActionAborted(a)};this.signalFileRemoval=function(a){e.handleStateChange();if(e.callbacks.onFileRemoved)e.callbacks.onFileRemoved(a)};this.signalFileRenamed=function(a){e.handleStateChange();if(e.callbacks.onFileRenamed)e.callbacks.onFileRenamed(a)};this.signalFileIsTemplate=function(a){e.handleStateChange();if(e.callbacks.onFileSetTemplate)e.callbacks.onFileSetTemplate(a)};
this.showFileItemsFromHiddenMetadataField=function(){for(var a=0,c=e.metadataManager.getFileItems();a<c.length;a++)e.showFileItem(c[a]);e.handleStateChange()};this.showFileItem=function(a){a.markAsUploaded();e.fileList.addFile(a);a.onRemoveCallback=function(){e.signalFileRemoval(a.Metadata);e.handleStateChange()};a.onRenameCallback=function(){e.signalFileRenamed(a.Metadata);e.handleStateChange()};a.onSetTemplateCallback=function(){e.signalFileIsTemplate(a.Metadata);e.handleStateChange()};a.markAsCompleted()};
this.parseMessageData=function(a){return a&&a.data?"string"===typeof a.data?CCL.CommonFunctions.safeParseJson(a.data):a.data:null};contract.require(!objectState.isNullOrUndefined(this.controllers),"'controllers' is not defined");contract.require(!objectState.isNullOrUndefined(this.callbacks),"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.uploadArea),"'uploadArea' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),"'fileList' is not defined");
contract.require(!objectState.isNullOrUndefined(this.statusCalculator),"'statusManager' is not defined");contract.require(!objectState.isNullOrUndefined(this.metadataManager),"'metadataManager' is not defined");this.subscribeToControllers();this.showFileItemsFromHiddenMetadataField();this.handleUploadAreaVisibility();this.uploadPopupUrlForMobile&&this.addPostMessagesListeners();this.showOnlyUploadDialog&&this.addUploadDialogPostMessagesListeners()}Object.defineProperty(b.prototype,"uploadedItems",
{get:function(){return this.metadataManager.metadataArrays},enumerable:!0,configurable:!0});b.prototype.dispose=function(){for(var b in Components.ComponentName)Components.ComponentName.hasOwnProperty(b)&&ko.components.unregister(Components.ComponentName[b]);this.fileList.dispose();(b=window.document.getElementById(this.uploadAreaContainerId))&&ko.cleanNode(b)};b.prototype.clearFileListAndLastRequest=function(){if(this.fileList){var b=this.fileList.getLastAddedFile();b&&b.getState()===CCL.FileList.Model.FileItemState.InProgress&&
(b.abortUpload(),this.signalAbort(b.Metadata),this.fileList.removeFile(b));this.fileList.clearFileList()}};b.prototype.removeFilesWithErrors=function(){var b=this;this.fileList.getFiles().forEach(function(d){d.errorMessage()&&b.fileList.removeFile(d)})};b.prototype.addPostMessagesListeners=function(){var b=this;window.addEventListener("message",function(d){(d=b.parseMessageData(d))&&d.messageName===b.fileSelectedMessageName&&d.data&&(d=d.data.map(function(c){if(c.Metadata.isSupportedByCasper)return c=
FileInCloudMetadata.castMetadataObjectToFileInCloudMetadata(c.Metadata),CCL.FileList.Model.FileItem.buildItemForFileInCloud(c);c=UploadMetadata.castMetadataObjectToUploadMetadata(c.Metadata);return CCL.FileList.Model.FileItem.buildItemForUpload(c.name,c)}),b.signalFilesSelection(d))});window.addEventListener("message",function(d){var c=b.parseMessageData(d);if(c&&c.messageName===b.fileSuccessMessageName&&c.data){var a=b.fileList.getLastAddedFile(),e=void 0;c.data.isSupportedByCasper?(e=FileInCloudMetadata.castMetadataObjectToFileInCloudMetadata(c.data),
a.onRemoveCallback=function(){b.signalFileRemoval(a.Metadata)},a.onSetTemplateCallback=function(){b.signalFileIsTemplate(a.Metadata)},e.sourceType===SourceType.Google&&a.showTemplateOptionsForItem(b.showTemplateOptionsInFilelist)):(e=UploadMetadata.castMetadataObjectToUploadMetadata(c.data),a.onRemoveCallback=function(){b.signalFileRemoval(a.Metadata)},a.onRenameCallback=function(){b.signalFileRenamed(a.Metadata)},a.isRemoveAllowed(!0),a.mimeType(e.mimeType),b.updateShowTemplateOption(a));a.markAsUploaded();
a.Metadata=e;b.signalSuccess(e);a.markAsCompleted();Components.UploadControlUtils.sendMessageToTopFrame(d.source,b.closeWindowMessageName)}});window.addEventListener("message",function(d){var c=b.parseMessageData(d);if(c&&c.messageName===b.fileErrorMessageName&&c.data){var a=b.fileList.getLastAddedFile();a.setError(c.data);a.onRemoveCallback=function(){b.signalFileRemoval(a.Metadata)};a.isRemoveAllowed(!0);Components.UploadControlUtils.sendMessageToTopFrame(d.source,b.closeWindowMessageName)}})};
b.prototype.addUploadDialogPostMessagesListeners=function(){var b=this;window.addEventListener("message",function(d){(d=b.parseMessageData(d))&&d.messageName===b.closeWindowMessageName&&window.close()})};b.prototype.updateShowTemplateOption=function(b){this.mimeTypesToTemplateFromUpload.some(function(d){return d===b.mimeType()})&&(b.showTemplateOptionsInFilelist(this.showTemplateOptionsInFilelist),b.showTemplateOptionsForItem(this.showTemplateOptionsInFilelist))};return b}(),UploadControlCallbacksFinder=
function(){function b(b,d){this.callbackNames=b;this.functionFinder=d;contract.require(!objectState.isNullOrUndefined(this.functionFinder),"'functionFinder' is not defined")}b.prototype.getCallbacks=function(){return{onFilesSelected:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onFilesSelected:void 0),onActionSuccess:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onActionSuccess:void 0),onActionError:this.functionFinder.getFunctionByName(this.callbackNames?
this.callbackNames.onActionError:void 0),onActionAborted:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onActionAborted:void 0),onFileRemoved:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onFileRemoved:void 0),onFileRenamed:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onFileRenamed:void 0),onFileSetTemplate:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onFileSetTemplate:void 0),
onStatusChanged:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onStatusChanged:void 0)}};return b}(),UploadControlPickerAdapter=function(){function b(b){this.picker=b}b.prototype.show=function(){};b.prototype.hide=function(){};b.prototype.enable=function(){};b.prototype.disable=function(){};b.prototype.open=function(){this.picker.open()};b.prototype.subscribe=function(b){this.picker.subscribe(b)};b.prototype.enableMultipleFilesSelecting=function(){this.picker.enableMultipleFilesSelecting()};
b.prototype.disableMultipleFilesSelecting=function(){this.picker.disableMultipleFilesSelecting()};return b}();
function GoogleDriveUploaderApiInitializer(b,e,d){contract.require(!objectState.isNullOrUndefined(e),"argument 'onReadyCallback' is not defined");var c={pickerApiLoaded:!1,authApiLoaded:!1,oAuthToken:null,retried:!1,onInitializationError:function(a){d&&d(a)},loadAuthApi:function(){b.load("auth",{callback:c.onAuthApiLoaded})},loadPickerApi:function(){b.load("picker",{callback:c.onPickerApiLoaded})},onAuthApiLoaded:function(){c.authApiLoaded=!0;c.ifReadyCallOnReady()},onPickerApiLoaded:function(){c.pickerApiLoaded=
!0;c.ifReadyCallOnReady()},ifReadyCallOnReady:function(){c.pickerApiLoaded&&c.authApiLoaded&&e&&e(b.auth)},initialize:function(){objectState.isNullOrUndefined(b)?(safeConsoleLogger.error("Loading of Google Picker API failed. Most probably https://apis.google.com/js/api.js was block by firewall, proxy or adds blocking software."),c.onInitializationError("gapi is not available")):(c.loadAuthApi(),c.loadPickerApi())}};c.initialize();return{}}
function GoogleDriveUploaderCallbacks(b){var e=FunctionFinder();return{controlInitialized:e.getFunctionByName(b?b.OnControlInitialization:void 0),pickerOpened:e.getFunctionByName(b?b.OnPickerOpened:void 0),fileSelected:e.getFunctionByName(b?b.OnFileSelected:void 0),fileSelectionCanceled:e.getFunctionByName(b?b.OnFileSelectionCanceled:void 0),fileUploadSuccess:e.getFunctionByName(b?b.OnFileUploadSuccess:void 0),fileUploadError:e.getFunctionByName(b?b.OnFileUploadError:void 0),controlInitializationError:e.getFunctionByName(b?
b.OnControlInitializationError:void 0),fileUploadAborted:e.getFunctionByName(b?b.OnFileUploadAborted:void 0)}}function DelayRequest(b){var e={callbacks:[],current:0,signalled:0,running:!1,runCallbacks:function(c){if(!e.running){for(e.running=!0;e.current<e.signalled&&e.current<e.callbacks.length;)e.callbacks[e.current](c),e.current+=1;e.running=!1}}},d={data:b,wait:function(c){e.callbacks.push(c);e.runCallbacks(this);return d},signal:function(){e.signalled+=1;e.runCallbacks(this)}};return d}
function GoogleDriveUploaderControl(b,e,d,c,a,f){contract.require(!objectState.isNullOrUndefined(b),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'controls' is not defined");contract.require(!objectState.isNullOrUndefined(e.googleDriveLink),"controls.googleDriveLink is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'literals' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'pickerNamespace' is not defined");
contract.require(!objectState.isNullOrUndefined(a),"argument 'authApi' is not defined");f=f||{};var g={baseDownloadUrl:"https://www.googleapis.com/drive/v2/files/{fileId}?key={developerKey}",pickerBase:null,currentFileId:null,retryAuthorization:!1,oAuthToken:null,disablePickerButton:!1,disableDeletePostbackThreshold:.99,googleDriveSourceType:2,hasCurrentFileUploadEnded:!1,getAuthHeader:function(){return{Authorization:"Bearer "+g.oAuthToken}},initializeBaseDownloadUrl:function(){g.baseDownloadUrl=
g.baseDownloadUrl.replace("{developerKey}",b.developerKey)},setOriginUrlIfNeeded:function(a){objectState.isNullOrUndefined(b.originUrl)||a.setOrigin(b.originUrl)},prepareView:function(a){a=new c.DocsView(a);a.setIncludeFolders(!0);a.setParent("root");return a},preparePickerBase:function(){var a=new c.PickerBuilder;a.addViewGroup((new c.ViewGroup(g.prepareView(c.ViewId.DOCS))).addView(g.prepareView(c.ViewId.DOCS_IMAGES)).addView(g.prepareView(c.ViewId.DOCS_VIDEOS)).addView(g.prepareView(c.ViewId.DOCUMENTS)).addView(g.prepareView(c.ViewId.DRAWINGS)).addView(g.prepareView(c.ViewId.FOLDERS)).addView(g.prepareView(c.ViewId.PDFS)).addView(g.prepareView(c.ViewId.PHOTOS)).addView(g.prepareView(c.ViewId.PRESENTATIONS)).addView(g.prepareView(c.ViewId.SPREADSHEETS))).setOAuthToken(g.oAuthToken).setDeveloperKey(b.developerKey).setLocale(b.language).setCallback(g.googleDrivePickerCallback);
g.setOriginUrlIfNeeded(a);return a},createPicker:function(a){b.allowMultipleFiles&&h.isMultipleFilesModeEnabled?a.enableFeature(c.Feature.MULTISELECT_ENABLED):a.disableFeature(c.Feature.MULTISELECT_ENABLED);return a.build()},tryAuthorize:function(c,d){a.authorize({client_id:b.clientId,scope:b.scope,immediate:c},function(a){g.onAuthResult(a,d)})},onAuthResult:function(a,c){var b=!1;if(a&&!a.error)g.oAuthToken=a.access_token,b=!0;else{var d=a&&a.error||"some auth error";a=a.error_subtype||"";g.retryAuthorization||
"origin_mismatch"===a?(safeConsoleLogger.error("Authorization of Google Picker API failed. Most probably Platform's subdomain wasn't registered at https://console.developers.google.com."),g.onControlInitializationError(d)):(safeConsoleLogger.warn("Authorization of Google Picker API failed. This might apparently happen when browser uses pop-up blocker. Authorization will be retried on upload button click."),b=g.retryAuthorization=!0)}b&&c&&c()},handleButtonClick:function(){g.disablePickerButton||(g.retryAuthorization?
g.tryAuthorize(!1,g.showPicker):g.showPicker())},showPicker:function(){var a=g.preparePickerBase();g.createPicker(a).setVisible(!0);f.pickerOpened&&f.pickerOpened(h)},bindPickerToLinkClick:function(){e.googleDriveLink.click(g.handleButtonClick)},initialize:function(a){g.tryAuthorize(!0,function(){g.bindPickerToLinkClick();g.initializeBaseDownloadUrl();f.controlInitialized&&f.controlInitialized(a)})},googleDrivePickerCallback:function(a){switch(a.action){case c.Action.PICKED:g.onFileSelected(a);break;
case c.Action.CANCEL:g.onFileSelectionCanceled(a)}},getFileDownloadUrl:function(a){return g.baseDownloadUrl.replace("{fileId}",a[c.Document.ID])},getFileInfo:function(a){var c={fileId:null,size:null,name:null};c.fileId=guidFactory.newGuid();1===a.length?(c.size=a[0].size,c.name=a[0].name):(c.size=a.reduce(function(a,c){return a+c.size},0),c.name=d.files);return c},getParameterValue:function(a,c){for(var b=[],d=a.slice(a.indexOf("?")+1).split("&"),e=0;e<d.length;e++)a=d[e].split("="),b.push(a[0]),
b[a[0]]=a[1];return b[c]},signalIfDoneProcessing:function(a){a.processed+=1;a.processed>=a.total&&a.delayed.signal()},getMetadataUrl:function(a){return a.isSpreadSheet?b.googleDriveProxy+encodeURIComponent(a.url):a.url},getFileSize:function(a){var c=0;a=$.ajax({url:g.getMetadataUrl(a),type:"HEAD",data:"",async:!1});200==a.status&&(c=parseInt(a.getResponseHeader("Content-Length")));return c},checkFileSize:function(a){0==a.size&&(a.size=this.getFileSize(a))},getDownloadUrl:function(a,c){$.ajax({url:g.getMetadataUrl(a),
type:"GET",data:"",headers:g.getAuthHeader(),async:!1,success:function(b){if(b.downloadUrl)a.url=b.downloadUrl+"&access_token="+g.oAuthToken;else if(b.exportLinks&&b.exportLinks[Object.keys(b.exportLinks)[0]]){var d=b.exportLinks["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":b.exportLinks["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":
b.exportLinks["image/png"]?"image/png":b.exportLinks["application/vnd.openxmlformats-officedocument.presentationml.presentation"]?"application/vnd.openxmlformats-officedocument.presentationml.presentation":b.exportLinks["application/pdf"]?"application/pdf":Object.keys(b.exportLinks)[0];a.url=b.exportLinks[d]+"&access_token="+g.oAuthToken;if(d=g.getParameterValue(a.url,"exportFormat"))a.name+="."+d}a.thumbnailUrl=b.thumbnailLink;g.checkFileSize(a);g.signalIfDoneProcessing(c)},error:function(){g.signalIfDoneProcessing(c)}})},
onFileSelected:function(a){g.disablePickerButton||(g.disablePickerButton=!0,g.getFileMetadataFromGoogleDriveResponse(a).wait(g.getDownloadUrlForFiles).wait(g.executeFileSelectedCallback))},getFileMetadataFromGoogleDriveResponse:function(a){a=DelayRequest({request:g.prepareFileMetadata(a)});a.signal();return a},prepareFileMetadata:function(a){var b={sourceType:g.googleDriveSourceType,files:null};b.files=a[c.Response.DOCUMENTS].map(function(a){return{url:g.getFileDownloadUrl(a),name:a[c.Document.NAME],
size:a.sizeBytes,isSpreadSheet:"application/vnd.google-apps.spreadsheet"===a.mimeType,fileId:a[c.Document.ID],type:a[c.Document.MIME_TYPE],icon:a[c.Document.ICON_URL]}});g.hasCurrentFileUploadEnded=!1;return b},executeFileSelectedCallback:function(a){a=a.data.request.files;void 0!==f.fileSelected&&f.fileSelected(a)},getDownloadUrlForFiles:function(a){var c=a.data.request.files,b={total:c.length,processed:0,delayed:a};c.forEach(function(a){g.getDownloadUrl(a,b)})},onControlInitializationError:function(a){f.controlInitializationError&&
f.controlInitializationError(a)},onFileSelectionCanceled:function(a){f.fileSelectionCanceled&&f.fileSelectionCanceled()},setUploaderButtonDisplay:function(a){a?e.googleDriveLink.show():e.googleDriveLink.hide()}},h={isMultipleFilesModeEnabled:!0,hideUploaderButton:function(){g.setUploaderButtonDisplay(!1)},showUploaderButton:function(){g.setUploaderButtonDisplay(!0)},enableMultipleFilesMode:function(){h.isMultipleFilesModeEnabled=!0},disableMultipleFilesMode:function(){h.isMultipleFilesModeEnabled=
!1},enablePickerButton:function(){g.disablePickerButton=!1}};g.initialize(h);return h}
function GoogleDriveUploaderSettings(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'settings' is not defined");var e={getRegExp:function(b){if(b instanceof RegExp)return b;b=b.split("/");var c=b.pop();b.shift();return new RegExp(b.join("/"),c)},getBoolean:function(b){return/^true$/i.test(b)}};return{maxFileSize:parseInt(b.MaxFileSize),minFileSize:parseInt(b.MinFileSize||0),developerKey:b.DeveloperKey,clientId:b.ClientId,scope:b.Scope,immediate:e.getBoolean(b.Immediate),allowMultipleFiles:e.getBoolean(b.AllowMultipleFiles),
uploadUrl:b.UploadUrl,googleDriveProxy:b.GoogleDriveProxy,disableDeletePostBackAfterUpload:e.getBoolean(b.DisableDeletePostBackAfterUpload),readOnlyMode:e.getBoolean(b.ReadOnlyMode),uploadStateServiceEndpoint:b.UploadStateServiceEndpoint,originUrl:b.OriginUrl,pickerProxyMode:e.getBoolean(b.PickerProxyMode),language:b.Language}}
function GoogleDriveUploaderControlInitialization(b,e,d,c){var a={onReadyCallback:function(a){GoogleDriveUploaderControl(b,d,e,google.picker,a,c)},initialize:function(){GoogleDriveUploaderApiInitializer(window.gapi,a.onReadyCallback,c.controlInitializationError)}};a.initialize()}
function GoogleDriveUploaderControls(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'controls' is not defined");var e={getJQuerySafeId:function(b){return"#"+b.replace(/(:|\.|\[|\])/g,"\\$1")},jQElementExists:function(b){return 0<b.length},getJQElement:function(b,c){b=e.getJQuerySafeId(b);b=$(b);if(e.jQElementExists(b))return b;if(void 0!==c)throw c;}};return{googleDriveLink:e.getJQElement(b.GoogleDriveLink,"GoogleDriveLink not found"),fileList:e.getJQElement(b.FileList,"FileList not found")}}
function GoogleDriveUploaderLiterals(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'translations' is not defined");var e={chooseFromGoogleDrive:b.ChooseFromGoogleDrive,kb:b.Kb,mb:b.Mb,unknown:b.Unknown,files:b.Files,getFormattedFileSize:function(b){return objectState.isNumber(b)?1048576<=b?(b/1048576).toFixed(2)+" "+e.mb:(b/1024).toFixed(2)+" "+e.kb:""}};return e}
(function(b){var e=function(){function d(c,a,d){var e=this;this.linkTitle=UploadControlTranslation.addFiles;this.showDialog=function(){e.uploadPopupUrlForMobile&&b.UploadControlUtils.isIos()?window.open(e.uploadPopupUrlForMobile,"_blank").focus():(b.UploadControlUtils.isMobile()&&(e.lastScroll=$(window).scrollTop(),b.UploadControlUtils.toggleTopFrameAndMobileOverlay(!1)),e.isDialogVisible(!0),b.UploadControlUtils.isMobile()||(e.isOnlyOnePickerChoice()?e.openFirstPicker():(e.dialogContainer=document.getElementById("ccl-uc-file-dialog-container"),
e.dialogContainer&&(e.isElementInViewport(e.dialogContainer)||e.moveContainerVertically(e.dialogContainer)),e.focusFirstPicker())))};this.onCloseDialogClick=function(){e.showOnlyUploadDialog&&window.opener?(window.opener.focus(),window.close()):e.hideDialog()};this.hideDialog=function(){b.UploadControlUtils.toggleTopFrameAndMobileOverlay(!0);e.isDialogVisible(e.showOnlyUploadDialog);b.UploadControlUtils.isMobile()&&($(window).scrollTop(e.lastScroll),$(".ccl-uc-dropzone-container").focus());!e.isOnlyOnePickerChoice()&&
e.dialogContainer&&(e.dialogContainer.style.top=null)};this.focusFirstPicker=function(){$("#ccl-uc-file-dialog-container button")[1].focus()};this.openFirstPicker=function(){$("#ccl-uc-file-dialog-container button")[1].click()};this.isOnlyOnePickerChoice=function(){return null!==e.pickers&&2===e.pickers.length};contract.require(!objectState.isNullOrUndefined(c),"This ViewModel requires uploadAreaState to be passed. Please provide it.");this.isDialogVisible=ko.observable(a.ShowOnlyUploadDialog);this.isUploadAreaVisible=
ko.pureComputed(function(){return c.isVisible()});this.enableCompactView=a.EnableCompactView;this.showOnlyUploadDialog=a.ShowOnlyUploadDialog;this.uploadPopupUrlForMobile=a.UploadPopupUrlForMobile;this.getUploadAreaCss=ko.pureComputed(function(){return a.EnableCompactView?"ccl-uc-upload-area-compact-view":""});this.uploadDialogCss=this.showOnlyUploadDialog?"ccl-uc-dialog-only":"";this.pickers=d}d.prototype.isElementInViewport=function(c){c=c.getBoundingClientRect();return 0<=c.top&&0<=c.left&&c.bottom<=
(window.innerHeight||document.documentElement.clientHeight)&&c.right<=(window.innerWidth||document.documentElement.clientWidth)};d.prototype.moveContainerVertically=function(c){var a=c.getBoundingClientRect();c.style.top=a.bottom>=(window.innerHeight||document.documentElement.clientHeight)?"-"+(a.bottom-document.documentElement.clientHeight)+"px":63-a.top+"px"};return d}();b.UploadAreaViewModel=e})(Components||(Components={}));var uploaderSenderOptionsConstants={fileRepoData:"fileRepoData"};
function FileRepoErrorResponseTranslator(b){contract.require(!objectState.isNullOrUndefined(b),"argument 'errorTranslations' is not defined");var e={getErrorMessageFromResponse:function(b){try{var c=b.xhr()}catch(a){return null}return e.getErrorMessageFromXhr(c)},getErrorMessageFromXhr:function(b){try{var c=JSON.parse(b.responseText).error}catch(a){return null}return e.getErrorMessageFromErrorCode(c)},getErrorMessageFromErrorCode:function(d){return d&&b[d]?b[d]:b[FileRepoError.toString(FileRepoError.UnknownError)]}};
return e}
var UploadControlFactory=function(){function b(b,d,c,a,f,g){this.uploadAreaContainerId=b;this.settings=d;this.callbackFinder=c;this.translations=a;this.metadataField=f;this.fileRepoData=g}b.prototype.build=function(){this.setStaticTranslations();var b=(new PickerObjectsFactory(this.settings,this.translations)).build(),d=b[0],c=b[1],a=b[2];b=b[3];var f=d.concat(c,a);this.initializeDialogComponent(b,f);b=new UploadAreaState;var g=new PickerFileResultValidatorLiterals(this.translations);this.literals=g;
var h=PickerFileResultValidatorFactory.createValidatorForRenameFile(this.settings.ValidationSettings,g);h=new CCL.FileList.NestedFileListControl(this.settings.FileListControlSettings,h);this.initializeUploadAreaComponent(b,f,h.htmlTagName,this.settings);ko.applyBindings(null,window.document.getElementById(this.uploadAreaContainerId));f=new UploadStatusCalculator;var k=new HiddenMetadataManager(this.metadataField,this.settings.FileListControlSettings),l=this.callbackFinder.getCallbacks(),m=new ActionQueue(this.settings.MaximumNumberOfConcurrentUploads),
n=PickerFileResultValidatorFactory.create(this.settings.ValidationSettings,g),q=this.getSender();d=new UploadController(d.map(function(a){return new UploadControlPickerAdapter(a)}),q,n,m,this.settings);a=this.getFolderController(a,n,m);g=PickerFileResultValidatorFactory.createValidatorForLinkedFilesInCloud(this.settings.ValidationSettings.MaxFileNameLength,this.settings.ValidationSettings.AllowedFileExtensions,this.settings.ValidationSettings.ForbiddenFileExtensions,this.settings.IsCasperEnabled,
g);c=new FilesInCloudController(c,g,this.settings.FileListControlSettings.ShowTemplateOptions);return new UploadControl(this.uploadAreaContainerId,[d,a,c],l,b,h,f,k,this.settings.AllowToSelectMultipleFiles,this.settings.ShowOnlyUploadDialog,this.settings.UploadPopupUrlForMobile,this.settings.FileListControlSettings.ShowTemplateOptions,this.settings.FileListControlSettings.MimeTypesToTemplateFromUpload)};b.prototype.setStaticTranslations=function(){UploadControlTranslation.fileFromComputer=this.translations.ComputerOrDevice;
UploadControlTranslation.folderFromComputer=this.translations.Folder;UploadControlTranslation.googleDrive=this.translations.GoogleDrive;UploadControlTranslation.dropbox=this.translations.Dropbox;UploadControlTranslation.oneDrive=this.translations.OneDrive;UploadControlTranslation.webDav=this.translations.WebDav;UploadControlTranslation.mediaRecorder=this.translations.MediaRecorderRecord;UploadControlTranslation.someFilesInThatFolderCannotBeUploaded=this.translations.SomeFilesInThatFolderCannotBeUploaded;
UploadControlTranslation.addFiles=this.translations.AddFiles;UploadControlTranslation.orSimplyDropThemHere=this.translations.OrSimplyDropThemHere;UploadControlTranslation.uploadFileFrom=this.settings.ForceSingleColumnPickerLayout?this.translations.ColumnAddFrom:this.translations.ColumnFileFrom;UploadControlTranslation.uploadFileFromMobile=this.settings.ForceSingleColumnPickerLayout?this.translations.ColumnAddFrom:this.translations.ColumnFileFromMobile;UploadControlTranslation.or=this.translations.Or;
UploadControlTranslation.cancel=this.translations.Cancel;UploadControlTranslation.close=this.translations.Close;UploadControlTranslation.linkTo=this.translations.ColumnLinkTo;UploadControlTranslation.linkToMobile=this.translations.ColumnLinkToMobile;UploadControlTranslation.cloudServiceUnavailable=this.translations.CloudServiceUnavailable;UploadControlTranslation.tryAgainOrContactAdministrator=this.translations.TryAgainOrContactAdministrator};b.prototype.initializeDialogComponent=function(b,d){b=
new Components.Dialog.DialogComponent(b,d,this.settings.ShowOnlyUploadDialog);ko.components.register(b.name,b)};b.prototype.initializeUploadAreaComponent=function(b,d,c,a){void 0===c&&(c=CCL.FileList.Components.NestedFileListComponent.defaultNestedFileListHtmlTag);b=new Components.UploadAreaComponent(b,d,c,a);ko.components.register(b.name,b)};b.prototype.getSender=function(){var b=new GenericUploader.Sender.FileRepoSenderForLocalFiles.Factory(browserSniffer,this.getFileRepoErrorTranslator(),this.fileRepoData),
d=new GenericUploader.Sender.FileRepoSenderForExternalFiles.Factory(browserSniffer,this.getFileRepoErrorTranslator(),{uploadStateServiceEndpoint:this.settings.UploadStateServiceEndpoint,fileRepoData:this.fileRepoData});return new GenericUploader.Sender.FileRepoSender(b,d)};b.prototype.getFolderController=function(b,d,c){var a=this.getFolderSenderFactory(),e={maxFileNameLength:this.settings.ValidationSettings.MaxFileNameLength},g={fileNameIsTooLong:this.translations.FileNameIsTooLong};e=(new FolderValidatorFactory).createFileValidatorWithLocalizedMessages(e,
g);d=new FolderBuilder(d,e);return new FolderController(b.map(function(a){return new UploadControlPickerAdapter(a)}),a,d,c)};b.prototype.getFolderSenderFactory=function(){var b=new GenericUploader.Sender.FileRepoSenderForLocalFiles.Factory(browserSniffer,this.getFileRepoErrorTranslator(),this.fileRepoData);return new GenericUploader.Sender.FileRepoSenderForLocalFolders.Factory(b)};b.prototype.getFileRepoErrorTranslator=function(){var b={};b[FileRepoError.toString(FileRepoError.UnknownError)]=this.translations.UnknownError;
b[FileRepoError.toString(FileRepoError.DownloadFromWebDavForbidden)]=this.translations.DownloadFromWebDavForbidden;b[FileRepoError.toString(FileRepoError.FileSizeTooLarge)]=this.literals.getExcededSizeLimitTranslation(this.settings.ValidationSettings.MaxFileSize);return FileRepoErrorResponseTranslator(b)};return b}();
